================================================================================
 TAXPILOT - AUDIT CODE SOURCE - PARTIE 1/3 - Configuration, Services, Store, Utils, Types, Theme
 Date: 2026-02-13
================================================================================

================================================================================
FILE: index.html
================================================================================
     1	<!doctype html>
     2	<html lang="fr">
     3	  <head>
     4	    <meta charset="UTF-8" />
     5	    <link rel="icon" type="image/svg+xml" href="/fiscasync-icon.svg" />
     6	    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     7	    <meta name="description" content="TaxPilot - Application de G√©n√©ration et √âdition de Liasse Fiscale SYSCOHADA/IFRS" />
     8	    <title>TaxPilot - Solution Fiscale OHADA</title>
     9	    
    10	    <!-- Preconnect to optimize font loading -->
    11	    <link rel="preconnect" href="https://fonts.googleapis.com">
    12	    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    13	    
    14	    <!-- Exo 2 + Grand Hotel + JetBrains Mono fonts -->
    15	    <link
    16	      rel="stylesheet"
    17	      href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700;800&family=Grand+Hotel&family=JetBrains+Mono:wght@400;500;600&display=swap"
    18	    />
    19	    
    20	    <!-- Material Icons -->
    21	    <link
    22	      rel="stylesheet"
    23	      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    24	    />
    25	  </head>
    26	  <body>
    27	    <div id="root"></div>
    28	    <script type="module" src="/src/main.tsx"></script>
    29	  </body>
    30	</html>
================================================================================
FILE: package.json
================================================================================
     1	{
     2	  "name": "taxpilot-frontend",
     3	  "private": true,
     4	  "version": "1.0.0",
     5	  "type": "module",
     6	  "description": "Frontend React TypeScript pour TaxPilot - Application de G√©n√©ration et √âdition de Liasse Fiscale SYSCOHADA/IFRS",
     7	  "scripts": {
     8	    "dev": "vite",
     9	    "build": "vite build",
    10	    "build-with-types": "tsc && vite build",
    11	    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives",
    12	    "lint:strict": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    13	    "preview": "vite preview",
    14	    "test": "vitest",
    15	    "test:ui": "vitest --ui",
    16	    "type-check": "tsc --noEmit"
    17	  },
    18	  "dependencies": {
    19	    "@emotion/react": "^11.11.1",
    20	    "@emotion/styled": "^11.11.0",
    21	    "@mui/icons-material": "^5.14.19",
    22	    "@mui/lab": "^5.0.0-alpha.170",
    23	    "@mui/material": "^5.14.20",
    24	    "@mui/x-data-grid": "^6.18.2",
    25	    "@mui/x-data-grid-premium": "^6.18.2",
    26	    "@mui/x-date-pickers": "^6.18.2",
    27	    "@mui/x-tree-view": "^8.11.0",
    28	    "@reduxjs/toolkit": "^2.0.1",
    29	    "@tanstack/react-query": "^5.8.4",
    30	    "@tanstack/react-table": "^8.10.7",
    31	    "axios": "^1.6.2",
    32	    "date-fns": "^3.6.0",
    33	    "dayjs": "^1.11.10",
    34	    "lucide-react": "^0.544.0",
    35	    "react": "^18.2.0",
    36	    "react-dom": "^18.2.0",
    37	    "react-dropzone": "^14.2.3",
    38	    "react-hook-form": "^7.48.2",
    39	    "react-redux": "^9.0.4",
    40	    "react-router-dom": "^6.20.1",
    41	    "recharts": "^2.8.0",
    42	    "yup": "^1.3.3",
    43	    "zustand": "^4.4.7"
    44	  },
    45	  "devDependencies": {
    46	    "@hookform/resolvers": "^3.3.2",
    47	    "@testing-library/jest-dom": "^6.8.0",
    48	    "@testing-library/react": "^16.3.0",
    49	    "@testing-library/user-event": "^14.6.1",
    50	    "@types/react": "^18.2.37",
    51	    "@types/react-dom": "^18.2.15",
    52	    "@typescript-eslint/eslint-plugin": "^6.10.0",
    53	    "@typescript-eslint/parser": "^6.10.0",
    54	    "@vitejs/plugin-react": "^4.1.1",
    55	    "eslint": "^8.53.0",
    56	    "eslint-plugin-react-hooks": "^4.6.0",
    57	    "eslint-plugin-react-refresh": "^0.4.4",
    58	    "jsdom": "^26.1.0",
    59	    "typescript": "^5.2.2",
    60	    "vite": "^7.1.5",
    61	    "vitest": "^3.2.4"
    62	  }
    63	}

================================================================================
FILE: vite.config.ts
================================================================================
     1	import { defineConfig } from 'vite'
     2	import react from '@vitejs/plugin-react'
     3	import path from 'path'
     4	
     5	// https://vitejs.dev/config/
     6	export default defineConfig({
     7	  plugins: [react()],
     8	  resolve: {
     9	    alias: {
    10	      '@': path.resolve(__dirname, './src'),
    11	      '@/components': path.resolve(__dirname, './src/components'),
    12	      '@/hooks': path.resolve(__dirname, './src/hooks'),
    13	      '@/services': path.resolve(__dirname, './src/services'),
    14	      '@/types': path.resolve(__dirname, './src/types'),
    15	      '@/utils': path.resolve(__dirname, './src/utils'),
    16	      '@/pages': path.resolve(__dirname, './src/pages'),
    17	      '@/contexts': path.resolve(__dirname, './src/contexts'),
    18	      '@/store': path.resolve(__dirname, './src/store'),
    19	    },
    20	  },
    21	  server: {
    22	    port: 3006,
    23	    proxy: {
    24	      '/api': {
    25	        target: 'http://localhost:8000',
    26	        changeOrigin: true,
    27	        secure: false,
    28	        rewrite: (path) => path.replace(/^\/api/, '/api')
    29	      },
    30	    },
    31	    cors: true,
    32	  },
    33	  build: {
    34	    outDir: 'dist',
    35	    sourcemap: true,
    36	    chunkSizeWarningLimit: 1000,
    37	    rollupOptions: {
    38	      output: {
    39	        manualChunks: {
    40	          // Chunks par fonctionnalit√© m√©tier
    41	          'liasse-core': [
    42	            './src/pages/liasse/ModernLiasseComplete',
    43	            './src/pages/liasse/ModernLiasseProduction',
    44	            './src/pages/LiasseCompleteFinal',
    45	            './src/components/liasse/LiasseTableauGenerique',
    46	          ],
    47	          'liasse-sheets': [
    48	            './src/components/liasse/sheets/BilanActifSYSCOHADA',
    49	            './src/components/liasse/sheets/BilanPassifSYSCOHADA',
    50	            './src/components/liasse/BilanActif',
    51	            './src/components/liasse/CompteResultat',
    52	          ],
    53	          'balance-module': [
    54	            './src/pages/balance/ModernBalance',
    55	            './src/pages/import/ModernImportBalance',
    56	            './src/components/Balance/BalanceConsultation',
    57	            './src/components/Balance/BalanceImport',
    58	          ],
    59	          'audit-compliance': [
    60	            './src/pages/audit/ModernAudit',
    61	            './src/pages/compliance/ModernCompliance',
    62	            './src/pages/teledeclaration/ModernTeledeclaration',
    63	          ],
    64	          'advanced-modules': [
    65	            './src/pages/consolidation/ModernConsolidation',
    66	            './src/pages/templates/ModernTemplates',
    67	            './src/pages/reporting/ModernReporting',
    68	          ],
    69	          'syscohada-plan': [
    70	            './src/data/syscohada/plan/index',
    71	            './src/data/syscohada/plan/classe1',
    72	            './src/data/syscohada/plan/classe2',
    73	            './src/data/syscohada/plan/classe3',
    74	            './src/data/syscohada/plan/classe4',
    75	            './src/data/syscohada/plan/classe5',
    76	            './src/data/syscohada/plan/classe6',
    77	            './src/data/syscohada/plan/classe7',
    78	            './src/data/syscohada/plan/classe8',
    79	            './src/data/syscohada/plan/classe9',
    80	          ],
    81	          'syscohada-reference': [
    82	            './src/data/syscohada/types',
    83	            './src/services/syscohadaReferenceService',
    84	            './src/pages/plans/OperationsSpecifiques',
    85	          ],
    86	          // Vendors
    87	          'mui-vendor': [
    88	            '@mui/material',
    89	            '@mui/icons-material',
    90	            '@mui/lab',
    91	            '@mui/x-data-grid',
    92	          ],
    93	          'react-vendor': [
    94	            'react',
    95	            'react-dom',
    96	            'react-router-dom',
    97	          ],
    98	          'form-vendor': [
    99	            'react-hook-form',
   100	            '@hookform/resolvers',
   101	            'yup',
   102	          ],
   103	          'utils-vendor': [
   104	            'axios',
   105	            'zustand',
   106	            'dayjs',
   107	          ],
   108	        },
   109	      },
   110	    },
   111	  },
   112	})
================================================================================
FILE: tsconfig.json
================================================================================
     1	{
     2	  "compilerOptions": {
     3	    "target": "ES2020",
     4	    "useDefineForClassFields": true,
     5	    "lib": ["ES2020", "DOM", "DOM.Iterable"],
     6	    "module": "ESNext",
     7	    "skipLibCheck": true,
     8	    "noImplicitAny": true,
     9	
    10	    /* Bundler mode */
    11	    "moduleResolution": "bundler",
    12	    "allowImportingTsExtensions": true,
    13	    "resolveJsonModule": true,
    14	    "isolatedModules": true,
    15	    "noEmit": true,
    16	    "jsx": "react-jsx",
    17	
    18	    /* Linting - Strict mode activ√© pour production */
    19	    "strict": true,
    20	    "noUnusedLocals": true,
    21	    "noUnusedParameters": true,
    22	    "noFallthroughCasesInSwitch": true,
    23	
    24	    /* Options strictes suppl√©mentaires */
    25	    "strictNullChecks": true,
    26	    "strictFunctionTypes": true,
    27	    "strictBindCallApply": true,
    28	    "strictPropertyInitialization": true,
    29	    "noImplicitThis": true,
    30	    "alwaysStrict": true,
    31	
    32	    /* Path mapping */
    33	    "baseUrl": ".",
    34	    "paths": {
    35	      "@/*": ["src/*"],
    36	      "@/components/*": ["src/components/*"],
    37	      "@/hooks/*": ["src/hooks/*"],
    38	      "@/services/*": ["src/services/*"],
    39	      "@/types/*": ["src/types/*"],
    40	      "@/utils/*": ["src/utils/*"],
    41	      "@/pages/*": ["src/pages/*"],
    42	      "@/contexts/*": ["src/contexts/*"],
    43	      "@/store/*": ["src/store/*"]
    44	    }
    45	  },
    46	  "include": ["src"],
    47	  "references": [{ "path": "./tsconfig.node.json" }]
    48	}
================================================================================
FILE: tsconfig.node.json
================================================================================
     1	{
     2	  "compilerOptions": {
     3	    "composite": true,
     4	    "skipLibCheck": true,
     5	    "module": "ESNext",
     6	    "moduleResolution": "bundler",
     7	    "allowSyntheticDefaultImports": true
     8	  },
     9	  "include": ["vite.config.ts"]
    10	}
================================================================================
FILE: vitest.config.ts
================================================================================
     1	import { defineConfig } from 'vitest/config'
     2	import react from '@vitejs/plugin-react'
     3	import path from 'path'
     4	
     5	export default defineConfig({
     6	  plugins: [react()],
     7	  test: {
     8	    globals: true,
     9	    environment: 'jsdom',
    10	    setupFiles: './src/test/setup.ts',
    11	    css: true,
    12	  },
    13	  resolve: {
    14	    alias: {
    15	      '@': path.resolve(__dirname, './src'),
    16	      '@/components': path.resolve(__dirname, './src/components'),
    17	      '@/hooks': path.resolve(__dirname, './src/hooks'),
    18	      '@/services': path.resolve(__dirname, './src/services'),
    19	      '@/types': path.resolve(__dirname, './src/types'),
    20	      '@/utils': path.resolve(__dirname, './src/utils'),
    21	      '@/pages': path.resolve(__dirname, './src/pages'),
    22	      '@/contexts': path.resolve(__dirname, './src/contexts'),
    23	      '@/store': path.resolve(__dirname, './src/store'),
    24	    },
    25	  },
    26	})
 SOURCE CODE (src/**/*.ts, src/**/*.tsx)

================================================================================
FILE: src/App.tsx
================================================================================
     1	import React, { Suspense } from 'react'
     2	import { Routes, Route, Navigate } from 'react-router-dom'
     3	import { CircularProgress, Box } from '@mui/material'
     4	import ModernLayout from './components/shared/Layout'
     5	import ErrorBoundary from './components/ui/ErrorBoundary'
     6	import './styles/liasse-fixes.css'
     7	import './styles/sidebar-fix.css'
     8	import './styles/wcag-conformity.css'
     9	import './styles/liasse-text-fix.css'
    10	import './styles/sidebar-ultimate-fix.css'
    11	
    12	import { LiasseDataProvider } from './components/liasse/DataProvider'
    13	import { Proph3tFloatingBall } from './components/prophet'
    14	
    15	const PageLoader = () => (
    16	  <Box display="flex" justifyContent="center" alignItems="center" minHeight="400px">
    17	    <CircularProgress />
    18	  </Box>
    19	)
    20	
    21	// Pages
    22	const ModernDashboard = React.lazy(() => import('@/pages/dashboard/ModernDashboard'))
    23	const AppDashboard = React.lazy(() => import('@/pages/dashboard/AppDashboard'))
    24	const Parametrage = React.lazy(() => import('@/pages/Parametrage'))
    25	const ModernImportBalance = React.lazy(() => import('@/pages/import/ModernImportBalance'))
    26	const ModernBalance = React.lazy(() => import('@/pages/balance/ModernBalance'))
    27	const PlanSYSCOHADARevise = React.lazy(() => import('@/pages/plans/PlanSYSCOHADARevise'))
    28	const OperationsSpecifiques = React.lazy(() => import('@/pages/plans/OperationsSpecifiques'))
    29	const LiasseFiscaleOfficial = React.lazy(() => import('@/pages/liasse/LiasseFiscaleOfficial'))
    30	const ModernDocuments = React.lazy(() => import('@/pages/documents/ModernDocuments'))
    31	const ModernGeneration = React.lazy(() => import('@/pages/generation/ModernGeneration'))
    32	const ModernAudit = React.lazy(() => import('@/pages/audit/ModernAudit'))
    33	const ControlPointsManager = React.lazy(() => import('@/pages/audit/ControlPointsManager'))
    34	const LiasseControlInterface = React.lazy(() => import('@/pages/validation/LiasseControlInterface'))
    35	const ModernTeledeclaration = React.lazy(() => import('@/pages/teledeclaration/ModernTeledeclaration'))
    36	const ModernCompliance = React.lazy(() => import('@/pages/compliance/ModernCompliance'))
    37	const ModernFiscalCalendar = React.lazy(() => import('@/pages/calendar/ModernFiscalCalendar'))
    38	const ModernTemplates = React.lazy(() => import('@/pages/templates/ModernTemplates'))
    39	const ModernConsolidation = React.lazy(() => import('@/pages/consolidation/ModernConsolidation'))
    40	const ModernReporting = React.lazy(() => import('@/pages/reporting/ModernReporting'))
    41	const ModernVeilleReglementaire = React.lazy(() => import('@/pages/veille/ModernVeilleReglementaire'))
    42	const ModernCollaboration = React.lazy(() => import('@/pages/collaboration/ModernCollaboration'))
    43	const ModernIntegrations = React.lazy(() => import('@/pages/integrations/ModernIntegrations'))
    44	const ModernSecurity = React.lazy(() => import('@/pages/security/ModernSecurity'))
    45	const OrganizationWrapper = React.lazy(() => import('@/pages/organization/OrganizationWrapper'))
    46	const OrganizationMembersPage = React.lazy(() => import('@/pages/organization/OrganizationMembersPage'))
    47	const SubscriptionPage = React.lazy(() => import('@/pages/organization/SubscriptionPage'))
    48	const InvitationsPage = React.lazy(() => import('@/pages/organization/InvitationsPage'))
    49	
    50	import { useAuthStore } from './store/authStore'
    51	import OnboardingTour from './components/onboarding/OnboardingTour'
    52	import TestComponents from './components/shared/TestComponents'
    53	import ButtonTest from './components/debug/ButtonTest'
    54	
    55	/** Wrapper: page avec sidebar */
    56	const WithSidebar: React.FC<{ children: React.ReactNode }> = ({ children }) => (
    57	  <ModernLayout>
    58	    <OnboardingTour />
    59	    {children}
    60	  </ModernLayout>
    61	)
    62	
    63	/** Shortcut */
    64	const S: React.FC<{ children: React.ReactNode }> = ({ children }) => (
    65	  <WithSidebar>{children}</WithSidebar>
    66	)
    67	
    68	function App() {
    69	  const { checkAuth } = useAuthStore()
    70	
    71	  React.useEffect(() => {
    72	    checkAuth()
    73	  }, [checkAuth])
    74	
    75	  return (
    76	    <ErrorBoundary>
    77	      <Suspense fallback={<PageLoader />}>
    78	        <Routes>
    79	          {/* Landing page - SANS sidebar */}
    80	          <Route path="/" element={<ModernDashboard />} />
    81	
    82	          {/* Toutes les pages app - AVEC sidebar */}
    83	          <Route path="/dashboard" element={<S><AppDashboard /></S>} />
    84	          <Route path="/parametrage/*" element={<S><Parametrage /></S>} />
    85	          <Route path="/import-balance" element={<S><ModernImportBalance /></S>} />
    86	          <Route path="/balance" element={<S><ModernBalance /></S>} />
    87	          <Route path="/plans-comptables" element={<S><PlanSYSCOHADARevise /></S>} />
    88	          <Route path="/plan-syscohada" element={<S><PlanSYSCOHADARevise /></S>} />
    89	          <Route path="/operations-syscohada" element={<S><OperationsSpecifiques /></S>} />
    90	
    91	          <Route path="/liasse" element={<S><LiasseDataProvider><LiasseFiscaleOfficial /></LiasseDataProvider></S>} />
    92	          <Route path="/production-liasse" element={<S><LiasseDataProvider><LiasseFiscaleOfficial /></LiasseDataProvider></S>} />
    93	          <Route path="/liasse-complete" element={<S><LiasseDataProvider><LiasseFiscaleOfficial /></LiasseDataProvider></S>} />
    94	          <Route path="/direct-liasse" element={<S><LiasseDataProvider><LiasseFiscaleOfficial /></LiasseDataProvider></S>} />
    95	          <Route path="/documents" element={<S><ModernDocuments /></S>} />
    96	          <Route path="/generation" element={<S><ModernGeneration /></S>} />
    97	
    98	          <Route path="/audit" element={<S><ModernAudit /></S>} />
    99	          <Route path="/control-points" element={<S><ControlPointsManager /></S>} />
   100	          <Route path="/validation-liasse" element={<S><LiasseControlInterface /></S>} />
   101	          <Route path="/teledeclaration" element={<S><ModernTeledeclaration /></S>} />
   102	          <Route path="/compliance" element={<S><ModernCompliance /></S>} />
   103	          <Route path="/calendar" element={<S><ModernFiscalCalendar /></S>} />
   104	
   105	          <Route path="/templates" element={<S><ModernTemplates /></S>} />
   106	          <Route path="/consolidation" element={<S><ModernConsolidation /></S>} />
   107	          <Route path="/reporting" element={<S><ModernReporting /></S>} />
   108	          <Route path="/veille" element={<S><ModernVeilleReglementaire /></S>} />
   109	
   110	          <Route path="/collaboration" element={<S><ModernCollaboration /></S>} />
   111	          <Route path="/integrations" element={<S><ModernIntegrations /></S>} />
   112	          <Route path="/security" element={<S><ModernSecurity /></S>} />
   113	
   114	          <Route path="/organization/:slug/members" element={<S><OrganizationWrapper>{(slug) => <OrganizationMembersPage organizationSlug={slug} />}</OrganizationWrapper></S>} />
   115	          <Route path="/organization/:slug/subscription" element={<S><OrganizationWrapper>{(slug) => <SubscriptionPage organizationSlug={slug} />}</OrganizationWrapper></S>} />
   116	          <Route path="/organization/:slug/invitations" element={<S><OrganizationWrapper>{(slug) => <InvitationsPage organizationSlug={slug} />}</OrganizationWrapper></S>} />
   117	          <Route path="/settings/members" element={<S><OrganizationWrapper>{(slug) => <OrganizationMembersPage organizationSlug={slug} />}</OrganizationWrapper></S>} />
   118	          <Route path="/settings/subscription" element={<S><OrganizationWrapper>{(slug) => <SubscriptionPage organizationSlug={slug} />}</OrganizationWrapper></S>} />
   119	          <Route path="/settings/invitations" element={<S><OrganizationWrapper>{(slug) => <InvitationsPage organizationSlug={slug} />}</OrganizationWrapper></S>} />
   120	
   121	          <Route path="/test" element={<S><TestComponents /></S>} />
   122	          <Route path="/debug" element={<S><ButtonTest /></S>} />
   123	
   124	          <Route path="*" element={<Navigate to="/" replace />} />
   125	        </Routes>
   126	      </Suspense>
   127	      <Proph3tFloatingBall />
   128	    </ErrorBoundary>
   129	  )
   130	}
   131	
   132	export default App

================================================================================
FILE: src/config/globalBackendIntegration.ts
================================================================================
     1	/**
     2	 * INT√âGRATION BACKEND GLOBALE
     3	 * Ce fichier remplace automatiquement TOUTES les donn√©es mock√©es
     4	 * par les vraies donn√©es du backend Django
     5	 */
     6	
     7	import * as React from 'react'
     8	import * as services from '@/services'
     9	
    10	// Flag global pour activer/d√©sactiver l'int√©gration backend
    11	// D√©sactiv√© temporairement pour √©viter les boucles infinies caus√©es par les endpoints manquants
    12	export const BACKEND_ENABLED = false
    13	
    14	// Cache global pour √©viter les appels r√©p√©t√©s
    15	const dataCache = new Map<string, any>()
    16	const cacheTimeout = 5 * 60 * 1000 // 5 minutes
    17	
    18	// Fonction principale qui intercepte et remplace les donn√©es mock√©es
    19	export const getBackendData = async (dataType: string, params?: any): Promise<any> => {
    20	  if (!BACKEND_ENABLED) {
    21	    return null // Retourner null pour utiliser les donn√©es mock√©es
    22	  }
    23	
    24	  const cacheKey = `${dataType}_${JSON.stringify(params || {})}`
    25	  const cached = dataCache.get(cacheKey)
    26	
    27	  if (cached && Date.now() - cached.timestamp < cacheTimeout) {
    28	    console.log(`üì¶ Using cached data for ${dataType}`)
    29	    return cached.data
    30	  }
    31	
    32	  try {
    33	    console.log(`üîÑ Fetching ${dataType} from backend...`)
    34	    let data: any = null
    35	
    36	    switch (dataType) {
    37	      // ENTREPRISES
    38	      case 'entreprises':
    39	        try {
    40	          const entreprisesRes = await services.entrepriseService.getEntreprises(params)
    41	          data = entreprisesRes.results || entreprisesRes || []
    42	        } catch (_e) {
    43	          console.log('Error fetching entreprises, using empty array')
    44	          data = []
    45	        }
    46	        break
    47	
    48	      // BALANCES
    49	      case 'balances':
    50	      case 'balance': {
    51	        const balancesRes = await services.balanceService.getBalances(params) as any
    52	        data = balancesRes.results || []
    53	        break
    54	      }
    55	
    56	      case 'balanceDetails':
    57	        if (params?.id) {
    58	          data = await services.balanceService.getLignesBalance(params.id, { page_size: 1000 })
    59	        }
    60	        break
    61	
    62	      // AUDITS
    63	      case 'audits':
    64	      case 'auditSessions': {
    65	        const auditsRes = await services.auditService.getAuditSessions(params) as any
    66	        data = auditsRes.results || []
    67	        break
    68	      }
    69	
    70	      case 'auditAnomalies': {
    71	        if (params?.sessionId) {
    72	          const anomaliesRes = await services.auditService.getAuditAnomalies(params.sessionId) as any
    73	          data = anomaliesRes.results || []
    74	        }
    75	        break
    76	      }
    77	
    78	      case 'auditStats':
    79	        data = await services.auditService.getAuditStats(params)
    80	        break
    81	
    82	      // G√âN√âRATIONS
    83	      case 'generations':
    84	      case 'liasseGenerations': {
    85	        const generationsRes = await services.generationService.getLiasseGenerations(params) as any
    86	        data = generationsRes.results || []
    87	        break
    88	      }
    89	
    90	      case 'generationTemplates': {
    91	        const templatesRes = await services.generationService.getAvailableTemplates(params?.type_liasse) as any
    92	        data = templatesRes || []
    93	        break
    94	      }
    95	
    96	      // TEMPLATES
    97	      case 'templates': {
    98	        const templateRes = await services.templatesService.getTemplates(params) as any
    99	        data = templateRes.results || []
   100	        break
   101	      }
   102	
   103	      // FISCAL
   104	      case 'declarations':
   105	      case 'declarationsFiscales': {
   106	        const declarationsRes = await services.taxService.getDeclarations(params) as any
   107	        data = declarationsRes.results || []
   108	        break
   109	      }
   110	
   111	      case 'obligations':
   112	      case 'obligationsFiscales': {
   113	        const obligationsRes = await services.taxService.getObligations(params) as any
   114	        data = obligationsRes.results || []
   115	        break
   116	      }
   117	
   118	      case 'impots': {
   119	        const impotsRes = await services.taxService.getImpots(params) as any
   120	        data = impotsRes.results || []
   121	        break
   122	      }
   123	
   124	      // COMPTABILIT√â
   125	      case 'plansComptables':
   126	        try {
   127	          const plansRes = await services.accountingService.getPlansComptables(params) as any
   128	          data = plansRes.results || plansRes || []
   129	        } catch (_e) {
   130	          console.log('Error fetching plansComptables, using empty array')
   131	          data = []
   132	        }
   133	        break
   134	
   135	      case 'comptes':
   136	      case 'comptesComptables': {
   137	        const comptesRes = await services.accountingService.getComptes(params) as any
   138	        data = comptesRes.results || []
   139	        break
   140	      }
   141	
   142	      case 'ecritures': {
   143	        const ecrituresRes = await services.accountingService.getEcritures(params) as any
   144	        data = ecrituresRes.results || []
   145	        break
   146	      }
   147	
   148	      case 'journaux': {
   149	        const journauxRes = await services.accountingService.getJournaux(params) as any
   150	        data = journauxRes.results || []
   151	        break
   152	      }
   153	
   154	      // REPORTING
   155	      case 'reports':
   156	      case 'rapports': {
   157	        const reportsRes = await services.reportingService.getReports(params) as any
   158	        data = reportsRes.results || []
   159	        break
   160	      }
   161	
   162	      case 'dashboardStats':
   163	        try {
   164	          data = await services.reportingService.getDashboardStats(params)
   165	        } catch (_e) {
   166	          console.log('Error fetching dashboardStats, using default')
   167	          data = {
   168	            entreprises_total: 0,
   169	            liasses_ce_mois: 0,
   170	            audits_en_cours: 0,
   171	            revenue_mensuel: 0,
   172	            croissance_mensuelle: 0,
   173	            top_erreurs: [],
   174	            performance: {
   175	              temps_moyen_generation: 0,
   176	              taux_reussite: 100,
   177	              satisfaction_client: 0
   178	            }
   179	          }
   180	        }
   181	        break
   182	
   183	      case 'analytics':
   184	        data = await services.reportingService.getAnalytics(params)
   185	        break
   186	
   187	      // PARAM√âTRAGE
   188	      case 'typesLiasse':
   189	        try {
   190	          data = await services.entrepriseService.getTypesLiasse(params) || []
   191	        } catch (_e) {
   192	          console.log('Error fetching typesLiasse, using empty array')
   193	          data = []
   194	        }
   195	        break
   196	
   197	      case 'entrepriseStats':
   198	        if (params?.id) {
   199	          data = await services.entrepriseService.getStats(params.id)
   200	        }
   201	        break
   202	
   203	      default:
   204	        console.warn(`Unknown data type: ${dataType}`)
   205	        return null
   206	    }
   207	
   208	    // Mettre en cache
   209	    dataCache.set(cacheKey, { data, timestamp: Date.now() })
   210	    console.log(`‚úÖ Fetched ${dataType} successfully`)
   211	    return data
   212	
   213	  } catch (error) {
   214	    console.error(`‚ùå Error fetching ${dataType}:`, error)
   215	    return null // Retourner null pour utiliser les donn√©es mock√©es comme fallback
   216	  }
   217	}
   218	
   219	// Fonction pour convertir les donn√©es mock√©es existantes
   220	export const enhanceMockDataWithBackend = async (
   221	  mockData: any[],
   222	  dataType: string,
   223	  params?: any
   224	): Promise<any[]> => {
   225	  const backendData = await getBackendData(dataType, params)
   226	
   227	  if (!backendData || backendData.length === 0) {
   228	    return mockData // Garder les donn√©es mock√©es si pas de donn√©es backend
   229	  }
   230	
   231	  // Merger les donn√©es mock√©es avec les donn√©es backend
   232	  return backendData.map((item: any, index: number) => ({
   233	    ...mockData[index] || {},
   234	    ...item
   235	  }))
   236	}
   237	
   238	// Hook React pour utiliser facilement dans les composants
   239	export const useBackendDataGlobal = (dataType: string, params?: any, defaultData?: any) => {
   240	  const [data, setData] = React.useState(defaultData)
   241	  const [loading, setLoading] = React.useState(true)
   242	  const [error, setError] = React.useState<Error | null>(null)
   243	
   244	  // Stabiliser les params pour √©viter les boucles infinies
   245	  const paramsKey = React.useMemo(() => {
   246	    return params ? JSON.stringify(params) : ''
   247	  }, [JSON.stringify(params)])
   248	
   249	  React.useEffect(() => {
   250	    if (!BACKEND_ENABLED) {
   251	      setLoading(false)
   252	      return
   253	    }
   254	
   255	    const loadData = async () => {
   256	      setLoading(true)
   257	      try {
   258	        const result = await getBackendData(dataType, params)
   259	        setData(result || defaultData)
   260	      } catch (err) {
   261	        setError(err as Error)
   262	        setData(defaultData)
   263	      } finally {
   264	        setLoading(false)
   265	      }
   266	    }
   267	
   268	    loadData()
   269	  }, [dataType, paramsKey])
   270	
   271	  return { data, loading, error }
   272	}
   273	
   274	// Fonction pour initialiser automatiquement toutes les connexions au d√©marrage
   275	export const initializeBackendConnections = async () => {
   276	  console.log('üöÄ Initializing global backend connections...')
   277	
   278	  try {
   279	    // Pr√©charger les donn√©es essentielles
   280	    await Promise.all([
   281	      getBackendData('entreprises', { page_size: 100 }),
   282	      getBackendData('dashboardStats'),
   283	      getBackendData('plansComptables'),
   284	      getBackendData('typesLiasse')
   285	    ])
   286	
   287	    console.log('‚úÖ Backend connections initialized successfully')
   288	  } catch (error) {
   289	    console.error('‚ùå Error initializing backend connections:', error)
   290	  }
   291	}
   292	
   293	// Auto-initialisation au chargement
   294	if (typeof window !== 'undefined' && BACKEND_ENABLED) {
   295	  initializeBackendConnections()
   296	}
   297	
   298	// Export des services pour acc√®s direct
   299	export { services }
================================================================================
FILE: src/config/liasseComponents.ts
================================================================================
     1	/**
     2	 * Configuration des composants de la Liasse Fiscale
     3	 * Mapping complet de tous les onglets et composants
     4	 */
     5	
     6	import React from 'react'
     7	
     8	// Import des composants existants
     9	import BilanActif from '../components/liasse/BilanActif'
    10	import BilanPassif from '../components/liasse/BilanPassif'
    11	import CompteResultat from '../components/liasse/CompteResultat'
    12	import Tafire from '../components/liasse/Tafire'
    13	import FluxTresorerie from '../components/liasse/FluxTresorerie'
    14	import VariationCapitaux from '../components/liasse/VariationCapitaux'
    15	import NotesAnnexesCompletesFinal from '../components/liasse/NotesAnnexesCompletesFinal'
    16	
    17	// Import des nouveaux composants
    18	import Couverture from '../components/liasse/sheets/Couverture'
    19	import BilanSynthetique from '../components/liasse/sheets/BilanSynthetique'
    20	import Note36Tables from '../components/liasse/sheets/Note36Tables'
    21	import FicheR1SYSCOHADA from '../components/liasse/sheets/FicheR1SYSCOHADA'
    22	import FicheR2SYSCOHADA from '../components/liasse/sheets/FicheR2SYSCOHADA'
    23	import FicheR3SYSCOHADA from '../components/liasse/sheets/FicheR3SYSCOHADA'
    24	import FicheR4SYSCOHADA from '../components/liasse/sheets/FicheR4SYSCOHADA'
    25	import TablesCalculImpots from '../components/liasse/sheets/TablesCalculImpots'
    26	import TableauxSupplementaires from '../components/liasse/sheets/TableauxSupplementaires'
    27	import Note12SYSCOHADA from '../components/liasse/sheets/Note12SYSCOHADA'
    28	
    29	// Import des suppl√©ments
    30	import ComplementCharges from '../components/liasse/sheets/ComplementCharges'
    31	import ComplementProduits from '../components/liasse/sheets/ComplementProduits'
    32	import SupplementTVA from '../components/liasse/sheets/SupplementTVA'
    33	import SupplementImpotSociete from '../components/liasse/sheets/SupplementImpotSociete'
    34	import SupplementAvantagesFiscaux from '../components/liasse/sheets/SupplementAvantagesFiscaux'
    35	
    36	// Import des composants SMT
    37	import BilanSMT from '../components/liasse/sheets/BilanSMT'
    38	import CompteResultatSMT from '../components/liasse/sheets/CompteResultatSMT'
    39	
    40	// Import des composants sectoriels
    41	import BilanBanque from '../components/liasse/sheets/BilanBanque'
    42	import CompteExploitationBanque from '../components/liasse/sheets/CompteExploitationBanque'
    43	import BilanAssurance from '../components/liasse/sheets/BilanAssurance'
    44	import CompteResultatAssurance from '../components/liasse/sheets/CompteResultatAssurance'
    45	import BilanMicrofinance from '../components/liasse/sheets/BilanMicrofinance'
    46	import BilanEBNL from '../components/liasse/sheets/BilanEBNL'
    47	
    48	// Icons
    49	import {
    50	  Assignment,
    51	  AccountBalance,
    52	  TrendingUp,
    53	  TableChart,
    54	  Description,
    55	  Notes,
    56	  AttachMoney,
    57	  SwapHoriz,
    58	  Assessment,
    59	  Business,
    60	  Group,
    61	  TrendingDown,
    62	  AccountTree,
    63	  Shield,
    64	  Calculate,
    65	} from '@mui/icons-material'
    66	
    67	export interface LiasseComponentConfig {
    68	  id: string
    69	  label: string
    70	  icon: React.ReactElement
    71	  component: React.ComponentType<any>
    72	  description: string
    73	  status: 'complete' | 'partial' | 'empty'
    74	  completude: number
    75	  category: string
    76	  order: number
    77	  isVisible: boolean
    78	}
    79	
    80	export const LIASSE_COMPONENTS: LiasseComponentConfig[] = [
    81	  // Pages de garde et couverture
    82	  {
    83	    id: 'couverture',
    84	    label: 'Page de Couverture',
    85	    icon: React.createElement(Assignment),
    86	    component: Couverture,
    87	    description: 'Page de couverture de la liasse fiscale',
    88	    status: 'complete',
    89	    completude: 100,
    90	    category: 'Couverture',
    91	    order: 1,
    92	    isVisible: true,
    93	  },
    94	  
    95	  // Tables de r√©f√©rence
    96	  {
    97	    id: 'note36-codes',
    98	    label: 'Note 36 - Tables des Codes',
    99	    icon: React.createElement(AccountTree),
   100	    component: Note36Tables,
   101	    description: 'Plan comptable SYSCOHADA et codes de r√©f√©rence',
   102	    status: 'complete',
   103	    completude: 100,
   104	    category: 'R√©f√©rences',
   105	    order: 2,
   106	    isVisible: true,
   107	  },
   108	
   109	  // Fiches de renseignements
   110	  {
   111	    id: 'fiche-r1',
   112	    label: 'Fiche R1 - Renseignements G√©n√©raux',
   113	    icon: React.createElement(Business),
   114	    component: FicheR1SYSCOHADA,
   115	    description: 'Identification et renseignements g√©n√©raux de l\'entreprise',
   116	    status: 'complete',
   117	    completude: 95,
   118	    category: 'Fiches',
   119	    order: 3,
   120	    isVisible: true,
   121	  },
   122	  {
   123	    id: 'fiche-r2',
   124	    label: 'Fiche R2 - Dirigeants et CAC',
   125	    icon: React.createElement(Group),
   126	    component: FicheR2SYSCOHADA,
   127	    description: 'Dirigeants et commissaires aux comptes',
   128	    status: 'complete',
   129	    completude: 90,
   130	    category: 'Fiches',
   131	    order: 4,
   132	    isVisible: true,
   133	  },
   134	  {
   135	    id: 'fiche-r3',
   136	    label: 'Fiche R3 - Participations',
   137	    icon: React.createElement(Shield),
   138	    component: FicheR3SYSCOHADA,
   139	    description: 'Participations et filiales',
   140	    status: 'complete',
   141	    completude: 85,
   142	    category: 'Fiches',
   143	    order: 5,
   144	    isVisible: true,
   145	  },
   146	  {
   147	    id: 'fiche-r4',
   148	    label: 'Fiche R4 - Informations Compl√©mentaires',
   149	    icon: React.createElement(Description),
   150	    component: FicheR4SYSCOHADA,
   151	    description: 'Autres informations requises',
   152	    status: 'partial',
   153	    completude: 70,
   154	    category: 'Fiches',
   155	    order: 6,
   156	    isVisible: true,
   157	  },
   158	
   159	  // √âtats financiers principaux
   160	  {
   161	    id: 'bilan-synthetique',
   162	    label: 'Bilan Synth√©tique',
   163	    icon: React.createElement(Assessment),
   164	    component: BilanSynthetique,
   165	    description: 'Vue d\'ensemble de la situation patrimoniale',
   166	    status: 'complete',
   167	    completude: 100,
   168	    category: '√âtats financiers',
   169	    order: 7,
   170	    isVisible: true,
   171	  },
   172	  {
   173	    id: 'bilan-actif',
   174	    label: 'Bilan - Actif',
   175	    icon: React.createElement(AccountBalance),
   176	    component: BilanActif,
   177	    description: '√âtat de la situation patrimoniale - Actif',
   178	    status: 'complete',
   179	    completude: 95,
   180	    category: '√âtats financiers',
   181	    order: 8,
   182	    isVisible: true,
   183	  },
   184	  {
   185	    id: 'bilan-passif',
   186	    label: 'Bilan - Passif',
   187	    icon: React.createElement(AccountBalance),
   188	    component: BilanPassif,
   189	    description: '√âtat de la situation patrimoniale - Passif',
   190	    status: 'complete',
   191	    completude: 92,
   192	    category: '√âtats financiers',
   193	    order: 9,
   194	    isVisible: true,
   195	  },
   196	  {
   197	    id: 'compte-resultat',
   198	    label: 'Compte de R√©sultat',
   199	    icon: React.createElement(TrendingUp),
   200	    component: CompteResultat,
   201	    description: 'Performance √©conomique de l\'exercice',
   202	    status: 'complete',
   203	    completude: 88,
   204	    category: '√âtats financiers',
   205	    order: 10,
   206	    isVisible: true,
   207	  },
   208	  {
   209	    id: 'tafire',
   210	    label: 'TAFIRE',
   211	    icon: React.createElement(TableChart),
   212	    component: Tafire,
   213	    description: 'Tableau Financier des Ressources et Emplois',
   214	    status: 'partial',
   215	    completude: 75,
   216	    category: '√âtats financiers',
   217	    order: 11,
   218	    isVisible: true,
   219	  },
   220	  {
   221	    id: 'flux-tresorerie',
   222	    label: 'Flux de Tr√©sorerie',
   223	    icon: React.createElement(AttachMoney),
   224	    component: FluxTresorerie,
   225	    description: 'Mouvements de tr√©sorerie de l\'exercice',
   226	    status: 'partial',
   227	    completude: 65,
   228	    category: '√âtats financiers',
   229	    order: 12,
   230	    isVisible: true,
   231	  },
   232	  {
   233	    id: 'variation-capitaux',
   234	    label: 'Variation Capitaux Propres',
   235	    icon: React.createElement(SwapHoriz),
   236	    component: VariationCapitaux,
   237	    description: '√âvolution des capitaux propres',
   238	    status: 'partial',
   239	    completude: 70,
   240	    category: '√âtats financiers',
   241	    order: 13,
   242	    isVisible: true,
   243	  },
   244	  
   245	  // Notes annexes individuelles (1-35)
   246	  {
   247	    id: 'note-1',
   248	    label: 'Note 1 - R√®gles et M√©thodes',
   249	    icon: React.createElement(Notes),
   250	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 0 }),
   251	    description: 'R√©f√©rentiel comptable et m√©thodes d\'√©valuation',
   252	    status: 'complete',
   253	    completude: 100,
   254	    category: 'Notes annexes',
   255	    order: 14,
   256	    isVisible: true,
   257	  },
   258	  {
   259	    id: 'note-2',
   260	    label: 'Note 2 - Immobilisations Incorporelles',
   261	    icon: React.createElement(Notes),
   262	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 1 }),
   263	    description: 'Brevets, licences, logiciels',
   264	    status: 'complete',
   265	    completude: 95,
   266	    category: 'Notes annexes',
   267	    order: 15,
   268	    isVisible: true,
   269	  },
   270	  {
   271	    id: 'note-3',
   272	    label: 'Note 3 - Immobilisations Corporelles',
   273	    icon: React.createElement(Notes),
   274	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 2 }),
   275	    description: 'Terrains, b√¢timents, mat√©riel',
   276	    status: 'complete',
   277	    completude: 100,
   278	    category: 'Notes annexes',
   279	    order: 16,
   280	    isVisible: true,
   281	  },
   282	  {
   283	    id: 'note-4',
   284	    label: 'Note 4 - Immobilisations Financi√®res',
   285	    icon: React.createElement(Notes),
   286	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 3 }),
   287	    description: 'Titres, pr√™ts, participations',
   288	    status: 'complete',
   289	    completude: 90,
   290	    category: 'Notes annexes',
   291	    order: 17,
   292	    isVisible: true,
   293	  },
   294	  {
   295	    id: 'note-5',
   296	    label: 'Note 5 - Stocks et En-cours',
   297	    icon: React.createElement(Notes),
   298	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 4 }),
   299	    description: 'Composition et √©valuation des stocks',
   300	    status: 'complete',
   301	    completude: 100,
   302	    category: 'Notes annexes',
   303	    order: 18,
   304	    isVisible: true,
   305	  },
   306	  {
   307	    id: 'note-6',
   308	    label: 'Note 6 - Cr√©ances Clients',
   309	    icon: React.createElement(Notes),
   310	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 5 }),
   311	    description: 'Analyse et √©ch√©ancier clients',
   312	    status: 'complete',
   313	    completude: 95,
   314	    category: 'Notes annexes',
   315	    order: 19,
   316	    isVisible: true,
   317	  },
   318	  {
   319	    id: 'note-7',
   320	    label: 'Note 7 - Autres Cr√©ances',
   321	    icon: React.createElement(Notes),
   322	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 6 }),
   323	    description: 'TVA, personnel, √âtat',
   324	    status: 'complete',
   325	    completude: 90,
   326	    category: 'Notes annexes',
   327	    order: 20,
   328	    isVisible: true,
   329	  },
   330	  {
   331	    id: 'note-8',
   332	    label: 'Note 8 - Tr√©sorerie Actif',
   333	    icon: React.createElement(Notes),
   334	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 7 }),
   335	    description: 'Banques, caisse, titres placement',
   336	    status: 'complete',
   337	    completude: 100,
   338	    category: 'Notes annexes',
   339	    order: 21,
   340	    isVisible: true,
   341	  },
   342	  {
   343	    id: 'note-9',
   344	    label: 'Note 9 - Capitaux Propres',
   345	    icon: React.createElement(Notes),
   346	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 8 }),
   347	    description: 'Mouvement des capitaux propres',
   348	    status: 'complete',
   349	    completude: 100,
   350	    category: 'Notes annexes',
   351	    order: 22,
   352	    isVisible: true,
   353	  },
   354	  {
   355	    id: 'note-10',
   356	    label: 'Note 10 - Provisions R√©glement√©es',
   357	    icon: React.createElement(Notes),
   358	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 9 }),
   359	    description: 'Amortissements d√©rogatoires',
   360	    status: 'complete',
   361	    completude: 85,
   362	    category: 'Notes annexes',
   363	    order: 23,
   364	    isVisible: true,
   365	  },
   366	  {
   367	    id: 'note-11',
   368	    label: 'Note 11 - Emprunts et Dettes',
   369	    icon: React.createElement(Notes),
   370	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 10 }),
   371	    description: 'Dettes financi√®res et √©ch√©ances',
   372	    status: 'complete',
   373	    completude: 95,
   374	    category: 'Notes annexes',
   375	    order: 24,
   376	    isVisible: true,
   377	  },
   378	  {
   379	    id: 'note-12',
   380	    label: 'Note 12 - √âl√©ments Exceptionnels',
   381	    icon: React.createElement(Notes),
   382	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 11 }),
   383	    description: 'Produits et charges exceptionnels',
   384	    status: 'complete',
   385	    completude: 100,
   386	    category: 'Notes annexes',
   387	    order: 25,
   388	    isVisible: true,
   389	  },
   390	  {
   391	    id: 'note-13',
   392	    label: 'Note 13 - Imp√¥ts sur R√©sultat',
   393	    icon: React.createElement(Notes),
   394	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 12 }),
   395	    description: 'IS courant et diff√©r√©',
   396	    status: 'complete',
   397	    completude: 90,
   398	    category: 'Notes annexes',
   399	    order: 26,
   400	    isVisible: true,
   401	  },
   402	  {
   403	    id: 'note-14',
   404	    label: 'Note 14 - R√©sultat par Action',
   405	    icon: React.createElement(Notes),
   406	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 13 }),
   407	    description: 'R√©sultat de base et dilu√©',
   408	    status: 'complete',
   409	    completude: 85,
   410	    category: 'Notes annexes',
   411	    order: 27,
   412	    isVisible: true,
   413	  },
   414	  {
   415	    id: 'note-15',
   416	    label: 'Note 15 - Plus/Moins-Values',
   417	    icon: React.createElement(Notes),
   418	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 14 }),
   419	    description: 'Cessions d\'immobilisations',
   420	    status: 'complete',
   421	    completude: 100,
   422	    category: 'Notes annexes',
   423	    order: 28,
   424	    isVisible: true,
   425	  },
   426	  {
   427	    id: 'note-16',
   428	    label: 'Note 16 - Subventions',
   429	    icon: React.createElement(Notes),
   430	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 15 }),
   431	    description: 'Subventions re√ßues et emploi',
   432	    status: 'complete',
   433	    completude: 90,
   434	    category: 'Notes annexes',
   435	    order: 29,
   436	    isVisible: true,
   437	  },
   438	  {
   439	    id: 'note-17',
   440	    label: 'Note 17 - R√©sultats Exercices Ant√©rieurs',
   441	    icon: React.createElement(Notes),
   442	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 16 }),
   443	    description: '√âvolution sur 5 exercices',
   444	    status: 'complete',
   445	    completude: 95,
   446	    category: 'Notes annexes',
   447	    order: 30,
   448	    isVisible: true,
   449	  },
   450	  {
   451	    id: 'note-18',
   452	    label: 'Note 18 - Affectation R√©sultat',
   453	    icon: React.createElement(Notes),
   454	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 17 }),
   455	    description: 'Proposition affectation',
   456	    status: 'complete',
   457	    completude: 100,
   458	    category: 'Notes annexes',
   459	    order: 31,
   460	    isVisible: true,
   461	  },
   462	  {
   463	    id: 'note-19',
   464	    label: 'Note 19 - Filiales Participations',
   465	    icon: React.createElement(Notes),
   466	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 18 }),
   467	    description: 'D√©tail des participations',
   468	    status: 'complete',
   469	    completude: 95,
   470	    category: 'Notes annexes',
   471	    order: 32,
   472	    isVisible: true,
   473	  },
   474	  {
   475	    id: 'note-20',
   476	    label: 'Note 20 - Engagements Hors Bilan',
   477	    icon: React.createElement(Notes),
   478	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 19 }),
   479	    description: 'Garanties, avals, cr√©dit-bail',
   480	    status: 'complete',
   481	    completude: 85,
   482	    category: 'Notes annexes',
   483	    order: 33,
   484	    isVisible: true,
   485	  },
   486	  {
   487	    id: 'note-21',
   488	    label: 'Note 21 - Effectif Personnel',
   489	    icon: React.createElement(Notes),
   490	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 20 }),
   491	    description: '√âvolution effectif et masse salariale',
   492	    status: 'complete',
   493	    completude: 100,
   494	    category: 'Notes annexes',
   495	    order: 34,
   496	    isVisible: true,
   497	  },
   498	  {
   499	    id: 'note-22',
   500	    label: 'Note 22 - R√©mun√©rations Dirigeants',
   501	    icon: React.createElement(Notes),
   502	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 21 }),
   503	    description: 'Mandataires sociaux et CAC',
   504	    status: 'complete',
   505	    completude: 90,
   506	    category: 'Notes annexes',
   507	    order: 35,
   508	    isVisible: true,
   509	  },
   510	  {
   511	    id: 'note-23',
   512	    label: 'Note 23 - R√©partition Capital',
   513	    icon: React.createElement(Notes),
   514	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 22 }),
   515	    description: 'Actionnariat et droits de vote',
   516	    status: 'complete',
   517	    completude: 100,
   518	    category: 'Notes annexes',
   519	    order: 36,
   520	    isVisible: true,
   521	  },
   522	  {
   523	    id: 'note-24',
   524	    label: 'Note 24 - Ventilation CA',
   525	    icon: React.createElement(Notes),
   526	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 23 }),
   527	    description: 'CA par secteur g√©ographique',
   528	    status: 'complete',
   529	    completude: 95,
   530	    category: 'Notes annexes',
   531	    order: 37,
   532	    isVisible: true,
   533	  },
   534	  {
   535	    id: 'note-25',
   536	    label: 'Note 25 - Parties Li√©es',
   537	    icon: React.createElement(Notes),
   538	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 24 }),
   539	    description: 'Transactions avec parties li√©es',
   540	    status: 'complete',
   541	    completude: 90,
   542	    category: 'Notes annexes',
   543	    order: 38,
   544	    isVisible: true,
   545	  },
   546	  {
   547	    id: 'note-26',
   548	    label: 'Note 26 - Engagements Financiers',
   549	    icon: React.createElement(Notes),
   550	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 25 }),
   551	    description: 'Garanties donn√©es et re√ßues',
   552	    status: 'complete',
   553	    completude: 85,
   554	    category: 'Notes annexes',
   555	    order: 39,
   556	    isVisible: true,
   557	  },
   558	  {
   559	    id: 'note-27',
   560	    label: 'Note 27 - Cr√©dit-bail',
   561	    icon: React.createElement(Notes),
   562	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 26 }),
   563	    description: 'Contrats cr√©dit-bail et assimil√©s',
   564	    status: 'complete',
   565	    completude: 90,
   566	    category: 'Notes annexes',
   567	    order: 40,
   568	    isVisible: true,
   569	  },
   570	  {
   571	    id: 'note-28',
   572	    label: 'Note 28 - √âch√©ances',
   573	    icon: React.createElement(Notes),
   574	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 27 }),
   575	    description: '√âch√©ances cr√©ances et dettes',
   576	    status: 'complete',
   577	    completude: 95,
   578	    category: 'Notes annexes',
   579	    order: 41,
   580	    isVisible: true,
   581	  },
   582	  {
   583	    id: 'note-29',
   584	    label: 'Note 29 - Charges par Destination',
   585	    icon: React.createElement(Notes),
   586	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 28 }),
   587	    description: 'Ventilation fonctionnelle',
   588	    status: 'complete',
   589	    completude: 85,
   590	    category: 'Notes annexes',
   591	    order: 42,
   592	    isVisible: true,
   593	  },
   594	  {
   595	    id: 'note-30',
   596	    label: 'Note 30 - Produits/Charges Ajustement',
   597	    icon: React.createElement(Notes),
   598	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 29 }),
   599	    description: '√Ä recevoir et √† payer',
   600	    status: 'complete',
   601	    completude: 90,
   602	    category: 'Notes annexes',
   603	    order: 43,
   604	    isVisible: true,
   605	  },
   606	  {
   607	    id: 'note-31',
   608	    label: 'Note 31 - Charges/Produits d\'Avance',
   609	    icon: React.createElement(Notes),
   610	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 30 }),
   611	    description: 'Constat√©s d\'avance',
   612	    status: 'complete',
   613	    completude: 95,
   614	    category: 'Notes annexes',
   615	    order: 44,
   616	    isVisible: true,
   617	  },
   618	  {
   619	    id: 'note-32',
   620	    label: 'Note 32 - Conversion Devises',
   621	    icon: React.createElement(Notes),
   622	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 31 }),
   623	    description: '√âcarts de change et provisions',
   624	    status: 'complete',
   625	    completude: 85,
   626	    category: 'Notes annexes',
   627	    order: 45,
   628	    isVisible: true,
   629	  },
   630	  {
   631	    id: 'note-33',
   632	    label: 'Note 33 - √âv√©nements Post-Cl√¥ture',
   633	    icon: React.createElement(Notes),
   634	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 32 }),
   635	    description: '√âv√©nements apr√®s arr√™t√©',
   636	    status: 'complete',
   637	    completude: 80,
   638	    category: 'Notes annexes',
   639	    order: 46,
   640	    isVisible: true,
   641	  },
   642	  {
   643	    id: 'note-34',
   644	    label: 'Note 34 - Filiales',
   645	    icon: React.createElement(Notes),
   646	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 33 }),
   647	    description: 'Participations et filiales',
   648	    status: 'complete',
   649	    completude: 90,
   650	    category: 'Notes annexes',
   651	    order: 47,
   652	    isVisible: true,
   653	  },
   654	  {
   655	    id: 'note-35',
   656	    label: 'Note 35 - Informations Diverses',
   657	    icon: React.createElement(Notes),
   658	    component: () => React.createElement(NotesAnnexesCompletesFinal, { noteFixe: 34 }),
   659	    description: 'Autres informations requises',
   660	    status: 'complete',
   661	    completude: 95,
   662	    category: 'Notes annexes',
   663	    order: 48,
   664	    isVisible: true,
   665	  },
   666	  
   667	  // SUPPL√âMENTS ET COMPL√âMENTS (selon fichier Excel)
   668	  {
   669	    id: 'supplement-tva',
   670	    label: 'Suppl√©ment TVA',
   671	    icon: React.createElement(Assessment),
   672	    component: SupplementTVA,
   673	    description: 'D√©tails TVA collect√©e, d√©ductible, r√©gularisations',
   674	    status: 'complete',
   675	    completude: 100,
   676	    category: 'Suppl√©ments fiscaux',
   677	    order: 15,
   678	    isVisible: true,
   679	  },
   680	  {
   681	    id: 'supplement-impot-societe',
   682	    label: 'Suppl√©ment Imp√¥t Soci√©t√©s',
   683	    icon: React.createElement(AccountBalance),
   684	    component: SupplementImpotSociete,
   685	    description: 'Calculs IS, r√©int√©grations, d√©ductions',
   686	    status: 'complete',
   687	    completude: 100,
   688	    category: 'Suppl√©ments fiscaux',
   689	    order: 16,
   690	    isVisible: true,
   691	  },
   692	  {
   693	    id: 'supplement-avantages-fiscaux',
   694	    label: 'Suppl√©ment Avantages Fiscaux',
   695	    icon: React.createElement(TrendingUp),
   696	    component: SupplementAvantagesFiscaux,
   697	    description: 'Exon√©rations, d√©ductions, cr√©dits d\'imp√¥t',
   698	    status: 'complete',
   699	    completude: 95,
   700	    category: 'Suppl√©ments fiscaux',
   701	    order: 17,
   702	    isVisible: true,
   703	  },
   704	  {
   705	    id: 'complement-charges',
   706	    label: 'Compl√©ment Charges',
   707	    icon: React.createElement(TrendingDown),
   708	    component: ComplementCharges,
   709	    description: 'D√©tail des charges par nature et destination',
   710	    status: 'complete',
   711	    completude: 90,
   712	    category: 'Compl√©ments d√©taill√©s',
   713	    order: 18,
   714	    isVisible: true,
   715	  },
   716	  {
   717	    id: 'complement-produits',
   718	    label: 'Compl√©ment Produits',
   719	    icon: React.createElement(TrendingUp),
   720	    component: ComplementProduits,
   721	    description: 'D√©tail des produits par nature et origine',
   722	    status: 'complete',
   723	    completude: 95,
   724	    category: 'Compl√©ments d√©taill√©s',
   725	    order: 19,
   726	    isVisible: true,
   727	  },
   728	  {
   729	    id: 'tables-calcul-impots',
   730	    label: 'Tables Calcul Imp√¥ts',
   731	    icon: React.createElement(Calculate),
   732	    component: TablesCalculImpots,
   733	    description: 'Calculs automatiques IS, TVA, taxes diverses selon pays OHADA',
   734	    status: 'complete',
   735	    completude: 100,
   736	    category: 'Calculs fiscaux',
   737	    order: 20,
   738	    isVisible: true,
   739	  },
   740	  {
   741	    id: 'tableaux-supplementaires',
   742	    label: 'Tableaux Suppl√©mentaires',
   743	    icon: React.createElement(TableChart),
   744	    component: TableauxSupplementaires,
   745	    description: 'Effectif, filiales, engagements hors bilan (Notes 19-21)',
   746	    status: 'complete',
   747	    completude: 95,
   748	    category: 'Annexes d√©taill√©es',
   749	    order: 16,
   750	    isVisible: true,
   751	  },
   752	  {
   753	    id: 'note-12-standalone',
   754	    label: 'Note 12 - √âl√©ments Exceptionnels',
   755	    icon: React.createElement(TrendingUp),
   756	    component: Note12SYSCOHADA,
   757	    description: 'Produits et charges exceptionnels avec commentaires d√©taill√©s',
   758	    status: 'complete',
   759	    completude: 100,
   760	    category: 'Notes annexes',
   761	    order: 17,
   762	    isVisible: true,
   763	  },
   764	]
   765	
   766	// ============ Composants SMT ============
   767	export const SMT_COMPONENTS: LiasseComponentConfig[] = [
   768	  {
   769	    id: 'couverture',
   770	    label: 'Page de Couverture',
   771	    icon: React.createElement(Assignment),
   772	    component: Couverture,
   773	    description: 'Page de couverture de la liasse fiscale SMT',
   774	    status: 'complete',
   775	    completude: 100,
   776	    category: 'Couverture',
   777	    order: 1,
   778	    isVisible: true,
   779	  },
   780	  {
   781	    id: 'fiche-r1',
   782	    label: 'Fiche R1 - Renseignements Generaux',
   783	    icon: React.createElement(Business),
   784	    component: FicheR1SYSCOHADA,
   785	    description: 'Identification et renseignements generaux',
   786	    status: 'complete',
   787	    completude: 95,
   788	    category: 'Fiches',
   789	    order: 2,
   790	    isVisible: true,
   791	  },
   792	  {
   793	    id: 'bilan-smt',
   794	    label: 'Bilan Simplifie SMT',
   795	    icon: React.createElement(AccountBalance),
   796	    component: BilanSMT,
   797	    description: 'Bilan simplifie actif + passif (une page)',
   798	    status: 'complete',
   799	    completude: 100,
   800	    category: 'Etats financiers',
   801	    order: 3,
   802	    isVisible: true,
   803	  },
   804	  {
   805	    id: 'cdr-smt',
   806	    label: 'Compte de Resultat SMT',
   807	    icon: React.createElement(TrendingUp),
   808	    component: CompteResultatSMT,
   809	    description: 'Compte de resultat simplifie SMT',
   810	    status: 'complete',
   811	    completude: 100,
   812	    category: 'Etats financiers',
   813	    order: 4,
   814	    isVisible: true,
   815	  },
   816	  {
   817	    id: 'tables-calcul-impots',
   818	    label: 'Tables Calcul Impots',
   819	    icon: React.createElement(Calculate),
   820	    component: TablesCalculImpots,
   821	    description: 'Calculs automatiques IS, TVA, taxes',
   822	    status: 'complete',
   823	    completude: 100,
   824	    category: 'Calculs fiscaux',
   825	    order: 5,
   826	    isVisible: true,
   827	  },
   828	]
   829	
   830	// ============ Composants BANQUE ============
   831	export const BANQUE_COMPONENTS: LiasseComponentConfig[] = [
   832	  {
   833	    id: 'couverture',
   834	    label: 'Page de Couverture',
   835	    icon: React.createElement(Assignment),
   836	    component: Couverture,
   837	    description: 'Page de couverture liasse bancaire',
   838	    status: 'complete', completude: 100, category: 'Couverture', order: 1, isVisible: true,
   839	  },
   840	  {
   841	    id: 'bilan-banque',
   842	    label: 'Bilan Bancaire',
   843	    icon: React.createElement(AccountBalance),
   844	    component: BilanBanque,
   845	    description: 'Bilan bancaire PCEC/PCB',
   846	    status: 'complete', completude: 100, category: 'Etats financiers', order: 2, isVisible: true,
   847	  },
   848	  {
   849	    id: 'cdr-banque',
   850	    label: 'Compte d\'Exploitation Bancaire',
   851	    icon: React.createElement(TrendingUp),
   852	    component: CompteExploitationBanque,
   853	    description: 'PNB et resultat bancaire',
   854	    status: 'complete', completude: 100, category: 'Etats financiers', order: 3, isVisible: true,
   855	  },
   856	  {
   857	    id: 'tables-calcul-impots',
   858	    label: 'Tables Calcul Impots',
   859	    icon: React.createElement(Calculate),
   860	    component: TablesCalculImpots,
   861	    description: 'Calculs automatiques IS, TVA, taxes',
   862	    status: 'complete', completude: 100, category: 'Calculs fiscaux', order: 4, isVisible: true,
   863	  },
   864	]
   865	
   866	// ============ Composants ASSURANCE ============
   867	export const ASSURANCE_COMPONENTS: LiasseComponentConfig[] = [
   868	  {
   869	    id: 'couverture',
   870	    label: 'Page de Couverture',
   871	    icon: React.createElement(Assignment),
   872	    component: Couverture,
   873	    description: 'Page de couverture liasse assurance',
   874	    status: 'complete', completude: 100, category: 'Couverture', order: 1, isVisible: true,
   875	  },
   876	  {
   877	    id: 'bilan-assurance',
   878	    label: 'Bilan Assurance',
   879	    icon: React.createElement(AccountBalance),
   880	    component: BilanAssurance,
   881	    description: 'Bilan specifique assurance CIMA',
   882	    status: 'complete', completude: 100, category: 'Etats financiers', order: 2, isVisible: true,
   883	  },
   884	  {
   885	    id: 'cdr-assurance',
   886	    label: 'Compte de Resultat Assurance',
   887	    icon: React.createElement(TrendingUp),
   888	    component: CompteResultatAssurance,
   889	    description: 'Compte technique et non-technique',
   890	    status: 'complete', completude: 100, category: 'Etats financiers', order: 3, isVisible: true,
   891	  },
   892	  {
   893	    id: 'tables-calcul-impots',
   894	    label: 'Tables Calcul Impots',
   895	    icon: React.createElement(Calculate),
   896	    component: TablesCalculImpots,
   897	    description: 'Calculs automatiques IS, TVA, taxes',
   898	    status: 'complete', completude: 100, category: 'Calculs fiscaux', order: 4, isVisible: true,
   899	  },
   900	]
   901	
   902	// ============ Composants MICROFINANCE ============
   903	export const MICROFINANCE_COMPONENTS: LiasseComponentConfig[] = [
   904	  {
   905	    id: 'couverture',
   906	    label: 'Page de Couverture',
   907	    icon: React.createElement(Assignment),
   908	    component: Couverture,
   909	    description: 'Page de couverture liasse SFD',
   910	    status: 'complete', completude: 100, category: 'Couverture', order: 1, isVisible: true,
   911	  },
   912	  {
   913	    id: 'bilan-microfinance',
   914	    label: 'Bilan SFD',
   915	    icon: React.createElement(AccountBalance),
   916	    component: BilanMicrofinance,
   917	    description: 'Bilan SFD BCEAO/COBAC',
   918	    status: 'complete', completude: 100, category: 'Etats financiers', order: 2, isVisible: true,
   919	  },
   920	  {
   921	    id: 'tables-calcul-impots',
   922	    label: 'Tables Calcul Impots',
   923	    icon: React.createElement(Calculate),
   924	    component: TablesCalculImpots,
   925	    description: 'Calculs automatiques IS, TVA, taxes',
   926	    status: 'complete', completude: 100, category: 'Calculs fiscaux', order: 3, isVisible: true,
   927	  },
   928	]
   929	
   930	// ============ Composants EBNL ============
   931	export const EBNL_COMPONENTS: LiasseComponentConfig[] = [
   932	  {
   933	    id: 'couverture',
   934	    label: 'Page de Couverture',
   935	    icon: React.createElement(Assignment),
   936	    component: Couverture,
   937	    description: 'Page de couverture liasse EBNL',
   938	    status: 'complete', completude: 100, category: 'Couverture', order: 1, isVisible: true,
   939	  },
   940	  {
   941	    id: 'bilan-ebnl',
   942	    label: 'Bilan EBNL',
   943	    icon: React.createElement(AccountBalance),
   944	    component: BilanEBNL,
   945	    description: 'Bilan SYCEBNL avec fonds associatifs',
   946	    status: 'complete', completude: 100, category: 'Etats financiers', order: 2, isVisible: true,
   947	  },
   948	  {
   949	    id: 'tables-calcul-impots',
   950	    label: 'Tables Calcul Impots',
   951	    icon: React.createElement(Calculate),
   952	    component: TablesCalculImpots,
   953	    description: 'Calculs automatiques IS, TVA, taxes',
   954	    status: 'complete', completude: 100, category: 'Calculs fiscaux', order: 3, isVisible: true,
   955	  },
   956	]
   957	
   958	/**
   959	 * Retourne les composants adapt√©s au type de liasse
   960	 */
   961	export type TypeLiasseComponents = 'SN' | 'SMT' | 'BANQUE' | 'ASSURANCE' | 'MICROFINANCE' | 'EBNL' | 'CONSO'
   962	
   963	export function getComponentsForType(type: TypeLiasseComponents): LiasseComponentConfig[] {
   964	  switch (type) {
   965	    case 'SMT': return SMT_COMPONENTS
   966	    case 'BANQUE': return BANQUE_COMPONENTS
   967	    case 'ASSURANCE': return ASSURANCE_COMPONENTS
   968	    case 'MICROFINANCE': return MICROFINANCE_COMPONENTS
   969	    case 'EBNL': return EBNL_COMPONENTS
   970	    case 'CONSO':
   971	    case 'SN':
   972	    default:
   973	      return LIASSE_COMPONENTS
   974	  }
   975	}
   976	
   977	// Fonction utilitaire pour obtenir un composant par ID
   978	export const getComponentById = (id: string): LiasseComponentConfig | undefined => {
   979	  return LIASSE_COMPONENTS.find(comp => comp.id === id)
   980	}
   981	
   982	// Fonction pour obtenir les composants par cat√©gorie
   983	export const getComponentsByCategory = (): Record<string, LiasseComponentConfig[]> => {
   984	  return LIASSE_COMPONENTS.reduce((acc, comp) => {
   985	    if (!acc[comp.category]) {
   986	      acc[comp.category] = []
   987	    }
   988	    acc[comp.category].push(comp)
   989	    return acc
   990	  }, {} as Record<string, LiasseComponentConfig[]>)
   991	}
   992	
   993	// Calcul de la compl√©tude globale
   994	export const getGlobalCompletude = (): number => {
   995	  const visibleComponents = LIASSE_COMPONENTS.filter(comp => comp.isVisible)
   996	  const totalCompletude = visibleComponents.reduce((sum, comp) => sum + comp.completude, 0)
   997	  return Math.round(totalCompletude / visibleComponents.length)
   998	}
   999	
  1000	// Statistiques par statut
  1001	export const getStatusStats = () => {
  1002	  const visibleComponents = LIASSE_COMPONENTS.filter(comp => comp.isVisible)
  1003	  return {
  1004	    total: visibleComponents.length,
  1005	    complete: visibleComponents.filter(comp => comp.status === 'complete').length,
  1006	    partial: visibleComponents.filter(comp => comp.status === 'partial').length,
  1007	    empty: visibleComponents.filter(comp => comp.status === 'empty').length,
  1008	  }
  1009	}
================================================================================
FILE: src/config/liasseFiscaleSheets.ts
================================================================================
     1	/**
     2	 * Configuration compl√®te des onglets de la Liasse Fiscale SYSCOHADA
     3	 * Bas√© sur le fichier Excel : Liasse_systeme_normal_2024_V9_AJM_23052025-REV PA.xlsx
     4	 */
     5	
     6	export interface SheetConfig {
     7	  id: string
     8	  name: string
     9	  title: string
    10	  category: 'cover' | 'guards' | 'fiches' | 'statements' | 'notes' | 'supplements' | 'comments'
    11	  order: number
    12	  required: boolean
    13	  hasComments: boolean
    14	  description?: string
    15	  columns?: ColumnConfig[]
    16	  validation?: ValidationRule[]
    17	}
    18	
    19	export interface ColumnConfig {
    20	  id: string
    21	  label: string
    22	  type: 'text' | 'number' | 'currency' | 'percentage' | 'date' | 'formula'
    23	  width?: string
    24	  editable: boolean
    25	  required?: boolean
    26	  formula?: string
    27	}
    28	
    29	export interface ValidationRule {
    30	  type: 'required' | 'sum' | 'balance' | 'range' | 'format'
    31	  field?: string
    32	  message: string
    33	  severity: 'error' | 'warning'
    34	}
    35	
    36	export const LIASSE_SHEETS: SheetConfig[] = [
    37	  // Pages de garde et administration
    38	  {
    39	    id: 'couverture',
    40	    name: 'COUVERTURE',
    41	    title: 'Page de Couverture',
    42	    category: 'cover',
    43	    order: 1,
    44	    required: true,
    45	    hasComments: true,
    46	    description: 'Page de couverture de la liasse fiscale'
    47	  },
    48	  {
    49	    id: 'tables_calcul_impots',
    50	    name: 'TABLES_CALCUL_IMPOTS',
    51	    title: 'Tables de Calcul des Imp√¥ts',
    52	    category: 'supplements',
    53	    order: 2,
    54	    required: true,
    55	    hasComments: true,
    56	    description: 'Calculs automatiques IS, TVA, taxes diverses selon pays OHADA'
    57	  },
    58	  {
    59	    id: 'tableaux_supplementaires', 
    60	    name: 'TABLEAUX_SUPPLEMENTAIRES',
    61	    title: 'Tableaux Suppl√©mentaires',
    62	    category: 'supplements',
    63	    order: 3,
    64	    required: true,
    65	    hasComments: true,
    66	    description: 'Effectif, filiales, engagements hors bilan'
    67	  },
    68	  {
    69	    id: 'garde',
    70	    name: 'GARDE',
    71	    title: 'Page de Garde',
    72	    category: 'guards',
    73	    order: 2,
    74	    required: true,
    75	    hasComments: true,
    76	    description: 'Informations g√©n√©rales de l\'entreprise'
    77	  },
    78	  {
    79	    id: 'recevabilite',
    80	    name: 'RECEVABILITE',
    81	    title: 'Recevabilit√©',
    82	    category: 'guards',
    83	    order: 3,
    84	    required: true,
    85	    hasComments: true,
    86	    description: 'Crit√®res de recevabilit√© de la d√©claration'
    87	  },
    88	
    89	  // Tables de r√©f√©rence
    90	  {
    91	    id: 'note36_codes',
    92	    name: 'NOTE36 (TABLE DES CODES)',
    93	    title: 'Note 36 - Table des Codes',
    94	    category: 'notes',
    95	    order: 4,
    96	    required: false,
    97	    hasComments: true,
    98	    description: 'Table de r√©f√©rence des codes comptables'
    99	  },
   100	  {
   101	    id: 'note36_nomenclature',
   102	    name: 'NOTE36 Suite (Nomenclature)',
   103	    title: 'Note 36 - Nomenclature',
   104	    category: 'notes',
   105	    order: 5,
   106	    required: false,
   107	    hasComments: true,
   108	    description: 'Nomenclature comptable d√©taill√©e'
   109	  },
   110	
   111	  // Fiches R1 √† R4
   112	  {
   113	    id: 'fiche_r1',
   114	    name: 'FICHE R1',
   115	    title: 'Fiche R1 - Renseignements G√©n√©raux',
   116	    category: 'fiches',
   117	    order: 6,
   118	    required: true,
   119	    hasComments: true,
   120	    description: 'Identification et renseignements g√©n√©raux'
   121	  },
   122	  {
   123	    id: 'fiche_r2',
   124	    name: 'FICHE R2',
   125	    title: 'Fiche R2 - Dirigeants et CAC',
   126	    category: 'fiches',
   127	    order: 7,
   128	    required: true,
   129	    hasComments: true,
   130	    description: 'Dirigeants et commissaires aux comptes'
   131	  },
   132	  {
   133	    id: 'fiche_r3',
   134	    name: 'FICHE R3',
   135	    title: 'Fiche R3 - Participations',
   136	    category: 'fiches',
   137	    order: 8,
   138	    required: true,
   139	    hasComments: true,
   140	    description: 'Participations et filiales'
   141	  },
   142	  {
   143	    id: 'fiche_r4',
   144	    name: 'FICHE R4',
   145	    title: 'Fiche R4 - Informations Compl√©mentaires',
   146	    category: 'fiches',
   147	    order: 14,
   148	    required: false,
   149	    hasComments: true,
   150	    description: 'Informations compl√©mentaires'
   151	  },
   152	
   153	  // √âtats Financiers Principaux
   154	  {
   155	    id: 'bilan',
   156	    name: 'BILAN',
   157	    title: 'Bilan Synth√©tique',
   158	    category: 'statements',
   159	    order: 9,
   160	    required: true,
   161	    hasComments: true,
   162	    description: 'Bilan synth√©tique de l\'exercice'
   163	  },
   164	  {
   165	    id: 'actif',
   166	    name: 'ACTIF',
   167	    title: 'Bilan - Actif',
   168	    category: 'statements',
   169	    order: 10,
   170	    required: true,
   171	    hasComments: true,
   172	    description: 'D√©tail de l\'actif du bilan',
   173	    columns: [
   174	      { id: 'ref', label: 'R√©f', type: 'text', editable: false, width: '80px' },
   175	      { id: 'poste', label: 'ACTIF', type: 'text', editable: false, width: '400px' },
   176	      { id: 'note', label: 'Note', type: 'text', editable: true, width: '80px' },
   177	      { id: 'brut', label: 'Brut', type: 'currency', editable: true, width: '150px' },
   178	      { id: 'amort_prov', label: 'Amort./Prov.', type: 'currency', editable: true, width: '150px' },
   179	      { id: 'net', label: 'Net', type: 'currency', editable: false, width: '150px', formula: 'brut - amort_prov' },
   180	      { id: 'net_n1', label: 'Net N-1', type: 'currency', editable: true, width: '150px' }
   181	    ]
   182	  },
   183	  {
   184	    id: 'passif',
   185	    name: 'PASSIF',
   186	    title: 'Bilan - Passif',
   187	    category: 'statements',
   188	    order: 11,
   189	    required: true,
   190	    hasComments: true,
   191	    description: 'D√©tail du passif du bilan',
   192	    columns: [
   193	      { id: 'ref', label: 'R√©f', type: 'text', editable: false, width: '80px' },
   194	      { id: 'poste', label: 'PASSIF', type: 'text', editable: false, width: '400px' },
   195	      { id: 'note', label: 'Note', type: 'text', editable: true, width: '80px' },
   196	      { id: 'net', label: 'Net', type: 'currency', editable: true, width: '150px' },
   197	      { id: 'net_n1', label: 'Net N-1', type: 'currency', editable: true, width: '150px' }
   198	    ]
   199	  },
   200	  {
   201	    id: 'resultat',
   202	    name: 'RESULTAT',
   203	    title: 'Compte de R√©sultat',
   204	    category: 'statements',
   205	    order: 12,
   206	    required: true,
   207	    hasComments: true,
   208	    description: 'Compte de r√©sultat de l\'exercice',
   209	    columns: [
   210	      { id: 'ref', label: 'R√©f', type: 'text', editable: false, width: '80px' },
   211	      { id: 'libelle', label: 'Libell√©', type: 'text', editable: false, width: '400px' },
   212	      { id: 'note', label: 'Note', type: 'text', editable: true, width: '80px' },
   213	      { id: 'montant', label: 'Exercice N', type: 'currency', editable: true, width: '150px' },
   214	      { id: 'montant_n1', label: 'Exercice N-1', type: 'currency', editable: true, width: '150px' }
   215	    ]
   216	  },
   217	  {
   218	    id: 'tft',
   219	    name: 'TFT',
   220	    title: 'Tableau de Flux de Tr√©sorerie',
   221	    category: 'statements',
   222	    order: 13,
   223	    required: true,
   224	    hasComments: true,
   225	    description: 'Tableau des flux de tr√©sorerie'
   226	  },
   227	
   228	  // Notes annexes (NOTE 1 √† NOTE 39)
   229	  ...Array.from({ length: 39 }, (_, i) => {
   230	    const noteNumber = i + 1
   231	    const noteId = noteNumber === 36 ? 'note36_details' : `note${noteNumber}`
   232	    return {
   233	      id: noteId,
   234	      name: `NOTE ${noteNumber}`,
   235	      title: `Note ${noteNumber} - ${getNoteTitle(noteNumber)}`,
   236	      category: 'notes' as const,
   237	      order: 15 + i,
   238	      required: isNoteRequired(noteNumber),
   239	      hasComments: true,
   240	      description: getNoteDescription(noteNumber)
   241	    }
   242	  }),
   243	
   244	  // Gardes sp√©cifiques DGI/INS
   245	  {
   246	    id: 'garde_dgi_ins',
   247	    name: 'GARDE (DGI-INS)',
   248	    title: 'Garde DGI-INS',
   249	    category: 'guards',
   250	    order: 55,
   251	    required: false,
   252	    hasComments: true
   253	  },
   254	  {
   255	    id: 'notes_dgi_ins',
   256	    name: 'NOTES DGI - INS',
   257	    title: 'Notes DGI-INS',
   258	    category: 'notes',
   259	    order: 56,
   260	    required: false,
   261	    hasComments: true
   262	  },
   263	
   264	  // Compl√©ments
   265	  {
   266	    id: 'comp_charges',
   267	    name: 'COMP-CHARGES',
   268	    title: 'Compl√©ment - Charges',
   269	    category: 'supplements',
   270	    order: 57,
   271	    required: false,
   272	    hasComments: true
   273	  },
   274	  {
   275	    id: 'comp_tva',
   276	    name: 'COMP-TVA',
   277	    title: 'Compl√©ment - TVA',
   278	    category: 'supplements',
   279	    order: 58,
   280	    required: false,
   281	    hasComments: true
   282	  },
   283	  {
   284	    id: 'comp_tva_2',
   285	    name: 'COMP-TVA (2)',
   286	    title: 'Compl√©ment - TVA (Suite)',
   287	    category: 'supplements',
   288	    order: 59,
   289	    required: false,
   290	    hasComments: true
   291	  },
   292	
   293	  // Suppl√©ments
   294	  ...Array.from({ length: 7 }, (_, i) => ({
   295	    id: `suppl${i + 1}`,
   296	    name: `SUPPL${i + 1}`,
   297	    title: `Suppl√©ment ${i + 1}`,
   298	    category: 'supplements' as const,
   299	    order: 60 + i,
   300	    required: false,
   301	    hasComments: true
   302	  })),
   303	
   304	  // Gardes sp√©cialis√©es
   305	  {
   306	    id: 'garde_bic',
   307	    name: 'GARDE (BIC)',
   308	    title: 'Garde BIC',
   309	    category: 'guards',
   310	    order: 67,
   311	    required: false,
   312	    hasComments: true
   313	  },
   314	  {
   315	    id: 'garde_bnc',
   316	    name: 'GARDE (BNC)',
   317	    title: 'Garde BNC',
   318	    category: 'guards',
   319	    order: 68,
   320	    required: false,
   321	    hasComments: true
   322	  },
   323	  {
   324	    id: 'garde_ba',
   325	    name: 'GARDE (BA)',
   326	    title: 'Garde BA',
   327	    category: 'guards',
   328	    order: 69,
   329	    required: false,
   330	    hasComments: true
   331	  },
   332	  {
   333	    id: 'garde_301',
   334	    name: 'GARDE (301)',
   335	    title: 'Garde 301',
   336	    category: 'guards',
   337	    order: 70,
   338	    required: false,
   339	    hasComments: true
   340	  },
   341	  {
   342	    id: 'garde_302',
   343	    name: 'GARDE (302)',
   344	    title: 'Garde 302',
   345	    category: 'guards',
   346	    order: 71,
   347	    required: false,
   348	    hasComments: true
   349	  },
   350	  {
   351	    id: 'garde_3',
   352	    name: 'GARDE(3)',
   353	    title: 'Garde 3',
   354	    category: 'guards',
   355	    order: 72,
   356	    required: false,
   357	    hasComments: true
   358	  },
   359	
   360	  // Commentaire final
   361	  {
   362	    id: 'commentaire',
   363	    name: 'COMMENTAIRE',
   364	    title: 'Commentaires G√©n√©raux',
   365	    category: 'comments',
   366	    order: 73,
   367	    required: false,
   368	    hasComments: true,
   369	    description: 'Commentaires g√©n√©raux sur la liasse fiscale'
   370	  }
   371	]
   372	
   373	// Fonctions utilitaires pour les notes
   374	export function getNoteTitle(noteNumber: number): string {
   375	  const noteTitles: { [key: number]: string } = {
   376	    1: 'M√©thodes comptables',
   377	    2: 'Changements de m√©thodes',
   378	    3: 'Immobilisations',
   379	    4: '√âtat des cr√©ances et dettes',
   380	    5: 'Provisions',
   381	    6: 'Capitaux propres',
   382	    7: 'Tableau de variation des capitaux propres',
   383	    8: 'Charges et produits',
   384	    9: 'Engagements hors bilan',
   385	    10: '√âv√©nements post√©rieurs',
   386	    11: 'Informations sectorielles',
   387	    12: 'Effectif et charges de personnel',
   388	    13: 'R√©mun√©ration des dirigeants',
   389	    14: 'Imp√¥ts et taxes',
   390	    15: 'Tableau de d√©termination du r√©sultat fiscal',
   391	    16: 'Affectation du r√©sultat',
   392	    17: 'Tableau des soldes interm√©diaires de gestion',
   393	    18: 'Capacit√© d\'autofinancement',
   394	    19: '√âtat des stocks',
   395	    20: '√âtat des amortissements',
   396	    21: 'Plus et moins-values',
   397	    22: '√âtat des provisions',
   398	    23: 'Cr√©dit-bail',
   399	    24: '√âch√©ancier des cr√©ances et dettes',
   400	    25: 'Charges √† payer et produits √† recevoir',
   401	    26: 'Charges et produits constat√©s d\'avance',
   402	    27: 'Composition du capital social',
   403	    28: 'Filiales et participations',
   404	    29: 'Op√©rations avec les entreprises li√©es',
   405	    30: 'Int√©gration fiscale',
   406	    31: 'Tableau de passage',
   407	    32: 'Informations diverses',
   408	    33: '√âtat de rapprochement',
   409	    34: 'Tableau de r√©partition des b√©n√©fices',
   410	    35: '√âtat des d√©ficits',
   411	    36: 'Table des codes',
   412	    37: 'Informations compl√©mentaires',
   413	    38: 'D√©clarations sp√©ciales',
   414	    39: 'Attestations et certifications'
   415	  }
   416	  return noteTitles[noteNumber] || `Annexe ${noteNumber}`
   417	}
   418	
   419	export function getNoteDescription(noteNumber: number): string {
   420	  const noteDescriptions: { [key: number]: string } = {
   421	    1: 'Principes et m√©thodes comptables appliqu√©s',
   422	    2: 'Changements de m√©thodes comptables et impacts',
   423	    3: 'D√©tail et mouvements des immobilisations',
   424	    4: 'Ventilation des cr√©ances et dettes par √©ch√©ance',
   425	    5: '√âtat d√©taill√© des provisions',
   426	    6: 'Composition et variation des capitaux propres',
   427	    // ... autres descriptions
   428	  }
   429	  return noteDescriptions[noteNumber] || `Note annexe num√©ro ${noteNumber}`
   430	}
   431	
   432	function isNoteRequired(noteNumber: number): boolean {
   433	  // Notes obligatoires selon SYSCOHADA
   434	  const requiredNotes = [1, 2, 3, 4, 5, 6, 7, 8, 14, 15, 16, 17, 20, 22, 27, 31]
   435	  return requiredNotes.includes(noteNumber)
   436	}
   437	
   438	// ============ SMT Sheets ============
   439	export const SMT_SHEETS: SheetConfig[] = [
   440	  {
   441	    id: 'couverture',
   442	    name: 'COUVERTURE',
   443	    title: 'Page de Couverture',
   444	    category: 'cover',
   445	    order: 1,
   446	    required: true,
   447	    hasComments: true,
   448	    description: 'Page de couverture de la liasse fiscale SMT',
   449	  },
   450	  {
   451	    id: 'fiche_r1',
   452	    name: 'FICHE R1',
   453	    title: 'Fiche R1 - Renseignements Generaux',
   454	    category: 'fiches',
   455	    order: 2,
   456	    required: true,
   457	    hasComments: true,
   458	    description: 'Identification et renseignements generaux',
   459	  },
   460	  {
   461	    id: 'bilan_smt',
   462	    name: 'BILAN SMT',
   463	    title: 'Bilan Simplifie SMT',
   464	    category: 'statements',
   465	    order: 3,
   466	    required: true,
   467	    hasComments: true,
   468	    description: 'Bilan simplifie - Actif et Passif (une page)',
   469	    columns: [
   470	      { id: 'ref', label: 'Ref', type: 'text', editable: false, width: '80px' },
   471	      { id: 'libelle', label: 'Libelle', type: 'text', editable: false, width: '400px' },
   472	      { id: 'montant', label: 'Exercice N', type: 'currency', editable: true, width: '150px' },
   473	      { id: 'montant_n1', label: 'Exercice N-1', type: 'currency', editable: true, width: '150px' },
   474	    ],
   475	  },
   476	  {
   477	    id: 'cdr_smt',
   478	    name: 'CdR SMT',
   479	    title: 'Compte de Resultat Simplifie SMT',
   480	    category: 'statements',
   481	    order: 4,
   482	    required: true,
   483	    hasComments: true,
   484	    description: 'Compte de resultat simplifie',
   485	    columns: [
   486	      { id: 'ref', label: 'Ref', type: 'text', editable: false, width: '80px' },
   487	      { id: 'libelle', label: 'Libelle', type: 'text', editable: false, width: '400px' },
   488	      { id: 'montant', label: 'Exercice N', type: 'currency', editable: true, width: '150px' },
   489	      { id: 'montant_n1', label: 'Exercice N-1', type: 'currency', editable: true, width: '150px' },
   490	    ],
   491	  },
   492	  // Notes reduites pour SMT (3-5 notes essentielles)
   493	  {
   494	    id: 'note1',
   495	    name: 'NOTE 1',
   496	    title: 'Note 1 - Methodes comptables',
   497	    category: 'notes',
   498	    order: 5,
   499	    required: true,
   500	    hasComments: true,
   501	    description: 'Principes et methodes comptables appliques',
   502	  },
   503	  {
   504	    id: 'note3',
   505	    name: 'NOTE 3',
   506	    title: 'Note 3 - Immobilisations',
   507	    category: 'notes',
   508	    order: 6,
   509	    required: true,
   510	    hasComments: true,
   511	    description: 'Detail et mouvements des immobilisations',
   512	  },
   513	  {
   514	    id: 'note5',
   515	    name: 'NOTE 5',
   516	    title: 'Note 5 - Provisions',
   517	    category: 'notes',
   518	    order: 7,
   519	    required: false,
   520	    hasComments: true,
   521	    description: 'Etat detaille des provisions',
   522	  },
   523	  {
   524	    id: 'tables_calcul_impots',
   525	    name: 'TABLES_CALCUL_IMPOTS',
   526	    title: 'Tables de Calcul des Impots',
   527	    category: 'supplements',
   528	    order: 8,
   529	    required: true,
   530	    hasComments: true,
   531	    description: 'Calculs automatiques IS, TVA, taxes selon pays OHADA',
   532	  },
   533	]
   534	
   535	// ============ Banque Sheets ============
   536	export const BANQUE_SHEETS: SheetConfig[] = [
   537	  { id: 'couverture', name: 'COUVERTURE', title: 'Page de Couverture', category: 'cover', order: 1, required: true, hasComments: true },
   538	  { id: 'fiche_r1', name: 'FICHE R1', title: 'Fiche R1 - Renseignements Generaux', category: 'fiches', order: 2, required: true, hasComments: true },
   539	  { id: 'bilan_banque', name: 'BILAN BANQUE', title: 'Bilan Bancaire', category: 'statements', order: 3, required: true, hasComments: true, description: 'Bilan bancaire PCEC/PCB' },
   540	  { id: 'cdr_banque', name: 'COMPTE EXPLOITATION', title: 'Compte d\'Exploitation Bancaire', category: 'statements', order: 4, required: true, hasComments: true, description: 'Produit net bancaire et resultat' },
   541	  { id: 'hors_bilan_banque', name: 'HORS BILAN', title: 'Engagements Hors Bilan', category: 'statements', order: 5, required: true, hasComments: true },
   542	  { id: 'sig_banque', name: 'SIG', title: 'Soldes Intermediaires de Gestion', category: 'statements', order: 6, required: true, hasComments: true },
   543	  { id: 'tft_banque', name: 'TFT', title: 'Tableau de Flux de Tresorerie', category: 'statements', order: 7, required: true, hasComments: true },
   544	  { id: 'tables_calcul_impots', name: 'TABLES_CALCUL_IMPOTS', title: 'Tables de Calcul des Impots', category: 'supplements', order: 8, required: true, hasComments: true },
   545	]
   546	
   547	// ============ Assurance Sheets ============
   548	export const ASSURANCE_SHEETS: SheetConfig[] = [
   549	  { id: 'couverture', name: 'COUVERTURE', title: 'Page de Couverture', category: 'cover', order: 1, required: true, hasComments: true },
   550	  { id: 'fiche_r1', name: 'FICHE R1', title: 'Fiche R1 - Renseignements Generaux', category: 'fiches', order: 2, required: true, hasComments: true },
   551	  { id: 'bilan_assurance', name: 'BILAN ASSURANCE', title: 'Bilan Assurance', category: 'statements', order: 3, required: true, hasComments: true, description: 'Bilan specifique assurance CIMA' },
   552	  { id: 'cdr_assurance', name: 'COMPTE RESULTAT', title: 'Compte de Resultat Assurance', category: 'statements', order: 4, required: true, hasComments: true, description: 'Compte technique et non-technique' },
   553	  { id: 'etats_cima_c1', name: 'ETAT C1', title: 'Etat modele C1 CIMA', category: 'statements', order: 5, required: true, hasComments: true },
   554	  { id: 'etats_cima_c9', name: 'ETAT C9', title: 'Etat modele C9 CIMA', category: 'statements', order: 6, required: true, hasComments: true },
   555	  { id: 'etats_cima_c10a', name: 'ETAT C10a', title: 'Etat modele C10a CIMA', category: 'statements', order: 7, required: true, hasComments: true },
   556	  { id: 'tables_calcul_impots', name: 'TABLES_CALCUL_IMPOTS', title: 'Tables de Calcul des Impots', category: 'supplements', order: 8, required: true, hasComments: true },
   557	]
   558	
   559	// ============ Microfinance Sheets ============
   560	export const MICROFINANCE_SHEETS: SheetConfig[] = [
   561	  { id: 'couverture', name: 'COUVERTURE', title: 'Page de Couverture', category: 'cover', order: 1, required: true, hasComments: true },
   562	  { id: 'fiche_r1', name: 'FICHE R1', title: 'Fiche R1 - Renseignements Generaux', category: 'fiches', order: 2, required: true, hasComments: true },
   563	  { id: 'bilan_microfinance', name: 'BILAN SFD', title: 'Bilan SFD', category: 'statements', order: 3, required: true, hasComments: true, description: 'Bilan SFD BCEAO/COBAC' },
   564	  { id: 'cdr_microfinance', name: 'COMPTE RESULTAT SFD', title: 'Compte de Resultat SFD', category: 'statements', order: 4, required: true, hasComments: true },
   565	  { id: 'hors_bilan_sfd', name: 'HORS BILAN', title: 'Engagements Hors Bilan SFD', category: 'statements', order: 5, required: true, hasComments: true },
   566	  { id: 'tft_sfd', name: 'TFT', title: 'Tableau de Flux de Tresorerie SFD', category: 'statements', order: 6, required: true, hasComments: true },
   567	  { id: 'tables_calcul_impots', name: 'TABLES_CALCUL_IMPOTS', title: 'Tables de Calcul des Impots', category: 'supplements', order: 7, required: true, hasComments: true },
   568	]
   569	
   570	// ============ EBNL Sheets ============
   571	export const EBNL_SHEETS: SheetConfig[] = [
   572	  { id: 'couverture', name: 'COUVERTURE', title: 'Page de Couverture', category: 'cover', order: 1, required: true, hasComments: true },
   573	  { id: 'fiche_r1', name: 'FICHE R1', title: 'Fiche R1 - Renseignements Generaux', category: 'fiches', order: 2, required: true, hasComments: true },
   574	  { id: 'bilan_ebnl', name: 'BILAN EBNL', title: 'Bilan EBNL', category: 'statements', order: 3, required: true, hasComments: true, description: 'Bilan SYCEBNL avec fonds associatifs' },
   575	  { id: 'cdr_ebnl', name: 'COMPTE RESULTAT EBNL', title: 'Compte de Resultat EBNL', category: 'statements', order: 4, required: true, hasComments: true, description: 'CdR avec cotisations, dons, subventions' },
   576	  { id: 'note1', name: 'NOTE 1', title: 'Note 1 - Methodes comptables', category: 'notes', order: 5, required: true, hasComments: true },
   577	  { id: 'tables_calcul_impots', name: 'TABLES_CALCUL_IMPOTS', title: 'Tables de Calcul des Impots', category: 'supplements', order: 6, required: true, hasComments: true },
   578	]
   579	
   580	/**
   581	 * Retourne la liste des sheets adaptees au type de liasse
   582	 */
   583	export type TypeLiasseSheets = 'SN' | 'SMT' | 'BANQUE' | 'ASSURANCE' | 'MICROFINANCE' | 'EBNL' | 'CONSO'
   584	
   585	export function getSheetsForType(type: TypeLiasseSheets): SheetConfig[] {
   586	  switch (type) {
   587	    case 'SMT': return SMT_SHEETS
   588	    case 'BANQUE': return BANQUE_SHEETS
   589	    case 'ASSURANCE': return ASSURANCE_SHEETS
   590	    case 'MICROFINANCE': return MICROFINANCE_SHEETS
   591	    case 'EBNL': return EBNL_SHEETS
   592	    case 'CONSO':
   593	    case 'SN':
   594	    default:
   595	      return LIASSE_SHEETS
   596	  }
   597	}
   598	
   599	// ============ R√©gimes d'imposition ============
   600	
   601	export type RegimeImposition = 'REEL_NORMAL' | 'REEL_SIMPLIFIE' | 'FORFAITAIRE' | 'MICRO'
   602	
   603	export const REGIME_LABELS: Record<RegimeImposition, string> = {
   604	  REEL_NORMAL: 'R√©el Normal',
   605	  REEL_SIMPLIFIE: 'R√©el Simplifi√©',
   606	  FORFAITAIRE: 'Forfaitaire',
   607	  MICRO: 'Micro-entreprise',
   608	}
   609	
   610	type SheetRequirement = 'obligatoire' | 'facultatif' | 'exclu'
   611	
   612	// Notes obligatoires selon SYSCOHADA (pour R√©el Normal)
   613	const REQUIRED_NOTE_NUMBERS = [1, 2, 3, 4, 5, 6, 7, 8, 14, 15, 16, 17, 20, 22, 27, 31]
   614	
   615	function getSheetRegimeRule(sheetId: string): Record<RegimeImposition, SheetRequirement> {
   616	  // Couverture - obligatoire pour tous
   617	  if (sheetId === 'couverture') {
   618	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'obligatoire', FORFAITAIRE: 'obligatoire', MICRO: 'obligatoire' }
   619	  }
   620	
   621	  // Pages de garde (garde, recevabilite)
   622	  if (sheetId === 'garde' || sheetId === 'recevabilite') {
   623	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'obligatoire', FORFAITAIRE: 'facultatif', MICRO: 'exclu' }
   624	  }
   625	
   626	  // Garde DGI-INS
   627	  if (sheetId === 'garde_dgi_ins') {
   628	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'exclu', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   629	  }
   630	
   631	  // Gardes sp√©cialis√©es (BIC, BNC, BA, 301, 302, 3)
   632	  if (['garde_bic', 'garde_bnc', 'garde_ba', 'garde_301', 'garde_302', 'garde_3'].includes(sheetId)) {
   633	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'exclu', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   634	  }
   635	
   636	  // Fiche R1 - obligatoire pour tous
   637	  if (sheetId === 'fiche_r1') {
   638	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'obligatoire', FORFAITAIRE: 'obligatoire', MICRO: 'obligatoire' }
   639	  }
   640	
   641	  // Fiche R2, R3
   642	  if (sheetId === 'fiche_r2' || sheetId === 'fiche_r3') {
   643	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'facultatif', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   644	  }
   645	
   646	  // Fiche R4
   647	  if (sheetId === 'fiche_r4') {
   648	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'exclu', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   649	  }
   650	
   651	  // Bilan synth√©tique
   652	  if (sheetId === 'bilan') {
   653	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'obligatoire', FORFAITAIRE: 'facultatif', MICRO: 'exclu' }
   654	  }
   655	
   656	  // Actif, Passif
   657	  if (sheetId === 'actif' || sheetId === 'passif') {
   658	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'obligatoire', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   659	  }
   660	
   661	  // R√©sultat
   662	  if (sheetId === 'resultat') {
   663	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'obligatoire', FORFAITAIRE: 'obligatoire', MICRO: 'facultatif' }
   664	  }
   665	
   666	  // TFT
   667	  if (sheetId === 'tft') {
   668	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'facultatif', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   669	  }
   670	
   671	  // Tables calcul imp√¥ts
   672	  if (sheetId === 'tables_calcul_impots') {
   673	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'obligatoire', FORFAITAIRE: 'facultatif', MICRO: 'exclu' }
   674	  }
   675	
   676	  // Tableaux suppl√©mentaires
   677	  if (sheetId === 'tableaux_supplementaires') {
   678	    return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'facultatif', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   679	  }
   680	
   681	  // Notes DGI-INS
   682	  if (sheetId === 'notes_dgi_ins') {
   683	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'exclu', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   684	  }
   685	
   686	  // Note 36 (codes, nomenclature, details)
   687	  if (sheetId === 'note36_codes' || sheetId === 'note36_nomenclature' || sheetId === 'note36_details') {
   688	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'exclu', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   689	  }
   690	
   691	  // Notes 1-39 (excluding note36 handled above)
   692	  const noteMatch = sheetId.match(/^note(\d+)$/)
   693	  if (noteMatch) {
   694	    const noteNum = parseInt(noteMatch[1])
   695	    if (REQUIRED_NOTE_NUMBERS.includes(noteNum)) {
   696	      // Notes obligatoires
   697	      return { REEL_NORMAL: 'obligatoire', REEL_SIMPLIFIE: 'facultatif', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   698	    } else {
   699	      // Notes facultatives
   700	      return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'exclu', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   701	    }
   702	  }
   703	
   704	  // Compl√©ments (charges, TVA)
   705	  if (sheetId === 'comp_charges' || sheetId === 'comp_tva' || sheetId === 'comp_tva_2') {
   706	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'facultatif', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   707	  }
   708	
   709	  // Suppl√©ments (1-7)
   710	  if (sheetId.startsWith('suppl')) {
   711	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'exclu', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   712	  }
   713	
   714	  // Commentaire
   715	  if (sheetId === 'commentaire') {
   716	    return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'facultatif', FORFAITAIRE: 'facultatif', MICRO: 'exclu' }
   717	  }
   718	
   719	  // D√©faut : facultatif pour r√©el, exclu pour les autres
   720	  return { REEL_NORMAL: 'facultatif', REEL_SIMPLIFIE: 'facultatif', FORFAITAIRE: 'exclu', MICRO: 'exclu' }
   721	}
   722	
   723	/** Retourne le statut d'un onglet pour un r√©gime donn√© */
   724	export function getSheetRequirement(sheetId: string, regime: RegimeImposition): SheetRequirement {
   725	  return getSheetRegimeRule(sheetId)[regime]
   726	}
   727	
   728	/** Retourne les sheets visibles (non exclus) pour un r√©gime donn√© */
   729	export function getVisibleSheets(regime: RegimeImposition): SheetConfig[] {
   730	  return LIASSE_SHEETS.filter(sheet => getSheetRequirement(sheet.id, regime) !== 'exclu')
   731	}
   732	
   733	/** Retourne le nombre d'onglets obligatoires et facultatifs pour un r√©gime */
   734	export function getSheetCounts(regime: RegimeImposition): { obligatoire: number; facultatif: number } {
   735	  let obligatoire = 0
   736	  let facultatif = 0
   737	  for (const sheet of LIASSE_SHEETS) {
   738	    const req = getSheetRequirement(sheet.id, regime)
   739	    if (req === 'obligatoire') obligatoire++
   740	    else if (req === 'facultatif') facultatif++
   741	  }
   742	  return { obligatoire, facultatif }
   743	}
   744	
   745	// Export des cat√©gories
   746	export const SHEET_CATEGORIES = [
   747	  { id: 'cover', label: 'Couverture', icon: 'üìã', color: '#3b82f6' },
   748	  { id: 'guards', label: 'Pages de Garde', icon: 'üìë', color: '#22c55e' },
   749	  { id: 'fiches', label: 'Fiches de Renseignements', icon: 'üìù', color: '#f59e0b' },
   750	  { id: 'statements', label: '√âtats Financiers', icon: 'üìä', color: '#8b5cf6' },
   751	  { id: 'notes', label: 'Notes Annexes', icon: 'üìÑ', color: '#06b6d4' },
   752	  { id: 'supplements', label: 'Suppl√©ments', icon: '‚ûï', color: '#FFC107' },
   753	  { id: 'comments', label: 'Commentaires', icon: 'üí¨', color: '#607D8B' }
   754	]
   755	
   756	// Validation rules globales
   757	export const GLOBAL_VALIDATIONS = [
   758	  {
   759	    type: 'balance',
   760	    message: 'Le total actif doit √™tre √©gal au total passif',
   761	    severity: 'error'
   762	  },
   763	  {
   764	    type: 'consistency',
   765	    message: 'Les montants doivent √™tre coh√©rents entre les diff√©rents tableaux',
   766	    severity: 'warning'
   767	  }
   768	]
================================================================================
FILE: src/data/mockBalance.ts
================================================================================
     1	/**
     2	 * Balance de d√©monstration SYSCOHADA
     3	 * Entreprise : TAXPILOT DEMO SARL ‚Äî Exercice 2024
     4	 * Activit√© : Commerce g√©n√©ral + Services informatiques
     5	 * CA : ~250M FCFA ‚Äî R√©sultat : b√©n√©ficiaire
     6	 *
     7	 * Auto-√©quilibr√©e : le Report √† Nouveau (1101) absorbe le solde
     8	 */
     9	
    10	import type { BalanceEntry } from '../services/liasseDataService'
    11	
    12	const d = (compte: string, intitule: string, montant: number): BalanceEntry => ({
    13	  compte, intitule, debit: montant, credit: 0, solde_debit: montant, solde_credit: 0,
    14	})
    15	const c = (compte: string, intitule: string, montant: number): BalanceEntry => ({
    16	  compte, intitule, debit: 0, credit: montant, solde_debit: 0, solde_credit: montant,
    17	})
    18	
    19	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    20	// Comptes bilan (classes 1-5) ‚Äî SANS 1101 ni 1300
    21	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    22	
    23	const BILAN_FIXE: BalanceEntry[] = [
    24	  // ‚îÄ‚îÄ Classe 1 : Capitaux & Dettes financi√®res ‚îÄ‚îÄ
    25	  c('1011',  'Capital social',                          50_000_000),
    26	  c('1051',  'Primes d\'apport',                         5_000_000),
    27	  c('1061',  'R√©serve l√©gale',                           5_000_000),
    28	  c('1130',  'R√©serves statutaires',                     3_000_000),
    29	  c('1410',  'Subventions d\'investissement',            2_500_000),
    30	  c('1510',  'Provisions pour litiges',                  3_500_000),
    31	  c('1620',  'Emprunts bancaires',                      45_000_000),
    32	  c('1640',  'Dettes financi√®res diverses',             12_000_000),
    33	  c('1720',  'Dettes de cr√©dit-bail',                    8_000_000),
    34	  c('1910',  'Provisions pour risques',                  4_500_000),
    35	
    36	  // ‚îÄ‚îÄ Classe 2 : Immobilisations ‚îÄ‚îÄ
    37	  d('2010',  'Frais d\'√©tablissement',                   2_500_000),
    38	  d('2130',  'Logiciels',                                8_500_000),
    39	  d('2150',  'Fonds commercial',                        12_000_000),
    40	  d('2210',  'Terrains',                                20_000_000),
    41	  d('2311',  'B√¢timents industriels',                   55_000_000),
    42	  d('2330',  'B√¢timents administratifs',                30_000_000),
    43	  d('2350',  'Installations techniques',                10_000_000),
    44	  d('2410',  'Mat√©riel industriel',                     38_000_000),
    45	  d('2440',  'Mat√©riel et mobilier de bureau',           7_500_000),
    46	  d('2450',  'Mat√©riel de transport',                   25_000_000),
    47	  d('2510',  'Avances sur immobilisations',              2_000_000),
    48	  d('2610',  'Titres de participation',                  5_000_000),
    49	  d('2710',  'Pr√™ts au personnel',                       2_000_000),
    50	  d('2750',  'D√©p√¥ts et cautionnements',                 1_500_000),
    51	
    52	  // Amortissements
    53	  c('28010', 'Amort. frais d\'√©tablissement',            1_500_000),
    54	  c('28130', 'Amort. logiciels',                         4_200_000),
    55	  c('28311', 'Amort. b√¢timents industriels',            16_500_000),
    56	  c('28330', 'Amort. b√¢timents administratifs',          6_000_000),
    57	  c('28350', 'Amort. installations techniques',          4_000_000),
    58	  c('28410', 'Amort. mat√©riel industriel',              19_000_000),
    59	  c('28440', 'Amort. mobilier de bureau',                3_000_000),
    60	  c('28450', 'Amort. mat√©riel de transport',            12_500_000),
    61	  c('29610', 'D√©pr√©ciation titres de participation',     1_000_000),
    62	
    63	  // ‚îÄ‚îÄ Classe 3 : Stocks ‚îÄ‚îÄ
    64	  d('3110',  'Marchandises A',                          16_000_000),
    65	  d('3120',  'Marchandises B',                           6_000_000),
    66	  d('3210',  'Mati√®res premi√®res',                      10_000_000),
    67	  d('3310',  'Autres approvisionnements',                3_000_000),
    68	  d('3410',  'Produits en cours',                        3_500_000),
    69	  d('3710',  'Produits finis',                           7_500_000),
    70	  c('3910',  'D√©pr√©ciation marchandises',                1_000_000),
    71	  c('3920',  'D√©pr√©ciation mati√®res premi√®res',            400_000),
    72	
    73	  // ‚îÄ‚îÄ Classe 4 : Tiers ‚îÄ‚îÄ
    74	  d('4110',  'Clients entreprises',                     25_000_000),
    75	  d('4120',  'Clients particuliers',                     5_500_000),
    76	  d('4150',  'Clients effets √† recevoir',                3_500_000),
    77	  d('4181',  'Clients factures √† √©tablir',               2_000_000),
    78	  d('4452',  'TVA r√©cup√©rable sur immobilisations',      3_200_000),
    79	  d('4455',  'TVA r√©cup√©rable sur achats',               4_800_000),
    80	  d('4710',  'D√©biteurs divers',                         1_200_000),
    81	  d('4760',  'Charges constat√©es d\'avance',             2_000_000),
    82	  c('4010',  'Fournisseurs d\'exploitation',            18_000_000),
    83	  c('4190',  'Clients cr√©diteurs (avances re√ßues)',      3_000_000),
    84	  c('4310',  'S√©curit√© sociale',                         4_200_000),
    85	  c('4410',  '√âtat, imp√¥t sur les b√©n√©fices',            4_500_000),
    86	  c('4434',  '√âtat, TVA collect√©e',                      7_500_000),
    87	  c('4210',  'Personnel, r√©mun√©rations dues',            5_800_000),
    88	  c('4280',  'Personnel, charges √† payer',               1_800_000),
    89	  c('4790',  'Produits constat√©s d\'avance',             1_500_000),
    90	  c('4910',  'D√©pr√©ciation clients',                     2_000_000),
    91	
    92	  // ‚îÄ‚îÄ Classe 5 : Tr√©sorerie ‚îÄ‚îÄ
    93	  d('5210',  'Banque BIAO-CI',                          12_000_000),
    94	  d('5220',  'Banque SGCI',                              7_000_000),
    95	  d('5310',  'Caisse principale',                        1_500_000),
    96	  d('5320',  'Caisse secondaire',                          400_000),
    97	]
    98	
    99	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   100	// Comptes de r√©sultat (classes 6-7-8)
   101	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   102	
   103	const CHARGES: BalanceEntry[] = [
   104	  // Achats et variations
   105	  d('6011',  'Achats marchandises zone UEMOA',          65_000_000),
   106	  d('6012',  'Achats marchandises import',              20_000_000),
   107	  d('60310', 'Variation stocks marchandises',            3_000_000),
   108	  d('6021',  'Achats de mati√®res premi√®res',            25_000_000),
   109	  d('60320', 'Variation stocks mati√®res premi√®res',      1_000_000),
   110	  d('6040',  'Achats mati√®res consommables',             5_000_000),
   111	  d('6050',  'Fournitures non stock√©es',                 3_800_000),
   112	  d('60330', 'Variation stocks approv.',                   600_000),
   113	  // Services
   114	  d('6110',  'Transports sur achats',                    2_800_000),
   115	  d('6120',  'Transports sur ventes',                    2_500_000),
   116	  d('6130',  'Transports pour tiers',                    1_200_000),
   117	  d('6210',  'Sous-traitance g√©n√©rale',                  4_800_000),
   118	  d('6220',  'Locations',                                4_200_000),
   119	  d('6250',  'Primes d\'assurance',                      2_000_000),
   120	  d('6310',  'Frais bancaires',                          1_500_000),
   121	  d('6320',  'R√©mun√©rations interm√©diaires',             2_800_000),
   122	  // Imp√¥ts et taxes
   123	  d('6410',  'Imp√¥ts et taxes directs',                  2_500_000),
   124	  d('6420',  'Droits d\'enregistrement',                   400_000),
   125	  d('6450',  'Imp√¥ts et taxes indirects',                1_000_000),
   126	  // Autres charges
   127	  d('6510',  'Pertes sur cr√©ances clients',              1_200_000),
   128	  d('6540',  'P√©nalit√©s',                                  200_000),
   129	  // Personnel
   130	  d('6611',  'Salaires et commissions',                 35_000_000),
   131	  d('6630',  'Indemnit√©s de logement',                   4_200_000),
   132	  d('6640',  'Charges sociales',                        11_500_000),
   133	  d('6660',  'Frais de formation',                       1_000_000),
   134	  // Dotations
   135	  d('6811',  'Dotations amort. exploitation',           14_000_000),
   136	  d('6812',  'Dotations amort. charges immo.',             500_000),
   137	  d('6910',  'Dotations provisions exploitation',        3_500_000),
   138	  // Charges financi√®res
   139	  d('6711',  'Int√©r√™ts des emprunts',                    4_800_000),
   140	  d('6720',  'Frais de d√©couvert',                       1_500_000),
   141	  d('6760',  'Pertes de change',                           600_000),
   142	  // HAO
   143	  d('8110',  'VNC des immobilisations c√©d√©es',           4_000_000),
   144	  d('8310',  'Charges HAO',                                500_000),
   145	  d('8510',  'Dotations HAO',                              400_000),
   146	  // Imp√¥t
   147	  d('8910',  'Imp√¥t sur les b√©n√©fices',                  7_500_000),
   148	]
   149	
   150	const PRODUITS: BalanceEntry[] = [
   151	  // Ventes
   152	  c('7011',  'Ventes marchandises zone UEMOA',         142_000_000),
   153	  c('7012',  'Ventes marchandises export',              18_000_000),
   154	  c('7020',  'Ventes de produits fabriqu√©s',            55_000_000),
   155	  c('7060',  'Services vendus',                         25_000_000),
   156	  c('7070',  'Produits accessoires',                     5_000_000),
   157	  // Production
   158	  c('7300',  'Production stock√©e',                       4_000_000),
   159	  c('7200',  'Production immobilis√©e',                   1_800_000),
   160	  // Subventions et autres produits
   161	  c('7100',  'Subventions d\'exploitation',              1_200_000),
   162	  c('7500',  'Autres produits',                          2_500_000),
   163	  // Reprises
   164	  c('7910',  'Reprises provisions exploitation',         3_800_000),
   165	  c('7980',  'Reprises d\'amortissements',                 800_000),
   166	  // Produits financiers
   167	  c('7710',  'Int√©r√™ts de pr√™ts',                          600_000),
   168	  c('7720',  'Revenus de participations',                1_000_000),
   169	  c('7760',  'Gains de change',                            400_000),
   170	  c('7870',  'Reprises provisions financi√®res',            600_000),
   171	  // HAO
   172	  c('8200',  'Produits cessions immobilisations',        6_500_000),
   173	  c('8400',  'Produits HAO divers',                      1_100_000),
   174	]
   175	
   176	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   177	// Construction auto-√©quilibr√©e
   178	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   179	
   180	function buildMockBalance(): BalanceEntry[] {
   181	  // 1. Calculer le r√©sultat CdR
   182	  const totalCharges = CHARGES.reduce((s, e) => s + e.debit, 0)
   183	  const totalProduits = PRODUITS.reduce((s, e) => s + e.credit, 0)
   184	  const resultatNet = totalProduits - totalCharges
   185	
   186	  // 2. Calculer actif net et passif (sans RAN ni r√©sultat)
   187	  const bilanDebit = BILAN_FIXE.reduce((s, e) => s + e.debit, 0)
   188	  const bilanCredit = BILAN_FIXE.reduce((s, e) => s + e.credit, 0)
   189	
   190	  // 3. RAN = actif - passif_fixe - r√©sultat
   191	  const ran = bilanDebit - bilanCredit - resultatNet
   192	
   193	  // 4. Assembler la balance
   194	  const balance: BalanceEntry[] = [
   195	    ...BILAN_FIXE,
   196	  ]
   197	
   198	  // Ins√©rer RAN et R√©sultat dans la bonne position (apr√®s classe 1 fixe)
   199	  if (ran >= 0) {
   200	    balance.push(c('1101', 'Report √† nouveau cr√©diteur', ran))
   201	  } else {
   202	    balance.push(d('1290', 'Report √† nouveau d√©biteur', Math.abs(ran)))
   203	  }
   204	
   205	  balance.push(c('1300', 'R√©sultat net de l\'exercice', Math.max(0, resultatNet)))
   206	  if (resultatNet < 0) {
   207	    // Si perte, on met le d√©bit
   208	    balance.push(d('1390', 'R√©sultat net d√©ficitaire', Math.abs(resultatNet)))
   209	  }
   210	
   211	  balance.push(...CHARGES, ...PRODUITS)
   212	
   213	  return balance
   214	}
   215	
   216	export const MOCK_BALANCE = buildMockBalance()
   217	
   218	/**
   219	 * Infos de la balance pour debug
   220	 */
   221	export function getBalanceInfo() {
   222	  const totalD = MOCK_BALANCE.reduce((s, e) => s + e.debit, 0)
   223	  const totalC = MOCK_BALANCE.reduce((s, e) => s + e.credit, 0)
   224	  const totalCharges = CHARGES.reduce((s, e) => s + e.debit, 0)
   225	  const totalProduits = PRODUITS.reduce((s, e) => s + e.credit, 0)
   226	  return {
   227	    comptes: MOCK_BALANCE.length,
   228	    totalDebit: totalD,
   229	    totalCredit: totalC,
   230	    ecart: Math.abs(totalD - totalC),
   231	    isBalanced: Math.abs(totalD - totalC) < 1,
   232	    totalCharges,
   233	    totalProduits,
   234	    resultatNet: totalProduits - totalCharges,
   235	  }
   236	}

================================================================================
FILE: src/data/syscohada/fonctionnement/classe1.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_1: FonctionnementCompte[] = [
     4	  {
     5	    numero: '101',
     6	    contenu: 'Le compte 101 enregistre le montant du capital fix√© par les statuts. Il repr√©sente la valeur nominale des actions ou parts sociales.',
     7	    subdivisions: [
     8	      { numero: '1011', libelle: 'Capital souscrit, non appel√©' },
     9	      { numero: '1012', libelle: 'Capital souscrit, appel√©, non vers√©' },
    10	      { numero: '1013', libelle: 'Capital souscrit, appel√©, vers√©, non amorti' },
    11	      { numero: '1014', libelle: 'Capital souscrit, appel√©, vers√©, amorti' },
    12	      { numero: '1018', libelle: 'Capital souscrit soumis √† des conditions particuli√®res' },
    13	    ],
    14	    commentaires: [
    15	      'Le capital social figure au passif du bilan.',
    16	      'Il ne peut √™tre modifi√© que par d√©cision des organes comp√©tents.',
    17	      'Les apports en nature doivent √™tre √©valu√©s par un commissaire aux apports.',
    18	    ],
    19	    fonctionnement: {
    20	      debit: [
    21	        { description: 'R√©duction du capital', contrePartie: ['46', '12'] },
    22	        { description: 'Amortissement du capital', contrePartie: ['1014', '1013'] },
    23	      ],
    24	      credit: [
    25	        { description: 'Promesses d\'apport des associ√©s', contrePartie: ['461', '109'] },
    26	        { description: 'Incorporation des r√©serves, primes ou report √† nouveau', contrePartie: ['106', '104', '110'] },
    27	      ],
    28	    },
    29	    exclusions: [
    30	      { description: 'Les fonds propres de l\'exploitant individuel', compteCorrige: '103', libelleCompteCorrige: 'Capital personnel' },
    31	    ],
    32	    elementsControle: [
    33	      'Conformit√© avec les statuts',
    34	      'PV des assembl√©es ayant d√©cid√© des modifications du capital',
    35	      'R√©c√©piss√© de d√©p√¥t au greffe',
    36	    ],
    37	  },
    38	  {
    39	    numero: '104',
    40	    contenu: 'Le compte 104 enregistre les primes li√©es au capital social, c\'est-√†-dire l\'exc√©dent du prix d\'√©mission sur la valeur nominale des actions ou parts sociales. Il inclut les primes d\'√©mission, de fusion, d\'apport et de conversion.',
    41	    subdivisions: [
    42	      { numero: '1041', libelle: 'Primes d\'√©mission' },
    43	      { numero: '1042', libelle: 'Primes de fusion' },
    44	      { numero: '1043', libelle: 'Primes d\'apport' },
    45	      { numero: '1044', libelle: 'Primes de conversion d\'obligations en actions' },
    46	    ],
    47	    commentaires: [
    48	      'Les primes sont des compl√©ments d\'apport non repr√©sent√©s par des titres.',
    49	      'Elles peuvent √™tre incorpor√©es au capital ou distribu√©es sous conditions.',
    50	      'Les primes de fusion r√©sultent de la diff√©rence entre la valeur r√©elle et la valeur nominale des titres √©mis lors d\'une fusion.',
    51	    ],
    52	    fonctionnement: {
    53	      debit: [
    54	        { description: 'Incorporation au capital', contrePartie: ['101'] },
    55	        { description: 'Imputation des frais d\'augmentation de capital', contrePartie: ['201'] },
    56	        { description: 'Distribution aux associ√©s', contrePartie: ['465'] },
    57	      ],
    58	      credit: [
    59	        { description: 'Primes d\'√©mission √† la souscription', contrePartie: ['461'] },
    60	        { description: 'Primes de fusion lors d\'op√©rations de restructuration', contrePartie: ['46'] },
    61	      ],
    62	    },
    63	    exclusions: [
    64	      { description: 'Les r√©serves constitu√©es par affectation du r√©sultat', compteCorrige: '106', libelleCompteCorrige: 'R√©serves' },
    65	    ],
    66	    elementsControle: [
    67	      'Bulletin de souscription ou trait√© de fusion',
    68	      'PV de l\'assembl√©e g√©n√©rale extraordinaire',
    69	      'Calcul de la prime (prix d\'√©mission - valeur nominale)',
    70	    ],
    71	  },
    72	  {
    73	    numero: '106',
    74	    contenu: 'Le compte 106 enregistre les r√©serves constitu√©es par l\'entreprise, c\'est-√†-dire les b√©n√©fices affect√©s durablement √† l\'entreprise.',
    75	    subdivisions: [
    76	      { numero: '1061', libelle: 'R√©serve l√©gale' },
    77	      { numero: '1062', libelle: 'R√©serves indisponibles' },
    78	      { numero: '1063', libelle: 'R√©serves statutaires ou contractuelles' },
    79	      { numero: '1064', libelle: 'R√©serves r√©glement√©es' },
    80	      { numero: '1068', libelle: 'Autres r√©serves' },
    81	    ],
    82	    commentaires: [
    83	      'La r√©serve l√©gale est obligatoire (10% du b√©n√©fice net jusqu\'√† atteindre 20% du capital).',
    84	      'Les r√©serves statutaires sont pr√©vues par les statuts de la soci√©t√©.',
    85	      'Les r√©serves r√©glement√©es r√©sultent de dispositions l√©gislatives ou r√©glementaires.',
    86	    ],
    87	    fonctionnement: {
    88	      debit: [
    89	        { description: 'Incorporation au capital', contrePartie: ['101'] },
    90	        { description: 'Distribution exceptionnelle', contrePartie: ['465'] },
    91	        { description: 'Imputation de pertes', contrePartie: ['119', '129'] },
    92	      ],
    93	      credit: [
    94	        { description: 'Affectation du r√©sultat b√©n√©ficiaire', contrePartie: ['120'] },
    95	        { description: 'Pr√©l√®vement sur primes', contrePartie: ['104'] },
    96	      ],
    97	    },
    98	    exclusions: [],
    99	    elementsControle: [
   100	      'PV d\'assembl√©e g√©n√©rale d\'affectation du r√©sultat',
   101	      'Calcul de la r√©serve l√©gale (5% minimum)',
   102	      'Respect du plafond de 20% du capital pour la r√©serve l√©gale',
   103	    ],
   104	  },
   105	  {
   106	    numero: '12',
   107	    contenu: 'Le compte 12 enregistre pour solde les comptes de charges et les comptes de produits de l\'exercice. Le solde du compte 12 repr√©sente un b√©n√©fice (solde cr√©diteur) ou une perte (solde d√©biteur).',
   108	    subdivisions: [
   109	      { numero: '120', libelle: 'R√©sultat net : b√©n√©fice' },
   110	      { numero: '129', libelle: 'R√©sultat net : perte' },
   111	    ],
   112	    commentaires: [
   113	      'Le r√©sultat net est d√©termin√© apr√®s imp√¥ts sur les b√©n√©fices.',
   114	      'Le r√©sultat doit √™tre affect√© par l\'assembl√©e g√©n√©rale.',
   115	    ],
   116	    fonctionnement: {
   117	      debit: [
   118	        { description: 'Affectation du b√©n√©fice (r√©serves, dividendes, report)', contrePartie: ['106', '465', '110'] },
   119	        { description: 'Solde d√©biteur des comptes de gestion (perte)', contrePartie: ['6', '8'] },
   120	      ],
   121	      credit: [
   122	        { description: 'Solde cr√©diteur des comptes de gestion (b√©n√©fice)', contrePartie: ['7', '8'] },
   123	        { description: 'Report de la perte de l\'exercice pr√©c√©dent', contrePartie: ['119'] },
   124	      ],
   125	    },
   126	    exclusions: [],
   127	    elementsControle: [
   128	      'Concordance avec le compte de r√©sultat',
   129	      'Concordance avec la liasse fiscale',
   130	      'PV d\'affectation du r√©sultat',
   131	    ],
   132	  },
   133	  {
   134	    numero: '13',
   135	    contenu: 'Le compte 13 enregistre les subventions re√ßues des pouvoirs publics et d\'organismes en vue d\'acqu√©rir ou de cr√©er des immobilisations ou de financer des activit√©s √† long terme.',
   136	    subdivisions: [
   137	      { numero: '131', libelle: 'Subventions d\'√©quipement A' },
   138	      { numero: '132', libelle: 'Subventions d\'√©quipement B' },
   139	      { numero: '138', libelle: 'Autres subventions d\'investissement' },
   140	      { numero: '139', libelle: 'Subventions d\'investissement inscrites au compte de r√©sultat' },
   141	    ],
   142	    commentaires: [
   143	      'Les subventions d\'investissement sont rapport√©es au r√©sultat au rythme des amortissements des biens financ√©s.',
   144	    ],
   145	    fonctionnement: {
   146	      debit: [
   147	        { description: 'Quote-part vir√©e au r√©sultat de l\'exercice', contrePartie: ['865'] },
   148	        { description: 'Remboursement de la subvention', contrePartie: ['441'] },
   149	      ],
   150	      credit: [
   151	        { description: 'Attribution de la subvention', contrePartie: ['441'] },
   152	      ],
   153	    },
   154	    exclusions: [
   155	      { description: 'Les subventions d\'exploitation', compteCorrige: '71', libelleCompteCorrige: 'Subventions d\'exploitation' },
   156	      { description: 'Les subventions d\'√©quilibre', compteCorrige: '88', libelleCompteCorrige: 'Subventions d\'√©quilibre' },
   157	    ],
   158	    elementsControle: [
   159	      'Convention de subvention',
   160	      'V√©rification du rythme de reprise',
   161	      'Respect des conditions d\'attribution',
   162	    ],
   163	  },
   164	  {
   165	    numero: '14',
   166	    contenu: 'Le compte 14 enregistre les provisions r√©glement√©es constitu√©es en application de dispositions l√©gales ou r√©glementaires, qui ne correspondent pas √† l\'objet normal d\'une provision.',
   167	    subdivisions: [
   168	      { numero: '141', libelle: 'Amortissements d√©rogatoires' },
   169	      { numero: '142', libelle: 'Plus-values de cession √† r√©investir' },
   170	      { numero: '143', libelle: 'Fonds r√©glement√©s' },
   171	      { numero: '144', libelle: 'Provisions r√©glement√©es relatives aux stocks' },
   172	      { numero: '145', libelle: 'Provisions r√©glement√©es relatives aux immobilisations' },
   173	      { numero: '146', libelle: 'Provisions pour propre assureur' },
   174	      { numero: '148', libelle: 'Autres provisions et fonds r√©glement√©s' },
   175	    ],
   176	    commentaires: [
   177	      'Les provisions r√©glement√©es sont des provisions ne correspondant pas √† l\'objet normal d\'une provision et comptabilis√©es en application de dispositions l√©gales.',
   178	      'L\'amortissement d√©rogatoire est la diff√©rence entre l\'amortissement fiscal et l\'amortissement comptable.',
   179	    ],
   180	    fonctionnement: {
   181	      debit: [
   182	        { description: 'Reprise de la provision', contrePartie: ['861', '862'] },
   183	      ],
   184	      credit: [
   185	        { description: 'Dotation de l\'exercice', contrePartie: ['851', '852'] },
   186	      ],
   187	    },
   188	    exclusions: [
   189	      { description: 'Les provisions pour risques et charges', compteCorrige: '15', libelleCompteCorrige: 'Provisions pour risques et charges' },
   190	    ],
   191	    elementsControle: [
   192	      'Calcul des amortissements d√©rogatoires',
   193	      'Conformit√© aux dispositions fiscales',
   194	      'Documentation des textes de r√©f√©rence',
   195	    ],
   196	  },
   197	  {
   198	    numero: '15',
   199	    contenu: 'Le compte 15 enregistre les provisions constitu√©es pour couvrir des risques et des charges nettement pr√©cis√©s quant √† leur objet, dont la r√©alisation est incertaine mais que des √©v√©nements survenus ou en cours rendent probables.',
   200	    subdivisions: [
   201	      { numero: '151', libelle: 'Provisions pour risques' },
   202	      { numero: '152', libelle: 'Provisions pour pensions et obligations similaires' },
   203	      { numero: '155', libelle: 'Provisions pour charges' },
   204	      { numero: '156', libelle: 'Provisions pour pertes de change' },
   205	      { numero: '157', libelle: 'Provisions pour charges √† r√©partir' },
   206	    ],
   207	    commentaires: [
   208	      'La provision doit √™tre √©valu√©e avec fiabilit√©.',
   209	      'La provision est reprise lorsque le risque ou la charge n\'existe plus.',
   210	    ],
   211	    fonctionnement: {
   212	      debit: [
   213	        { description: 'Reprise de provision devenue sans objet', contrePartie: ['791', '797', '864'] },
   214	        { description: 'Utilisation conforme √† l\'objet', contrePartie: ['4', '5'] },
   215	      ],
   216	      credit: [
   217	        { description: 'Constitution de la provision', contrePartie: ['691', '697', '854'] },
   218	        { description: 'Augmentation de la provision', contrePartie: ['691', '697'] },
   219	      ],
   220	    },
   221	    exclusions: [
   222	      { description: 'Les provisions pour d√©pr√©ciation d\'actifs', compteCorrige: '29', libelleCompteCorrige: 'Provisions pour d√©pr√©ciation' },
   223	      { description: 'Les provisions r√©glement√©es', compteCorrige: '14', libelleCompteCorrige: 'Provisions r√©glement√©es' },
   224	    ],
   225	    elementsControle: [
   226	      'Justification de chaque provision',
   227	      '√âvaluation de la probabilit√© du risque',
   228	      'Estimation fiable du montant',
   229	      'Revue annuelle des provisions',
   230	    ],
   231	  },
   232	  {
   233	    numero: '16',
   234	    contenu: 'Le compte 16 enregistre les emprunts et dettes contract√©s pour une dur√©e initialement sup√©rieure √† un an (dettes financi√®res).',
   235	    subdivisions: [
   236	      { numero: '161', libelle: 'Emprunts obligataires' },
   237	      { numero: '162', libelle: 'Emprunts et dettes aupr√®s des √©tablissements de cr√©dit' },
   238	      { numero: '163', libelle: 'Avances re√ßues de l\'√âtat' },
   239	      { numero: '164', libelle: 'Avances re√ßues et comptes courants bloqu√©s' },
   240	      { numero: '165', libelle: 'D√©p√¥ts et cautionnements re√ßus' },
   241	      { numero: '166', libelle: 'Int√©r√™ts courus' },
   242	      { numero: '167', libelle: 'Emprunts et dettes assortis de conditions particuli√®res' },
   243	      { numero: '168', libelle: 'Autres emprunts et dettes assimil√©es' },
   244	    ],
   245	    commentaires: [
   246	      'Les emprunts sont enregistr√©s pour leur valeur de remboursement.',
   247	      'Les int√©r√™ts courus sont rattach√©s aux emprunts correspondants.',
   248	    ],
   249	    fonctionnement: {
   250	      debit: [
   251	        { description: 'Remboursement des emprunts', contrePartie: ['52', '53'] },
   252	        { description: 'Conversion en capital', contrePartie: ['101'] },
   253	      ],
   254	      credit: [
   255	        { description: 'R√©ception des fonds emprunt√©s', contrePartie: ['52', '53'] },
   256	        { description: 'Int√©r√™ts √©chus restant dus', contrePartie: ['166'] },
   257	      ],
   258	    },
   259	    exclusions: [
   260	      { description: 'Les dettes fournisseurs', compteCorrige: '40', libelleCompteCorrige: 'Fournisseurs et comptes rattach√©s' },
   261	      { description: 'Les concours bancaires courants', compteCorrige: '56', libelleCompteCorrige: 'Banques, cr√©dits de tr√©sorerie' },
   262	    ],
   263	    elementsControle: [
   264	      'Contrats de pr√™t',
   265	      'Tableaux d\'amortissement',
   266	      'Concordance avec les confirmations bancaires',
   267	      'V√©rification des int√©r√™ts courus',
   268	    ],
   269	  },
   270	  {
   271	    numero: '17',
   272	    contenu: 'Le compte 17 enregistre les dettes r√©sultant de contrats de location-acquisition (cr√©dit-bail) retrait√©s conform√©ment au SYSCOHADA R√©vis√©.',
   273	    subdivisions: [
   274	      { numero: '172', libelle: 'Emprunts √©quivalents de location-acquisition immobili√®re' },
   275	      { numero: '173', libelle: 'Emprunts √©quivalents de location-acquisition mobili√®re' },
   276	      { numero: '176', libelle: 'Int√©r√™ts courus' },
   277	    ],
   278	    commentaires: [
   279	      'Le SYSCOHADA R√©vis√© impose le retraitement des contrats de cr√©dit-bail dans les comptes individuels.',
   280	      'La dette est enregistr√©e pour le montant correspondant √† la valeur de l\'immobilisation √† la date du contrat.',
   281	    ],
   282	    fonctionnement: {
   283	      debit: [
   284	        { description: 'Remboursement de la partie en capital des redevances', contrePartie: ['52'] },
   285	      ],
   286	      credit: [
   287	        { description: 'Prise en compte de la dette de cr√©dit-bail', contrePartie: ['22', '23', '24'] },
   288	      ],
   289	    },
   290	    exclusions: [
   291	      { description: 'Les redevances de cr√©dit-bail en charges (ancien traitement)', compteCorrige: '623', libelleCompteCorrige: 'Redevances de cr√©dit-bail' },
   292	    ],
   293	    elementsControle: [
   294	      'Contrats de cr√©dit-bail',
   295	      'Tableau de ventilation des redevances',
   296	      'Concordance avec les immobilisations inscrites',
   297	    ],
   298	  },
   299	  {
   300	    numero: '11',
   301	    contenu: 'Le compte 11 enregistre le report √† nouveau, c\'est-√†-dire la part du r√©sultat de l\'exercice pr√©c√©dent dont l\'affectation a √©t√© report√©e par l\'assembl√©e g√©n√©rale.',
   302	    subdivisions: [
   303	      { numero: '110', libelle: 'Report √† nouveau solde cr√©diteur' },
   304	      { numero: '119', libelle: 'Report √† nouveau solde d√©biteur' },
   305	    ],
   306	    commentaires: [
   307	      'Le report √† nouveau cr√©diteur repr√©sente des b√©n√©fices ant√©rieurs non distribu√©s et non mis en r√©serve.',
   308	      'Le report √† nouveau d√©biteur repr√©sente des pertes ant√©rieures non encore r√©sorb√©es.',
   309	      'Le report √† nouveau est apur√© lors de l\'affectation des r√©sultats ult√©rieurs.',
   310	    ],
   311	    fonctionnement: {
   312	      debit: [
   313	        { description: 'Affectation de la perte de l\'exercice', contrePartie: ['129'] },
   314	        { description: 'Distribution de b√©n√©fices ant√©rieurs', contrePartie: ['465'] },
   315	        { description: 'Incorporation au capital', contrePartie: ['101'] },
   316	      ],
   317	      credit: [
   318	        { description: 'Affectation du b√©n√©fice non distribu√© et non mis en r√©serve', contrePartie: ['120'] },
   319	        { description: 'Imputation de pertes sur r√©serves', contrePartie: ['106'] },
   320	      ],
   321	    },
   322	    exclusions: [
   323	      { description: 'Les r√©serves constitu√©es', compteCorrige: '106', libelleCompteCorrige: 'R√©serves' },
   324	    ],
   325	    elementsControle: [
   326	      'PV d\'assembl√©e g√©n√©rale d\'affectation du r√©sultat',
   327	      'Concordance avec le r√©sultat de l\'exercice pr√©c√©dent',
   328	      'Suivi du report √† nouveau d√©biteur dans le temps',
   329	    ],
   330	  },
   331	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe2.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_2: FonctionnementCompte[] = [
     4	  {
     5	    numero: '21',
     6	    contenu: 'Le compte 21 enregistre les immobilisations incorporelles, c\'est-√†-dire les actifs non mon√©taires sans substance physique, d√©tenus pour la production, la fourniture de biens ou de services, la location ou l\'utilisation √† des fins administratives.',
     7	    subdivisions: [
     8	      { numero: '211', libelle: 'Frais de d√©veloppement' },
     9	      { numero: '212', libelle: 'Brevets, licences, concessions et droits similaires' },
    10	      { numero: '213', libelle: 'Logiciels et sites internet' },
    11	      { numero: '214', libelle: 'Marques' },
    12	      { numero: '215', libelle: 'Fonds commercial' },
    13	      { numero: '216', libelle: 'Droit au bail' },
    14	      { numero: '217', libelle: 'Investissements de cr√©ation' },
    15	      { numero: '218', libelle: 'Autres droits et valeurs incorporels' },
    16	      { numero: '219', libelle: 'Immobilisations incorporelles en cours' },
    17	    ],
    18	    commentaires: [
    19	      'Les frais de recherche fondamentale ne sont jamais immobilis√©s ; seuls les frais de d√©veloppement remplissant les conditions d\'activation le sont.',
    20	      'Le fonds commercial n\'est amorti que si sa dur√©e d\'utilisation est limit√©e.',
    21	      'Les logiciels acquis ou cr√©√©s en interne pour un usage durable sont inscrits en immobilisations.',
    22	    ],
    23	    fonctionnement: {
    24	      debit: [
    25	        { description: 'Acquisition d\'immobilisations incorporelles', contrePartie: ['40', '48', '52'] },
    26	        { description: 'Production immobilis√©e d\'immobilisations incorporelles', contrePartie: ['72'] },
    27	        { description: 'Apport en nature', contrePartie: ['101', '104'] },
    28	      ],
    29	      credit: [
    30	        { description: 'Cession ou mise hors service', contrePartie: ['81', '82'] },
    31	        { description: 'Mise au rebut', contrePartie: ['81'] },
    32	      ],
    33	    },
    34	    exclusions: [
    35	      { description: 'Les charges de recherche non activables', compteCorrige: '63', libelleCompteCorrige: 'Services ext√©rieurs B' },
    36	      { description: 'Les charges constat√©es d\'avance', compteCorrige: '476', libelleCompteCorrige: 'Charges constat√©es d\'avance' },
    37	    ],
    38	    elementsControle: [
    39	      'Contrats d\'acquisition (brevets, licences, logiciels)',
    40	      'Justification des crit√®res d\'activation des frais de d√©veloppement',
    41	      'Plan d\'amortissement de chaque immobilisation incorporelle',
    42	      'Test de d√©pr√©ciation annuel pour le fonds commercial',
    43	    ],
    44	  },
    45	  {
    46	    numero: '22',
    47	    contenu: 'Le compte 22 enregistre les terrains dont l\'entreprise est propri√©taire. Les terrains sont en principe non amortissables, sauf les terrains de gisement qui s\'√©puisent par exploitation.',
    48	    subdivisions: [
    49	      { numero: '221', libelle: 'Terrains agricoles et forestiers' },
    50	      { numero: '222', libelle: 'Terrains nus' },
    51	      { numero: '223', libelle: 'Terrains b√¢tis' },
    52	      { numero: '224', libelle: 'Travaux de mise en valeur des terrains' },
    53	      { numero: '225', libelle: 'Terrains de gisement' },
    54	      { numero: '226', libelle: 'Terrains am√©nag√©s' },
    55	      { numero: '228', libelle: 'Autres terrains' },
    56	      { numero: '229', libelle: 'Am√©nagements de terrains en cours' },
    57	    ],
    58	    commentaires: [
    59	      'Les terrains ne sont pas amortissables sauf les terrains de gisement (carri√®res, mines).',
    60	      'Les terrains b√¢tis doivent √™tre distingu√©s des constructions pour la ventilation du co√ªt d\'acquisition.',
    61	      'Les am√©nagements de terrain ont une dur√©e d\'utilisation limit√©e et sont amortissables.',
    62	    ],
    63	    fonctionnement: {
    64	      debit: [
    65	        { description: 'Acquisition de terrains', contrePartie: ['40', '48', '52'] },
    66	        { description: 'Apport en nature', contrePartie: ['101', '104'] },
    67	        { description: 'R√©√©valuation libre', contrePartie: ['106'] },
    68	      ],
    69	      credit: [
    70	        { description: 'Cession de terrains', contrePartie: ['81', '82'] },
    71	        { description: 'Expropriation', contrePartie: ['82'] },
    72	      ],
    73	    },
    74	    exclusions: [
    75	      { description: 'Les terrains d√©tenus comme stocks immobiliers', compteCorrige: '31', libelleCompteCorrige: 'Marchandises' },
    76	    ],
    77	    elementsControle: [
    78	      'Titres de propri√©t√©',
    79	      'Actes notari√©s d\'acquisition',
    80	      'Concordance avec le cadastre',
    81	      '√âvaluation en cas de r√©√©valuation',
    82	    ],
    83	  },
    84	  {
    85	    numero: '23',
    86	    contenu: 'Le compte 23 enregistre les b√¢timents, installations et agencements dont l\'entreprise est propri√©taire et qui sont utilis√©s de mani√®re durable pour l\'exploitation.',
    87	    subdivisions: [
    88	      { numero: '231', libelle: 'B√¢timents industriels' },
    89	      { numero: '232', libelle: 'B√¢timents commerciaux' },
    90	      { numero: '233', libelle: 'B√¢timents administratifs et autres' },
    91	      { numero: '234', libelle: 'Ouvrages d\'infrastructure' },
    92	      { numero: '235', libelle: 'Am√©nagements de bureaux' },
    93	      { numero: '237', libelle: 'B√¢timents industriels sur sol d\'autrui' },
    94	      { numero: '238', libelle: 'Autres installations et agencements' },
    95	      { numero: '239', libelle: 'B√¢timents et installations en cours' },
    96	    ],
    97	    commentaires: [
    98	      'Les b√¢timents sont amortis sur leur dur√©e d\'utilit√© estim√©e.',
    99	      'L\'approche par composants est obligatoire selon le SYSCOHADA R√©vis√© : chaque composant significatif d\'un b√¢timent est amorti s√©par√©ment.',
   100	      'Les constructions sur sol d\'autrui sont inscrites dans un sous-compte sp√©cifique.',
   101	    ],
   102	    fonctionnement: {
   103	      debit: [
   104	        { description: 'Acquisition ou construction de b√¢timents', contrePartie: ['40', '48', '52'] },
   105	        { description: 'Production immobilis√©e', contrePartie: ['72'] },
   106	        { description: 'Inscription du bien en location-acquisition', contrePartie: ['17'] },
   107	      ],
   108	      credit: [
   109	        { description: 'Cession de b√¢timents', contrePartie: ['81', '82'] },
   110	        { description: 'Destruction ou d√©molition', contrePartie: ['81'] },
   111	      ],
   112	    },
   113	    exclusions: [
   114	      { description: 'Les immeubles de placement d√©tenus pour la location ou la plus-value', compteCorrige: '26', libelleCompteCorrige: 'Titres de participation' },
   115	      { description: 'Les constructions en cours non encore livr√©es', compteCorrige: '239', libelleCompteCorrige: 'B√¢timents et installations en cours' },
   116	    ],
   117	    elementsControle: [
   118	      'Titres de propri√©t√© et permis de construire',
   119	      'Plan d\'amortissement par composant',
   120	      'Concordance avec le fichier des immobilisations',
   121	      'Couverture par assurance',
   122	    ],
   123	  },
   124	  {
   125	    numero: '24',
   126	    contenu: 'Le compte 24 enregistre le mat√©riel, le mobilier, les √©quipements et le mat√©riel de transport d√©tenus par l\'entreprise pour √™tre utilis√©s dans la production, la fourniture de biens ou services, ou √† des fins administratives.',
   127	    subdivisions: [
   128	      { numero: '241', libelle: 'Mat√©riel et outillage industriel et commercial' },
   129	      { numero: '242', libelle: 'Mat√©riel et outillage agricole' },
   130	      { numero: '243', libelle: 'Mat√©riel d\'emballage r√©cup√©rable et identifiable' },
   131	      { numero: '244', libelle: 'Mat√©riel et mobilier de bureau' },
   132	      { numero: '245', libelle: 'Mat√©riel de transport' },
   133	      { numero: '246', libelle: 'Immobilisations animales et agricoles' },
   134	      { numero: '248', libelle: 'Autres mat√©riels et outillages' },
   135	      { numero: '249', libelle: 'Mat√©riel en cours' },
   136	    ],
   137	    commentaires: [
   138	      'Le mat√©riel est amorti sur sa dur√©e d\'utilit√© estim√©e selon le mode lin√©aire ou d√©gressif.',
   139	      'Le mat√©riel de transport comprend les v√©hicules utilitaires et les v√©hicules de tourisme.',
   140	      'Les pi√®ces de rechange majeures constituent des immobilisations si leur dur√©e d\'utilisation est sup√©rieure √† un an.',
   141	    ],
   142	    fonctionnement: {
   143	      debit: [
   144	        { description: 'Acquisition de mat√©riel', contrePartie: ['40', '48', '52'] },
   145	        { description: 'Production de mat√©riel par l\'entreprise', contrePartie: ['72'] },
   146	        { description: 'Inscription du bien en location-acquisition', contrePartie: ['17'] },
   147	      ],
   148	      credit: [
   149	        { description: 'Cession de mat√©riel', contrePartie: ['81', '82'] },
   150	        { description: 'Mise au rebut', contrePartie: ['81'] },
   151	      ],
   152	    },
   153	    exclusions: [
   154	      { description: 'Les petits mat√©riels et outillages de faible valeur', compteCorrige: '60', libelleCompteCorrige: 'Achats' },
   155	      { description: 'Le mat√©riel pris en location simple', compteCorrige: '62', libelleCompteCorrige: 'Services ext√©rieurs A' },
   156	    ],
   157	    elementsControle: [
   158	      'Factures d\'acquisition',
   159	      'Fichier des immobilisations',
   160	      'Inventaire physique annuel',
   161	      'Plan d\'amortissement',
   162	    ],
   163	  },
   164	  {
   165	    numero: '26',
   166	    contenu: 'Le compte 26 enregistre les titres de participation, c\'est-√†-dire les titres dont la possession durable est estim√©e utile √† l\'activit√© de l\'entreprise, notamment parce qu\'elle permet d\'exercer une influence sur la soci√©t√© √©mettrice ou d\'en assurer le contr√¥le.',
   167	    subdivisions: [
   168	      { numero: '261', libelle: 'Titres de participation dans des soci√©t√©s sous contr√¥le exclusif' },
   169	      { numero: '262', libelle: 'Titres de participation dans des soci√©t√©s sous contr√¥le conjoint' },
   170	      { numero: '263', libelle: 'Titres de participation dans des soci√©t√©s conf√©rant une influence notable' },
   171	      { numero: '265', libelle: 'Participations dans des organismes professionnels' },
   172	      { numero: '266', libelle: 'Parts dans des GIE' },
   173	      { numero: '268', libelle: 'Autres titres de participation' },
   174	    ],
   175	    commentaires: [
   176	      'Les titres de participation sont √©valu√©s √† leur co√ªt d\'acquisition √† l\'entr√©e.',
   177	      '√Ä la cl√¥ture, ils sont √©valu√©s √† leur valeur d\'utilit√© ; une d√©pr√©ciation est constat√©e si n√©cessaire.',
   178	      'La d√©tention de plus de 10% du capital cr√©e une pr√©somption de participation.',
   179	    ],
   180	    fonctionnement: {
   181	      debit: [
   182	        { description: 'Acquisition de titres de participation', contrePartie: ['52', '53', '46'] },
   183	        { description: 'Lib√©ration d\'actions souscrites', contrePartie: ['52'] },
   184	      ],
   185	      credit: [
   186	        { description: 'Cession de titres de participation', contrePartie: ['81', '82'] },
   187	        { description: 'Annulation des titres (liquidation de la filiale)', contrePartie: ['81'] },
   188	      ],
   189	    },
   190	    exclusions: [
   191	      { description: 'Les titres de placement √† court terme', compteCorrige: '50', libelleCompteCorrige: 'Titres de placement' },
   192	      { description: 'Les titres immobilis√©s autres que les participations', compteCorrige: '27', libelleCompteCorrige: 'Autres immobilisations financi√®res' },
   193	    ],
   194	    elementsControle: [
   195	      'Ordres d\'achat et relev√©s de titres',
   196	      '√âvaluation de la valeur d\'utilit√© √† la cl√¥ture',
   197	      'Concordance avec les comptes des filiales',
   198	      'Justification de l\'intention de d√©tention durable',
   199	    ],
   200	  },
   201	  {
   202	    numero: '27',
   203	    contenu: 'Le compte 27 enregistre les autres immobilisations financi√®res, c\'est-√†-dire les pr√™ts, d√©p√¥ts et cautionnements vers√©s, ainsi que les titres immobilis√©s autres que les titres de participation.',
   204	    subdivisions: [
   205	      { numero: '271', libelle: 'Pr√™ts et cr√©ances non commerciales' },
   206	      { numero: '272', libelle: 'Pr√™ts au personnel' },
   207	      { numero: '273', libelle: 'Cr√©ances sur l\'√âtat' },
   208	      { numero: '274', libelle: 'Titres immobilis√©s' },
   209	      { numero: '275', libelle: 'D√©p√¥ts et cautionnements vers√©s' },
   210	      { numero: '276', libelle: 'Int√©r√™ts courus' },
   211	      { numero: '278', libelle: 'Immobilisations financi√®res diverses' },
   212	    ],
   213	    commentaires: [
   214	      'Les pr√™ts sont comptabilis√©s √† leur valeur nominale.',
   215	      'Les d√©p√¥ts et cautionnements correspondent √† des sommes vers√©es √† des tiers en garantie.',
   216	      'Les titres immobilis√©s sont ceux que l\'entreprise d√©tient durablement sans exercer d\'influence.',
   217	    ],
   218	    fonctionnement: {
   219	      debit: [
   220	        { description: 'Octroi de pr√™ts', contrePartie: ['52', '53'] },
   221	        { description: 'Versement de d√©p√¥ts et cautionnements', contrePartie: ['52'] },
   222	        { description: 'Acquisition de titres immobilis√©s', contrePartie: ['52', '53'] },
   223	      ],
   224	      credit: [
   225	        { description: 'Remboursement de pr√™ts', contrePartie: ['52', '53'] },
   226	        { description: 'Restitution de d√©p√¥ts et cautionnements', contrePartie: ['52'] },
   227	        { description: 'Cession de titres immobilis√©s', contrePartie: ['81', '82'] },
   228	      ],
   229	    },
   230	    exclusions: [
   231	      { description: 'Les titres de participation', compteCorrige: '26', libelleCompteCorrige: 'Titres de participation' },
   232	      { description: 'Les cr√©ances commerciales', compteCorrige: '41', libelleCompteCorrige: 'Clients et comptes rattach√©s' },
   233	    ],
   234	    elementsControle: [
   235	      'Contrats de pr√™t',
   236	      'Quittances de d√©p√¥ts et cautionnements',
   237	      'Confirmation des soldes par les tiers',
   238	      'Test de d√©pr√©ciation sur les pr√™ts',
   239	    ],
   240	  },
   241	  {
   242	    numero: '28',
   243	    contenu: 'Le compte 28 enregistre les amortissements des immobilisations corporelles et incorporelles. L\'amortissement constate la consommation des avantages √©conomiques attendus de l\'actif sur sa dur√©e d\'utilit√©.',
   244	    subdivisions: [
   245	      { numero: '281', libelle: 'Amortissements des immobilisations incorporelles' },
   246	      { numero: '282', libelle: 'Amortissements des terrains' },
   247	      { numero: '283', libelle: 'Amortissements des b√¢timents, installations' },
   248	      { numero: '284', libelle: 'Amortissements du mat√©riel' },
   249	      { numero: '285', libelle: 'Amortissements des avances et acomptes vers√©s sur immobilisations' },
   250	    ],
   251	    commentaires: [
   252	      'L\'amortissement est calcul√© sur la base amortissable (co√ªt d\'acquisition moins valeur r√©siduelle).',
   253	      'Le mode d\'amortissement doit refl√©ter le rythme de consommation des avantages √©conomiques.',
   254	      'La dur√©e et le mode d\'amortissement doivent √™tre revus √† chaque cl√¥ture.',
   255	    ],
   256	    fonctionnement: {
   257	      debit: [
   258	        { description: 'Cession ou mise hors service de l\'immobilisation', contrePartie: ['81'] },
   259	        { description: 'Reprise sur amortissements (cas exceptionnels)', contrePartie: ['79'] },
   260	      ],
   261	      credit: [
   262	        { description: 'Dotation aux amortissements de l\'exercice', contrePartie: ['681', '687'] },
   263	        { description: 'Dotation aux amortissements HAO', contrePartie: ['85'] },
   264	      ],
   265	    },
   266	    exclusions: [
   267	      { description: 'Les d√©pr√©ciations d\'actifs immobilis√©s', compteCorrige: '29', libelleCompteCorrige: 'D√©pr√©ciations' },
   268	      { description: 'Les provisions r√©glement√©es (amortissements d√©rogatoires)', compteCorrige: '14', libelleCompteCorrige: 'Provisions r√©glement√©es' },
   269	    ],
   270	    elementsControle: [
   271	      'Plans d\'amortissement conformes aux dur√©es d\'utilit√©',
   272	      'Concordance entre dotations et fichier des immobilisations',
   273	      'Revue des dur√©es et modes d\'amortissement √† la cl√¥ture',
   274	      'Distinction entre amortissement comptable et fiscal',
   275	    ],
   276	  },
   277	  {
   278	    numero: '29',
   279	    contenu: 'Le compte 29 enregistre les d√©pr√©ciations des immobilisations lorsque leur valeur actuelle (valeur d\'utilit√© ou juste valeur diminu√©e des co√ªts de sortie) devient inf√©rieure √† leur valeur nette comptable.',
   280	    subdivisions: [
   281	      { numero: '291', libelle: 'D√©pr√©ciations des immobilisations incorporelles' },
   282	      { numero: '292', libelle: 'D√©pr√©ciations des terrains' },
   283	      { numero: '293', libelle: 'D√©pr√©ciations des b√¢timents' },
   284	      { numero: '294', libelle: 'D√©pr√©ciations du mat√©riel' },
   285	      { numero: '296', libelle: 'D√©pr√©ciations des titres de participation' },
   286	      { numero: '297', libelle: 'D√©pr√©ciations des autres immobilisations financi√®res' },
   287	    ],
   288	    commentaires: [
   289	      'Un test de d√©pr√©ciation doit √™tre effectu√© d√®s qu\'un indice de perte de valeur est identifi√©.',
   290	      'La d√©pr√©ciation est r√©versible : elle peut √™tre reprise si les conditions s\'am√©liorent.',
   291	      'Le fonds commercial et les immobilisations incorporelles √† dur√©e de vie ind√©finie doivent faire l\'objet d\'un test annuel.',
   292	    ],
   293	    fonctionnement: {
   294	      debit: [
   295	        { description: 'Reprise de la d√©pr√©ciation devenue sans objet', contrePartie: ['791', '797'] },
   296	        { description: 'Cession ou mise hors service de l\'immobilisation', contrePartie: ['81'] },
   297	      ],
   298	      credit: [
   299	        { description: 'Constatation de la d√©pr√©ciation', contrePartie: ['691', '697'] },
   300	        { description: 'Augmentation de la d√©pr√©ciation', contrePartie: ['691', '697'] },
   301	      ],
   302	    },
   303	    exclusions: [
   304	      { description: 'Les amortissements des immobilisations', compteCorrige: '28', libelleCompteCorrige: 'Amortissements' },
   305	      { description: 'Les d√©pr√©ciations des stocks', compteCorrige: '39', libelleCompteCorrige: 'D√©pr√©ciations des stocks' },
   306	    ],
   307	    elementsControle: [
   308	      'Identification des indices de perte de valeur',
   309	      'Calcul de la valeur actuelle (valeur d\'utilit√© ou juste valeur)',
   310	      'Documentation du test de d√©pr√©ciation',
   311	      'Suivi des reprises de d√©pr√©ciation',
   312	    ],
   313	  },
   314	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe3.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_3: FonctionnementCompte[] = [
     4	  {
     5	    numero: '31',
     6	    contenu: 'Le compte 31 enregistre les marchandises, c\'est-√†-dire les biens achet√©s par l\'entreprise et destin√©s √† √™tre revendus en l\'√©tat, sans transformation.',
     7	    subdivisions: [
     8	      { numero: '311', libelle: 'Marchandises A' },
     9	      { numero: '312', libelle: 'Marchandises B' },
    10	      { numero: '318', libelle: 'Autres marchandises' },
    11	    ],
    12	    commentaires: [
    13	      'Les marchandises sont √©valu√©es √† leur co√ªt d\'acquisition (prix d\'achat + frais accessoires).',
    14	      '√Ä la cl√¥ture, les marchandises sont √©valu√©es au plus faible du co√ªt et de la valeur nette de r√©alisation.',
    15	      'L\'entreprise peut utiliser la m√©thode du co√ªt moyen pond√©r√© (CUMP) ou la m√©thode FIFO (premier entr√©, premier sorti).',
    16	    ],
    17	    fonctionnement: {
    18	      debit: [
    19	        { description: 'Entr√©e en stock (constatation du stock final)', contrePartie: ['603'] },
    20	        { description: 'Entr√©e en stock par inventaire permanent', contrePartie: ['603'] },
    21	      ],
    22	      credit: [
    23	        { description: 'Sortie de stock (annulation du stock initial)', contrePartie: ['603'] },
    24	        { description: 'Sortie de stock par inventaire permanent', contrePartie: ['603'] },
    25	      ],
    26	    },
    27	    exclusions: [
    28	      { description: 'Les mati√®res premi√®res destin√©es √† √™tre transform√©es', compteCorrige: '32', libelleCompteCorrige: 'Mati√®res premi√®res et fournitures li√©es' },
    29	      { description: 'Les produits fabriqu√©s par l\'entreprise', compteCorrige: '36', libelleCompteCorrige: 'Produits finis' },
    30	    ],
    31	    elementsControle: [
    32	      'Inventaire physique √† la cl√¥ture',
    33	      'Concordance entre inventaire physique et comptable',
    34	      '√âvaluation au co√ªt d\'acquisition',
    35	      'Test de la valeur nette de r√©alisation',
    36	    ],
    37	  },
    38	  {
    39	    numero: '32',
    40	    contenu: 'Le compte 32 enregistre les mati√®res premi√®res et fournitures li√©es, c\'est-√†-dire les biens destin√©s √† √™tre incorpor√©s dans les produits fabriqu√©s ou consomm√©s lors du processus de production.',
    41	    subdivisions: [
    42	      { numero: '321', libelle: 'Mati√®res premi√®res' },
    43	      { numero: '322', libelle: 'Mati√®res et fournitures consommables' },
    44	      { numero: '323', libelle: 'Emballages' },
    45	      { numero: '324', libelle: 'Mati√®res et fournitures d\'emballage' },
    46	      { numero: '325', libelle: 'Emballages r√©cup√©rables non identifiables' },
    47	      { numero: '326', libelle: 'Emballages √† usage mixte' },
    48	    ],
    49	    commentaires: [
    50	      'Les mati√®res premi√®res sont √©valu√©es √† leur co√ªt d\'acquisition √† l\'entr√©e en stock.',
    51	      'Les emballages commerciaux non r√©cup√©rables sont des consommations de l\'exercice.',
    52	      'La distinction entre emballages r√©cup√©rables et non r√©cup√©rables d√©termine le traitement comptable.',
    53	    ],
    54	    fonctionnement: {
    55	      debit: [
    56	        { description: 'Entr√©e en stock (constatation du stock final)', contrePartie: ['602'] },
    57	        { description: 'Entr√©e en stock par inventaire permanent', contrePartie: ['602'] },
    58	      ],
    59	      credit: [
    60	        { description: 'Sortie de stock (annulation du stock initial)', contrePartie: ['602'] },
    61	        { description: 'Consommation par la production', contrePartie: ['602'] },
    62	      ],
    63	    },
    64	    exclusions: [
    65	      { description: 'Les marchandises revendues en l\'√©tat', compteCorrige: '31', libelleCompteCorrige: 'Marchandises' },
    66	      { description: 'Les fournitures non stockables (eau, √©lectricit√©)', compteCorrige: '60', libelleCompteCorrige: 'Achats' },
    67	    ],
    68	    elementsControle: [
    69	      'Inventaire physique √† la cl√¥ture',
    70	      'Fiche de stock et bons de sortie',
    71	      '√âvaluation conforme √† la m√©thode choisie (CUMP ou FIFO)',
    72	      'Concordance entre stock physique et comptable',
    73	    ],
    74	  },
    75	  {
    76	    numero: '33',
    77	    contenu: 'Le compte 33 enregistre les autres approvisionnements non stock√©s ou en attente de stockage, notamment les fournitures d\'atelier, de bureau et les combustibles.',
    78	    subdivisions: [
    79	      { numero: '331', libelle: 'Mati√®res consommables' },
    80	      { numero: '332', libelle: 'Fournitures d\'atelier et d\'usine' },
    81	      { numero: '333', libelle: 'Fournitures de magasin' },
    82	      { numero: '334', libelle: 'Fournitures de bureau' },
    83	      { numero: '338', libelle: 'Autres mati√®res' },
    84	    ],
    85	    commentaires: [
    86	      'Ces approvisionnements sont des biens consommables qui ne s\'incorporent pas directement dans les produits fabriqu√©s.',
    87	      'Ils sont √©valu√©s au co√ªt d\'acquisition.',
    88	      'La variation de stock est enregistr√©e en fin d\'exercice par le jeu des comptes de stock.',
    89	    ],
    90	    fonctionnement: {
    91	      debit: [
    92	        { description: 'Entr√©e en stock (constatation du stock final)', contrePartie: ['602'] },
    93	      ],
    94	      credit: [
    95	        { description: 'Sortie de stock (annulation du stock initial)', contrePartie: ['602'] },
    96	      ],
    97	    },
    98	    exclusions: [
    99	      { description: 'Les mati√®res premi√®res s\'incorporant dans les produits', compteCorrige: '32', libelleCompteCorrige: 'Mati√®res premi√®res et fournitures li√©es' },
   100	    ],
   101	    elementsControle: [
   102	      'Inventaire physique √† la cl√¥ture',
   103	      'Concordance avec les achats de l\'exercice',
   104	      '√âvaluation au co√ªt d\'acquisition',
   105	    ],
   106	  },
   107	  {
   108	    numero: '34',
   109	    contenu: 'Le compte 34 enregistre les produits en cours, c\'est-√†-dire les biens en cours de fabrication ou de transformation √† la date de cl√¥ture de l\'exercice, ainsi que les travaux et services en cours.',
   110	    subdivisions: [
   111	      { numero: '341', libelle: 'Produits en cours' },
   112	      { numero: '342', libelle: 'Travaux en cours' },
   113	      { numero: '343', libelle: 'Services en cours' },
   114	      { numero: '344', libelle: 'Produits interm√©diaires en cours' },
   115	      { numero: '345', libelle: 'Produits r√©siduels en cours' },
   116	    ],
   117	    commentaires: [
   118	      'Les produits en cours sont √©valu√©s au co√ªt de production √† la date de cl√¥ture.',
   119	      'Le co√ªt de production comprend les charges directes et une quote-part des charges indirectes de production.',
   120	      'Les en-cours de longue dur√©e peuvent faire l\'objet d\'une comptabilisation selon la m√©thode √† l\'avancement.',
   121	    ],
   122	    fonctionnement: {
   123	      debit: [
   124	        { description: 'Constatation des en-cours √† la cl√¥ture (stock final)', contrePartie: ['73'] },
   125	      ],
   126	      credit: [
   127	        { description: 'Annulation des en-cours de l\'exercice pr√©c√©dent (stock initial)', contrePartie: ['73'] },
   128	      ],
   129	    },
   130	    exclusions: [
   131	      { description: 'Les produits finis termin√©s', compteCorrige: '36', libelleCompteCorrige: 'Produits finis' },
   132	      { description: 'Les marchandises non transform√©es', compteCorrige: '31', libelleCompteCorrige: 'Marchandises' },
   133	    ],
   134	    elementsControle: [
   135	      'Inventaire physique des en-cours √† la cl√¥ture',
   136	      'Calcul du co√ªt de production',
   137	      'Suivi de l\'avancement des travaux en cours',
   138	    ],
   139	  },
   140	  {
   141	    numero: '36',
   142	    contenu: 'Le compte 36 enregistre les produits finis, c\'est-√†-dire les biens fabriqu√©s par l\'entreprise, ayant atteint le stade d\'ach√®vement et destin√©s √† √™tre vendus. Il inclut √©galement les produits interm√©diaires et les produits r√©siduels.',
   143	    subdivisions: [
   144	      { numero: '361', libelle: 'Produits finis A' },
   145	      { numero: '362', libelle: 'Produits finis B' },
   146	      { numero: '365', libelle: 'Produits interm√©diaires' },
   147	      { numero: '366', libelle: 'Produits r√©siduels (d√©chets, rebuts)' },
   148	      { numero: '368', libelle: 'Autres produits finis' },
   149	    ],
   150	    commentaires: [
   151	      'Les produits finis sont √©valu√©s au co√ªt de production.',
   152	      'Le co√ªt de production inclut le co√ªt d\'acquisition des mati√®res consomm√©es, les charges directes de production et les charges indirectes raisonnablement rattachables.',
   153	      'Les sous-activit√©s (charges de production non absorb√©es) ne sont pas incluses dans le co√ªt de production.',
   154	    ],
   155	    fonctionnement: {
   156	      debit: [
   157	        { description: 'Entr√©e en stock des produits fabriqu√©s (stock final)', contrePartie: ['73'] },
   158	        { description: 'Entr√©e par inventaire permanent', contrePartie: ['73'] },
   159	      ],
   160	      credit: [
   161	        { description: 'Sortie de stock (annulation stock initial)', contrePartie: ['73'] },
   162	        { description: 'Sortie pour vente par inventaire permanent', contrePartie: ['73'] },
   163	      ],
   164	    },
   165	    exclusions: [
   166	      { description: 'Les marchandises achet√©es pour la revente', compteCorrige: '31', libelleCompteCorrige: 'Marchandises' },
   167	      { description: 'Les produits en cours non achev√©s', compteCorrige: '34', libelleCompteCorrige: 'Produits en cours' },
   168	    ],
   169	    elementsControle: [
   170	      'Inventaire physique √† la cl√¥ture',
   171	      'Fiche de co√ªt de production',
   172	      'Concordance entre stock physique et comptable',
   173	      'Test de la valeur nette de r√©alisation',
   174	    ],
   175	  },
   176	  {
   177	    numero: '39',
   178	    contenu: 'Le compte 39 enregistre les d√©pr√©ciations constat√©es sur les stocks lorsque la valeur nette de r√©alisation est inf√©rieure au co√ªt d\'entr√©e (co√ªt d\'acquisition ou co√ªt de production).',
   179	    subdivisions: [
   180	      { numero: '391', libelle: 'D√©pr√©ciations des stocks de marchandises' },
   181	      { numero: '392', libelle: 'D√©pr√©ciations des stocks de mati√®res premi√®res' },
   182	      { numero: '393', libelle: 'D√©pr√©ciations des stocks d\'autres approvisionnements' },
   183	      { numero: '394', libelle: 'D√©pr√©ciations des produits en cours' },
   184	      { numero: '396', libelle: 'D√©pr√©ciations des stocks de produits finis' },
   185	    ],
   186	    commentaires: [
   187	      'La d√©pr√©ciation est la diff√©rence entre le co√ªt d\'entr√©e et la valeur nette de r√©alisation lorsque celle-ci est inf√©rieure.',
   188	      'La valeur nette de r√©alisation est le prix de vente estim√© diminu√© des co√ªts n√©cessaires pour r√©aliser la vente.',
   189	      'Les d√©pr√©ciations sont ajust√©es √† chaque cl√¥ture (dotation compl√©mentaire ou reprise).',
   190	    ],
   191	    fonctionnement: {
   192	      debit: [
   193	        { description: 'Reprise de la d√©pr√©ciation devenue sans objet', contrePartie: ['791', '759'] },
   194	        { description: 'Annulation √† la sortie du stock', contrePartie: ['603', '602'] },
   195	      ],
   196	      credit: [
   197	        { description: 'Constitution de la d√©pr√©ciation √† la cl√¥ture', contrePartie: ['691', '659'] },
   198	        { description: 'Augmentation de la d√©pr√©ciation', contrePartie: ['691', '659'] },
   199	      ],
   200	    },
   201	    exclusions: [
   202	      { description: 'Les d√©pr√©ciations des immobilisations', compteCorrige: '29', libelleCompteCorrige: 'D√©pr√©ciations des immobilisations' },
   203	      { description: 'Les d√©pr√©ciations des cr√©ances', compteCorrige: '49', libelleCompteCorrige: 'D√©pr√©ciations des comptes de tiers' },
   204	    ],
   205	    elementsControle: [
   206	      'Analyse de la rotation des stocks',
   207	      'Estimation de la valeur nette de r√©alisation',
   208	      'Identification des stocks obsol√®tes ou √† rotation lente',
   209	      'Revue des d√©pr√©ciations existantes',
   210	    ],
   211	  },
   212	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe4.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_4: FonctionnementCompte[] = [
     4	  {
     5	    numero: '40',
     6	    contenu: 'Le compte 40 enregistre les dettes envers les fournisseurs de biens et de services li√©s √† l\'activit√© courante de l\'entreprise, ainsi que les effets √† payer et les factures non parvenues.',
     7	    subdivisions: [
     8	      { numero: '401', libelle: 'Fournisseurs, comptes ordinaires' },
     9	      { numero: '402', libelle: 'Fournisseurs, effets √† payer' },
    10	      { numero: '403', libelle: 'Fournisseurs, retenues de garantie et oppositions' },
    11	      { numero: '404', libelle: 'Fournisseurs d\'investissement' },
    12	      { numero: '408', libelle: 'Fournisseurs, factures non parvenues' },
    13	      { numero: '409', libelle: 'Fournisseurs d√©biteurs (avances et acomptes vers√©s, RRR √† obtenir)' },
    14	    ],
    15	    commentaires: [
    16	      'Les dettes fournisseurs sont comptabilis√©es √† la date de r√©ception de la facture ou de la livraison.',
    17	      'Les factures non parvenues √† la cl√¥ture sont provisionn√©es dans le compte 408.',
    18	      'Les avances et acomptes vers√©s aux fournisseurs sont enregistr√©s au d√©bit du compte 409.',
    19	    ],
    20	    fonctionnement: {
    21	      debit: [
    22	        { description: 'R√®glement des fournisseurs', contrePartie: ['52', '53', '57'] },
    23	        { description: 'Acceptation d\'un effet de commerce', contrePartie: ['402'] },
    24	        { description: 'Rabais, remises et ristournes obtenus', contrePartie: ['609'] },
    25	      ],
    26	      credit: [
    27	        { description: 'Achats de biens et services √† cr√©dit', contrePartie: ['60', '61', '62', '63'] },
    28	        { description: 'Acquisitions d\'immobilisations √† cr√©dit', contrePartie: ['21', '22', '23', '24'] },
    29	        { description: 'Factures non parvenues √† la cl√¥ture', contrePartie: ['408'] },
    30	      ],
    31	    },
    32	    exclusions: [
    33	      { description: 'Les dettes financi√®res (emprunts)', compteCorrige: '16', libelleCompteCorrige: 'Emprunts et dettes assimil√©es' },
    34	      { description: 'Les dettes envers le personnel', compteCorrige: '42', libelleCompteCorrige: 'Personnel' },
    35	    ],
    36	    elementsControle: [
    37	      'Rapprochement des relev√©s fournisseurs',
    38	      'Justification du solde par balance √¢g√©e',
    39	      'Cut-off des factures non parvenues',
    40	      'Circularisation des principaux fournisseurs',
    41	    ],
    42	  },
    43	  {
    44	    numero: '41',
    45	    contenu: 'Le compte 41 enregistre les cr√©ances sur les clients r√©sultant de la vente de biens ou de la prestation de services dans le cadre de l\'activit√© courante de l\'entreprise.',
    46	    subdivisions: [
    47	      { numero: '411', libelle: 'Clients' },
    48	      { numero: '412', libelle: 'Clients, effets √† recevoir en portefeuille' },
    49	      { numero: '413', libelle: 'Clients, ch√®ques, effets et bons de caisse √† encaisser' },
    50	      { numero: '414', libelle: 'Cr√©ances sur cessions d\'immobilisations' },
    51	      { numero: '415', libelle: 'Clients, effets escompt√©s non √©chus' },
    52	      { numero: '416', libelle: 'Cr√©ances clients litigieuses ou douteuses' },
    53	      { numero: '418', libelle: 'Clients, produits √† recevoir' },
    54	      { numero: '419', libelle: 'Clients cr√©diteurs (avances et acomptes re√ßus, RRR √† accorder)' },
    55	    ],
    56	    commentaires: [
    57	      'Les cr√©ances clients sont comptabilis√©es √† la date de la facturation.',
    58	      'Les cr√©ances douteuses sont transf√©r√©es au compte 416 d√®s que le recouvrement est incertain.',
    59	      'Les produits √† recevoir √† la cl√¥ture sont provisionn√©s dans le compte 418.',
    60	    ],
    61	    fonctionnement: {
    62	      debit: [
    63	        { description: 'Ventes de biens et services √† cr√©dit', contrePartie: ['70', '71', '72', '73'] },
    64	        { description: 'Produits √† recevoir √† la cl√¥ture', contrePartie: ['418'] },
    65	        { description: 'Effets √† recevoir', contrePartie: ['412'] },
    66	      ],
    67	      credit: [
    68	        { description: 'Encaissement des cr√©ances clients', contrePartie: ['52', '53', '57'] },
    69	        { description: 'Rabais, remises et ristournes accord√©s', contrePartie: ['70'] },
    70	        { description: 'Cr√©ances irr√©couvrables', contrePartie: ['65'] },
    71	      ],
    72	    },
    73	    exclusions: [
    74	      { description: 'Les cr√©ances sur cessions de titres', compteCorrige: '47', libelleCompteCorrige: 'D√©biteurs et cr√©diteurs divers' },
    75	      { description: 'Les pr√™ts au personnel', compteCorrige: '272', libelleCompteCorrige: 'Pr√™ts au personnel' },
    76	    ],
    77	    elementsControle: [
    78	      'Balance √¢g√©e des cr√©ances clients',
    79	      'Circularisation des principaux clients',
    80	      'Analyse des cr√©ances douteuses et provisionnement',
    81	      'Cut-off des produits √† recevoir',
    82	    ],
    83	  },
    84	  {
    85	    numero: '42',
    86	    contenu: 'Le compte 42 enregistre les dettes et cr√©ances li√©es au personnel de l\'entreprise : r√©mun√©rations dues, avances et acomptes accord√©s, oppositions sur salaires.',
    87	    subdivisions: [
    88	      { numero: '421', libelle: 'Personnel, r√©mun√©rations dues' },
    89	      { numero: '422', libelle: 'Personnel, avances et acomptes' },
    90	      { numero: '423', libelle: 'Personnel, oppositions et saisies' },
    91	      { numero: '424', libelle: 'Personnel, oeuvres sociales internes' },
    92	      { numero: '425', libelle: 'Repr√©sentants du personnel' },
    93	      { numero: '428', libelle: 'Personnel, charges √† payer et produits √† recevoir' },
    94	    ],
    95	    commentaires: [
    96	      'Le salaire net √† payer est la diff√©rence entre le salaire brut et les retenues salariales.',
    97	      'Les avances et acomptes sont port√©s au d√©bit et d√©duits lors du paiement du salaire.',
    98	      'Les cong√©s pay√©s acquis et non pris √† la cl√¥ture doivent √™tre provisionn√©s.',
    99	    ],
   100	    fonctionnement: {
   101	      debit: [
   102	        { description: 'Avances et acomptes vers√©s au personnel', contrePartie: ['52', '57'] },
   103	        { description: 'R√®glement des r√©mun√©rations nettes', contrePartie: ['52', '57'] },
   104	        { description: 'Oppositions vers√©es aux cr√©anciers', contrePartie: ['52'] },
   105	      ],
   106	      credit: [
   107	        { description: 'R√©mun√©rations brutes dues au personnel', contrePartie: ['66'] },
   108	        { description: 'Charges de cong√©s pay√©s √† la cl√¥ture', contrePartie: ['66'] },
   109	      ],
   110	    },
   111	    exclusions: [
   112	      { description: 'Les charges sociales patronales', compteCorrige: '43', libelleCompteCorrige: 'Organismes sociaux' },
   113	      { description: 'Les pr√™ts au personnel (long terme)', compteCorrige: '272', libelleCompteCorrige: 'Pr√™ts au personnel' },
   114	    ],
   115	    elementsControle: [
   116	      'Concordance avec les bulletins de paie',
   117	      'Rapprochement avec le livre de paie',
   118	      'Justification des avances et acomptes',
   119	      'Provision pour cong√©s pay√©s',
   120	    ],
   121	  },
   122	  {
   123	    numero: '43',
   124	    contenu: 'Le compte 43 enregistre les dettes et cr√©ances envers les organismes sociaux (CNPS, caisses de retraite, mutuelles) au titre des charges sociales patronales et des retenues salariales.',
   125	    subdivisions: [
   126	      { numero: '431', libelle: 'S√©curit√© sociale' },
   127	      { numero: '432', libelle: 'Caisses de retraite compl√©mentaire' },
   128	      { numero: '433', libelle: 'Autres organismes sociaux' },
   129	      { numero: '438', libelle: 'Organismes sociaux, charges √† payer et produits √† recevoir' },
   130	    ],
   131	    commentaires: [
   132	      'Les cotisations sociales patronales sont une charge pour l\'entreprise enregistr√©e au d√©bit du compte 664.',
   133	      'Les cotisations salariales retenues sur le salaire brut transitent par le cr√©dit du compte 43.',
   134	      'Les charges sociales √† payer √† la cl√¥ture sont provisionn√©es dans le compte 438.',
   135	    ],
   136	    fonctionnement: {
   137	      debit: [
   138	        { description: 'Versement des cotisations sociales', contrePartie: ['52'] },
   139	        { description: 'Paiement des indemnit√©s par d√©l√©gation', contrePartie: ['52'] },
   140	      ],
   141	      credit: [
   142	        { description: 'Cotisations sociales patronales', contrePartie: ['664'] },
   143	        { description: 'Cotisations sociales salariales retenues', contrePartie: ['421'] },
   144	        { description: 'Charges sociales √† payer √† la cl√¥ture', contrePartie: ['438'] },
   145	      ],
   146	    },
   147	    exclusions: [
   148	      { description: 'Les r√©mun√©rations du personnel', compteCorrige: '42', libelleCompteCorrige: 'Personnel' },
   149	      { description: 'Les imp√¥ts et taxes', compteCorrige: '44', libelleCompteCorrige: '√âtat et collectivit√©s publiques' },
   150	    ],
   151	    elementsControle: [
   152	      'Concordance avec les d√©clarations sociales',
   153	      'Rapprochement des bordereaux de cotisation',
   154	      'Justification des soldes par organisme',
   155	      'Provision pour charges sociales sur cong√©s pay√©s',
   156	    ],
   157	  },
   158	  {
   159	    numero: '44',
   160	    contenu: 'Le compte 44 enregistre les dettes et cr√©ances envers l\'√âtat et les collectivit√©s publiques au titre des imp√¥ts, taxes et versements assimil√©s, notamment la TVA, l\'imp√¥t sur les b√©n√©fices et les subventions √† recevoir.',
   161	    subdivisions: [
   162	      { numero: '441', libelle: '√âtat, subventions √† recevoir' },
   163	      { numero: '442', libelle: '√âtat, autres imp√¥ts et taxes' },
   164	      { numero: '443', libelle: '√âtat, TVA factur√©e' },
   165	      { numero: '444', libelle: '√âtat, TVA due ou cr√©dit de TVA' },
   166	      { numero: '445', libelle: '√âtat, TVA r√©cup√©rable' },
   167	      { numero: '446', libelle: '√âtat, autres taxes sur le chiffre d\'affaires' },
   168	      { numero: '447', libelle: '√âtat, imp√¥ts retenus √† la source' },
   169	      { numero: '448', libelle: '√âtat, charges √† payer et produits √† recevoir' },
   170	      { numero: '449', libelle: '√âtat, cr√©ances et dettes diverses' },
   171	    ],
   172	    commentaires: [
   173	      'La TVA collect√©e (443) est cr√©dit√©e lors des ventes ; la TVA d√©ductible (445) est d√©bit√©e lors des achats.',
   174	      'La TVA √† d√©caisser est le solde de la TVA collect√©e diminu√©e de la TVA d√©ductible.',
   175	      'L\'imp√¥t sur les b√©n√©fices est comptabilis√© en charge de l\'exercice auquel il se rapporte.',
   176	    ],
   177	    fonctionnement: {
   178	      debit: [
   179	        { description: 'TVA d√©ductible sur achats et immobilisations', contrePartie: ['60', '61', '62', '21', '24'] },
   180	        { description: 'Paiement des imp√¥ts et taxes', contrePartie: ['52'] },
   181	        { description: 'Acomptes d\'imp√¥t sur les b√©n√©fices', contrePartie: ['52'] },
   182	      ],
   183	      credit: [
   184	        { description: 'TVA collect√©e sur les ventes', contrePartie: ['70', '71', '72'] },
   185	        { description: 'Imp√¥ts et taxes dus', contrePartie: ['64'] },
   186	        { description: 'Imp√¥t sur les b√©n√©fices d√ª', contrePartie: ['89'] },
   187	      ],
   188	    },
   189	    exclusions: [
   190	      { description: 'Les cotisations sociales', compteCorrige: '43', libelleCompteCorrige: 'Organismes sociaux' },
   191	      { description: 'Les taxes douani√®res pay√©es √† l\'import', compteCorrige: '60', libelleCompteCorrige: 'Achats (inclus dans le co√ªt d\'achat)' },
   192	    ],
   193	    elementsControle: [
   194	      'Concordance avec les d√©clarations fiscales (TVA, IS)',
   195	      'Rapprochement CA d√©clar√© et CA comptable',
   196	      'Justification des cr√©dits de TVA',
   197	      'V√©rification des acomptes d\'IS',
   198	    ],
   199	  },
   200	  {
   201	    numero: '46',
   202	    contenu: 'Le compte 46 enregistre les op√©rations relatives aux associ√©s et aux comptes des groupes : apports, comptes courants d\'associ√©s, dividendes √† payer, op√©rations intra-groupe.',
   203	    subdivisions: [
   204	      { numero: '461', libelle: 'Associ√©s, op√©rations sur le capital' },
   205	      { numero: '462', libelle: 'Associ√©s, comptes courants' },
   206	      { numero: '463', libelle: 'Associ√©s, op√©rations faites en commun' },
   207	      { numero: '465', libelle: 'Associ√©s, dividendes √† payer' },
   208	      { numero: '466', libelle: 'Groupe, comptes courants' },
   209	      { numero: '467', libelle: 'Actionnaires, restant d√ª sur capital appel√©' },
   210	    ],
   211	    commentaires: [
   212	      'Les comptes courants d\'associ√©s enregistrent les avances de tr√©sorerie consenties par les associ√©s.',
   213	      'Les dividendes √† payer r√©sultent de la d√©cision d\'affectation du r√©sultat.',
   214	      'Les op√©rations intra-groupe doivent √™tre identifi√©es pour les besoins de la consolidation.',
   215	    ],
   216	    fonctionnement: {
   217	      debit: [
   218	        { description: 'Capital souscrit appel√© (cr√©ance sur associ√©s)', contrePartie: ['101', '109'] },
   219	        { description: 'Remboursement des comptes courants d\'associ√©s', contrePartie: ['52'] },
   220	        { description: 'Versement de dividendes', contrePartie: ['52'] },
   221	      ],
   222	      credit: [
   223	        { description: 'Versement des apports par les associ√©s', contrePartie: ['52', '57'] },
   224	        { description: 'Avances en compte courant des associ√©s', contrePartie: ['52'] },
   225	        { description: 'Dividendes √† payer', contrePartie: ['12'] },
   226	      ],
   227	    },
   228	    exclusions: [
   229	      { description: 'Les emprunts aupr√®s d\'√©tablissements de cr√©dit', compteCorrige: '16', libelleCompteCorrige: 'Emprunts et dettes assimil√©es' },
   230	    ],
   231	    elementsControle: [
   232	      'Conventions de comptes courants',
   233	      'PV d\'assembl√©e pour les dividendes',
   234	      'Conformit√© avec les statuts (r√©mun√©ration des comptes courants)',
   235	      'Justification des op√©rations intra-groupe',
   236	    ],
   237	  },
   238	  {
   239	    numero: '47',
   240	    contenu: 'Le compte 47 enregistre les d√©biteurs et cr√©diteurs divers ne relevant pas des cat√©gories pr√©c√©dentes, ainsi que les comptes transitoires et d\'attente, les charges et produits constat√©s d\'avance.',
   241	    subdivisions: [
   242	      { numero: '471', libelle: 'D√©biteurs divers' },
   243	      { numero: '472', libelle: 'Cr√©diteurs divers' },
   244	      { numero: '474', libelle: 'Compte transitoire, r√©partition p√©riodique des charges et produits' },
   245	      { numero: '475', libelle: 'Cr√©ances sur travaux non encore facturables' },
   246	      { numero: '476', libelle: 'Charges constat√©es d\'avance' },
   247	      { numero: '477', libelle: 'Produits constat√©s d\'avance' },
   248	      { numero: '478', libelle: '√âcarts de conversion Actif' },
   249	      { numero: '479', libelle: '√âcarts de conversion Passif' },
   250	    ],
   251	    commentaires: [
   252	      'Les comptes transitoires doivent √™tre sold√©s au plus tard √† la cl√¥ture de l\'exercice.',
   253	      'Les charges constat√©es d\'avance correspondent √† des charges pay√©es mais relatives √† l\'exercice suivant.',
   254	      'Les √©carts de conversion r√©sultent de l\'√©valuation des cr√©ances et dettes en devises √† la cl√¥ture.',
   255	    ],
   256	    fonctionnement: {
   257	      debit: [
   258	        { description: 'Charges constat√©es d\'avance', contrePartie: ['60', '61', '62', '63'] },
   259	        { description: '√âcarts de conversion Actif (perte latente)', contrePartie: ['40', '41', '16'] },
   260	        { description: 'Cr√©ances diverses', contrePartie: ['75', '82'] },
   261	      ],
   262	      credit: [
   263	        { description: 'Produits constat√©s d\'avance', contrePartie: ['70', '71', '72', '75'] },
   264	        { description: '√âcarts de conversion Passif (gain latent)', contrePartie: ['40', '41', '16'] },
   265	        { description: 'Dettes diverses', contrePartie: ['65', '81'] },
   266	      ],
   267	    },
   268	    exclusions: [
   269	      { description: 'Les cr√©ances clients', compteCorrige: '41', libelleCompteCorrige: 'Clients et comptes rattach√©s' },
   270	      { description: 'Les dettes fournisseurs', compteCorrige: '40', libelleCompteCorrige: 'Fournisseurs et comptes rattach√©s' },
   271	    ],
   272	    elementsControle: [
   273	      'Justification de chaque solde de compte transitoire',
   274	      'V√©rification des charges et produits constat√©s d\'avance',
   275	      'Calcul des √©carts de conversion',
   276	      'Apurement des comptes d\'attente',
   277	    ],
   278	  },
   279	  {
   280	    numero: '49',
   281	    contenu: 'Le compte 49 enregistre les d√©pr√©ciations des comptes de tiers lorsque la valeur recouvrable des cr√©ances est inf√©rieure √† leur valeur nominale, en raison d\'un risque probable de non-recouvrement.',
   282	    subdivisions: [
   283	      { numero: '490', libelle: 'D√©pr√©ciations des comptes fournisseurs d√©biteurs' },
   284	      { numero: '491', libelle: 'D√©pr√©ciations des comptes clients' },
   285	      { numero: '492', libelle: 'D√©pr√©ciations des comptes personnel' },
   286	      { numero: '493', libelle: 'D√©pr√©ciations des comptes organismes sociaux' },
   287	      { numero: '494', libelle: 'D√©pr√©ciations des comptes √âtat' },
   288	      { numero: '496', libelle: 'D√©pr√©ciations des comptes associ√©s et groupe' },
   289	      { numero: '497', libelle: 'D√©pr√©ciations des comptes d√©biteurs divers' },
   290	    ],
   291	    commentaires: [
   292	      'La d√©pr√©ciation est constitu√©e d√®s qu\'il existe un risque probable de non-recouvrement.',
   293	      'Les cr√©ances irr√©couvrables d√©finitivement perdues sont pass√©es en pertes apr√®s √©puisement des voies de recours.',
   294	      'La d√©pr√©ciation est calcul√©e sur le montant hors taxes de la cr√©ance.',
   295	    ],
   296	    fonctionnement: {
   297	      debit: [
   298	        { description: 'Reprise de la d√©pr√©ciation (cr√©ance recouvr√©e ou pass√©e en perte)', contrePartie: ['791', '797'] },
   299	      ],
   300	      credit: [
   301	        { description: 'Constitution de la d√©pr√©ciation', contrePartie: ['691', '697'] },
   302	        { description: 'Augmentation de la d√©pr√©ciation', contrePartie: ['691'] },
   303	      ],
   304	    },
   305	    exclusions: [
   306	      { description: 'Les d√©pr√©ciations des stocks', compteCorrige: '39', libelleCompteCorrige: 'D√©pr√©ciations des stocks' },
   307	      { description: 'Les d√©pr√©ciations des immobilisations', compteCorrige: '29', libelleCompteCorrige: 'D√©pr√©ciations des immobilisations' },
   308	    ],
   309	    elementsControle: [
   310	      'Analyse individuelle des cr√©ances douteuses',
   311	      'Suivi des proc√©dures de recouvrement',
   312	      'Estimation du risque de non-recouvrement',
   313	      'Revue annuelle des d√©pr√©ciations',
   314	    ],
   315	  },
   316	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe5.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_5: FonctionnementCompte[] = [
     4	  {
     5	    numero: '50',
     6	    contenu: 'Le compte 50 enregistre les titres de placement, c\'est-√†-dire les titres acquis en vue de r√©aliser un gain √† br√®ve √©ch√©ance, et qui ne r√©pondent pas √† la d√©finition de titres de participation ou de titres immobilis√©s.',
     7	    subdivisions: [
     8	      { numero: '501', libelle: 'Actions propres' },
     9	      { numero: '502', libelle: 'Actions cot√©es' },
    10	      { numero: '503', libelle: 'Actions non cot√©es' },
    11	      { numero: '504', libelle: 'Obligations cot√©es' },
    12	      { numero: '505', libelle: 'Obligations non cot√©es' },
    13	      { numero: '506', libelle: 'Bons du Tr√©sor et bons de caisse √† court terme' },
    14	      { numero: '508', libelle: 'Autres valeurs assimil√©es' },
    15	    ],
    16	    commentaires: [
    17	      'Les titres de placement sont √©valu√©s au co√ªt d\'acquisition √† l\'entr√©e.',
    18	      '√Ä la cl√¥ture, ils sont √©valu√©s au cours du jour (titres cot√©s) ou √† la valeur probable de n√©gociation (titres non cot√©s).',
    19	      'Si la valeur √† la cl√¥ture est inf√©rieure au co√ªt, une d√©pr√©ciation est constat√©e.',
    20	    ],
    21	    fonctionnement: {
    22	      debit: [
    23	        { description: 'Acquisition de titres de placement', contrePartie: ['52', '53'] },
    24	        { description: 'R√©ception de titres en paiement', contrePartie: ['41', '47'] },
    25	      ],
    26	      credit: [
    27	        { description: 'Cession de titres de placement', contrePartie: ['52', '53'] },
    28	        { description: 'Remboursement de titres √† l\'√©ch√©ance', contrePartie: ['52'] },
    29	      ],
    30	    },
    31	    exclusions: [
    32	      { description: 'Les titres de participation d√©tenus durablement', compteCorrige: '26', libelleCompteCorrige: 'Titres de participation' },
    33	      { description: 'Les titres immobilis√©s √† long terme', compteCorrige: '27', libelleCompteCorrige: 'Autres immobilisations financi√®res' },
    34	    ],
    35	    elementsControle: [
    36	      'Relev√©s de portefeuille de titres',
    37	      '√âvaluation √† la valeur de march√© √† la cl√¥ture',
    38	      'Calcul des plus ou moins-values de cession',
    39	      'Concordance avec les avis d\'op√©r√©',
    40	    ],
    41	  },
    42	  {
    43	    numero: '52',
    44	    contenu: 'Le compte 52 enregistre les op√©rations r√©alis√©es avec les banques : d√©p√¥ts, retraits, virements, frais bancaires et int√©r√™ts. Le solde cr√©diteur repr√©sente les disponibilit√©s en banque, le solde d√©biteur repr√©sente un d√©couvert bancaire.',
    45	    subdivisions: [
    46	      { numero: '521', libelle: 'Banques locales' },
    47	      { numero: '522', libelle: 'Banques autres √âtats UEMOA/CEMAC' },
    48	      { numero: '523', libelle: 'Banques hors zone' },
    49	      { numero: '524', libelle: 'Banques, comptes en devises' },
    50	      { numero: '525', libelle: 'Banques, √©tablissements financiers et assimil√©s' },
    51	      { numero: '526', libelle: 'Banques, int√©r√™ts courus' },
    52	    ],
    53	    commentaires: [
    54	      'Un rapprochement bancaire doit √™tre √©tabli mensuellement pour justifier le solde.',
    55	      'Les virements internes entre comptes bancaires transitent par le compte 58 (virements internes).',
    56	      'Les comptes en devises sont convertis au cours de cl√¥ture avec constatation d\'un √©cart de conversion.',
    57	    ],
    58	    fonctionnement: {
    59	      debit: [
    60	        { description: 'Encaissements (clients, emprunts, apports)', contrePartie: ['41', '16', '46'] },
    61	        { description: 'Virements internes re√ßus', contrePartie: ['58'] },
    62	        { description: 'Cession de titres', contrePartie: ['50', '26'] },
    63	      ],
    64	      credit: [
    65	        { description: 'D√©caissements (fournisseurs, salaires, imp√¥ts)', contrePartie: ['40', '42', '44'] },
    66	        { description: 'Virements internes √©mis', contrePartie: ['58'] },
    67	        { description: 'Frais et commissions bancaires', contrePartie: ['63'] },
    68	      ],
    69	    },
    70	    exclusions: [
    71	      { description: 'Les concours bancaires courants et d√©couverts', compteCorrige: '56', libelleCompteCorrige: 'Banques, cr√©dits de tr√©sorerie' },
    72	      { description: 'Les ch√®ques √† encaisser', compteCorrige: '513', libelleCompteCorrige: 'Ch√®ques √† encaisser' },
    73	    ],
    74	    elementsControle: [
    75	      'Rapprochement bancaire mensuel',
    76	      'Confirmation bancaire annuelle',
    77	      'Analyse des suspens anciens',
    78	      'V√©rification des pouvoirs bancaires',
    79	    ],
    80	  },
    81	  {
    82	    numero: '53',
    83	    contenu: 'Le compte 53 enregistre les op√©rations avec les √©tablissements financiers et assimil√©s (CCP, Tr√©sor public, √©tablissements financiers divers) autres que les banques.',
    84	    subdivisions: [
    85	      { numero: '531', libelle: 'Ch√®ques postaux' },
    86	      { numero: '532', libelle: 'Tr√©sor' },
    87	      { numero: '533', libelle: 'Soci√©t√©s de gestion et d\'interm√©diation (SGI)' },
    88	      { numero: '538', libelle: 'Autres organismes financiers' },
    89	    ],
    90	    commentaires: [
    91	      'Les comptes ch√®ques postaux fonctionnent de la m√™me mani√®re que les comptes bancaires.',
    92	      'Un rapprochement doit √™tre √©tabli p√©riodiquement.',
    93	      'Les op√©rations de placement transitent par les comptes 50 et 53.',
    94	    ],
    95	    fonctionnement: {
    96	      debit: [
    97	        { description: 'Encaissements (virements re√ßus, versements)', contrePartie: ['41', '58'] },
    98	        { description: 'Fonds re√ßus d\'autres √©tablissements', contrePartie: ['52'] },
    99	      ],
   100	      credit: [
   101	        { description: 'D√©caissements (virements √©mis, pr√©l√®vements)', contrePartie: ['40', '42', '44'] },
   102	        { description: 'Virements vers d\'autres comptes', contrePartie: ['58'] },
   103	      ],
   104	    },
   105	    exclusions: [
   106	      { description: 'Les comptes bancaires', compteCorrige: '52', libelleCompteCorrige: 'Banques' },
   107	      { description: 'La caisse en esp√®ces', compteCorrige: '57', libelleCompteCorrige: 'Caisse' },
   108	    ],
   109	    elementsControle: [
   110	      'Rapprochement avec les relev√©s de l\'√©tablissement',
   111	      'Confirmation annuelle des soldes',
   112	      'Justification des op√©rations en suspens',
   113	    ],
   114	  },
   115	  {
   116	    numero: '56',
   117	    contenu: 'Le compte 56 enregistre les concours bancaires courants et les cr√©dits de tr√©sorerie √† court terme : d√©couverts autoris√©s, cr√©dits de campagne, escompte de papier commercial et autres concours bancaires.',
   118	    subdivisions: [
   119	      { numero: '561', libelle: 'Cr√©dits de tr√©sorerie' },
   120	      { numero: '564', libelle: 'Escompte de cr√©dits de campagne' },
   121	      { numero: '565', libelle: 'Escompte de cr√©dits ordinaires' },
   122	      { numero: '566', libelle: 'Int√©r√™ts courus' },
   123	    ],
   124	    commentaires: [
   125	      'Les concours bancaires sont class√©s dans les dettes financi√®res √† court terme au bilan.',
   126	      'L\'escompte d\'effets de commerce est un mode de financement qui donne lieu √† une dette envers la banque.',
   127	      'Ces dettes figurent au passif courant du bilan.',
   128	    ],
   129	    fonctionnement: {
   130	      debit: [
   131	        { description: 'Remboursement des concours bancaires', contrePartie: ['52'] },
   132	        { description: 'Paiement √† l\'√©ch√©ance des effets escompt√©s', contrePartie: ['412'] },
   133	      ],
   134	      credit: [
   135	        { description: 'Mobilisation de cr√©ances (escompte)', contrePartie: ['52'] },
   136	        { description: 'Obtention de cr√©dits de tr√©sorerie', contrePartie: ['52'] },
   137	      ],
   138	    },
   139	    exclusions: [
   140	      { description: 'Les emprunts √† long terme', compteCorrige: '16', libelleCompteCorrige: 'Emprunts et dettes assimil√©es' },
   141	      { description: 'Les dettes fournisseurs', compteCorrige: '40', libelleCompteCorrige: 'Fournisseurs et comptes rattach√©s' },
   142	    ],
   143	    elementsControle: [
   144	      'Conventions de cr√©dit et autorisations de d√©couvert',
   145	      'Rapprochement avec les confirmations bancaires',
   146	      'V√©rification du montant des int√©r√™ts courus',
   147	      'Conformit√© avec les plafonds autoris√©s',
   148	    ],
   149	  },
   150	  {
   151	    numero: '57',
   152	    contenu: 'Le compte 57 enregistre les mouvements d\'esp√®ces en caisse. Le solde de ce compte est toujours d√©biteur ou nul, jamais cr√©diteur.',
   153	    subdivisions: [
   154	      { numero: '571', libelle: 'Caisse si√®ge social' },
   155	      { numero: '572', libelle: 'Caisse succursale A' },
   156	      { numero: '573', libelle: 'Caisse succursale B' },
   157	      { numero: '578', libelle: 'Autres caisses' },
   158	    ],
   159	    commentaires: [
   160	      'Le solde de caisse ne peut jamais √™tre cr√©diteur : on ne peut pas sortir plus d\'esp√®ces qu\'il n\'y en a.',
   161	      'Un comptage physique de caisse doit √™tre effectu√© r√©guli√®rement et √† la cl√¥ture de l\'exercice.',
   162	      'Les mouvements de caisse doivent √™tre justifi√©s par des pi√®ces (re√ßus, bons de caisse).',
   163	    ],
   164	    fonctionnement: {
   165	      debit: [
   166	        { description: 'Encaissements en esp√®ces (ventes au comptant)', contrePartie: ['70', '41'] },
   167	        { description: 'Retrait bancaire pour alimentation de caisse', contrePartie: ['58'] },
   168	      ],
   169	      credit: [
   170	        { description: 'Paiements en esp√®ces (achats, salaires)', contrePartie: ['60', '62', '42'] },
   171	        { description: 'Versement en banque', contrePartie: ['58'] },
   172	      ],
   173	    },
   174	    exclusions: [
   175	      { description: 'Les ch√®ques et effets √† encaisser', compteCorrige: '51', libelleCompteCorrige: 'Valeurs √† encaisser' },
   176	      { description: 'Les timbres fiscaux et postaux', compteCorrige: '47', libelleCompteCorrige: 'D√©biteurs et cr√©diteurs divers' },
   177	    ],
   178	    elementsControle: [
   179	      'Inventaire physique de la caisse (comptage)',
   180	      'Concordance entre solde comptable et esp√®ces en caisse',
   181	      'Brouillard de caisse tenu √† jour',
   182	      'Plafond de caisse respect√©',
   183	    ],
   184	  },
   185	  {
   186	    numero: '59',
   187	    contenu: 'Le compte 59 enregistre les d√©pr√©ciations des titres de placement et des comptes de tr√©sorerie lorsque leur valeur √† la cl√¥ture est inf√©rieure √† leur co√ªt d\'acquisition ou √† leur valeur nominale.',
   188	    subdivisions: [
   189	      { numero: '590', libelle: 'D√©pr√©ciations des titres de placement' },
   190	      { numero: '591', libelle: 'D√©pr√©ciations des titres et valeurs √† encaisser' },
   191	      { numero: '592', libelle: 'D√©pr√©ciations des comptes banques' },
   192	      { numero: '593', libelle: 'D√©pr√©ciations des comptes √©tablissements financiers' },
   193	      { numero: '594', libelle: 'D√©pr√©ciations des comptes d\'instruments de tr√©sorerie' },
   194	    ],
   195	    commentaires: [
   196	      'La d√©pr√©ciation des titres de placement est √©valu√©e titre par titre ou par cat√©gorie homog√®ne.',
   197	      'Elle correspond √† la diff√©rence entre le co√ªt d\'acquisition et la valeur de march√© √† la cl√¥ture.',
   198	      'Les d√©pr√©ciations sont ajust√©es √† chaque cl√¥ture d\'exercice.',
   199	    ],
   200	    fonctionnement: {
   201	      debit: [
   202	        { description: 'Reprise de la d√©pr√©ciation (hausse de la valeur)', contrePartie: ['797', '779'] },
   203	        { description: 'Annulation lors de la cession des titres', contrePartie: ['797'] },
   204	      ],
   205	      credit: [
   206	        { description: 'Constitution de la d√©pr√©ciation', contrePartie: ['697', '679'] },
   207	        { description: 'Augmentation de la d√©pr√©ciation', contrePartie: ['697'] },
   208	      ],
   209	    },
   210	    exclusions: [
   211	      { description: 'Les d√©pr√©ciations des titres de participation', compteCorrige: '296', libelleCompteCorrige: 'D√©pr√©ciations des titres de participation' },
   212	      { description: 'Les d√©pr√©ciations des cr√©ances clients', compteCorrige: '491', libelleCompteCorrige: 'D√©pr√©ciations des comptes clients' },
   213	    ],
   214	    elementsControle: [
   215	      '√âvaluation des titres √† la valeur de march√©',
   216	      'Calcul individuel de la d√©pr√©ciation',
   217	      'Documentation de la m√©thodologie d\'√©valuation',
   218	      'Suivi des reprises et dotations',
   219	    ],
   220	  },
   221	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe6.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_6: FonctionnementCompte[] = [
     4	  {
     5	    numero: '60',
     6	    contenu: 'Le compte 60 enregistre les achats de biens et de services consomm√©s par l\'entreprise dans le cadre de son activit√© courante : achats de marchandises, de mati√®res premi√®res, de fournitures et les variations de stocks correspondantes.',
     7	    subdivisions: [
     8	      { numero: '601', libelle: 'Achats de marchandises' },
     9	      { numero: '602', libelle: 'Achats de mati√®res premi√®res et fournitures li√©es' },
    10	      { numero: '603', libelle: 'Variations des stocks de biens achet√©s' },
    11	      { numero: '604', libelle: 'Achats stock√©s de mati√®res et fournitures consommables' },
    12	      { numero: '605', libelle: 'Autres achats' },
    13	      { numero: '608', libelle: 'Achats d\'emballages' },
    14	      { numero: '609', libelle: 'Rabais, remises et ristournes obtenus sur achats' },
    15	    ],
    16	    commentaires: [
    17	      'Les achats sont enregistr√©s hors taxes r√©cup√©rables, au prix d\'achat major√© des frais accessoires.',
    18	      'Le compte 603 enregistre la variation de stock entre le stock initial et le stock final.',
    19	      'Les RRR obtenus sont port√©s au cr√©dit du compte 609 et viennent en d√©duction du co√ªt des achats.',
    20	    ],
    21	    fonctionnement: {
    22	      debit: [
    23	        { description: 'Achats de biens et services (factures fournisseurs)', contrePartie: ['40'] },
    24	        { description: 'Achats au comptant', contrePartie: ['52', '57'] },
    25	        { description: 'Variation de stock d√©favorable (stock initial > stock final)', contrePartie: ['31', '32', '33'] },
    26	      ],
    27	      credit: [
    28	        { description: 'Retours de marchandises aux fournisseurs', contrePartie: ['40'] },
    29	        { description: 'Rabais, remises et ristournes obtenus', contrePartie: ['40', '609'] },
    30	        { description: 'Variation de stock favorable (stock final > stock initial)', contrePartie: ['31', '32', '33'] },
    31	      ],
    32	    },
    33	    exclusions: [
    34	      { description: 'Les acquisitions d\'immobilisations', compteCorrige: '21', libelleCompteCorrige: 'Immobilisations incorporelles' },
    35	      { description: 'Les services ext√©rieurs', compteCorrige: '62', libelleCompteCorrige: 'Services ext√©rieurs A' },
    36	    ],
    37	    elementsControle: [
    38	      'Concordance avec les factures fournisseurs',
    39	      'Justification de la variation de stock',
    40	      'Rapprochement avec les bons de r√©ception',
    41	      'Cut-off des achats en fin d\'exercice',
    42	    ],
    43	  },
    44	  {
    45	    numero: '62',
    46	    contenu: 'Le compte 62 enregistre les charges de services ext√©rieurs de type A : sous-traitance, locations, charges locatives, entretien et r√©parations, primes d\'assurance et √©tudes et recherches.',
    47	    subdivisions: [
    48	      { numero: '621', libelle: 'Sous-traitance g√©n√©rale' },
    49	      { numero: '622', libelle: 'Locations et charges locatives' },
    50	      { numero: '623', libelle: 'Redevances de cr√©dit-bail et contrats assimil√©s' },
    51	      { numero: '624', libelle: 'Entretien, r√©parations et maintenance' },
    52	      { numero: '625', libelle: 'Primes d\'assurance' },
    53	      { numero: '626', libelle: '√âtudes, recherches et documentation' },
    54	      { numero: '627', libelle: 'Publicit√©, publications et relations publiques' },
    55	      { numero: '628', libelle: 'Frais de t√©l√©communications' },
    56	    ],
    57	    commentaires: [
    58	      'Les locations enregistr√©es au compte 622 concernent les biens pris en location simple (non cr√©dit-bail).',
    59	      'Les charges d\'entretien courant sont distingu√©es des d√©penses d\'immobilisation qui augmentent la dur√©e de vie ou la capacit√© de l\'actif.',
    60	      'Les frais de publicit√© sont des charges de l\'exercice sauf s\'ils r√©pondent aux crit√®res d\'immobilisation.',
    61	    ],
    62	    fonctionnement: {
    63	      debit: [
    64	        { description: 'Factures de prestataires de services', contrePartie: ['40'] },
    65	        { description: 'Paiement direct de services', contrePartie: ['52', '57'] },
    66	        { description: 'Charges constat√©es d\'avance (reprise)', contrePartie: ['476'] },
    67	      ],
    68	      credit: [
    69	        { description: 'Charges constat√©es d\'avance √† la cl√¥ture', contrePartie: ['476'] },
    70	        { description: 'Transfert de charges', contrePartie: ['78'] },
    71	      ],
    72	    },
    73	    exclusions: [
    74	      { description: 'Les achats de biens', compteCorrige: '60', libelleCompteCorrige: 'Achats' },
    75	      { description: 'Les honoraires et frais de d√©placement', compteCorrige: '63', libelleCompteCorrige: 'Services ext√©rieurs B' },
    76	    ],
    77	    elementsControle: [
    78	      'Contrats de location et de prestation',
    79	      'Factures des prestataires',
    80	      'Concordance avec les bons de commande',
    81	      'Distinction entre charges et immobilisations',
    82	    ],
    83	  },
    84	  {
    85	    numero: '63',
    86	    contenu: 'Le compte 63 enregistre les charges de services ext√©rieurs de type B : r√©mun√©rations d\'interm√©diaires et de conseils, frais de d√©placement et de r√©ception, frais postaux et de t√©l√©communications, services bancaires.',
    87	    subdivisions: [
    88	      { numero: '631', libelle: 'Frais bancaires' },
    89	      { numero: '632', libelle: 'R√©mun√©rations d\'interm√©diaires et de conseils' },
    90	      { numero: '633', libelle: 'Frais de formation du personnel' },
    91	      { numero: '634', libelle: 'Redevances pour brevets et licences' },
    92	      { numero: '635', libelle: 'Cotisations' },
    93	      { numero: '636', libelle: 'Frais de recrutement du personnel' },
    94	      { numero: '637', libelle: 'R√©mun√©rations du personnel ext√©rieur √† l\'entreprise' },
    95	      { numero: '638', libelle: 'Autres charges externes' },
    96	    ],
    97	    commentaires: [
    98	      'Les honoraires d\'avocats, experts-comptables, notaires et autres conseils sont enregistr√©s au compte 632.',
    99	      'Les frais bancaires de gestion courante (frais de tenue de compte, commissions) sont distincts des frais financiers.',
   100	      'Les frais de d√©placement et de mission sont enregistr√©s au compte 638.',
   101	    ],
   102	    fonctionnement: {
   103	      debit: [
   104	        { description: 'Factures d\'honoraires et de conseils', contrePartie: ['40'] },
   105	        { description: 'Frais de d√©placement pay√©s', contrePartie: ['52', '57'] },
   106	        { description: 'Commissions bancaires', contrePartie: ['52'] },
   107	      ],
   108	      credit: [
   109	        { description: 'Charges constat√©es d\'avance', contrePartie: ['476'] },
   110	        { description: 'Transfert de charges', contrePartie: ['78'] },
   111	      ],
   112	    },
   113	    exclusions: [
   114	      { description: 'Les int√©r√™ts bancaires (charges financi√®res)', compteCorrige: '67', libelleCompteCorrige: 'Frais financiers et charges assimil√©es' },
   115	      { description: 'Les loyers et charges locatives', compteCorrige: '62', libelleCompteCorrige: 'Services ext√©rieurs A' },
   116	    ],
   117	    elementsControle: [
   118	      'Lettres de mission et conventions d\'honoraires',
   119	      'Notes de frais et justificatifs de d√©placement',
   120	      'Relev√©s bancaires pour les frais de banque',
   121	      'Conformit√© avec les obligations de d√©claration (DAS2)',
   122	    ],
   123	  },
   124	  {
   125	    numero: '64',
   126	    contenu: 'Le compte 64 enregistre les imp√¥ts et taxes √† la charge de l\'entreprise, √† l\'exclusion de l\'imp√¥t sur les b√©n√©fices et de la TVA r√©cup√©rable. Il comprend les imp√¥ts fonciers, patentes, taxes professionnelles et droits d\'enregistrement.',
   127	    subdivisions: [
   128	      { numero: '641', libelle: 'Imp√¥ts et taxes directs' },
   129	      { numero: '642', libelle: 'Patentes et licences' },
   130	      { numero: '643', libelle: 'Imp√¥ts fonciers' },
   131	      { numero: '644', libelle: 'Imp√¥ts et taxes indirects' },
   132	      { numero: '645', libelle: 'Droits d\'enregistrement' },
   133	      { numero: '646', libelle: 'Droits de timbre' },
   134	      { numero: '647', libelle: 'P√©nalit√©s et amendes fiscales' },
   135	      { numero: '648', libelle: 'Autres imp√¥ts et taxes' },
   136	    ],
   137	    commentaires: [
   138	      'La patente et la contribution fonci√®re sont des imp√¥ts directs locaux.',
   139	      'Les droits d\'enregistrement sur acquisitions d\'immobilisations font partie du co√ªt d\'acquisition de l\'immobilisation.',
   140	      'Les p√©nalit√©s fiscales ne sont pas d√©ductibles du r√©sultat fiscal.',
   141	    ],
   142	    fonctionnement: {
   143	      debit: [
   144	        { description: 'Constatation des imp√¥ts et taxes dus', contrePartie: ['44'] },
   145	        { description: 'Paiement direct des imp√¥ts', contrePartie: ['52'] },
   146	      ],
   147	      credit: [
   148	        { description: 'Transfert de charges (quote-part r√©cup√©rable)', contrePartie: ['78'] },
   149	        { description: 'D√©gr√®vement obtenu', contrePartie: ['75'] },
   150	      ],
   151	    },
   152	    exclusions: [
   153	      { description: 'L\'imp√¥t sur les b√©n√©fices', compteCorrige: '89', libelleCompteCorrige: 'Imp√¥ts sur le r√©sultat' },
   154	      { description: 'La TVA collect√©e et d√©ductible', compteCorrige: '44', libelleCompteCorrige: '√âtat (TVA)' },
   155	    ],
   156	    elementsControle: [
   157	      'Avis d\'imposition et r√¥les',
   158	      'Concordance avec les d√©clarations fiscales',
   159	      'Calcul des provisions pour imp√¥ts',
   160	      'V√©rification de la d√©ductibilit√© fiscale',
   161	    ],
   162	  },
   163	  {
   164	    numero: '66',
   165	    contenu: 'Le compte 66 enregistre les charges de personnel, c\'est-√†-dire l\'ensemble des r√©mun√©rations brutes vers√©es au personnel et les charges sociales patronales y aff√©rentes.',
   166	    subdivisions: [
   167	      { numero: '661', libelle: 'R√©mun√©rations directes vers√©es au personnel national' },
   168	      { numero: '662', libelle: 'R√©mun√©rations directes vers√©es au personnel non national' },
   169	      { numero: '663', libelle: 'Indemnit√©s forfaitaires vers√©es au personnel' },
   170	      { numero: '664', libelle: 'Charges sociales' },
   171	      { numero: '665', libelle: 'R√©mun√©rations des administrateurs, g√©rants et associ√©s' },
   172	      { numero: '666', libelle: 'R√©mun√©rations et charges des stagiaires' },
   173	      { numero: '668', libelle: 'Autres charges sociales' },
   174	    ],
   175	    commentaires: [
   176	      'Les charges de personnel constituent g√©n√©ralement le poste de charges le plus important.',
   177	      'Le salaire brut inclut le salaire de base, les heures suppl√©mentaires, les primes et gratifications.',
   178	      'Les charges sociales patronales (CNPS, caisses de retraite) sont une charge distincte de l\'entreprise.',
   179	    ],
   180	    fonctionnement: {
   181	      debit: [
   182	        { description: 'Comptabilisation des salaires bruts', contrePartie: ['42'] },
   183	        { description: 'Charges sociales patronales', contrePartie: ['43'] },
   184	        { description: 'Gratifications et primes', contrePartie: ['42'] },
   185	      ],
   186	      credit: [
   187	        { description: 'Transfert de charges de personnel', contrePartie: ['78'] },
   188	        { description: 'Reprise de provision pour cong√©s pay√©s', contrePartie: ['15'] },
   189	      ],
   190	    },
   191	    exclusions: [
   192	      { description: 'Les r√©mun√©rations du personnel int√©rimaire', compteCorrige: '637', libelleCompteCorrige: 'R√©mun√©rations du personnel ext√©rieur' },
   193	      { description: 'Les jetons de pr√©sence des administrateurs', compteCorrige: '665', libelleCompteCorrige: 'R√©mun√©rations des administrateurs' },
   194	    ],
   195	    elementsControle: [
   196	      'Livre de paie et bulletins de salaire',
   197	      'D√©clarations sociales (CNPS, caisses de retraite)',
   198	      'Contrats de travail',
   199	      'Concordance entre charges de personnel et effectifs',
   200	    ],
   201	  },
   202	  {
   203	    numero: '67',
   204	    contenu: 'Le compte 67 enregistre les frais financiers et charges assimil√©es : int√©r√™ts des emprunts, agios bancaires, pertes de change et escomptes accord√©s.',
   205	    subdivisions: [
   206	      { numero: '671', libelle: 'Int√©r√™ts des emprunts' },
   207	      { numero: '672', libelle: 'Int√©r√™ts dans loyers de location-acquisition' },
   208	      { numero: '673', libelle: 'Escomptes accord√©s' },
   209	      { numero: '674', libelle: 'Autres int√©r√™ts' },
   210	      { numero: '675', libelle: 'Escomptes des effets de commerce' },
   211	      { numero: '676', libelle: 'Pertes de change' },
   212	      { numero: '677', libelle: 'Pertes sur cessions de titres de placement' },
   213	      { numero: '678', libelle: 'Autres charges financi√®res' },
   214	    ],
   215	    commentaires: [
   216	      'Les int√©r√™ts des emprunts sont comptabilis√©s selon le principe de la comptabilit√© d\'engagement.',
   217	      'Les pertes de change sont constat√©es lors du r√®glement de cr√©ances ou dettes en devises ou √† la cl√¥ture.',
   218	      'Les int√©r√™ts incorporables au co√ªt de production d\'un actif qualifiant sont port√©s au d√©bit de l\'immobilisation.',
   219	    ],
   220	    fonctionnement: {
   221	      debit: [
   222	        { description: 'Int√©r√™ts √©chus ou courus sur emprunts', contrePartie: ['16', '166'] },
   223	        { description: 'Pertes de change r√©alis√©es', contrePartie: ['40', '41', '52'] },
   224	        { description: 'Escomptes accord√©s aux clients', contrePartie: ['41'] },
   225	      ],
   226	      credit: [
   227	        { description: 'Transfert de charges financi√®res', contrePartie: ['78'] },
   228	        { description: 'Incorporation des int√©r√™ts au co√ªt d\'un actif', contrePartie: ['21', '23', '24'] },
   229	      ],
   230	    },
   231	    exclusions: [
   232	      { description: 'Les frais bancaires de gestion courante', compteCorrige: '631', libelleCompteCorrige: 'Frais bancaires' },
   233	      { description: 'Les dotations financi√®res aux provisions', compteCorrige: '69', libelleCompteCorrige: 'Dotations aux provisions' },
   234	    ],
   235	    elementsControle: [
   236	      'Tableaux d\'amortissement des emprunts',
   237	      'Calcul des int√©r√™ts courus √† la cl√¥ture',
   238	      'Justification des pertes de change',
   239	      'Rapprochement avec les relev√©s bancaires',
   240	    ],
   241	  },
   242	  {
   243	    numero: '68',
   244	    contenu: 'Le compte 68 enregistre les dotations aux amortissements d\'exploitation des immobilisations corporelles et incorporelles. Ces dotations constatent la consommation des avantages √©conomiques attendus sur la dur√©e d\'utilit√© des actifs.',
   245	    subdivisions: [
   246	      { numero: '681', libelle: 'Dotations aux amortissements d\'exploitation' },
   247	      { numero: '6811', libelle: 'Dotations aux amortissements des immobilisations incorporelles' },
   248	      { numero: '6812', libelle: 'Dotations aux amortissements des immobilisations corporelles' },
   249	      { numero: '6813', libelle: 'Dotations aux amortissements des immobilisations en location-acquisition' },
   250	    ],
   251	    commentaires: [
   252	      'L\'amortissement lin√©aire est la m√©thode de r√©f√©rence du SYSCOHADA.',
   253	      'La dotation est calcul√©e prorata temporis en cas d\'acquisition ou de cession en cours d\'exercice.',
   254	      'Les dur√©es d\'amortissement doivent refl√©ter la dur√©e d\'utilit√© r√©elle et non la dur√©e fiscale.',
   255	    ],
   256	    fonctionnement: {
   257	      debit: [
   258	        { description: 'Dotation aux amortissements de l\'exercice', contrePartie: ['28'] },
   259	      ],
   260	      credit: [
   261	        { description: 'Contre-passation en cas d\'erreur', contrePartie: ['28'] },
   262	      ],
   263	    },
   264	    exclusions: [
   265	      { description: 'Les dotations aux amortissements d√©rogatoires', compteCorrige: '851', libelleCompteCorrige: 'Dotations aux provisions r√©glement√©es' },
   266	      { description: 'Les dotations aux d√©pr√©ciations', compteCorrige: '69', libelleCompteCorrige: 'Dotations aux provisions' },
   267	    ],
   268	    elementsControle: [
   269	      'Concordance avec le fichier des immobilisations',
   270	      'V√©rification des taux et dur√©es d\'amortissement',
   271	      'Application correcte du prorata temporis',
   272	      'Revue des m√©thodes d\'amortissement',
   273	    ],
   274	  },
   275	  {
   276	    numero: '69',
   277	    contenu: 'Le compte 69 enregistre les dotations aux provisions et aux d√©pr√©ciations d\'exploitation et financi√®res. Ces dotations constatent les risques, charges ou pertes de valeur probables identifi√©s √† la cl√¥ture.',
   278	    subdivisions: [
   279	      { numero: '691', libelle: 'Dotations aux provisions d\'exploitation' },
   280	      { numero: '692', libelle: 'Dotations aux d√©pr√©ciations des immobilisations incorporelles' },
   281	      { numero: '693', libelle: 'Dotations aux d√©pr√©ciations des immobilisations corporelles' },
   282	      { numero: '694', libelle: 'Dotations aux d√©pr√©ciations des stocks' },
   283	      { numero: '695', libelle: 'Dotations aux d√©pr√©ciations des comptes de tiers' },
   284	      { numero: '697', libelle: 'Dotations aux provisions et d√©pr√©ciations financi√®res' },
   285	    ],
   286	    commentaires: [
   287	      'Les dotations d\'exploitation concernent les risques et charges li√©s √† l\'activit√© courante.',
   288	      'Les dotations financi√®res concernent les d√©pr√©ciations de titres et les provisions pour risques financiers.',
   289	      'Chaque dotation doit √™tre justifi√©e par un risque ou une perte de valeur identifi√©.',
   290	    ],
   291	    fonctionnement: {
   292	      debit: [
   293	        { description: 'Dotation aux provisions pour risques et charges', contrePartie: ['15'] },
   294	        { description: 'Dotation aux d√©pr√©ciations des actifs', contrePartie: ['29', '39', '49', '59'] },
   295	      ],
   296	      credit: [
   297	        { description: 'Contre-passation en cas d\'erreur', contrePartie: ['15', '29', '39', '49'] },
   298	      ],
   299	    },
   300	    exclusions: [
   301	      { description: 'Les dotations aux amortissements', compteCorrige: '68', libelleCompteCorrige: 'Dotations aux amortissements' },
   302	      { description: 'Les dotations HAO', compteCorrige: '85', libelleCompteCorrige: 'Dotations HAO' },
   303	    ],
   304	    elementsControle: [
   305	      'Justification de chaque provision et d√©pr√©ciation',
   306	      '√âvaluation du risque ou de la perte de valeur',
   307	      'Documentation des hypoth√®ses retenues',
   308	      'Revue annuelle de l\'ensemble des dotations',
   309	    ],
   310	  },
   311	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe7.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_7: FonctionnementCompte[] = [
     4	  {
     5	    numero: '70',
     6	    contenu: 'Le compte 70 enregistre le chiffre d\'affaires provenant de la vente de marchandises achet√©es et revendues en l\'√©tat. Il constitue la premi√®re composante du chiffre d\'affaires de l\'entreprise commerciale.',
     7	    subdivisions: [
     8	      { numero: '701', libelle: 'Ventes de marchandises' },
     9	      { numero: '702', libelle: 'Ventes de produits finis' },
    10	      { numero: '703', libelle: 'Ventes de produits interm√©diaires' },
    11	      { numero: '704', libelle: 'Ventes de produits r√©siduels' },
    12	      { numero: '706', libelle: 'Services vendus' },
    13	      { numero: '707', libelle: 'Produits accessoires' },
    14	      { numero: '709', libelle: 'Rabais, remises et ristournes accord√©s' },
    15	    ],
    16	    commentaires: [
    17	      'Le chiffre d\'affaires est comptabilis√© hors taxes (TVA et autres taxes collect√©es).',
    18	      'Les ventes sont enregistr√©es √† la date de livraison du bien ou d\'ach√®vement de la prestation.',
    19	      'Les RRR accord√©s sur facture sont d√©duits directement ; les RRR hors facture sont port√©s au d√©bit du compte 709.',
    20	    ],
    21	    fonctionnement: {
    22	      debit: [
    23	        { description: 'Rabais, remises et ristournes accord√©s', contrePartie: ['41', '709'] },
    24	        { description: 'Retours de marchandises par les clients', contrePartie: ['41'] },
    25	      ],
    26	      credit: [
    27	        { description: 'Ventes de marchandises √† cr√©dit', contrePartie: ['41'] },
    28	        { description: 'Ventes au comptant', contrePartie: ['52', '57'] },
    29	        { description: 'Produits accessoires (locations, commissions)', contrePartie: ['41', '52'] },
    30	      ],
    31	    },
    32	    exclusions: [
    33	      { description: 'Les produits des cessions d\'immobilisations', compteCorrige: '82', libelleCompteCorrige: 'Produits des cessions d\'immobilisations' },
    34	      { description: 'Les subventions d\'exploitation', compteCorrige: '71', libelleCompteCorrige: 'Subventions d\'exploitation' },
    35	    ],
    36	    elementsControle: [
    37	      'Concordance entre CA d√©clar√© et CA comptable',
    38	      'Rapprochement avec les d√©clarations de TVA',
    39	      'Cut-off des ventes en fin d\'exercice',
    40	      'Analyse de l\'√©volution du CA par rapport √† N-1',
    41	    ],
    42	  },
    43	  {
    44	    numero: '71',
    45	    contenu: 'Le compte 71 enregistre les subventions d\'exploitation re√ßues par l\'entreprise pour compenser l\'insuffisance de certains produits d\'exploitation ou pour faire face √† certaines charges d\'exploitation.',
    46	    subdivisions: [
    47	      { numero: '711', libelle: 'Subventions d\'exploitation re√ßues de l\'√âtat' },
    48	      { numero: '712', libelle: 'Subventions d\'exploitation re√ßues des r√©gions' },
    49	      { numero: '713', libelle: 'Subventions d\'exploitation re√ßues des communes' },
    50	      { numero: '714', libelle: 'Subventions d\'exploitation re√ßues des organismes internationaux' },
    51	      { numero: '718', libelle: 'Autres subventions d\'exploitation' },
    52	    ],
    53	    commentaires: [
    54	      'Les subventions d\'exploitation sont des produits de l\'exercice au cours duquel elles sont acquises.',
    55	      'Elles sont rattach√©es √† l\'exercice au titre duquel elles sont accord√©es (principe de sp√©cialisation).',
    56	      'Elles se distinguent des subventions d\'investissement (compte 13) et des subventions d\'√©quilibre (compte 88).',
    57	    ],
    58	    fonctionnement: {
    59	      debit: [
    60	        { description: 'Remboursement de subventions ind√ªment per√ßues', contrePartie: ['44'] },
    61	      ],
    62	      credit: [
    63	        { description: 'Notification de la subvention', contrePartie: ['441'] },
    64	        { description: 'R√©ception directe des fonds', contrePartie: ['52'] },
    65	      ],
    66	    },
    67	    exclusions: [
    68	      { description: 'Les subventions d\'investissement', compteCorrige: '13', libelleCompteCorrige: 'Subventions d\'investissement' },
    69	      { description: 'Les subventions d\'√©quilibre', compteCorrige: '88', libelleCompteCorrige: 'Subventions d\'√©quilibre' },
    70	    ],
    71	    elementsControle: [
    72	      'Convention ou d√©cision d\'attribution de la subvention',
    73	      'Respect des conditions d\'attribution',
    74	      'Rattachement √† l\'exercice correct',
    75	    ],
    76	  },
    77	  {
    78	    numero: '72',
    79	    contenu: 'Le compte 72 enregistre le co√ªt de production des immobilisations cr√©√©es par l\'entreprise pour elle-m√™me (production immobilis√©e). Il s\'agit de la contrepartie des charges engag√©es pour produire des actifs destin√©s √† rester dans l\'entreprise.',
    80	    subdivisions: [
    81	      { numero: '721', libelle: 'Production immobilis√©e, immobilisations incorporelles' },
    82	      { numero: '722', libelle: 'Production immobilis√©e, immobilisations corporelles' },
    83	    ],
    84	    commentaires: [
    85	      'La production immobilis√©e permet de neutraliser l\'effet des charges engag√©es pour la cr√©ation d\'actifs.',
    86	      'Le montant correspond au co√ªt de production r√©el (charges directes + quote-part de charges indirectes).',
    87	      'Elle est soumise √† la TVA dans certains cas (livraison √† soi-m√™me).',
    88	    ],
    89	    fonctionnement: {
    90	      debit: [
    91	        { description: 'Contre-passation en cas d\'erreur ou d\'abandon du projet', contrePartie: ['21', '22', '23', '24'] },
    92	      ],
    93	      credit: [
    94	        { description: 'Co√ªt de production des immobilisations cr√©√©es', contrePartie: ['21', '22', '23', '24'] },
    95	      ],
    96	    },
    97	    exclusions: [
    98	      { description: 'Les produits des ventes de biens et services √† des tiers', compteCorrige: '70', libelleCompteCorrige: 'Ventes' },
    99	      { description: 'La variation de stocks de produits', compteCorrige: '73', libelleCompteCorrige: 'Variations de stocks de biens produits' },
   100	    ],
   101	    elementsControle: [
   102	      'Fiche de co√ªt de production d√©taill√©e',
   103	      'Concordance avec les charges immobilis√©es',
   104	      'Conformit√© de la m√©thode de calcul du co√ªt de production',
   105	      'Le cas √©ch√©ant, d√©claration de livraison √† soi-m√™me (TVA)',
   106	    ],
   107	  },
   108	  {
   109	    numero: '75',
   110	    contenu: 'Le compte 75 enregistre les autres produits courants qui ne proviennent pas de l\'activit√© principale de l\'entreprise mais qui sont de nature r√©currente : revenus des immeubles non affect√©s √† l\'exploitation, redevances, indemnit√©s d\'assurance.',
   111	    subdivisions: [
   112	      { numero: '751', libelle: 'Revenus des immeubles non affect√©s aux activit√©s professionnelles' },
   113	      { numero: '752', libelle: 'Revenus des brevets, licences et droits similaires' },
   114	      { numero: '753', libelle: 'Jetons de pr√©sence et r√©mun√©rations d\'administrateur' },
   115	      { numero: '754', libelle: 'Indemnit√©s d\'assurance re√ßues' },
   116	      { numero: '758', libelle: 'Produits divers' },
   117	    ],
   118	    commentaires: [
   119	      'Ces produits ne font pas partie du chiffre d\'affaires mais contribuent au r√©sultat d\'exploitation.',
   120	      'Les indemnit√©s d\'assurance sont comptabilis√©es lorsque le droit est acquis.',
   121	      'Les redevances de brevets et licences sont rattach√©es √† l\'exercice concern√©.',
   122	    ],
   123	    fonctionnement: {
   124	      debit: [
   125	        { description: 'Contre-passation en cas de produit constat√© d\'avance', contrePartie: ['477'] },
   126	      ],
   127	      credit: [
   128	        { description: 'Revenus locatifs', contrePartie: ['41', '52'] },
   129	        { description: 'Redevances re√ßues', contrePartie: ['41', '52'] },
   130	        { description: 'Indemnit√©s d\'assurance encaiss√©es', contrePartie: ['52', '41'] },
   131	      ],
   132	    },
   133	    exclusions: [
   134	      { description: 'Les produits des activit√©s ordinaires (ventes)', compteCorrige: '70', libelleCompteCorrige: 'Ventes' },
   135	      { description: 'Les revenus financiers (dividendes, int√©r√™ts)', compteCorrige: '77', libelleCompteCorrige: 'Revenus financiers et produits assimil√©s' },
   136	    ],
   137	    elementsControle: [
   138	      'Contrats de location et baux',
   139	      'Conventions de redevances',
   140	      'D√©clarations de sinistres et correspondances avec les assureurs',
   141	      'Rattachement √† l\'exercice correct',
   142	    ],
   143	  },
   144	  {
   145	    numero: '77',
   146	    contenu: 'Le compte 77 enregistre les revenus financiers et produits assimil√©s : dividendes re√ßus, int√©r√™ts per√ßus, gains de change et escomptes obtenus.',
   147	    subdivisions: [
   148	      { numero: '771', libelle: 'Int√©r√™ts de pr√™ts et cr√©ances diverses' },
   149	      { numero: '772', libelle: 'Revenus de participations' },
   150	      { numero: '773', libelle: 'Escomptes obtenus' },
   151	      { numero: '774', libelle: 'Revenus de titres de placement' },
   152	      { numero: '776', libelle: 'Gains de change' },
   153	      { numero: '777', libelle: 'Gains sur cessions de titres de placement' },
   154	      { numero: '778', libelle: 'Autres produits financiers' },
   155	    ],
   156	    commentaires: [
   157	      'Les dividendes sont comptabilis√©s lorsque le droit est acquis (d√©cision de distribution par l\'AG).',
   158	      'Les int√©r√™ts courus non √©chus sont rattach√©s √† l\'exercice par le jeu des comptes de r√©gularisation.',
   159	      'Les gains de change sont constat√©s lors du r√®glement des op√©rations en devises √©trang√®res.',
   160	    ],
   161	    fonctionnement: {
   162	      debit: [
   163	        { description: 'Contre-passation des produits constat√©s d\'avance', contrePartie: ['477'] },
   164	      ],
   165	      credit: [
   166	        { description: 'Dividendes re√ßus des filiales et participations', contrePartie: ['52', '46'] },
   167	        { description: 'Int√©r√™ts de pr√™ts et placements', contrePartie: ['52', '27', '50'] },
   168	        { description: 'Gains de change r√©alis√©s', contrePartie: ['40', '41', '52'] },
   169	      ],
   170	    },
   171	    exclusions: [
   172	      { description: 'Les produits des cessions de titres de participation', compteCorrige: '82', libelleCompteCorrige: 'Produits des cessions d\'immobilisations' },
   173	      { description: 'Les produits d\'exploitation divers', compteCorrige: '75', libelleCompteCorrige: 'Autres produits' },
   174	    ],
   175	    elementsControle: [
   176	      'Avis de cr√©dit des dividendes et relev√©s bancaires',
   177	      'Calcul des int√©r√™ts courus √† la cl√¥ture',
   178	      'Justification des gains de change',
   179	      'Concordance avec les contrats de pr√™t et les placements',
   180	    ],
   181	  },
   182	  {
   183	    numero: '78',
   184	    contenu: 'Le compte 78 enregistre les transferts de charges d\'exploitation et financi√®res. Le transfert de charges permet de neutraliser une charge enregistr√©e par nature en la transf√©rant √† un autre compte (immobilisation, stock, ou tiers).',
   185	    subdivisions: [
   186	      { numero: '781', libelle: 'Transferts de charges d\'exploitation' },
   187	      { numero: '787', libelle: 'Transferts de charges financi√®res' },
   188	    ],
   189	    commentaires: [
   190	      'Le transfert de charges n\'est pas un produit au sens strict mais une r√©gularisation.',
   191	      'Il est utilis√© pour incorporer des charges au co√ªt de production des immobilisations ou des stocks.',
   192	      'Il sert √©galement √† transf√©rer des charges √† des comptes de tiers (indemnit√©s d\'assurance par exemple).',
   193	    ],
   194	    fonctionnement: {
   195	      debit: [
   196	        { description: 'Contre-passation en cas d\'erreur', contrePartie: ['60', '62', '63', '66', '67'] },
   197	      ],
   198	      credit: [
   199	        { description: 'Transfert de charges d\'exploitation vers immobilisations', contrePartie: ['21', '23', '24'] },
   200	        { description: 'Transfert de charges financi√®res incorporables', contrePartie: ['21', '23'] },
   201	        { description: 'Transfert de charges couvertes par des indemnit√©s', contrePartie: ['75', '41'] },
   202	      ],
   203	    },
   204	    exclusions: [
   205	      { description: 'Les reprises de provisions et d√©pr√©ciations', compteCorrige: '79', libelleCompteCorrige: 'Reprises de provisions' },
   206	      { description: 'La production immobilis√©e', compteCorrige: '72', libelleCompteCorrige: 'Production immobilis√©e' },
   207	    ],
   208	    elementsControle: [
   209	      'Justification de chaque transfert de charges',
   210	      'Concordance avec les charges transf√©r√©es',
   211	      'Documentation de la base de calcul',
   212	    ],
   213	  },
   214	  {
   215	    numero: '79',
   216	    contenu: 'Le compte 79 enregistre les reprises de provisions d\'exploitation et financi√®res, ainsi que les reprises de d√©pr√©ciations, lorsque le risque, la charge ou la perte de valeur ayant motiv√© la provision ou la d√©pr√©ciation n\'existe plus ou a diminu√©.',
   217	    subdivisions: [
   218	      { numero: '791', libelle: 'Reprises de provisions d\'exploitation' },
   219	      { numero: '793', libelle: 'Reprises de d√©pr√©ciations des immobilisations' },
   220	      { numero: '794', libelle: 'Reprises de d√©pr√©ciations des stocks' },
   221	      { numero: '795', libelle: 'Reprises de d√©pr√©ciations des comptes de tiers' },
   222	      { numero: '797', libelle: 'Reprises de provisions et d√©pr√©ciations financi√®res' },
   223	      { numero: '798', libelle: 'Reprises d\'amortissements' },
   224	    ],
   225	    commentaires: [
   226	      'La reprise est effectu√©e lorsque la provision ou la d√©pr√©ciation est devenue sans objet, totalement ou partiellement.',
   227	      'La reprise est √©galement effectu√©e lors de la r√©alisation du risque ou de la charge provisionn√©e.',
   228	      'Le montant de la reprise est limit√© au montant de la provision ou d√©pr√©ciation ant√©rieurement constitu√©e.',
   229	    ],
   230	    fonctionnement: {
   231	      debit: [
   232	        { description: 'Contre-passation en cas d\'erreur', contrePartie: ['15', '29', '39', '49', '59'] },
   233	      ],
   234	      credit: [
   235	        { description: 'Reprise de provision pour risques et charges', contrePartie: ['15'] },
   236	        { description: 'Reprise de d√©pr√©ciation d\'immobilisations', contrePartie: ['29'] },
   237	        { description: 'Reprise de d√©pr√©ciation de stocks', contrePartie: ['39'] },
   238	        { description: 'Reprise de d√©pr√©ciation de cr√©ances', contrePartie: ['49'] },
   239	      ],
   240	    },
   241	    exclusions: [
   242	      { description: 'Les reprises HAO', compteCorrige: '86', libelleCompteCorrige: 'Reprises HAO' },
   243	      { description: 'Les transferts de charges', compteCorrige: '78', libelleCompteCorrige: 'Transferts de charges' },
   244	    ],
   245	    elementsControle: [
   246	      'Justification de la reprise (disparition du risque ou r√©alisation)',
   247	      'Concordance avec la dotation d\'origine',
   248	      'Limitation au montant de la provision ou d√©pr√©ciation existante',
   249	      'Documentation de l\'√©v√©nement ayant motiv√© la reprise',
   250	    ],
   251	  },
   252	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe8.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_8: FonctionnementCompte[] = [
     4	  {
     5	    numero: '81',
     6	    contenu: 'Le compte 81 enregistre les valeurs comptables nettes des cessions d\'immobilisations, c\'est-√†-dire la valeur d\'origine des immobilisations c√©d√©es diminu√©e des amortissements et d√©pr√©ciations pratiqu√©s jusqu\'√† la date de cession.',
     7	    subdivisions: [
     8	      { numero: '811', libelle: 'Valeurs comptables des cessions d\'immobilisations incorporelles' },
     9	      { numero: '812', libelle: 'Valeurs comptables des cessions d\'immobilisations corporelles' },
    10	      { numero: '816', libelle: 'Valeurs comptables des cessions d\'immobilisations financi√®res' },
    11	    ],
    12	    commentaires: [
    13	      'La VNC est calcul√©e comme : valeur brute - amortissements cumul√©s - d√©pr√©ciations cumul√©es.',
    14	      'Le r√©sultat de cession est la diff√©rence entre le produit de cession (compte 82) et la VNC (compte 81).',
    15	      'L\'op√©ration de cession est une op√©ration HAO si elle n\'est pas li√©e √† l\'activit√© courante.',
    16	    ],
    17	    fonctionnement: {
    18	      debit: [
    19	        { description: 'VNC de l\'immobilisation c√©d√©e (valeur brute - amortissements)', contrePartie: ['21', '22', '23', '24', '26', '27'] },
    20	      ],
    21	      credit: [
    22	        { description: 'Amortissements de l\'immobilisation c√©d√©e (sortie des amortissements)', contrePartie: ['28'] },
    23	        { description: 'D√©pr√©ciations de l\'immobilisation c√©d√©e', contrePartie: ['29'] },
    24	      ],
    25	    },
    26	    exclusions: [
    27	      { description: 'Les charges d\'exploitation courantes', compteCorrige: '60', libelleCompteCorrige: 'Achats' },
    28	      { description: 'Les charges HAO autres que cessions', compteCorrige: '83', libelleCompteCorrige: 'Charges HAO' },
    29	    ],
    30	    elementsControle: [
    31	      'Acte de cession ou facture de vente',
    32	      'Calcul de la VNC √† la date de cession',
    33	      'Concordance avec le fichier des immobilisations',
    34	      'Compl√©ment d\'amortissement jusqu\'√† la date de cession',
    35	    ],
    36	  },
    37	  {
    38	    numero: '82',
    39	    contenu: 'Le compte 82 enregistre les produits des cessions d\'immobilisations, c\'est-√†-dire le prix de vente convenu entre les parties pour la cession d\'immobilisations incorporelles, corporelles ou financi√®res.',
    40	    subdivisions: [
    41	      { numero: '821', libelle: 'Produits des cessions d\'immobilisations incorporelles' },
    42	      { numero: '822', libelle: 'Produits des cessions d\'immobilisations corporelles' },
    43	      { numero: '826', libelle: 'Produits des cessions d\'immobilisations financi√®res' },
    44	    ],
    45	    commentaires: [
    46	      'Le produit de cession est enregistr√© au prix de vente net des frais de cession.',
    47	      'La plus-value ou moins-value de cession r√©sulte de la comparaison entre le compte 82 et le compte 81.',
    48	      'En cas de cession d\'un bien en cr√©dit-bail, l\'√©criture retrace la lev√©e d\'option d\'achat puis la cession.',
    49	    ],
    50	    fonctionnement: {
    51	      debit: [
    52	        { description: 'Contre-passation en cas d\'annulation de la cession', contrePartie: ['41', '47'] },
    53	      ],
    54	      credit: [
    55	        { description: 'Prix de cession de l\'immobilisation', contrePartie: ['41', '47', '52'] },
    56	        { description: 'Indemnit√© d\'expropriation', contrePartie: ['44', '47'] },
    57	      ],
    58	    },
    59	    exclusions: [
    60	      { description: 'Les produits d\'exploitation (ventes de biens)', compteCorrige: '70', libelleCompteCorrige: 'Ventes' },
    61	      { description: 'Les produits HAO autres que cessions', compteCorrige: '84', libelleCompteCorrige: 'Produits HAO' },
    62	    ],
    63	    elementsControle: [
    64	      'Acte de cession ou facture de vente',
    65	      'Encaissement du prix de cession',
    66	      'Calcul de la plus ou moins-value',
    67	      'Concordance avec le fichier des immobilisations',
    68	    ],
    69	  },
    70	  {
    71	    numero: '83',
    72	    contenu: 'Le compte 83 enregistre les charges hors activit√©s ordinaires (HAO), c\'est-√†-dire les charges ne relevant pas de l\'activit√© courante de l\'entreprise et pr√©sentant un caract√®re exceptionnel ou non r√©current.',
    73	    subdivisions: [
    74	      { numero: '831', libelle: 'Charges HAO constat√©es' },
    75	      { numero: '834', libelle: 'Pertes sur cr√©ances HAO' },
    76	      { numero: '835', libelle: 'Dons et lib√©ralit√©s accord√©s' },
    77	      { numero: '836', libelle: 'Abandons de cr√©ances consentis' },
    78	      { numero: '837', libelle: 'Charges provisionn√©es HAO' },
    79	      { numero: '838', libelle: 'Autres charges HAO' },
    80	    ],
    81	    commentaires: [
    82	      'Les charges HAO sont des charges exceptionnelles ou non r√©currentes par nature.',
    83	      'Les p√©nalit√©s, amendes et dommages-int√©r√™ts vers√©s constituent des charges HAO.',
    84	      'Les abandons de cr√©ances √† caract√®re commercial ne sont pas des charges HAO mais des charges d\'exploitation.',
    85	    ],
    86	    fonctionnement: {
    87	      debit: [
    88	        { description: 'Charges HAO constat√©es (p√©nalit√©s, amendes)', contrePartie: ['44', '47', '52'] },
    89	        { description: 'Dons et lib√©ralit√©s', contrePartie: ['52', '57'] },
    90	        { description: 'Abandons de cr√©ances', contrePartie: ['41', '27'] },
    91	      ],
    92	      credit: [
    93	        { description: 'Transfert de charges HAO', contrePartie: ['84'] },
    94	      ],
    95	    },
    96	    exclusions: [
    97	      { description: 'Les charges d\'exploitation courantes', compteCorrige: '60', libelleCompteCorrige: 'Achats' },
    98	      { description: 'Les VNC des cessions d\'immobilisations', compteCorrige: '81', libelleCompteCorrige: 'Valeurs comptables des cessions d\'immobilisations' },
    99	    ],
   100	    elementsControle: [
   101	      'Pi√®ces justificatives de la charge exceptionnelle',
   102	      'Caract√®re non r√©current av√©r√©',
   103	      'D√©cisions du conseil d\'administration pour les dons importants',
   104	      'Convention pour les abandons de cr√©ances',
   105	    ],
   106	  },
   107	  {
   108	    numero: '84',
   109	    contenu: 'Le compte 84 enregistre les produits hors activit√©s ordinaires (HAO), c\'est-√†-dire les produits ne relevant pas de l\'activit√© courante de l\'entreprise et pr√©sentant un caract√®re exceptionnel ou non r√©current.',
   110	    subdivisions: [
   111	      { numero: '841', libelle: 'Produits HAO constat√©s' },
   112	      { numero: '845', libelle: 'Dons et lib√©ralit√©s re√ßus' },
   113	      { numero: '846', libelle: 'Abandons de cr√©ances obtenus' },
   114	      { numero: '848', libelle: 'Autres produits HAO' },
   115	    ],
   116	    commentaires: [
   117	      'Les produits HAO sont des produits exceptionnels ou non r√©currents par nature.',
   118	      'Les d√©gr√®vements d\'imp√¥ts relatifs √† des exercices ant√©rieurs peuvent constituer des produits HAO.',
   119	      'Les dons et lib√©ralit√©s re√ßus d\'un montant significatif sont des produits HAO.',
   120	    ],
   121	    fonctionnement: {
   122	      debit: [
   123	        { description: 'Contre-passation en cas de produit constat√© √† tort', contrePartie: ['47'] },
   124	      ],
   125	      credit: [
   126	        { description: 'Produits HAO encaiss√©s ou constat√©s', contrePartie: ['52', '41', '47'] },
   127	        { description: 'Dons et lib√©ralit√©s re√ßus', contrePartie: ['52', '57'] },
   128	        { description: 'Abandons de cr√©ances obtenus', contrePartie: ['40', '16'] },
   129	      ],
   130	    },
   131	    exclusions: [
   132	      { description: 'Les produits d\'exploitation courants', compteCorrige: '70', libelleCompteCorrige: 'Ventes' },
   133	      { description: 'Les produits de cessions d\'immobilisations', compteCorrige: '82', libelleCompteCorrige: 'Produits des cessions d\'immobilisations' },
   134	    ],
   135	    elementsControle: [
   136	      'Pi√®ces justificatives du produit exceptionnel',
   137	      'Caract√®re non r√©current av√©r√©',
   138	      'Justification de la classification en HAO',
   139	      'Convention pour les abandons de cr√©ances obtenus',
   140	    ],
   141	  },
   142	  {
   143	    numero: '85',
   144	    contenu: 'Le compte 85 enregistre les dotations hors activit√©s ordinaires (HAO) aux amortissements, provisions r√©glement√©es et autres provisions exceptionnelles li√©es √† des √©v√©nements HAO.',
   145	    subdivisions: [
   146	      { numero: '851', libelle: 'Dotations aux provisions r√©glement√©es' },
   147	      { numero: '852', libelle: 'Dotations aux amortissements HAO' },
   148	      { numero: '853', libelle: 'Dotations aux provisions pour risques et charges HAO' },
   149	      { numero: '854', libelle: 'Dotations aux provisions pour d√©pr√©ciations HAO' },
   150	      { numero: '858', libelle: 'Autres dotations HAO' },
   151	    ],
   152	    commentaires: [
   153	      'Les dotations aux provisions r√©glement√©es (amortissements d√©rogatoires) sont des dotations HAO.',
   154	      'Les dotations pour risques et charges HAO concernent des √©v√©nements exceptionnels.',
   155	      'Les dotations HAO ne sont g√©n√©ralement pas d√©ductibles fiscalement.',
   156	    ],
   157	    fonctionnement: {
   158	      debit: [
   159	        { description: 'Dotation aux provisions r√©glement√©es', contrePartie: ['14'] },
   160	        { description: 'Dotation aux provisions HAO', contrePartie: ['15', '19'] },
   161	        { description: 'Dotation aux amortissements HAO', contrePartie: ['28'] },
   162	      ],
   163	      credit: [
   164	        { description: 'Contre-passation en cas d\'erreur', contrePartie: ['14', '15'] },
   165	      ],
   166	    },
   167	    exclusions: [
   168	      { description: 'Les dotations aux amortissements d\'exploitation', compteCorrige: '68', libelleCompteCorrige: 'Dotations aux amortissements' },
   169	      { description: 'Les dotations aux provisions d\'exploitation', compteCorrige: '69', libelleCompteCorrige: 'Dotations aux provisions' },
   170	    ],
   171	    elementsControle: [
   172	      'Calcul des amortissements d√©rogatoires',
   173	      'Justification du caract√®re HAO',
   174	      'Conformit√© aux textes r√©glementaires',
   175	      'Documentation des √©v√©nements exceptionnels',
   176	    ],
   177	  },
   178	  {
   179	    numero: '86',
   180	    contenu: 'Le compte 86 enregistre les reprises hors activit√©s ordinaires (HAO) de provisions r√©glement√©es, de provisions pour risques et charges HAO et de d√©pr√©ciations HAO, ainsi que les transferts de charges HAO.',
   181	    subdivisions: [
   182	      { numero: '861', libelle: 'Reprises de provisions r√©glement√©es' },
   183	      { numero: '862', libelle: 'Reprises d\'amortissements HAO' },
   184	      { numero: '863', libelle: 'Reprises de provisions pour risques et charges HAO' },
   185	      { numero: '864', libelle: 'Reprises de provisions pour d√©pr√©ciations HAO' },
   186	      { numero: '865', libelle: 'Reprises de subventions d\'investissement' },
   187	      { numero: '868', libelle: 'Autres reprises HAO' },
   188	    ],
   189	    commentaires: [
   190	      'Les reprises de provisions r√©glement√©es interviennent quand l\'avantage fiscal cesse.',
   191	      'La reprise des subventions d\'investissement suit le rythme d\'amortissement des biens subventionn√©s.',
   192	      'Les reprises HAO sont des produits et contribuent √† la formation du r√©sultat HAO.',
   193	    ],
   194	    fonctionnement: {
   195	      debit: [
   196	        { description: 'Contre-passation en cas d\'erreur', contrePartie: ['14', '15', '13'] },
   197	      ],
   198	      credit: [
   199	        { description: 'Reprise de provisions r√©glement√©es', contrePartie: ['14'] },
   200	        { description: 'Reprise de provisions HAO', contrePartie: ['15', '19'] },
   201	        { description: 'Quote-part de subvention d\'investissement vir√©e au r√©sultat', contrePartie: ['13'] },
   202	      ],
   203	    },
   204	    exclusions: [
   205	      { description: 'Les reprises de provisions d\'exploitation', compteCorrige: '79', libelleCompteCorrige: 'Reprises de provisions' },
   206	      { description: 'Les produits des cessions d\'immobilisations', compteCorrige: '82', libelleCompteCorrige: 'Produits des cessions d\'immobilisations' },
   207	    ],
   208	    elementsControle: [
   209	      'Justification de chaque reprise HAO',
   210	      'Calcul de la quote-part de subvention d\'investissement',
   211	      'Conformit√© du rythme de reprise',
   212	      'Concordance avec les dotations d\'origine',
   213	    ],
   214	  },
   215	  {
   216	    numero: '87',
   217	    contenu: 'Le compte 87 enregistre les participations des travailleurs aux b√©n√©fices de l\'entreprise, lorsqu\'une telle participation est pr√©vue par la l√©gislation, les conventions collectives ou les accords d\'entreprise.',
   218	    subdivisions: [
   219	      { numero: '871', libelle: 'Participation l√©gale des travailleurs' },
   220	      { numero: '872', libelle: 'Participation contractuelle des travailleurs' },
   221	      { numero: '878', libelle: 'Autres formes de participation' },
   222	    ],
   223	    commentaires: [
   224	      'La participation des travailleurs est une charge de l\'exercice au titre duquel elle est calcul√©e.',
   225	      'Elle est provisionn√©e √† la cl√¥ture si le montant n\'est pas d√©finitivement arr√™t√©.',
   226	      'Son r√©gime fiscal varie selon la l√©gislation de chaque √âtat membre de l\'OHADA.',
   227	    ],
   228	    fonctionnement: {
   229	      debit: [
   230	        { description: 'Participation des travailleurs de l\'exercice', contrePartie: ['42', '43'] },
   231	      ],
   232	      credit: [
   233	        { description: 'Contre-passation de la provision (exercice pr√©c√©dent)', contrePartie: ['15'] },
   234	      ],
   235	    },
   236	    exclusions: [
   237	      { description: 'Les r√©mun√©rations du personnel', compteCorrige: '66', libelleCompteCorrige: 'Charges de personnel' },
   238	      { description: 'Les dividendes des associ√©s', compteCorrige: '465', libelleCompteCorrige: 'Associ√©s, dividendes √† payer' },
   239	    ],
   240	    elementsControle: [
   241	      'Calcul de la participation conform√©ment aux textes applicables',
   242	      'PV du comit√© d\'entreprise',
   243	      'Provision constitu√©e √† la cl√¥ture',
   244	    ],
   245	  },
   246	  {
   247	    numero: '89',
   248	    contenu: 'Le compte 89 enregistre l\'imp√¥t sur le r√©sultat de l\'exercice, c\'est-√†-dire l\'imp√¥t sur les b√©n√©fices des soci√©t√©s ou l\'imp√¥t sur le revenu d√ª au titre de l\'exercice. Il inclut l\'imp√¥t exigible et, le cas √©ch√©ant, l\'imp√¥t diff√©r√©.',
   249	    subdivisions: [
   250	      { numero: '891', libelle: 'Imp√¥t sur les b√©n√©fices de l\'exercice' },
   251	      { numero: '892', libelle: 'Rappels d\'imp√¥ts sur les r√©sultats' },
   252	      { numero: '895', libelle: 'Imp√¥t minimum forfaitaire (IMF)' },
   253	      { numero: '899', libelle: 'D√©gr√®vements et annulations d\'imp√¥ts sur les r√©sultats' },
   254	    ],
   255	    commentaires: [
   256	      'L\'imp√¥t sur les b√©n√©fices est calcul√© sur le r√©sultat fiscal (r√©sultat comptable retrait√© des r√©int√©grations et d√©ductions).',
   257	      'L\'imp√¥t minimum forfaitaire (IMF) est d√ª m√™me en cas de r√©sultat d√©ficitaire dans certains pays.',
   258	      'L\'imp√¥t diff√©r√© r√©sulte des diff√©rences temporelles entre le r√©sultat comptable et le r√©sultat fiscal.',
   259	    ],
   260	    fonctionnement: {
   261	      debit: [
   262	        { description: 'Imp√¥t sur les b√©n√©fices de l\'exercice', contrePartie: ['44'] },
   263	        { description: 'Imp√¥t minimum forfaitaire', contrePartie: ['44'] },
   264	        { description: 'Rappels d\'imp√¥ts sur les r√©sultats', contrePartie: ['44'] },
   265	      ],
   266	      credit: [
   267	        { description: 'D√©gr√®vements d\'imp√¥ts obtenus', contrePartie: ['44'] },
   268	        { description: 'Annulation de rappels contest√©s avec succ√®s', contrePartie: ['44'] },
   269	      ],
   270	    },
   271	    exclusions: [
   272	      { description: 'Les imp√¥ts et taxes d\'exploitation (patente, foncier)', compteCorrige: '64', libelleCompteCorrige: 'Imp√¥ts et taxes' },
   273	      { description: 'La TVA collect√©e et d√©ductible', compteCorrige: '44', libelleCompteCorrige: '√âtat (TVA)' },
   274	    ],
   275	    elementsControle: [
   276	      'Liasse fiscale et d√©claration de r√©sultat',
   277	      'Tableau de passage du r√©sultat comptable au r√©sultat fiscal',
   278	      'Avis d\'imposition et acomptes vers√©s',
   279	      'Calcul de l\'imp√¥t diff√©r√© le cas √©ch√©ant',
   280	    ],
   281	  },
   282	]

================================================================================
FILE: src/data/syscohada/fonctionnement/classe9.ts
================================================================================
     1	import type { FonctionnementCompte } from '../types'
     2	
     3	export const FONCTIONNEMENT_CLASSE_9: FonctionnementCompte[] = [
     4	  {
     5	    numero: '90',
     6	    contenu: 'Le compte 90 enregistre les engagements hors bilan obtenus par l\'entreprise, c\'est-√†-dire les engagements re√ßus de tiers qui constituent des droits potentiels pour l\'entreprise sans figurer au bilan.',
     7	    subdivisions: [
     8	      { numero: '901', libelle: 'Avals, cautions et garanties obtenus' },
     9	      { numero: '902', libelle: 'Effets escompt√©s non √©chus' },
    10	      { numero: '903', libelle: 'Redevances de cr√©dit-bail restant √† courir' },
    11	      { numero: '905', libelle: 'Biens d√©tenus en garantie' },
    12	      { numero: '906', libelle: 'Engagements re√ßus sur march√©s √† terme' },
    13	      { numero: '908', libelle: 'Autres engagements obtenus' },
    14	    ],
    15	    commentaires: [
    16	      'Les engagements obtenus sont des droits conditionnels qui ne sont pas comptabilis√©s au bilan.',
    17	      'Ils doivent √™tre mentionn√©s dans les notes annexes pour donner une image fid√®le de la situation financi√®re.',
    18	      'Les garanties obtenues des banques ou d\'autres tiers sont enregistr√©es dans ce compte.',
    19	    ],
    20	    fonctionnement: {
    21	      debit: [
    22	        { description: 'Constatation de l\'engagement obtenu', contrePartie: ['91'] },
    23	      ],
    24	      credit: [
    25	        { description: 'Annulation de l\'engagement (expiration, lev√©e, annulation)', contrePartie: ['91'] },
    26	      ],
    27	    },
    28	    exclusions: [
    29	      { description: 'Les cr√©ances certaines inscrites au bilan', compteCorrige: '41', libelleCompteCorrige: 'Clients et comptes rattach√©s' },
    30	      { description: 'Les engagements donn√©s par l\'entreprise', compteCorrige: '91', libelleCompteCorrige: 'Engagements donn√©s' },
    31	    ],
    32	    elementsControle: [
    33	      'Contrats et conventions mentionnant les garanties',
    34	      'Lettres de garantie et cautions bancaires',
    35	      'Revue annuelle des engagements hors bilan',
    36	      'Mention dans les notes annexes',
    37	    ],
    38	  },
    39	  {
    40	    numero: '91',
    41	    contenu: 'Le compte 91 enregistre les engagements hors bilan donn√©s par l\'entreprise, c\'est-√†-dire les obligations potentielles prises envers des tiers qui ne figurent pas au passif du bilan mais qui pourraient entra√Æner une sortie de ressources.',
    42	    subdivisions: [
    43	      { numero: '911', libelle: 'Avals, cautions et garanties donn√©s' },
    44	      { numero: '912', libelle: 'Hypoth√®ques et nantissements consentis' },
    45	      { numero: '913', libelle: 'Effets circulant sous l\'endos de l\'entreprise' },
    46	      { numero: '914', libelle: 'Redevances de cr√©dit-bail restant √† payer' },
    47	      { numero: '916', libelle: 'Engagements donn√©s sur march√©s √† terme' },
    48	      { numero: '918', libelle: 'Autres engagements donn√©s' },
    49	    ],
    50	    commentaires: [
    51	      'Les engagements donn√©s constituent des passifs √©ventuels qui doivent √™tre suivis attentivement.',
    52	      'Si la probabilit√© de sortie de ressources devient significative, une provision pour risques doit √™tre constitu√©e (compte 15).',
    53	      'Les cautions donn√©es √† des filiales ou associ√©s doivent √™tre d√©taill√©es dans les notes annexes.',
    54	    ],
    55	    fonctionnement: {
    56	      debit: [
    57	        { description: 'Annulation de l\'engagement (√©ch√©ance atteinte, lev√©e)', contrePartie: ['90'] },
    58	      ],
    59	      credit: [
    60	        { description: 'Constatation de l\'engagement donn√©', contrePartie: ['90'] },
    61	      ],
    62	    },
    63	    exclusions: [
    64	      { description: 'Les dettes certaines inscrites au bilan', compteCorrige: '16', libelleCompteCorrige: 'Emprunts et dettes assimil√©es' },
    65	      { description: 'Les provisions pour risques av√©r√©s', compteCorrige: '15', libelleCompteCorrige: 'Provisions pour risques et charges' },
    66	    ],
    67	    elementsControle: [
    68	      'Registre des engagements donn√©s',
    69	      'Actes d\'hypoth√®ques et nantissements',
    70	      'Suivi des garanties en cours',
    71	      '√âvaluation de la probabilit√© de mise en jeu',
    72	    ],
    73	  },
    74	  {
    75	    numero: '92',
    76	    contenu: 'Le compte 92 enregistre les charges de la comptabilit√© analytique de gestion r√©parties par fonction ou par centre d\'analyse. Il permet le suivi des co√ªts par destination (production, distribution, administration).',
    77	    subdivisions: [
    78	      { numero: '921', libelle: 'Charges des centres principaux de production' },
    79	      { numero: '922', libelle: 'Charges des centres principaux de distribution' },
    80	      { numero: '923', libelle: 'Charges des centres principaux d\'administration' },
    81	      { numero: '924', libelle: 'Charges des centres auxiliaires' },
    82	      { numero: '925', libelle: 'Charges des centres d\'approvisionnement' },
    83	      { numero: '928', libelle: 'Autres charges de la comptabilit√© analytique' },
    84	    ],
    85	    commentaires: [
    86	      'La comptabilit√© analytique est facultative mais recommand√©e pour le pilotage de l\'entreprise.',
    87	      'Les charges de la comptabilit√© g√©n√©rale sont reclass√©es par destination dans la comptabilit√© analytique.',
    88	      'Le SYSCOHADA R√©vis√© encourage la tenue d\'une comptabilit√© analytique int√©gr√©e au syst√®me comptable.',
    89	    ],
    90	    fonctionnement: {
    91	      debit: [
    92	        { description: 'R√©partition des charges de la comptabilit√© g√©n√©rale par centre', contrePartie: ['93'] },
    93	        { description: 'Charges suppl√©tives (r√©mun√©ration des capitaux propres)', contrePartie: ['93'] },
    94	      ],
    95	      credit: [
    96	        { description: 'Imputation des charges aux co√ªts de production', contrePartie: ['93'] },
    97	        { description: 'Charges non incorporables', contrePartie: ['93'] },
    98	      ],
    99	    },
   100	    exclusions: [
   101	      { description: 'Les charges de la comptabilit√© g√©n√©rale (classe 6)', compteCorrige: '60', libelleCompteCorrige: 'Achats' },
   102	    ],
   103	    elementsControle: [
   104	      'Concordance entre comptabilit√© analytique et comptabilit√© g√©n√©rale',
   105	      'Cl√©s de r√©partition des charges indirectes',
   106	      'Justification des charges suppl√©tives',
   107	      'Coh√©rence des co√ªts calcul√©s',
   108	    ],
   109	  },
   110	  {
   111	    numero: '93',
   112	    contenu: 'Le compte 93 enregistre les produits et les co√ªts calcul√©s de la comptabilit√© analytique de gestion : co√ªts de production, co√ªts de distribution, co√ªts de revient et r√©sultats analytiques.',
   113	    subdivisions: [
   114	      { numero: '931', libelle: 'Co√ªts de production des produits vendus' },
   115	      { numero: '932', libelle: 'Co√ªts de distribution' },
   116	      { numero: '933', libelle: 'Co√ªts d\'administration' },
   117	      { numero: '934', libelle: 'Co√ªts de revient des produits vendus' },
   118	      { numero: '935', libelle: 'R√©sultats analytiques' },
   119	      { numero: '938', libelle: 'Comptes de liaison entre comptabilit√©s' },
   120	    ],
   121	    commentaires: [
   122	      'Le co√ªt de revient est la somme du co√ªt de production et des co√ªts hors production (distribution, administration).',
   123	      'Les r√©sultats analytiques permettent de d√©terminer la rentabilit√© par produit ou activit√©.',
   124	      'Le compte 938 assure la liaison entre la comptabilit√© g√©n√©rale et la comptabilit√© analytique.',
   125	    ],
   126	    fonctionnement: {
   127	      debit: [
   128	        { description: 'Co√ªts calcul√©s (production, distribution, administration)', contrePartie: ['92'] },
   129	      ],
   130	      credit: [
   131	        { description: 'Produits analytiques et r√©sultats par activit√©', contrePartie: ['92'] },
   132	        { description: 'Transfert vers la comptabilit√© g√©n√©rale via le compte de liaison', contrePartie: ['938'] },
   133	      ],
   134	    },
   135	    exclusions: [
   136	      { description: 'Les produits de la comptabilit√© g√©n√©rale (classe 7)', compteCorrige: '70', libelleCompteCorrige: 'Ventes' },
   137	    ],
   138	    elementsControle: [
   139	      'Rapprochement entre r√©sultat analytique et r√©sultat comptable',
   140	      'Justification des diff√©rences d\'incorporation',
   141	      'Fiabilit√© des cl√©s de r√©partition',
   142	      'Coh√©rence entre les centres de co√ªts',
   143	    ],
   144	  },
   145	  {
   146	    numero: '95',
   147	    contenu: 'Le compte 95 enregistre les engagements de retraite et avantages similaires accord√©s au personnel, lorsque ces engagements sont suivis hors bilan conform√©ment aux options du SYSCOHADA R√©vis√©.',
   148	    subdivisions: [
   149	      { numero: '951', libelle: 'Engagements de retraite et pensions' },
   150	      { numero: '952', libelle: 'Indemnit√©s de fin de carri√®re' },
   151	      { numero: '953', libelle: 'Avantages post√©rieurs √† l\'emploi' },
   152	      { numero: '958', libelle: 'Autres engagements envers le personnel' },
   153	    ],
   154	    commentaires: [
   155	      'Le SYSCOHADA R√©vis√© offre l\'option de comptabiliser les engagements de retraite en provision (compte 152) ou en hors bilan (compte 95).',
   156	      'L\'√©valuation actuarielle des engagements de retraite est requise pour les entit√©s significatives.',
   157	      'Les hypoth√®ses actuarielles (taux d\'actualisation, table de mortalit√©, taux de rotation) doivent √™tre document√©es.',
   158	    ],
   159	    fonctionnement: {
   160	      debit: [
   161	        { description: 'Constatation de l\'engagement de retraite', contrePartie: ['96'] },
   162	        { description: 'R√©√©valuation de l\'engagement', contrePartie: ['96'] },
   163	      ],
   164	      credit: [
   165	        { description: 'R√©duction de l\'engagement (versements effectu√©s)', contrePartie: ['96'] },
   166	        { description: 'Annulation en cas de transfert en provision au bilan', contrePartie: ['96'] },
   167	      ],
   168	    },
   169	    exclusions: [
   170	      { description: 'Les provisions pour pensions comptabilis√©es au bilan', compteCorrige: '152', libelleCompteCorrige: 'Provisions pour pensions et obligations similaires' },
   171	      { description: 'Les charges de personnel courantes', compteCorrige: '66', libelleCompteCorrige: 'Charges de personnel' },
   172	    ],
   173	    elementsControle: [
   174	      'Rapport de l\'actuaire ind√©pendant',
   175	      'Hypoth√®ses actuarielles document√©es',
   176	      'Coh√©rence avec les engagements contractuels et conventionnels',
   177	      'Mention d√©taill√©e dans les notes annexes',
   178	    ],
   179	  },
   180	  {
   181	    numero: '96',
   182	    contenu: 'Le compte 96 enregistre les contreparties des engagements hors bilan enregistr√©s dans les comptes 90, 91 et 95. Il sert de compte miroir pour assurer l\'√©quilibre d√©bit-cr√©dit des √©critures d\'engagement.',
   183	    subdivisions: [
   184	      { numero: '960', libelle: 'Contrepartie des engagements obtenus' },
   185	      { numero: '961', libelle: 'Contrepartie des engagements donn√©s' },
   186	      { numero: '965', libelle: 'Contrepartie des engagements de retraite' },
   187	      { numero: '968', libelle: 'Contrepartie des autres engagements' },
   188	    ],
   189	    commentaires: [
   190	      'Le compte 96 est un compte technique qui assure la double √©criture des engagements hors bilan.',
   191	      'Il n\'a pas de signification √©conomique propre.',
   192	      'Son solde est toujours l\'exact oppos√© des comptes 90, 91 et 95 correspondants.',
   193	    ],
   194	    fonctionnement: {
   195	      debit: [
   196	        { description: 'Contrepartie des engagements donn√©s (91) et des r√©ductions d\'engagements obtenus (90)', contrePartie: ['90', '91'] },
   197	      ],
   198	      credit: [
   199	        { description: 'Contrepartie des engagements obtenus (90) et des nouveaux engagements donn√©s (91)', contrePartie: ['90', '91'] },
   200	      ],
   201	    },
   202	    exclusions: [],
   203	    elementsControle: [
   204	      'Concordance avec les comptes d\'engagement (90, 91, 95)',
   205	      '√âquilibre d√©bit-cr√©dit v√©rifi√©',
   206	      'Rapprochement global des engagements hors bilan',
   207	    ],
   208	  },
   209	]

================================================================================
FILE: src/data/syscohada/fonctionnement/index.ts
================================================================================
     1	/**
     2	 * Fonctionnement des comptes SYSCOHADA - Lazy loader
     3	 * Charge les r√®gles d√©bit/cr√©dit √† la demande par classe
     4	 */
     5	
     6	import type { FonctionnementCompte } from '../types'
     7	
     8	// Cache des donn√©es charg√©es
     9	const cache = new Map<number, FonctionnementCompte[]>()
    10	
    11	/** Charger le fonctionnement d'une classe (lazy) */
    12	export async function loadFonctionnementClasse(classe: number): Promise<FonctionnementCompte[]> {
    13	  if (cache.has(classe)) return cache.get(classe)!
    14	
    15	  let data: FonctionnementCompte[]
    16	  switch (classe) {
    17	    case 1: data = (await import('./classe1')).FONCTIONNEMENT_CLASSE_1; break
    18	    case 2: data = (await import('./classe2')).FONCTIONNEMENT_CLASSE_2; break
    19	    case 3: data = (await import('./classe3')).FONCTIONNEMENT_CLASSE_3; break
    20	    case 4: data = (await import('./classe4')).FONCTIONNEMENT_CLASSE_4; break
    21	    case 5: data = (await import('./classe5')).FONCTIONNEMENT_CLASSE_5; break
    22	    case 6: data = (await import('./classe6')).FONCTIONNEMENT_CLASSE_6; break
    23	    case 7: data = (await import('./classe7')).FONCTIONNEMENT_CLASSE_7; break
    24	    case 8: data = (await import('./classe8')).FONCTIONNEMENT_CLASSE_8; break
    25	    case 9: data = (await import('./classe9')).FONCTIONNEMENT_CLASSE_9; break
    26	    default: data = []
    27	  }
    28	
    29	  cache.set(classe, data)
    30	  return data
    31	}
    32	
    33	/** Obtenir le fonctionnement d'un compte sp√©cifique */
    34	export async function getFonctionnement(numero: string): Promise<FonctionnementCompte | undefined> {
    35	  const classe = parseInt(numero.charAt(0))
    36	  if (isNaN(classe) || classe < 1 || classe > 9) return undefined
    37	
    38	  const data = await loadFonctionnementClasse(classe)
    39	
    40	  // Cherche par num√©ro exact, puis par pr√©fixes d√©croissants
    41	  let result = data.find(f => f.numero === numero)
    42	  if (!result) {
    43	    for (let len = Math.min(numero.length - 1, 3); len >= 2; len--) {
    44	      result = data.find(f => f.numero === numero.substring(0, len))
    45	      if (result) break
    46	    }
    47	  }
    48	  return result
    49	}
    50	
    51	/** Rechercher dans le fonctionnement (contenu, commentaires) */
    52	export async function searchFonctionnement(query: string): Promise<FonctionnementCompte[]> {
    53	  const q = query.toLowerCase()
    54	  const results: FonctionnementCompte[] = []
    55	
    56	  for (let classe = 1; classe <= 9; classe++) {
    57	    const data = await loadFonctionnementClasse(classe)
    58	    for (const f of data) {
    59	      if (
    60	        f.numero.includes(q) ||
    61	        f.contenu.toLowerCase().includes(q) ||
    62	        f.commentaires.some(c => c.toLowerCase().includes(q)) ||
    63	        f.fonctionnement.debit.some(d => d.description.toLowerCase().includes(q)) ||
    64	        f.fonctionnement.credit.some(c => c.description.toLowerCase().includes(q))
    65	      ) {
    66	        results.push(f)
    67	      }
    68	    }
    69	  }
    70	
    71	  return results
    72	}
    73	
    74	/** Vider le cache (utile pour les tests) */
    75	export function clearFonctionnementCache(): void {
    76	  cache.clear()
    77	}

================================================================================
FILE: src/data/syscohada/operations/chapitre01.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_01: ChapitreOperations = {
     4	  numero: 1,
     5	  titre: 'Constitution des soci√©t√©s',
     6	  sections: [
     7	    {
     8	      titre: 'Apports en num√©raire',
     9	      contenu:
    10	        "Les apports en num√©raire correspondent aux sommes d'argent vers√©es par les associ√©s lors de la constitution de la soci√©t√©. " +
    11	        "Selon le SYSCOHADA R√©vis√©, le capital souscrit appel√© non vers√© est enregistr√© au d√©bit du compte 109 ¬´ Actionnaires, capital souscrit non appel√© ¬ª. " +
    12	        "Lors de l'appel de fonds, le compte 461 ¬´ Associ√©s, op√©rations sur le capital ¬ª est d√©bit√© par le cr√©dit du compte 109. " +
    13	        "La lib√©ration effective se traduit par le d√©bit d'un compte de tr√©sorerie (521) et le cr√©dit du compte 461.",
    14	      ecritures: [
    15	        {
    16	          numero: 1,
    17	          description: "Souscription et lib√©ration int√©grale du capital en num√©raire lors de la constitution d'une SARL au capital de 10 000 000 FCFA",
    18	          lignes: [
    19	            { sens: 'D', compte: '461', libelleCompte: 'Associ√©s, op√©rations sur le capital', montant: 10000000, commentaire: 'Promesse d\'apport' },
    20	            { sens: 'C', compte: '101', libelleCompte: 'Capital social', montant: 10000000, commentaire: 'Capital souscrit' },
    21	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 10000000, commentaire: 'Versement effectif' },
    22	            { sens: 'C', compte: '461', libelleCompte: 'Associ√©s, op√©rations sur le capital', montant: 10000000, commentaire: 'Lib√©ration des apports' },
    23	          ],
    24	        },
    25	      ],
    26	    },
    27	    {
    28	      titre: 'Apports en nature',
    29	      contenu:
    30	        "Les apports en nature sont constitu√©s de biens meubles ou immeubles mis √† la disposition de la soci√©t√© par les associ√©s. " +
    31	        "Ils doivent faire l'objet d'une √©valuation par un commissaire aux apports lorsque la loi l'exige. " +
    32	        "L'enregistrement se fait au d√©bit des comptes d'actif correspondants (immobilisations, stocks, cr√©ances) par le cr√©dit du compte 101 ¬´ Capital social ¬ª et √©ventuellement du compte 104 ¬´ Primes li√©es au capital ¬ª.",
    33	      ecritures: [
    34	        {
    35	          numero: 2,
    36	          description: 'Apport en nature d\'un immeuble √©valu√© √† 25 000 000 FCFA et d\'un v√©hicule √©valu√© √† 5 000 000 FCFA',
    37	          lignes: [
    38	            { sens: 'D', compte: '231', libelleCompte: 'B√¢timents', montant: 25000000 },
    39	            { sens: 'D', compte: '245', libelleCompte: 'Mat√©riel de transport', montant: 5000000 },
    40	            { sens: 'C', compte: '101', libelleCompte: 'Capital social', montant: 30000000, commentaire: 'Valeur nominale des parts' },
    41	          ],
    42	        },
    43	      ],
    44	    },
    45	    {
    46	      titre: 'Frais de constitution',
    47	      contenu:
    48	        "Les frais de constitution comprennent les droits d'enregistrement, les honoraires du notaire, les frais de publicit√© l√©gale et les frais d'immatriculation. " +
    49	        "Le SYSCOHADA R√©vis√© permet soit leur inscription en charges de l'exercice (comptes de la classe 6), soit leur activation au compte 201 ¬´ Frais d'√©tablissement ¬ª avec amortissement sur 2 √† 5 ans maximum. " +
    50	        "La m√©thode pr√©f√©rentielle recommand√©e est la comptabilisation en charges.",
    51	    },
    52	  ],
    53	  comptesLies: ['101', '104', '109', '461', '4612', '521'],
    54	}

================================================================================
FILE: src/data/syscohada/operations/chapitre02.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_02: ChapitreOperations = {
     4	  numero: 2,
     5	  titre: 'Augmentation du capital',
     6	  sections: [
     7	    {
     8	      titre: 'Par apports nouveaux',
     9	      contenu:
    10	        "L'augmentation du capital par apports nouveaux en num√©raire entra√Æne l'√©mission de nouvelles actions ou parts sociales. " +
    11	        "Le prix d'√©mission comprend la valeur nominale et, le cas √©ch√©ant, une prime d'√©mission comptabilis√©e au compte 1041. " +
    12	        "Les anciens actionnaires disposent d'un droit pr√©f√©rentiel de souscription qui peut √™tre n√©goci√©. " +
    13	        "La lib√©ration peut √™tre fractionn√©e dans les conditions pr√©vues par l'Acte Uniforme OHADA.",
    14	      ecritures: [
    15	        {
    16	          numero: 1,
    17	          description: 'Augmentation de capital de 5 000 000 FCFA avec prime d\'√©mission de 1 000 000 FCFA, lib√©r√©e int√©gralement',
    18	          lignes: [
    19	            { sens: 'D', compte: '461', libelleCompte: 'Associ√©s, op√©rations sur le capital', montant: 6000000 },
    20	            { sens: 'C', compte: '101', libelleCompte: 'Capital social', montant: 5000000 },
    21	            { sens: 'C', compte: '1041', libelleCompte: "Primes d'√©mission", montant: 1000000 },
    22	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 6000000, commentaire: 'Versement des souscripteurs' },
    23	            { sens: 'C', compte: '461', libelleCompte: 'Associ√©s, op√©rations sur le capital', montant: 6000000 },
    24	          ],
    25	        },
    26	      ],
    27	    },
    28	    {
    29	      titre: 'Par incorporation de r√©serves',
    30	      contenu:
    31	        "L'incorporation de r√©serves au capital consiste √† transf√©rer des r√©serves (compte 11) ou des primes (compte 104) vers le compte 101 ¬´ Capital social ¬ª. " +
    32	        "Cette op√©ration ne modifie pas les capitaux propres dans leur ensemble mais augmente le capital nominal. " +
    33	        "Elle peut se traduire par une augmentation de la valeur nominale des titres existants ou par l'attribution gratuite de titres nouveaux.",
    34	      ecritures: [
    35	        {
    36	          numero: 2,
    37	          description: 'Incorporation de la r√©serve facultative de 3 000 000 FCFA au capital',
    38	          lignes: [
    39	            { sens: 'D', compte: '1181', libelleCompte: 'R√©serves facultatives', montant: 3000000 },
    40	            { sens: 'C', compte: '101', libelleCompte: 'Capital social', montant: 3000000 },
    41	          ],
    42	        },
    43	      ],
    44	    },
    45	    {
    46	      titre: 'Par conversion de dettes',
    47	      contenu:
    48	        "La conversion de dettes en capital permet de transformer une cr√©ance sur la soci√©t√© en parts de capital. " +
    49	        "Le cr√©ancier devient alors associ√©. Cette op√©ration est fr√©quente dans les restructurations financi√®res et dans les conversions d'obligations en actions. " +
    50	        "Le compte du cr√©ancier (classe 4 ou 16) est d√©bit√© par le cr√©dit du compte 101 et √©ventuellement du compte 1042 ¬´ Primes de conversion ¬ª.",
    51	    },
    52	  ],
    53	  comptesLies: ['101', '104', '109', '461'],
    54	}

================================================================================
FILE: src/data/syscohada/operations/chapitre03.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_03: ChapitreOperations = {
     4	  numero: 3,
     5	  titre: 'R√©duction et amortissement du capital',
     6	  sections: [
     7	    {
     8	      titre: 'R√©duction motiv√©e par des pertes',
     9	      contenu:
    10	        "La r√©duction du capital motiv√©e par des pertes consiste √† apurer les pertes accumul√©es (compte 129 ou 119) en diminuant le capital social. " +
    11	        "Cette op√©ration est un assainissement financier qui ne constitue pas un remboursement aux associ√©s. " +
    12	        "Le compte 101 ¬´ Capital social ¬ª est d√©bit√© par le cr√©dit du compte 119 ¬´ Report √† nouveau d√©biteur ¬ª ou 129 ¬´ R√©sultat net : perte ¬ª.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'R√©duction du capital de 8 000 000 FCFA pour apurement des pertes cumul√©es',
    17	          lignes: [
    18	            { sens: 'D', compte: '101', libelleCompte: 'Capital social', montant: 8000000 },
    19	            { sens: 'C', compte: '119', libelleCompte: 'Report √† nouveau d√©biteur', montant: 8000000, commentaire: 'Apurement des pertes' },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'R√©duction non motiv√©e par des pertes',
    26	      contenu:
    27	        "La r√©duction du capital non motiv√©e par des pertes entra√Æne un remboursement effectif aux actionnaires. " +
    28	        "Elle peut se faire par diminution de la valeur nominale des titres ou par annulation de titres rachet√©s. " +
    29	        "Les cr√©anciers disposent d'un droit d'opposition. Le compte 101 est d√©bit√© et le compte 461 ¬´ Associ√©s, op√©rations sur le capital ¬ª est cr√©dit√©, puis sold√© lors du paiement.",
    30	    },
    31	    {
    32	      titre: 'Amortissement du capital',
    33	      contenu:
    34	        "L'amortissement du capital est le remboursement anticip√© aux actionnaires de tout ou partie de la valeur nominale de leurs actions, sans r√©duction du capital. " +
    35	        "Il est financ√© par les b√©n√©fices ou les r√©serves. Le capital amorti est transf√©r√© du compte 101 au compte 1019 ¬´ Capital amorti ¬ª. " +
    36	        "Les actions amorties deviennent des actions de jouissance qui conservent le droit au superdividende et au boni de liquidation.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Amortissement partiel du capital : remboursement de 2 000 FCFA par action sur 1 000 actions',
    41	          lignes: [
    42	            { sens: 'D', compte: '1181', libelleCompte: 'R√©serves facultatives', montant: 2000000, commentaire: 'Pr√©l√®vement sur r√©serves' },
    43	            { sens: 'C', compte: '461', libelleCompte: 'Associ√©s, op√©rations sur le capital', montant: 2000000 },
    44	            { sens: 'D', compte: '461', libelleCompte: 'Associ√©s, op√©rations sur le capital', montant: 2000000, commentaire: 'Remboursement effectif' },
    45	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 2000000 },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['101', '109', '119', '129'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre04.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_04: ChapitreOperations = {
     4	  numero: 4,
     5	  titre: 'Affectation du r√©sultat',
     6	  sections: [
     7	    {
     8	      titre: 'Affectation du b√©n√©fice',
     9	      contenu:
    10	        "L'affectation du b√©n√©fice est d√©cid√©e par l'assembl√©e g√©n√©rale ordinaire dans les six mois suivant la cl√¥ture de l'exercice. " +
    11	        "Le b√©n√©fice distribuable est constitu√© du r√©sultat de l'exercice diminu√© des pertes ant√©rieures et de la dotation √† la r√©serve l√©gale, augment√© du report √† nouveau b√©n√©ficiaire. " +
    12	        "Le compte 12 ¬´ R√©sultat de l'exercice ¬ª est sold√© par le cr√©dit des comptes de r√©serves (106, 111, 118), de dividendes √† payer (465) et √©ventuellement du report √† nouveau (110).",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Affectation d\'un b√©n√©fice de 15 000 000 FCFA : r√©serve l√©gale 750 000, dividendes 10 000 000, report √† nouveau 4 250 000',
    17	          lignes: [
    18	            { sens: 'D', compte: '120', libelleCompte: 'R√©sultat de l\'exercice (b√©n√©fice)', montant: 15000000 },
    19	            { sens: 'C', compte: '111', libelleCompte: 'R√©serve l√©gale', montant: 750000, commentaire: '5% du b√©n√©fice' },
    20	            { sens: 'C', compte: '465', libelleCompte: 'Associ√©s, dividendes √† payer', montant: 10000000 },
    21	            { sens: 'C', compte: '110', libelleCompte: 'Report √† nouveau cr√©diteur', montant: 4250000 },
    22	          ],
    23	        },
    24	      ],
    25	    },
    26	    {
    27	      titre: 'Traitement de la perte',
    28	      contenu:
    29	        "Lorsque l'exercice se solde par une perte, celle-ci peut √™tre report√©e √† nouveau (compte 119) en attendant son imputation sur les b√©n√©fices futurs. " +
    30	        "L'assembl√©e peut aussi d√©cider de l'imputer sur les r√©serves existantes ou de proc√©der √† une r√©duction de capital si les pertes repr√©sentent plus de la moiti√© du capital. " +
    31	        "Le compte 129 ¬´ R√©sultat de l'exercice (perte) ¬ª est sold√© par le d√©bit du compte 119 ou des comptes de r√©serves.",
    32	    },
    33	    {
    34	      titre: 'Calcul de la r√©serve l√©gale',
    35	      contenu:
    36	        "La dotation √† la r√©serve l√©gale est obligatoire √† hauteur de 10 % du b√©n√©fice net diminu√© des pertes ant√©rieures, dans la limite de 20 % du capital social (OHADA). " +
    37	        "Cette obligation cesse lorsque la r√©serve l√©gale atteint le cinqui√®me du capital. " +
    38	        "La r√©serve l√©gale ne peut √™tre distribu√©e aux associ√©s mais peut servir √† compenser les pertes.",
    39	    },
    40	  ],
    41	  comptesLies: ['12', '106', '110', '119', '465'],
    42	}

================================================================================
FILE: src/data/syscohada/operations/chapitre05.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_05: ChapitreOperations = {
     4	  numero: 5,
     5	  titre: 'Emprunts',
     6	  sections: [
     7	    {
     8	      titre: "√âmission d'un emprunt obligataire",
     9	      contenu:
    10	        "L'emprunt obligataire est une forme de financement √† long terme par laquelle la soci√©t√© √©met des titres de cr√©ance n√©gociables (obligations). " +
    11	        "Le produit de l'√©mission est enregistr√© au cr√©dit du compte 161 ¬´ Emprunts obligataires ¬ª. La prime de remboursement (diff√©rence entre valeur de remboursement et prix d'√©mission) est inscrite au compte 206 ¬´ Primes de remboursement des obligations ¬ª. " +
    12	        "Les frais d'√©mission peuvent √™tre √©tal√©s sur la dur√©e de l'emprunt.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: '√âmission de 1 000 obligations de nominal 10 000 FCFA au prix de 9 500 FCFA, soit un emprunt de 10 000 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 9500000, commentaire: 'Prix d\'√©mission encaiss√©' },
    19	            { sens: 'D', compte: '206', libelleCompte: 'Primes de remboursement des obligations', montant: 500000 },
    20	            { sens: 'C', compte: '161', libelleCompte: 'Emprunts obligataires', montant: 10000000 },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'Emprunts aupr√®s des banques',
    27	      contenu:
    28	        "Les emprunts bancaires √† moyen et long terme sont enregistr√©s au cr√©dit du compte 162 ¬´ Emprunts et dettes aupr√®s des √©tablissements de cr√©dit ¬ª. " +
    29	        "Le d√©blocage des fonds se traduit par le d√©bit du compte 521. Les √©ch√©ances comprennent une part de capital (qui diminue la dette) et une part d'int√©r√™ts (comptabilis√©e en charges financi√®res au compte 671). " +
    30	        "Les emprunts √† court terme (d√©couverts) rel√®vent du compte 56.",
    31	    },
    32	    {
    33	      titre: 'Int√©r√™ts et remboursement',
    34	      contenu:
    35	        "Les int√©r√™ts courus non √©chus √† la date de cl√¥ture sont rattach√©s √† l'exercice par le d√©bit du compte 671 ¬´ Int√©r√™ts des emprunts ¬ª et le cr√©dit du compte 166 ¬´ Int√©r√™ts courus ¬ª. " +
    36	        "Le remboursement du principal se traduit par le d√©bit du compte 161 ou 162 et le cr√©dit du compte de tr√©sorerie. " +
    37	        "En cas de remboursement anticip√©, les p√©nalit√©s √©ventuelles sont comptabilis√©es en charges financi√®res.",
    38	      ecritures: [
    39	        {
    40	          numero: 2,
    41	          description: 'Paiement d\'une √©ch√©ance d\'emprunt bancaire : capital 2 000 000 FCFA et int√©r√™ts 350 000 FCFA',
    42	          lignes: [
    43	            { sens: 'D', compte: '162', libelleCompte: 'Emprunts et dettes aupr√®s des √©tablissements de cr√©dit', montant: 2000000 },
    44	            { sens: 'D', compte: '671', libelleCompte: 'Int√©r√™ts des emprunts', montant: 350000 },
    45	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 2350000 },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['16', '161', '162', '166', '671'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre06.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_06: ChapitreOperations = {
     4	  numero: 6,
     5	  titre: "Subventions d'investissement",
     6	  sections: [
     7	    {
     8	      titre: 'R√©ception de la subvention',
     9	      contenu:
    10	        "Les subventions d'investissement sont des aides publiques destin√©es √† financer l'acquisition ou la cr√©ation d'immobilisations. " +
    11	        "Elles sont enregistr√©es au cr√©dit du compte 131 ¬´ Subventions d'√©quipement ¬ª lors de la notification de l'octroi, par le d√©bit du compte 441 ¬´ √âtat, subventions √† recevoir ¬ª. " +
    12	        "Lors de l'encaissement effectif, le compte 521 est d√©bit√© et le compte 441 est cr√©dit√©.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Notification et encaissement d'une subvention d'√©quipement de 20 000 000 FCFA pour l'acquisition d'une machine",
    17	          lignes: [
    18	            { sens: 'D', compte: '441', libelleCompte: '√âtat, subventions √† recevoir', montant: 20000000, commentaire: "Notification de l'octroi" },
    19	            { sens: 'C', compte: '131', libelleCompte: "Subventions d'√©quipement", montant: 20000000 },
    20	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 20000000, commentaire: 'Encaissement' },
    21	            { sens: 'C', compte: '441', libelleCompte: '√âtat, subventions √† recevoir', montant: 20000000 },
    22	          ],
    23	        },
    24	      ],
    25	    },
    26	    {
    27	      titre: 'Reprise au r√©sultat',
    28	      contenu:
    29	        "La subvention d'investissement est rapport√©e au r√©sultat au rythme de l'amortissement du bien financ√©. " +
    30	        "Le compte 139 ¬´ Subventions d'investissement inscrites au compte de r√©sultat ¬ª est d√©bit√© par le cr√©dit du compte 865 ¬´ Reprises de subventions d'investissement ¬ª. " +
    31	        "Cette reprise permet de neutraliser l'effet de la charge d'amortissement sur le r√©sultat de chaque exercice concern√©.",
    32	      ecritures: [
    33	        {
    34	          numero: 2,
    35	          description: "Reprise annuelle d'une subvention de 20 000 000 FCFA sur un bien amorti en 5 ans lin√©aire",
    36	          lignes: [
    37	            { sens: 'D', compte: '139', libelleCompte: "Subventions d'investissement inscrites au compte de r√©sultat", montant: 4000000 },
    38	            { sens: 'C', compte: '865', libelleCompte: "Reprises de subventions d'investissement", montant: 4000000 },
    39	          ],
    40	        },
    41	      ],
    42	    },
    43	    {
    44	      titre: 'Remboursement √©ventuel',
    45	      contenu:
    46	        "En cas de non-respect des conditions d'attribution, la subvention peut devoir √™tre rembours√©e en tout ou partie. " +
    47	        "Le remboursement s'impute d'abord sur la quote-part non encore rapport√©e au r√©sultat (d√©bit du compte 131), puis sur le r√©sultat de l'exercice pour l'exc√©dent. " +
    48	        "Le SYSCOHADA pr√©voit que tout engagement de remboursement probable donne lieu √† la constitution d'une provision.",
    49	    },
    50	  ],
    51	  comptesLies: ['13', '131', '139', '441', '865'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre07.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_07: ChapitreOperations = {
     4	  numero: 7,
     5	  titre: 'Provisions r√©glement√©es',
     6	  sections: [
     7	    {
     8	      titre: 'Amortissements d√©rogatoires',
     9	      contenu:
    10	        "Les amortissements d√©rogatoires r√©sultent de la diff√©rence entre l'amortissement fiscal (souvent d√©gressif ou acc√©l√©r√©) et l'amortissement √©conomique (lin√©aire). " +
    11	        "La fraction exc√©dentaire est enregistr√©e au cr√©dit du compte 141 ¬´ Amortissements d√©rogatoires ¬ª par le d√©bit du compte 851 ¬´ Dotations aux provisions r√©glement√©es ¬ª. " +
    12	        "Lorsque l'amortissement fiscal devient inf√©rieur √† l'amortissement √©conomique, une reprise est effectu√©e.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Dotation aux amortissements d√©rogatoires : exc√©dent fiscal de 1 200 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '851', libelleCompte: 'Dotations aux provisions r√©glement√©es', montant: 1200000 },
    19	            { sens: 'C', compte: '141', libelleCompte: 'Amortissements d√©rogatoires', montant: 1200000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Plus-values √† r√©investir',
    26	      contenu:
    27	        "Certaines l√©gislations fiscales de la zone OHADA permettent le report d'imposition des plus-values de cession √† condition de r√©investir dans un d√©lai donn√©. " +
    28	        "La plus-value est transf√©r√©e au compte 142 ¬´ Plus-values de cession √† r√©investir ¬ª via le compte 851. " +
    29	        "Lors du r√©investissement ou √† l'expiration du d√©lai, la provision est reprise au compte 861.",
    30	    },
    31	    {
    32	      titre: 'Reprise des provisions',
    33	      contenu:
    34	        "La reprise des provisions r√©glement√©es intervient lorsque les conditions ayant motiv√© leur constitution cessent d'exister. " +
    35	        "Le compte de provision (14x) est d√©bit√© par le cr√©dit du compte 861 ¬´ Reprises de provisions r√©glement√©es ¬ª. " +
    36	        "Les reprises d'amortissements d√©rogatoires sont effectu√©es syst√©matiquement lorsque l'amortissement √©conomique exc√®de l'amortissement fiscal.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Reprise d\'amortissements d√©rogatoires de 800 000 FCFA',
    41	          lignes: [
    42	            { sens: 'D', compte: '141', libelleCompte: 'Amortissements d√©rogatoires', montant: 800000 },
    43	            { sens: 'C', compte: '861', libelleCompte: 'Reprises de provisions r√©glement√©es', montant: 800000 },
    44	          ],
    45	        },
    46	      ],
    47	    },
    48	  ],
    49	  comptesLies: ['14', '141', '851', '861'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre08.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_08: ChapitreOperations = {
     4	  numero: 8,
     5	  titre: 'Provisions pour risques et charges',
     6	  sections: [
     7	    {
     8	      titre: 'Constitution',
     9	      contenu:
    10	        "Une provision pour risques et charges est constitu√©e lorsqu'il existe une obligation actuelle r√©sultant d'un √©v√©nement pass√©, qu'il est probable qu'une sortie de ressources sera n√©cessaire et que le montant peut √™tre estim√© de mani√®re fiable. " +
    11	        "Le compte 691 ¬´ Dotations aux provisions d'exploitation ¬ª ou 697 ¬´ Dotations aux provisions financi√®res ¬ª est d√©bit√© par le cr√©dit du compte 15 correspondant (151, 155, etc.). " +
    12	        "Les provisions doivent √™tre √©valu√©es √† la meilleure estimation de la d√©pense n√©cessaire √† l'extinction de l'obligation.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Constitution d\'une provision pour litige de 5 000 000 FCFA suite √† un contentieux avec un ancien salari√©',
    17	          lignes: [
    18	            { sens: 'D', compte: '6591', libelleCompte: 'Charges de provisions d\'exploitation', montant: 5000000 },
    19	            { sens: 'C', compte: '151', libelleCompte: 'Provisions pour risques', montant: 5000000, commentaire: 'Litige prud\'homal en cours' },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Ajustement',
    26	      contenu:
    27	        "√Ä chaque cl√¥ture, les provisions existantes sont r√©examin√©es et ajust√©es pour refl√©ter la meilleure estimation actuelle. " +
    28	        "Si le risque augmente, un compl√©ment de provision est constitu√©. Si le risque diminue sans dispara√Ætre, une reprise partielle est effectu√©e. " +
    29	        "L'ajustement peut aussi r√©sulter de l'actualisation de la provision pour les obligations √† long terme.",
    30	    },
    31	    {
    32	      titre: 'Reprise (risque r√©alis√©/non r√©alis√©)',
    33	      contenu:
    34	        "La reprise de la provision intervient lorsque le risque se r√©alise (la charge effective est comptabilis√©e par nature) ou lorsque le risque dispara√Æt. " +
    35	        "Dans les deux cas, le compte 15 est d√©bit√© par le cr√©dit du compte 791 ¬´ Reprises de provisions d'exploitation ¬ª ou 797 ¬´ Reprises de provisions financi√®res ¬ª. " +
    36	        "La reprise et la charge effective sont enregistr√©es s√©par√©ment afin de ne pas compenser les √©critures.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Reprise de provision pour litige suite au jugement : condamnation effective de 4 500 000 FCFA',
    41	          lignes: [
    42	            { sens: 'D', compte: '151', libelleCompte: 'Provisions pour risques', montant: 5000000, commentaire: 'Reprise int√©grale' },
    43	            { sens: 'C', compte: '7591', libelleCompte: 'Reprises de charges de provisions d\'exploitation', montant: 5000000 },
    44	            { sens: 'D', compte: '831', libelleCompte: 'Charges HAO', montant: 4500000, commentaire: 'Indemnit√© vers√©e suite au jugement' },
    45	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 4500000 },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['15', '151', '155', '691', '791'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre09.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_09: ChapitreOperations = {
     4	  numero: 9,
     5	  titre: "Acquisitions d'immobilisations incorporelles",
     6	  sections: [
     7	    {
     8	      titre: 'Acquisition',
     9	      contenu:
    10	        "Les immobilisations incorporelles acquises √† titre on√©reux sont comptabilis√©es √† leur co√ªt d'acquisition, qui comprend le prix d'achat et les frais accessoires directement attribuables. " +
    11	        "Le compte 21 correspondant (211 √† 215) est d√©bit√© par le cr√©dit du compte 404 ¬´ Fournisseurs d'investissement ¬ª ou d'un compte de tr√©sorerie. " +
    12	        "Les brevets, licences, marques et droits similaires sont inscrits au compte 212 ou 213 selon leur nature.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Acquisition d\'un brevet industriel pour 8 000 000 FCFA, pay√© par banque',
    17	          lignes: [
    18	            { sens: 'D', compte: '212', libelleCompte: 'Brevets, licences, concessions et droits similaires', montant: 8000000 },
    19	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 8000000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Frais de d√©veloppement immobilis√©s',
    26	      contenu:
    27	        "Les frais de d√©veloppement peuvent √™tre immobilis√©s au compte 211 ¬´ Frais de recherche et de d√©veloppement ¬ª lorsque les conditions de l'Acte Uniforme sont r√©unies : " +
    28	        "faisabilit√© technique d√©montr√©e, intention d'achever le projet, capacit√© √† utiliser ou vendre, g√©n√©ration probable d'avantages √©conomiques futurs, et √©valuation fiable des co√ªts. " +
    29	        "Les frais de recherche fondamentale et appliqu√©e restent obligatoirement en charges de l'exercice.",
    30	    },
    31	    {
    32	      titre: 'Logiciels acquis vs cr√©√©s',
    33	      contenu:
    34	        "Les logiciels acquis sont immobilis√©s au compte 213 ¬´ Logiciels et sites internet ¬ª √† leur co√ªt d'acquisition. " +
    35	        "Les logiciels cr√©√©s en interne sont immobilis√©s au m√™me compte pour les phases de programmation et de tests, tandis que les phases d'analyse pr√©alable et de maintenance restent en charges. " +
    36	        "L'amortissement des logiciels se fait g√©n√©ralement sur une dur√©e de 3 √† 5 ans en lin√©aire.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Immobilisation d\'un logiciel de gestion cr√©√© en interne pour un co√ªt de production de 12 000 000 FCFA',
    41	          lignes: [
    42	            { sens: 'D', compte: '213', libelleCompte: 'Logiciels et sites internet', montant: 12000000 },
    43	            { sens: 'C', compte: '72', libelleCompte: 'Production immobilis√©e', montant: 12000000, commentaire: 'Co√ªts de d√©veloppement activ√©s' },
    44	          ],
    45	        },
    46	      ],
    47	    },
    48	  ],
    49	  comptesLies: ['21', '211', '212', '213', '215', '404'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre10.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_10: ChapitreOperations = {
     4	  numero: 10,
     5	  titre: "Acquisitions d'immobilisations corporelles",
     6	  sections: [
     7	    {
     8	      titre: 'Acquisition au comptant',
     9	      contenu:
    10	        "Les immobilisations corporelles acquises au comptant sont enregistr√©es √† leur co√ªt d'acquisition, comprenant le prix d'achat hors taxes r√©cup√©rables, les droits de douane, les frais de transport et d'installation, et tout co√ªt directement attribuable √† la mise en service. " +
    11	        "Le compte d'immobilisation concern√© (22, 23 ou 24) est d√©bit√© par le cr√©dit du compte de tr√©sorerie. " +
    12	        "La TVA non r√©cup√©rable fait partie du co√ªt d'acquisition.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Acquisition d\'un mat√©riel industriel pour 15 000 000 FCFA HT, TVA 18% r√©cup√©rable, pay√© par ch√®que',
    17	          lignes: [
    18	            { sens: 'D', compte: '241', libelleCompte: 'Mat√©riel et outillage industriel et commercial', montant: 15000000 },
    19	            { sens: 'D', compte: '4451', libelleCompte: 'TVA r√©cup√©rable sur immobilisations', montant: 2700000 },
    20	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 17700000 },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'Acquisition √† cr√©dit',
    27	      contenu:
    28	        "Lorsqu'une immobilisation est acquise √† cr√©dit, le compte 404 ¬´ Fournisseurs d'investissement ¬ª est cr√©dit√© √† la place du compte de tr√©sorerie. " +
    29	        "Si le paiement est √©chelonn√© sur plus de 12 mois, les int√©r√™ts intercalaires ne sont pas inclus dans le co√ªt d'acquisition mais sont comptabilis√©s en charges financi√®res. " +
    30	        "Les avances vers√©es sur commandes d'immobilisations sont enregistr√©es au compte 251 ¬´ Avances et acomptes vers√©s sur immobilisations ¬ª.",
    31	    },
    32	    {
    33	      titre: "Immobilisation produite par l'entreprise",
    34	      contenu:
    35	        "Les immobilisations produites par l'entreprise pour elle-m√™me sont √©valu√©es √† leur co√ªt de production, incluant les charges directes et une quote-part raisonnable de charges indirectes. " +
    36	        "Le compte d'immobilisation est d√©bit√© par le cr√©dit du compte 72 ¬´ Production immobilis√©e ¬ª. " +
    37	        "Les immobilisations en cours de production sont temporairement enregistr√©es au compte 23 ¬´ B√¢timents, installations techniques et agencements en cours ¬ª ou dans la subdivision appropri√©e.",
    38	      ecritures: [
    39	        {
    40	          numero: 2,
    41	          description: 'Construction d\'un entrep√¥t en interne : co√ªt de production 45 000 000 FCFA',
    42	          lignes: [
    43	            { sens: 'D', compte: '231', libelleCompte: 'B√¢timents', montant: 45000000 },
    44	            { sens: 'C', compte: '72', libelleCompte: 'Production immobilis√©e', montant: 45000000 },
    45	          ],
    46	        },
    47	      ],
    48	    },
    49	  ],
    50	  comptesLies: ['22', '23', '24', '404', '481'],
    51	}

================================================================================
FILE: src/data/syscohada/operations/chapitre11.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_11: ChapitreOperations = {
     4	  numero: 11,
     5	  titre: 'Amortissements des immobilisations',
     6	  sections: [
     7	    {
     8	      titre: 'Amortissement lin√©aire',
     9	      contenu:
    10	        "L'amortissement lin√©aire (ou constant) r√©partit de mani√®re √©gale la base amortissable sur la dur√©e d'utilit√© de l'immobilisation. " +
    11	        "La dotation annuelle est calcul√©e en divisant le co√ªt d'acquisition (ou de production) diminu√© de la valeur r√©siduelle par la dur√©e d'utilit√© estim√©e. " +
    12	        "Le compte 681 ¬´ Dotations aux amortissements d'exploitation ¬ª est d√©bit√© par le cr√©dit du compte 28 correspondant √† l'immobilisation amortie.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Dotation aux amortissements lin√©aires d\'un mat√©riel de 15 000 000 FCFA amorti sur 5 ans',
    17	          lignes: [
    18	            { sens: 'D', compte: '6813', libelleCompte: "Dotations aux amortissements des immobilisations corporelles", montant: 3000000 },
    19	            { sens: 'C', compte: '2841', libelleCompte: 'Amortissement du mat√©riel industriel', montant: 3000000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Amortissement d√©gressif',
    26	      contenu:
    27	        "L'amortissement d√©gressif est un mode d'amortissement fiscal qui permet de constater des dotations plus √©lev√©es en d√©but de vie de l'immobilisation. " +
    28	        "Le taux d√©gressif est obtenu en multipliant le taux lin√©aire par un coefficient fiscal (1,5 pour 3-4 ans, 2 pour 5-6 ans, 2,5 pour plus de 6 ans dans certaines l√©gislations OHADA). " +
    29	        "La base amortissable est la valeur nette comptable en d√©but de chaque exercice.",
    30	    },
    31	    {
    32	      titre: 'Amortissement d√©rogatoire',
    33	      contenu:
    34	        "Lorsque l'amortissement fiscal diff√®re de l'amortissement √©conomique, la diff√©rence est enregistr√©e en amortissement d√©rogatoire (provision r√©glement√©e). " +
    35	        "L'exc√©dent de l'amortissement fiscal sur l'amortissement √©conomique donne lieu √† une dotation au compte 851 par le cr√©dit du compte 141. " +
    36	        "L'exc√©dent inverse donne lieu √† une reprise au compte 861 par le d√©bit du compte 141. Le total des amortissements √©conomique et d√©rogatoire reconstitue l'amortissement fiscal.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: "Enregistrement conjoint : amortissement √©conomique 3 000 000 FCFA, amortissement fiscal 4 500 000 FCFA (d√©rogatoire 1 500 000)",
    41	          lignes: [
    42	            { sens: 'D', compte: '6813', libelleCompte: 'Dotations aux amortissements des immobilisations corporelles', montant: 3000000 },
    43	            { sens: 'C', compte: '2841', libelleCompte: 'Amortissement du mat√©riel industriel', montant: 3000000 },
    44	            { sens: 'D', compte: '851', libelleCompte: 'Dotations aux provisions r√©glement√©es', montant: 1500000 },
    45	            { sens: 'C', compte: '141', libelleCompte: 'Amortissements d√©rogatoires', montant: 1500000 },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['28', '681', '68'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre12.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_12: ChapitreOperations = {
     4	  numero: 12,
     5	  titre: "Cessions d'immobilisations",
     6	  sections: [
     7	    {
     8	      titre: "Sortie de l'actif",
     9	      contenu:
    10	        "Lors de la cession d'une immobilisation, il convient d'abord de compl√©ter l'amortissement jusqu'√† la date de cession (prorata temporis). " +
    11	        "L'immobilisation est ensuite sortie de l'actif : le compte d'amortissement (28) est d√©bit√© pour le cumul des amortissements, le compte 81 ¬´ Valeurs comptables des cessions d'immobilisations ¬ª est d√©bit√© pour la valeur nette comptable, et le compte d'immobilisation (21, 22, 23 ou 24) est cr√©dit√© pour la valeur brute.",
    12	      ecritures: [
    13	        {
    14	          numero: 1,
    15	          description: "Cession d'un v√©hicule : valeur brute 12 000 000 FCFA, amortissements cumul√©s 9 000 000 FCFA, prix de cession 5 000 000 FCFA",
    16	          lignes: [
    17	            { sens: 'D', compte: '2845', libelleCompte: 'Amortissement du mat√©riel de transport', montant: 9000000 },
    18	            { sens: 'D', compte: '81', libelleCompte: "Valeurs comptables des cessions d'immobilisations", montant: 3000000, commentaire: 'VNC = 12M - 9M' },
    19	            { sens: 'C', compte: '245', libelleCompte: 'Mat√©riel de transport', montant: 12000000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Enregistrement du prix de cession',
    26	      contenu:
    27	        "Le prix de cession est enregistr√© au cr√©dit du compte 82 ¬´ Produits des cessions d'immobilisations ¬ª par le d√©bit d'un compte de tr√©sorerie ou du compte 485 ¬´ Cr√©ances sur cessions d'immobilisations ¬ª. " +
    28	        "La TVA √©ventuellement collect√©e sur la cession est enregistr√©e au compte 4431. " +
    29	        "La cession d'une immobilisation totalement amortie donne lieu √† un produit net √©gal au prix de vente.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: 'Encaissement du prix de cession du v√©hicule : 5 000 000 FCFA',
    34	          lignes: [
    35	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 5000000 },
    36	            { sens: 'C', compte: '82', libelleCompte: "Produits des cessions d'immobilisations", montant: 5000000 },
    37	          ],
    38	        },
    39	      ],
    40	    },
    41	    {
    42	      titre: 'Plus ou moins-value',
    43	      contenu:
    44	        "La plus-value ou moins-value de cession r√©sulte de la comparaison entre le prix de cession (compte 82) et la valeur comptable nette (compte 81). " +
    45	        "Si le prix de cession est sup√©rieur √† la VNC, il y a plus-value ; dans le cas contraire, il y a moins-value. " +
    46	        "Le SYSCOHADA n'utilise pas de compte sp√©cifique pour le r√©sultat de cession : celui-ci appara√Æt comme la diff√©rence entre les comptes 82 et 81 dans le compte de r√©sultat.",
    47	    },
    48	  ],
    49	  comptesLies: ['81', '82', '28', '21', '22', '23', '24'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre13.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_13: ChapitreOperations = {
     4	  numero: 13,
     5	  titre: 'Location-acquisition et cr√©dit-bail',
     6	  sections: [
     7	    {
     8	      titre: "Inscription √† l'actif",
     9	      contenu:
    10	        "Le SYSCOHADA R√©vis√© impose la comptabilisation des contrats de location-acquisition (cr√©dit-bail) √† l'actif du preneur, conform√©ment √† la pr√©√©minence de la substance sur la forme. " +
    11	        "Le bien est inscrit au d√©bit du compte d'immobilisation concern√© pour sa juste valeur ou la valeur actualis√©e des paiements minimaux (si inf√©rieure), par le cr√©dit du compte 17 ¬´ Dettes de location-acquisition ¬ª. " +
    12	        "Cette inscription g√©n√®re simultan√©ment un actif amortissable et une dette financi√®re.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Inscription √† l'actif d'un mat√©riel en cr√©dit-bail : valeur 20 000 000 FCFA",
    17	          lignes: [
    18	            { sens: 'D', compte: '241', libelleCompte: 'Mat√©riel et outillage industriel et commercial', montant: 20000000 },
    19	            { sens: 'C', compte: '172', libelleCompte: 'Emprunts √©quivalents de cr√©dit-bail immobilier', montant: 20000000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Comptabilisation des redevances',
    26	      contenu:
    27	        "Chaque redevance de cr√©dit-bail est d√©compos√©e en une part de remboursement du capital (qui diminue la dette au compte 17) et une part d'int√©r√™ts (comptabilis√©e au compte 672 ¬´ Int√©r√™ts dans loyers de location-acquisition ¬ª). " +
    28	        "Le tableau de r√©partition est √©tabli selon la m√©thode du taux d'int√©r√™t effectif. " +
    29	        "L'amortissement du bien est comptabilis√© ind√©pendamment des redevances, sur la dur√©e d'utilit√© du bien.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: 'Paiement d\'une redevance trimestrielle de 1 800 000 FCFA dont 300 000 d\'int√©r√™ts',
    34	          lignes: [
    35	            { sens: 'D', compte: '172', libelleCompte: 'Emprunts √©quivalents de cr√©dit-bail immobilier', montant: 1500000, commentaire: 'Part en capital' },
    36	            { sens: 'D', compte: '672', libelleCompte: 'Int√©r√™ts dans loyers de location-acquisition', montant: 300000 },
    37	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 1800000 },
    38	          ],
    39	        },
    40	      ],
    41	    },
    42	    {
    43	      titre: "Lev√©e d'option",
    44	      contenu:
    45	        "√Ä la fin du contrat, le preneur peut lever l'option d'achat en versant le prix r√©siduel convenu. " +
    46	        "Le solde restant de la dette de location-acquisition est apur√©. Si le prix de lev√©e diff√®re du solde de la dette, la diff√©rence est trait√©e en charge ou produit financier. " +
    47	        "Apr√®s la lev√©e d'option, le bien reste √† l'actif et continue d'√™tre amorti sur sa dur√©e d'utilit√© restante.",
    48	    },
    49	  ],
    50	  comptesLies: ['17', '172', '173', '623', '672'],
    51	}

================================================================================
FILE: src/data/syscohada/operations/chapitre14.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_14: ChapitreOperations = {
     4	  numero: 14,
     5	  titre: 'Immobilisations financi√®res',
     6	  sections: [
     7	    {
     8	      titre: 'Acquisition de titres de participation',
     9	      contenu:
    10	        "Les titres de participation sont des titres dont la possession durable est estim√©e utile √† l'activit√© de l'entreprise, notamment en permettant d'exercer une influence ou un contr√¥le sur la soci√©t√© √©mettrice. " +
    11	        "Ils sont enregistr√©s au d√©bit du compte 261 ¬´ Titres de participation ¬ª pour leur co√ªt d'acquisition, incluant le prix d'achat et les frais accessoires (commissions, courtages). " +
    12	        "Les titres de participation sont √©valu√©s √† chaque cl√¥ture √† leur valeur d'utilit√©, avec constitution d'une d√©pr√©ciation si n√©cessaire.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Acquisition de 500 actions de la soci√©t√© XYZ √† 20 000 FCFA l\'action, frais de courtage 200 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '261', libelleCompte: 'Titres de participation', montant: 10200000, commentaire: '500 x 20 000 + 200 000 frais' },
    19	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 10200000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Pr√™ts',
    26	      contenu:
    27	        "Les pr√™ts accord√©s par l'entreprise √† des tiers (filiales, associ√©s, personnel) d'une dur√©e sup√©rieure √† un an sont enregistr√©s au compte 27 ¬´ Autres immobilisations financi√®res ¬ª. " +
    28	        "Le compte 271 ¬´ Pr√™ts et cr√©ances non commerciales ¬ª est d√©bit√© par le cr√©dit du compte de tr√©sorerie. " +
    29	        "Les int√©r√™ts courus sont comptabilis√©s au compte 2767 ¬´ Int√©r√™ts courus sur pr√™ts ¬ª et les produits correspondants au compte 77.",
    30	    },
    31	    {
    32	      titre: 'D√©p√¥ts et cautionnements',
    33	      contenu:
    34	        "Les d√©p√¥ts et cautionnements vers√©s sont des sommes bloqu√©es en garantie d'ex√©cution de contrats (loyer, fourniture d'√©nergie, etc.). " +
    35	        "Ils sont enregistr√©s au d√©bit du compte 275 ¬´ D√©p√¥ts et cautionnements vers√©s ¬ª par le cr√©dit du compte de tr√©sorerie. " +
    36	        "Lors de la restitution, l'√©criture inverse est pass√©e. Une d√©pr√©ciation est constitu√©e si le remboursement devient incertain.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Versement d\'un d√©p√¥t de garantie de 3 mois de loyer : 1 500 000 FCFA',
    41	          lignes: [
    42	            { sens: 'D', compte: '275', libelleCompte: 'D√©p√¥ts et cautionnements vers√©s', montant: 1500000 },
    43	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 1500000 },
    44	          ],
    45	        },
    46	      ],
    47	    },
    48	  ],
    49	  comptesLies: ['26', '27', '261', '271', '275'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre15.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_15: ChapitreOperations = {
     4	  numero: 15,
     5	  titre: 'Stocks : entr√©es',
     6	  sections: [
     7	    {
     8	      titre: 'Achats de marchandises',
     9	      contenu:
    10	        "Les achats de marchandises sont enregistr√©s au d√©bit du compte 601 ¬´ Achats de marchandises ¬ª pour le montant hors taxes r√©cup√©rables. " +
    11	        "Les frais de transport, manutention et assurance sur achats sont comptabilis√©s au compte 611 ¬´ Transports sur achats ¬ª ou incorpor√©s au co√ªt d'achat. " +
    12	        "Les rabais, remises et ristournes obtenus figurent au cr√©dit du compte 6019 ¬´ Rabais, remises et ristournes obtenus sur achats ¬ª.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Achat de marchandises pour 7 500 000 FCFA HT, TVA 18%, frais de transport 250 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '601', libelleCompte: 'Achats de marchandises', montant: 7500000 },
    19	            { sens: 'D', compte: '611', libelleCompte: 'Transports sur achats', montant: 250000 },
    20	            { sens: 'D', compte: '4452', libelleCompte: 'TVA r√©cup√©rable sur achats', montant: 1350000 },
    21	            { sens: 'C', compte: '401', libelleCompte: 'Fournisseurs', montant: 9100000 },
    22	          ],
    23	        },
    24	      ],
    25	    },
    26	    {
    27	      titre: 'Achats de mati√®res premi√®res',
    28	      contenu:
    29	        "Les achats de mati√®res premi√®res et fournitures li√©es sont comptabilis√©s au d√©bit du compte 602 ¬´ Achats de mati√®res premi√®res et fournitures li√©es ¬ª. " +
    30	        "Le co√ªt d'entr√©e en stock comprend le prix d'achat, les droits de douane, les taxes non r√©cup√©rables et les frais de transport et de manutention directement attribuables. " +
    31	        "En inventaire permanent, les entr√©es en stock sont enregistr√©es au d√©bit du compte 32 par le cr√©dit du compte 6032.",
    32	    },
    33	    {
    34	      titre: 'Production stock√©e',
    35	      contenu:
    36	        "Les produits fabriqu√©s par l'entreprise et mis en stock sont √©valu√©s √† leur co√ªt de production, comprenant les charges directes et une quote-part de charges indirectes de production. " +
    37	        "En inventaire permanent, le compte 33 ¬´ Autres approvisionnements ¬ª ou 36 ¬´ Produits finis ¬ª est d√©bit√© par le cr√©dit du compte 73 ¬´ Variations de stocks de produits fabriqu√©s ¬ª. " +
    38	        "Les en-cours de production sont stock√©s au compte 34 ¬´ Produits en cours ¬ª.",
    39	    },
    40	  ],
    41	  comptesLies: ['31', '32', '33', '36', '60', '61'],
    42	}

================================================================================
FILE: src/data/syscohada/operations/chapitre16.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_16: ChapitreOperations = {
     4	  numero: 16,
     5	  titre: 'Stocks : sorties et variations',
     6	  sections: [
     7	    {
     8	      titre: 'Variation de stocks de marchandises',
     9	      contenu:
    10	        "En inventaire intermittent, la variation de stocks de marchandises est constat√©e en fin d'exercice par le jeu des comptes 6031 ¬´ Variation de stocks de marchandises ¬ª et 31 ¬´ Marchandises ¬ª. " +
    11	        "Le stock initial est annul√© (d√©bit 6031, cr√©dit 31) et le stock final est constat√© (d√©bit 31, cr√©dit 6031). " +
    12	        "Le solde du compte 6031 repr√©sente la variation de stock : d√©biteur si le stock a diminu√© (d√©stockage), cr√©diteur si le stock a augment√© (stockage).",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Variation de stocks de marchandises : stock initial 4 000 000, stock final 5 500 000 FCFA (stockage net)',
    17	          lignes: [
    18	            { sens: 'D', compte: '6031', libelleCompte: 'Variation de stocks de marchandises', montant: 4000000, commentaire: 'Annulation stock initial' },
    19	            { sens: 'C', compte: '31', libelleCompte: 'Marchandises', montant: 4000000 },
    20	            { sens: 'D', compte: '31', libelleCompte: 'Marchandises', montant: 5500000, commentaire: 'Constatation stock final' },
    21	            { sens: 'C', compte: '6031', libelleCompte: 'Variation de stocks de marchandises', montant: 5500000 },
    22	          ],
    23	        },
    24	      ],
    25	    },
    26	    {
    27	      titre: 'Variation de stocks de mati√®res',
    28	      contenu:
    29	        "La variation de stocks de mati√®res premi√®res et fournitures suit le m√™me m√©canisme que celle des marchandises, via le compte 6032 ¬´ Variation de stocks de mati√®res premi√®res ¬ª. " +
    30	        "Les m√©thodes de valorisation des sorties admises par le SYSCOHADA sont le CUMP (Co√ªt Unitaire Moyen Pond√©r√©) apr√®s chaque entr√©e ou sur la p√©riode, et le FIFO (Premier Entr√©, Premier Sorti). " +
    31	        "La m√©thode LIFO n'est pas admise par le SYSCOHADA R√©vis√©.",
    32	    },
    33	    {
    34	      titre: 'Production d√©stock√©e',
    35	      contenu:
    36	        "La diminution des stocks de produits finis et en-cours constitue un d√©stockage comptabilis√© au cr√©dit du compte 73 ¬´ Variations de stocks de produits fabriqu√©s ¬ª. " +
    37	        "Un solde d√©biteur du compte 73 traduit un d√©stockage (la production vendue est sup√©rieure √† la production de l'exercice), tandis qu'un solde cr√©diteur traduit un stockage. " +
    38	        "Le compte 73 figure dans les produits d'exploitation du compte de r√©sultat.",
    39	      ecritures: [
    40	        {
    41	          numero: 2,
    42	          description: 'D√©stockage de produits finis : stock initial 12 000 000, stock final 9 500 000 FCFA',
    43	          lignes: [
    44	            { sens: 'D', compte: '73', libelleCompte: 'Variations de stocks de produits fabriqu√©s', montant: 12000000, commentaire: 'Annulation stock initial' },
    45	            { sens: 'C', compte: '36', libelleCompte: 'Produits finis', montant: 12000000 },
    46	            { sens: 'D', compte: '36', libelleCompte: 'Produits finis', montant: 9500000, commentaire: 'Constatation stock final' },
    47	            { sens: 'C', compte: '73', libelleCompte: 'Variations de stocks de produits fabriqu√©s', montant: 9500000 },
    48	          ],
    49	        },
    50	      ],
    51	    },
    52	  ],
    53	  comptesLies: ['603', '73', '31', '32', '36'],
    54	}

================================================================================
FILE: src/data/syscohada/operations/chapitre17.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_17: ChapitreOperations = {
     4	  numero: 17,
     5	  titre: 'D√©pr√©ciation des stocks',
     6	  sections: [
     7	    {
     8	      titre: 'Constitution',
     9	      contenu:
    10	        "Une d√©pr√©ciation des stocks est constat√©e lorsque la valeur actuelle (valeur nette de r√©alisation) est inf√©rieure au co√ªt d'entr√©e. " +
    11	        "Le compte 659 ¬´ Charges de provisions ¬ª est d√©bit√© par le cr√©dit du compte 39 ¬´ D√©pr√©ciations des stocks ¬ª (391 pour marchandises, 392 pour mati√®res, etc.). " +
    12	        "La d√©pr√©ciation est √©valu√©e article par article ou par cat√©gories homog√®nes, en tenant compte des co√ªts d'ach√®vement et de commercialisation.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Constitution d\'une d√©pr√©ciation de stocks de marchandises obsol√®tes de 2 000 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '6593', libelleCompte: 'Charges de provisions pour d√©pr√©ciation des stocks', montant: 2000000 },
    19	            { sens: 'C', compte: '391', libelleCompte: 'D√©pr√©ciations des stocks de marchandises', montant: 2000000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Ajustement',
    26	      contenu:
    27	        "√Ä chaque cl√¥ture, les d√©pr√©ciations existantes sont r√©examin√©es et ajust√©es. Si la perte de valeur s'est accentu√©e, un compl√©ment de dotation est enregistr√©. " +
    28	        "Si la valeur du stock s'est partiellement r√©tablie, une reprise partielle est effectu√©e au cr√©dit du compte 759. " +
    29	        "L'ajustement se fait en comparant la d√©pr√©ciation n√©cessaire √† l'exercice N avec celle existant √† l'exercice N-1.",
    30	    },
    31	    {
    32	      titre: 'Reprise',
    33	      contenu:
    34	        "La reprise de la d√©pr√©ciation intervient lorsque les conditions ayant justifi√© la d√©pr√©ciation disparaissent (vente du stock, remont√©e des cours, etc.). " +
    35	        "Le compte 39 est d√©bit√© par le cr√©dit du compte 759 ¬´ Reprises de charges de provisions ¬ª. " +
    36	        "En inventaire intermittent, les d√©pr√©ciations de l'exercice pr√©c√©dent sont int√©gralement reprises et de nouvelles d√©pr√©ciations sont constitu√©es sur la base du stock final.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Reprise de la d√©pr√©ciation de stocks suite √† la vente des marchandises d√©pr√©ci√©es',
    41	          lignes: [
    42	            { sens: 'D', compte: '391', libelleCompte: 'D√©pr√©ciations des stocks de marchandises', montant: 2000000 },
    43	            { sens: 'C', compte: '7593', libelleCompte: 'Reprises de charges de provisions pour d√©pr√©ciation des stocks', montant: 2000000 },
    44	          ],
    45	        },
    46	      ],
    47	    },
    48	  ],
    49	  comptesLies: ['39', '659', '759'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre18.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_18: ChapitreOperations = {
     4	  numero: 18,
     5	  titre: 'Achats et charges externes',
     6	  sections: [
     7	    {
     8	      titre: 'Achats de marchandises et mati√®res',
     9	      contenu:
    10	        "Les achats de biens sont comptabilis√©s au d√©bit des comptes 601 (marchandises), 602 (mati√®res premi√®res), 604 (achats stock√©s de mati√®res et fournitures consommables) ou 605 (autres achats). " +
    11	        "L'enregistrement se fait √† la date de transfert des risques et avantages, g√©n√©ralement √† la livraison. " +
    12	        "Les achats doivent √™tre comptabilis√©s nets de remises commerciales, les escomptes de r√®glement √©tant enregistr√©s s√©par√©ment au compte 773.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Achat de fournitures de bureau pour 500 000 FCFA HT, TVA 18%, pay√© au comptant',
    17	          lignes: [
    18	            { sens: 'D', compte: '6055', libelleCompte: 'Fournitures de bureau et informatiques', montant: 500000 },
    19	            { sens: 'D', compte: '4452', libelleCompte: 'TVA r√©cup√©rable sur achats', montant: 90000 },
    20	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 590000 },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'Transports',
    27	      contenu:
    28	        "Les frais de transport sont comptabilis√©s selon leur nature : le compte 611 enregistre les transports sur achats, le compte 612 les transports sur ventes, et le compte 613 les transports pour le compte de tiers. " +
    29	        "Lorsque le transport est assur√© par l'entreprise elle-m√™me, les charges correspondantes figurent dans les comptes par nature (carburant, salaires, amortissements). " +
    30	        "Les ports factur√©s par les fournisseurs sont enregistr√©s distinctement ou inclus dans le co√ªt des achats.",
    31	    },
    32	    {
    33	      titre: 'Services ext√©rieurs',
    34	      contenu:
    35	        "Les services ext√©rieurs regroupent les charges des comptes 62 (services ext√©rieurs) et 63 (autres services ext√©rieurs). " +
    36	        "Ils comprennent notamment les loyers (622), l'entretien et les r√©parations (624), les primes d'assurance (625), les √©tudes et recherches (631), la publicit√© (627) et les honoraires (632). " +
    37	        "Ces charges sont comptabilis√©es √† la date de la prestation ou de la facturation, avec r√©gularisation en fin d'exercice pour les prestations re√ßues non encore factur√©es.",
    38	      ecritures: [
    39	        {
    40	          numero: 2,
    41	          description: 'Facturation de prestations d\'entretien pour 1 200 000 FCFA HT, TVA 18%',
    42	          lignes: [
    43	            { sens: 'D', compte: '6241', libelleCompte: 'Entretien et r√©parations des biens immobiliers', montant: 1200000 },
    44	            { sens: 'D', compte: '4452', libelleCompte: 'TVA r√©cup√©rable sur achats', montant: 216000 },
    45	            { sens: 'C', compte: '401', libelleCompte: 'Fournisseurs', montant: 1416000 },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['60', '61', '62', '63'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre19.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_19: ChapitreOperations = {
     4	  numero: 19,
     5	  titre: 'Op√©rations avec les fournisseurs',
     6	  sections: [
     7	    {
     8	      titre: 'Comptabilisation des factures',
     9	      contenu:
    10	        "Les factures fournisseurs sont enregistr√©es au cr√©dit du compte 401 ¬´ Fournisseurs ¬ª par le d√©bit des comptes de charges ou d'immobilisations correspondants. " +
    11	        "L'enregistrement intervient √† la date de r√©ception de la facture ou, √† d√©faut, √† la date de livraison des biens ou d'ex√©cution des services. " +
    12	        "Les avoirs re√ßus des fournisseurs (retours, remises) sont enregistr√©s au d√©bit du compte 401 par le cr√©dit du compte d'achat ou du compte 609.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'R√©ception et comptabilisation d\'une facture fournisseur de 3 000 000 FCFA HT, TVA 18%',
    17	          lignes: [
    18	            { sens: 'D', compte: '601', libelleCompte: 'Achats de marchandises', montant: 3000000 },
    19	            { sens: 'D', compte: '4452', libelleCompte: 'TVA r√©cup√©rable sur achats', montant: 540000 },
    20	            { sens: 'C', compte: '401', libelleCompte: 'Fournisseurs', montant: 3540000 },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'Effets √† payer',
    27	      contenu:
    28	        "Lorsque le r√®glement d'un fournisseur est mat√©rialis√© par un effet de commerce (lettre de change, billet √† ordre), la dette est transf√©r√©e du compte 401 au compte 402 ¬´ Fournisseurs, effets √† payer ¬ª. " +
    29	        "L'effet est comptabilis√© √† son nominal. √Ä l'√©ch√©ance, le compte 402 est d√©bit√© par le cr√©dit du compte de tr√©sorerie. " +
    30	        "Les int√©r√™ts √©ventuels li√©s √† l'effet sont comptabilis√©s en charges financi√®res.",
    31	    },
    32	    {
    33	      titre: 'Avances et acomptes',
    34	      contenu:
    35	        "Les avances et acomptes vers√©s aux fournisseurs sur commandes en cours sont enregistr√©s au d√©bit du compte 409 ¬´ Fournisseurs d√©biteurs ¬ª par le cr√©dit du compte de tr√©sorerie. " +
    36	        "Lors de la r√©ception de la facture d√©finitive, le compte 409 est sold√© par transfert au cr√©dit du compte 401. " +
    37	        "Les avances sur immobilisations sont enregistr√©es distinctement au compte 251.",
    38	    },
    39	    {
    40	      titre: 'Factures non parvenues',
    41	      contenu:
    42	        "Les factures non parvenues correspondent √† des livraisons re√ßues avant la cl√¥ture pour lesquelles la facture n'a pas encore √©t√© √©tablie. " +
    43	        "Le compte 408 ¬´ Fournisseurs, factures non parvenues ¬ª est cr√©dit√© par le d√©bit des comptes de charges TTC estim√©es. " +
    44	        "Ces √©critures de r√©gularisation sont contre-pass√©es √† l'ouverture de l'exercice suivant.",
    45	      ecritures: [
    46	        {
    47	          numero: 2,
    48	          description: 'Facture non parvenue pour marchandises livr√©es en d√©cembre : estimation 1 800 000 FCFA TTC',
    49	          lignes: [
    50	            { sens: 'D', compte: '601', libelleCompte: 'Achats de marchandises', montant: 1525424, commentaire: 'Montant HT estim√©' },
    51	            { sens: 'D', compte: '4452', libelleCompte: 'TVA r√©cup√©rable sur achats', montant: 274576 },
    52	            { sens: 'C', compte: '408', libelleCompte: 'Fournisseurs, factures non parvenues', montant: 1800000 },
    53	          ],
    54	        },
    55	      ],
    56	    },
    57	  ],
    58	  comptesLies: ['40', '401', '402', '408', '409'],
    59	}

================================================================================
FILE: src/data/syscohada/operations/chapitre20.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_20: ChapitreOperations = {
     4	  numero: 20,
     5	  titre: 'Op√©rations avec les clients',
     6	  sections: [
     7	    {
     8	      titre: 'Facturation des ventes',
     9	      contenu:
    10	        "Les ventes de biens et services sont enregistr√©es au cr√©dit des comptes 70 (ventes de marchandises, produits fabriqu√©s, services) par le d√©bit du compte 411 ¬´ Clients ¬ª. " +
    11	        "Le chiffre d'affaires est comptabilis√© hors taxes collect√©es. La TVA collect√©e est enregistr√©e au cr√©dit du compte 4431. " +
    12	        "Les remises commerciales figurant sur facture sont d√©duites directement du montant de la vente.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Facturation d\'une vente de marchandises pour 6 000 000 FCFA HT, TVA 18%',
    17	          lignes: [
    18	            { sens: 'D', compte: '411', libelleCompte: 'Clients', montant: 7080000 },
    19	            { sens: 'C', compte: '701', libelleCompte: 'Ventes de marchandises', montant: 6000000 },
    20	            { sens: 'C', compte: '4431', libelleCompte: 'TVA factur√©e sur ventes', montant: 1080000 },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'Effets √† recevoir',
    27	      contenu:
    28	        "Lorsque le client accepte un effet de commerce (traite), la cr√©ance est transf√©r√©e du compte 411 au compte 412 ¬´ Clients, effets √† recevoir ¬ª. " +
    29	        "L'effet peut √™tre conserv√© en portefeuille jusqu'√† l'√©ch√©ance, remis √† l'escompte (compte 565 ¬´ Banques, cr√©dits d'escompte ¬ª) ou endoss√© au profit d'un tiers. " +
    30	        "En cas d'impay√©, l'effet est r√©int√©gr√© au compte 411 et des frais de retour peuvent √™tre factur√©s.",
    31	    },
    32	    {
    33	      titre: 'Avances re√ßues',
    34	      contenu:
    35	        "Les avances et acomptes re√ßus des clients sont enregistr√©s au cr√©dit du compte 419 ¬´ Clients cr√©diteurs ¬ª par le d√©bit du compte de tr√©sorerie. " +
    36	        "Lors de la facturation d√©finitive, le compte 419 est d√©bit√© pour venir en diminution de la cr√©ance enregistr√©e au compte 411. " +
    37	        "Les avances re√ßues peuvent √™tre soumises √† TVA selon la r√©glementation fiscale locale.",
    38	    },
    39	    {
    40	      titre: 'Clients douteux',
    41	      contenu:
    42	        "Lorsqu'une cr√©ance client pr√©sente un risque de non-recouvrement, elle est transf√©r√©e du compte 411 au compte 416 ¬´ Clients douteux ou litigieux ¬ª. " +
    43	        "Une d√©pr√©ciation est constitu√©e en fonction du risque estim√© de perte (d√©bit 6594, cr√©dit 491). La cr√©ance est maintenue TTC au bilan. " +
    44	        "En cas d'irr√©couvrabilit√© d√©finitive, la cr√©ance est sold√©e et la perte est constat√©e au compte 651 ¬´ Pertes sur cr√©ances clients ¬ª.",
    45	      ecritures: [
    46	        {
    47	          numero: 2,
    48	          description: 'Reclassement d\'un client douteux (cr√©ance TTC 2 360 000 FCFA) et d√©pr√©ciation √† 50%',
    49	          lignes: [
    50	            { sens: 'D', compte: '416', libelleCompte: 'Clients douteux ou litigieux', montant: 2360000 },
    51	            { sens: 'C', compte: '411', libelleCompte: 'Clients', montant: 2360000, commentaire: 'Reclassement' },
    52	            { sens: 'D', compte: '6594', libelleCompte: 'Charges de provisions pour d√©pr√©ciation des cr√©ances', montant: 1000000, commentaire: '50% du HT' },
    53	            { sens: 'C', compte: '491', libelleCompte: 'D√©pr√©ciations des comptes clients', montant: 1000000 },
    54	          ],
    55	        },
    56	      ],
    57	    },
    58	  ],
    59	  comptesLies: ['41', '411', '412', '413', '418', '419'],
    60	}

================================================================================
FILE: src/data/syscohada/operations/chapitre21.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_21: ChapitreOperations = {
     4	  numero: 21,
     5	  titre: 'Charges de personnel',
     6	  sections: [
     7	    {
     8	      titre: 'Comptabilisation de la paie',
     9	      contenu:
    10	        "La paie est comptabilis√©e en distinguant le salaire brut (compte 661 ¬´ R√©mun√©rations directes vers√©es au personnel ¬ª), les retenues salariales (cotisations sociales, imp√¥ts sur salaires retenus √† la source) et le salaire net √† payer. " +
    11	        "Le compte 422 ¬´ Personnel, r√©mun√©rations dues ¬ª est cr√©dit√© du salaire net. Les retenues sont port√©es au cr√©dit des comptes 43 (organismes sociaux) et 447 (√âtat, imp√¥ts retenus √† la source). " +
    12	        "Le paiement effectif des salaires se traduit par le d√©bit du compte 422 et le cr√©dit du compte de tr√©sorerie.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Comptabilisation de la paie mensuelle : brut 5 000 000 FCFA, cotisations salariales 900 000, imp√¥t retenu 350 000',
    17	          lignes: [
    18	            { sens: 'D', compte: '661', libelleCompte: 'R√©mun√©rations directes vers√©es au personnel', montant: 5000000 },
    19	            { sens: 'C', compte: '431', libelleCompte: 'S√©curit√© sociale', montant: 900000, commentaire: 'Cotisations salariales' },
    20	            { sens: 'C', compte: '447', libelleCompte: '√âtat, imp√¥ts retenus √† la source', montant: 350000 },
    21	            { sens: 'C', compte: '422', libelleCompte: 'Personnel, r√©mun√©rations dues', montant: 3750000, commentaire: 'Net √† payer' },
    22	          ],
    23	        },
    24	      ],
    25	    },
    26	    {
    27	      titre: 'Charges sociales',
    28	      contenu:
    29	        "Les charges sociales patronales sont comptabilis√©es au d√©bit du compte 664 ¬´ Charges sociales ¬ª par le cr√©dit des comptes 43 correspondants (431 S√©curit√© sociale, 432 Caisses de retraite, etc.). " +
    30	        "Elles comprennent les cotisations patronales de s√©curit√© sociale, les cotisations de retraite compl√©mentaire, les cotisations d'assurance ch√¥mage et les contributions diverses. " +
    31	        "Le paiement aux organismes sociaux se fait par le d√©bit des comptes 43 et le cr√©dit du compte de tr√©sorerie.",
    32	      ecritures: [
    33	        {
    34	          numero: 2,
    35	          description: 'Charges sociales patronales sur la paie : CNSS 800 000, retraite compl√©mentaire 250 000 FCFA',
    36	          lignes: [
    37	            { sens: 'D', compte: '6641', libelleCompte: 'Charges sociales sur r√©mun√©rations du personnel national', montant: 1050000 },
    38	            { sens: 'C', compte: '431', libelleCompte: 'S√©curit√© sociale', montant: 800000 },
    39	            { sens: 'C', compte: '432', libelleCompte: 'Caisses de retraite', montant: 250000 },
    40	          ],
    41	        },
    42	      ],
    43	    },
    44	    {
    45	      titre: 'Cong√©s pay√©s',
    46	      contenu:
    47	        "Les droits √† cong√©s pay√©s acquis par les salari√©s constituent une charge √† payer rattach√©e √† l'exercice au cours duquel les droits sont acquis. " +
    48	        "Une provision pour cong√©s pay√©s est constitu√©e √† la cl√¥ture : le compte 6181 ¬´ Charges de provisions pour cong√©s pay√©s ¬ª est d√©bit√© par le cr√©dit du compte 4281 ¬´ Dettes provisionn√©es pour cong√©s √† payer ¬ª. " +
    49	        "Le montant provisionn√© comprend les salaires bruts, les charges sociales patronales et la taxe sur salaires correspondantes.",
    50	    },
    51	  ],
    52	  comptesLies: ['42', '43', '66', '661', '664'],
    53	}

================================================================================
FILE: src/data/syscohada/operations/chapitre22.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_22: ChapitreOperations = {
     4	  numero: 22,
     5	  titre: '√âtat et imp√¥ts',
     6	  sections: [
     7	    {
     8	      titre: 'TVA collect√©e et d√©ductible',
     9	      contenu:
    10	        "La TVA collect√©e sur les ventes est enregistr√©e au cr√©dit du compte 4431 ¬´ TVA factur√©e sur ventes ¬ª. La TVA d√©ductible sur les achats est inscrite au d√©bit du compte 4452 ¬´ TVA r√©cup√©rable sur achats ¬ª et celle sur immobilisations au d√©bit du compte 4451. " +
    11	        "Les entreprises non assujetties ou partiellement exon√©r√©es int√®grent la TVA non r√©cup√©rable dans le co√ªt des biens et services acquis. " +
    12	        "Le prorata de d√©duction s'applique aux assujettis partiels.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'D√©claration mensuelle de TVA : TVA collect√©e 2 700 000, TVA d√©ductible 1 800 000, TVA √† d√©caisser 900 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '4431', libelleCompte: 'TVA factur√©e sur ventes', montant: 2700000 },
    19	            { sens: 'C', compte: '4452', libelleCompte: 'TVA r√©cup√©rable sur achats', montant: 1800000 },
    20	            { sens: 'C', compte: '4441', libelleCompte: '√âtat, TVA due', montant: 900000 },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'D√©claration de TVA',
    27	      contenu:
    28	        "La d√©claration de TVA est √©tablie mensuellement ou trimestriellement selon le r√©gime d'imposition. Le solde de TVA √† d√©caisser (compte 4441) est r√©gl√© dans les d√©lais l√©gaux. " +
    29	        "Si la TVA d√©ductible exc√®de la TVA collect√©e, le cr√©dit de TVA est inscrit au compte 4449 ¬´ √âtat, cr√©dit de TVA √† reporter ¬ª. " +
    30	        "Le remboursement du cr√©dit de TVA, lorsqu'il est demand√©, est enregistr√© au d√©bit du compte 4441 par le cr√©dit du compte 4449.",
    31	    },
    32	    {
    33	      titre: 'Imp√¥ts sur les b√©n√©fices',
    34	      contenu:
    35	        "L'imp√¥t sur les b√©n√©fices (IS ou BIC) est comptabilis√© au d√©bit du compte 891 ¬´ Imp√¥ts sur les b√©n√©fices de l'exercice ¬ª par le cr√©dit du compte 441 ¬´ √âtat, imp√¥t sur les b√©n√©fices ¬ª. " +
    36	        "Les acomptes provisionnels vers√©s en cours d'exercice sont enregistr√©s au d√©bit du compte 444 ¬´ √âtat, imp√¥t sur les b√©n√©fices ¬ª. " +
    37	        "Le solde de l'IS √† payer ou le trop-vers√© appara√Æt dans le compte 441 ou 444 selon les cas.",
    38	      ecritures: [
    39	        {
    40	          numero: 2,
    41	          description: 'Liquidation de l\'IS : imp√¥t d√ª 4 500 000 FCFA, acomptes vers√©s 3 000 000 FCFA, solde √† payer 1 500 000',
    42	          lignes: [
    43	            { sens: 'D', compte: '891', libelleCompte: 'Imp√¥ts sur les b√©n√©fices', montant: 4500000 },
    44	            { sens: 'C', compte: '444', libelleCompte: '√âtat, imp√¥t sur les b√©n√©fices', montant: 4500000 },
    45	          ],
    46	        },
    47	      ],
    48	    },
    49	    {
    50	      titre: 'Taxes sur salaires',
    51	      contenu:
    52	        "Les taxes assises sur les salaires (taxe d'apprentissage, formation professionnelle, versement patronal sur salaires, etc.) sont comptabilis√©es au d√©bit du compte 641 ¬´ Imp√¥ts et taxes sur r√©mun√©rations ¬ª. " +
    53	        "Le compte 447 ¬´ √âtat, imp√¥ts retenus √† la source ¬ª enregistre les retenues op√©r√©es sur les salaires pour le compte de l'√âtat. " +
    54	        "Le versement de ces taxes s'effectue selon les √©ch√©ances fix√©es par la l√©gislation fiscale de chaque √âtat membre de l'OHADA.",
    55	    },
    56	  ],
    57	  comptesLies: ['44', '443', '444', '445', '446', '447', '64'],
    58	}

================================================================================
FILE: src/data/syscohada/operations/chapitre23.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_23: ChapitreOperations = {
     4	  numero: 23,
     5	  titre: 'Op√©rations en devises',
     6	  sections: [
     7	    {
     8	      titre: 'Enregistrement initial en devises',
     9	      contenu:
    10	        "Les transactions libell√©es en monnaie √©trang√®re sont converties en monnaie de comptabilisation (FCFA ou autre) au cours de change √† la date de l'op√©ration. " +
    11	        "Les achats et ventes en devises sont enregistr√©s au cours du jour de la facture. Les dettes et cr√©ances en devises sont initialement comptabilis√©es au cours du jour de la transaction. " +
    12	        "Le SYSCOHADA R√©vis√© admet l'utilisation d'un cours moyen de la p√©riode si les fluctuations ne sont pas significatives.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Achat de marchandises √† un fournisseur √©tranger pour 10 000 USD au cours de 600 FCFA/USD',
    17	          lignes: [
    18	            { sens: 'D', compte: '601', libelleCompte: 'Achats de marchandises', montant: 6000000 },
    19	            { sens: 'C', compte: '401', libelleCompte: 'Fournisseurs', montant: 6000000, commentaire: '10 000 USD x 600' },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: '√âcarts de conversion',
    26	      contenu:
    27	        "√Ä la date de cl√¥ture, les cr√©ances et dettes en devises sont √©valu√©es au cours de cl√¥ture. Les diff√©rences par rapport au cours d'enregistrement initial constituent des √©carts de conversion. " +
    28	        "Les √©carts de conversion actif (pertes latentes) sont inscrits au d√©bit du compte 478 ¬´ √âcarts de conversion actif ¬ª et donnent lieu √† une provision pour risques de change. " +
    29	        "Les √©carts de conversion passif (gains latents) sont inscrits au cr√©dit du compte 479 ¬´ √âcarts de conversion passif ¬ª.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: '√âcart de conversion √† la cl√¥ture : dette fournisseur USD revaloris√©e, perte latente de 200 000 FCFA',
    34	          lignes: [
    35	            { sens: 'D', compte: '478', libelleCompte: '√âcarts de conversion actif', montant: 200000, commentaire: 'Perte latente de change' },
    36	            { sens: 'C', compte: '401', libelleCompte: 'Fournisseurs', montant: 200000, commentaire: 'Augmentation de la dette en FCFA' },
    37	            { sens: 'D', compte: '6591', libelleCompte: 'Charges de provisions financi√®res', montant: 200000, commentaire: 'Provision pour risque de change' },
    38	            { sens: 'C', compte: '155', libelleCompte: 'Provisions pour risques de change', montant: 200000 },
    39	          ],
    40	        },
    41	      ],
    42	    },
    43	    {
    44	      titre: 'Gains et pertes de change',
    45	      contenu:
    46	        "Les gains de change r√©alis√©s lors du r√®glement d'op√©rations en devises sont enregistr√©s au cr√©dit du compte 776 ¬´ Gains de change ¬ª. " +
    47	        "Les pertes de change r√©alis√©es sont comptabilis√©es au d√©bit du compte 676 ¬´ Pertes de change ¬ª. " +
    48	        "√Ä l'ouverture de l'exercice suivant, les √©carts de conversion sont contre-pass√©s et les provisions pour risque de change sont reprises.",
    49	    },
    50	  ],
    51	  comptesLies: ['476', '478', '479', '676', '776'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre24.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_24: ChapitreOperations = {
     4	  numero: 24,
     5	  titre: 'Op√©rations de tr√©sorerie',
     6	  sections: [
     7	    {
     8	      titre: 'Encaissements et d√©caissements',
     9	      contenu:
    10	        "Les op√©rations de tr√©sorerie sont enregistr√©es dans les comptes de la classe 5. Les encaissements par banque sont port√©s au d√©bit du compte 521 ¬´ Banques locales ¬ª et les d√©caissements au cr√©dit. " +
    11	        "Les ch√®ques √©mis non encore pr√©sent√©s et les ch√®ques re√ßus non encore encaiss√©s sont suivis respectivement dans les comptes 513 et 514. " +
    12	        "Les virements de fonds entre comptes bancaires ou entre banque et caisse transitent par le compte 585 ¬´ Virements de fonds ¬ª.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Virement de fonds de la banque vers la caisse pour 500 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '585', libelleCompte: 'Virements de fonds', montant: 500000 },
    19	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 500000 },
    20	            { sens: 'D', compte: '571', libelleCompte: 'Caisse', montant: 500000 },
    21	            { sens: 'C', compte: '585', libelleCompte: 'Virements de fonds', montant: 500000 },
    22	          ],
    23	        },
    24	      ],
    25	    },
    26	    {
    27	      titre: 'Rapprochement bancaire',
    28	      contenu:
    29	        "Le rapprochement bancaire permet de v√©rifier la concordance entre le solde du compte 521 en comptabilit√© et le solde du relev√© bancaire. " +
    30	        "Les √©carts proviennent des op√©rations enregistr√©es en comptabilit√© mais pas encore par la banque (ch√®ques √©mis non pr√©sent√©s, remises non cr√©dit√©es) et inversement (frais bancaires, agios, virements re√ßus non encore comptabilis√©s). " +
    31	        "Les √©critures de r√©gularisation doivent √™tre pass√©es pour toutes les op√©rations figurant sur le relev√© bancaire mais non encore comptabilis√©es.",
    32	    },
    33	    {
    34	      titre: 'Caisse',
    35	      contenu:
    36	        "Le compte 571 ¬´ Caisse ¬ª enregistre les mouvements d'esp√®ces. Il est d√©bit√© des encaissements et cr√©dit√© des d√©caissements en num√©raire. " +
    37	        "Le solde du compte caisse doit toujours √™tre d√©biteur ou nul ; un solde cr√©diteur est une anomalie r√©v√©lant une erreur comptable. " +
    38	        "Un inventaire physique de la caisse doit √™tre r√©alis√© r√©guli√®rement et en fin d'exercice, les √©carts √©ventuels √©tant r√©gularis√©s.",
    39	      ecritures: [
    40	        {
    41	          numero: 2,
    42	          description: 'R√©gularisation d\'un exc√©dent de caisse de 15 000 FCFA constat√© lors de l\'inventaire',
    43	          lignes: [
    44	            { sens: 'D', compte: '571', libelleCompte: 'Caisse', montant: 15000 },
    45	            { sens: 'C', compte: '758', libelleCompte: 'Produits divers', montant: 15000, commentaire: 'Exc√©dent de caisse' },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['52', '53', '57', '58', '51'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre25.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_25: ChapitreOperations = {
     4	  numero: 25,
     5	  titre: 'Titres de placement',
     6	  sections: [
     7	    {
     8	      titre: 'Acquisition',
     9	      contenu:
    10	        "Les titres de placement sont des valeurs mobili√®res acquises en vue d'en tirer un revenu direct ou une plus-value √† court terme, sans intention de contr√¥le. " +
    11	        "Ils sont enregistr√©s au d√©bit du compte 50 (501 ¬´ Actions ¬ª, 502 ¬´ Obligations ¬ª) pour leur co√ªt d'acquisition, incluant le prix d'achat et les frais accessoires. " +
    12	        "Le SYSCOHADA R√©vis√© permet d'inscrire les frais accessoires en charges de l'exercice d'acquisition.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Acquisition de 200 actions de placement √† 15 000 FCFA l\'action, commissions 60 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '501', libelleCompte: 'Actions', montant: 3060000, commentaire: '200 x 15 000 + 60 000 frais' },
    19	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 3060000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Revenus des titres',
    26	      contenu:
    27	        "Les dividendes per√ßus sur les actions de placement sont enregistr√©s au cr√©dit du compte 774 ¬´ Revenus de titres de placement ¬ª. " +
    28	        "Les int√©r√™ts sur obligations sont comptabilis√©s au cr√©dit du m√™me compte. Les int√©r√™ts courus non √©chus √† la date de cl√¥ture sont rattach√©s √† l'exercice par le d√©bit du compte 508 ¬´ Int√©r√™ts courus ¬ª. " +
    29	        "La retenue √† la source √©ventuellement pr√©lev√©e est enregistr√©e au d√©bit du compte 4472 ¬´ Imp√¥t sur les revenus des valeurs mobili√®res ¬ª.",
    30	    },
    31	    {
    32	      titre: 'Cession',
    33	      contenu:
    34	        "La cession de titres de placement g√©n√®re un r√©sultat financier : gain de change (compte 777 ¬´ Gains sur cessions de titres de placement ¬ª) ou perte (compte 677 ¬´ Pertes sur cessions de titres de placement ¬ª). " +
    35	        "Le compte 50 est cr√©dit√© de la valeur comptable des titres c√©d√©s. Le compte de tr√©sorerie est d√©bit√© du prix de cession net de frais. " +
    36	        "En cas de cession partielle d'un lot de titres fongibles, la valeur de sortie est d√©termin√©e selon la m√©thode CUMP ou FIFO.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Cession de 100 actions acquises √† 15 300 FCFA, vendues √† 18 000 FCFA l\'action',
    41	          lignes: [
    42	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 1800000 },
    43	            { sens: 'C', compte: '501', libelleCompte: 'Actions', montant: 1530000, commentaire: 'Valeur comptable' },
    44	            { sens: 'C', compte: '777', libelleCompte: 'Gains sur cessions de titres de placement', montant: 270000 },
    45	          ],
    46	        },
    47	      ],
    48	    },
    49	  ],
    50	  comptesLies: ['50', '501', '502', '677', '777'],
    51	}

================================================================================
FILE: src/data/syscohada/operations/chapitre26.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_26: ChapitreOperations = {
     4	  numero: 26,
     5	  titre: "Charges et produits constat√©s d'avance",
     6	  sections: [
     7	    {
     8	      titre: "Charges constat√©es d'avance",
     9	      contenu:
    10	        "Les charges constat√©es d'avance correspondent √† des achats de biens ou services dont la fourniture ou la prestation interviendra ult√©rieurement. " +
    11	        "Elles sont enregistr√©es √† la cl√¥ture au d√©bit du compte 476 ¬´ Charges constat√©es d'avance ¬ª par le cr√©dit du compte de charges concern√©. " +
    12	        "Cette √©criture de r√©gularisation r√©duit les charges de l'exercice en cours pour les reporter sur l'exercice suivant, conform√©ment au principe d'ind√©pendance des exercices.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Prime d'assurance annuelle de 2 400 000 FCFA pay√©e le 1er octobre, charge constat√©e d'avance sur 9 mois",
    17	          lignes: [
    18	            { sens: 'D', compte: '476', libelleCompte: "Charges constat√©es d'avance", montant: 1800000, commentaire: '9/12 de 2 400 000' },
    19	            { sens: 'C', compte: '625', libelleCompte: "Primes d'assurance", montant: 1800000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: "Produits constat√©s d'avance",
    26	      contenu:
    27	        "Les produits constat√©s d'avance correspondent √† des produits per√ßus ou comptabilis√©s avant que la prestation ou la livraison correspondante ne soit effectu√©e. " +
    28	        "Ils sont enregistr√©s √† la cl√¥ture au d√©bit du compte de produit concern√© par le cr√©dit du compte 477 ¬´ Produits constat√©s d'avance ¬ª. " +
    29	        "Au d√©but de l'exercice suivant, l'√©criture est contre-pass√©e pour r√©int√©grer ces produits dans l'exercice appropri√©.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: "Loyer trimestriel encaiss√© d'avance le 1er d√©cembre : 900 000 FCFA, produit constat√© d'avance sur 2 mois",
    34	          lignes: [
    35	            { sens: 'D', compte: '707', libelleCompte: 'Produits accessoires', montant: 600000, commentaire: '2/3 de 900 000' },
    36	            { sens: 'C', compte: '477', libelleCompte: "Produits constat√©s d'avance", montant: 600000 },
    37	          ],
    38	        },
    39	      ],
    40	    },
    41	    {
    42	      titre: 'R√©gularisations',
    43	      contenu:
    44	        "Les √©critures de r√©gularisation (charges et produits constat√©s d'avance) sont syst√©matiquement contre-pass√©es √† l'ouverture de l'exercice suivant. " +
    45	        "Cette contre-passation permet de replacer la charge ou le produit dans l'exercice auquel il se rapporte effectivement. " +
    46	        "Le contr√¥le des comptes 476 et 477 doit √™tre effectu√© √† chaque cl√¥ture pour s'assurer que tous les √©l√©ments inter-exercices ont √©t√© correctement trait√©s.",
    47	    },
    48	  ],
    49	  comptesLies: ['476', '477'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre27.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_27: ChapitreOperations = {
     4	  numero: 27,
     5	  titre: 'Provisions pour d√©pr√©ciation des cr√©ances',
     6	  sections: [
     7	    {
     8	      titre: 'Identification des cr√©ances douteuses',
     9	      contenu:
    10	        "Une cr√©ance est qualifi√©e de douteuse lorsque son recouvrement devient incertain en raison de la situation financi√®re du d√©biteur, d'un retard de paiement significatif ou d'un litige en cours. " +
    11	        "Les cr√©ances douteuses sont transf√©r√©es du compte 411 ¬´ Clients ¬ª au compte 416 ¬´ Clients douteux ou litigieux ¬ª pour leur montant TTC. " +
    12	        "L'identification des cr√©ances douteuses n√©cessite une revue syst√©matique de la balance √¢g√©e des clients et des contentieux en cours √† chaque cl√¥ture.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Reclassement en cr√©ance douteuse d\'un client pour 3 540 000 FCFA TTC (3 000 000 HT + TVA 18%)',
    17	          lignes: [
    18	            { sens: 'D', compte: '416', libelleCompte: 'Clients douteux ou litigieux', montant: 3540000 },
    19	            { sens: 'C', compte: '411', libelleCompte: 'Clients', montant: 3540000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Constitution',
    26	      contenu:
    27	        "La d√©pr√©ciation est calcul√©e sur le montant hors taxes de la cr√©ance, car la TVA reste r√©cup√©rable en cas d'irr√©couvrabilit√© d√©finitive. " +
    28	        "Le compte 6594 ¬´ Charges de provisions pour d√©pr√©ciation des cr√©ances ¬ª est d√©bit√© par le cr√©dit du compte 491 ¬´ D√©pr√©ciations des comptes clients ¬ª. " +
    29	        "Le pourcentage de d√©pr√©ciation est estim√© en fonction de la probabilit√© de perte, tenant compte des garanties d√©tenues et de la situation du d√©biteur.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: 'D√©pr√©ciation √† 60% de la cr√©ance douteuse HT de 3 000 000 FCFA',
    34	          lignes: [
    35	            { sens: 'D', compte: '6594', libelleCompte: 'Charges de provisions pour d√©pr√©ciation des cr√©ances', montant: 1800000, commentaire: '60% de 3 000 000 HT' },
    36	            { sens: 'C', compte: '491', libelleCompte: 'D√©pr√©ciations des comptes clients', montant: 1800000 },
    37	          ],
    38	        },
    39	      ],
    40	    },
    41	    {
    42	      titre: 'Ajustement et reprise',
    43	      contenu:
    44	        "√Ä chaque cl√¥ture, les d√©pr√©ciations existantes sont r√©ajust√©es. Si le risque augmente, un compl√©ment de dotation est enregistr√©. Si le risque diminue, une reprise partielle est effectu√©e. " +
    45	        "Le compte 7594 ¬´ Reprises de charges de provisions pour d√©pr√©ciation des cr√©ances ¬ª est cr√©dit√© lors de la reprise. " +
    46	        "Lorsque la cr√©ance est d√©finitivement irr√©couvrable, elle est pass√©e en perte (compte 651) et la d√©pr√©ciation ant√©rieure est int√©gralement reprise.",
    47	    },
    48	  ],
    49	  comptesLies: ['49', '491', '659', '759'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre28.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_28: ChapitreOperations = {
     4	  numero: 28,
     5	  titre: 'Op√©rations inter-exercices',
     6	  sections: [
     7	    {
     8	      titre: 'Charges √† payer',
     9	      contenu:
    10	        "Les charges √† payer sont des dettes certaines dans leur principe mais dont le montant exact ou l'√©ch√©ance ne sont pas encore d√©finitivement arr√™t√©s √† la date de cl√¥ture. " +
    11	        "Elles sont enregistr√©es au cr√©dit de comptes rattach√©s aux comptes de dettes (408, 428, 438, 448) par le d√©bit des comptes de charges correspondants. " +
    12	        "Les exemples courants incluent les factures fournisseurs non parvenues (408), les cong√©s pay√©s √† payer (428), les charges sociales √† payer (438) et les imp√¥ts √† payer (448).",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Charges sociales √† payer sur salaires de d√©cembre : estimation 1 200 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '6641', libelleCompte: 'Charges sociales sur r√©mun√©rations', montant: 1200000 },
    19	            { sens: 'C', compte: '438', libelleCompte: 'Organismes sociaux, charges √† payer', montant: 1200000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Produits √† recevoir',
    26	      contenu:
    27	        "Les produits √† recevoir sont des cr√©ances certaines dans leur principe et dont le montant peut √™tre √©valu√© avec une fiabilit√© suffisante, mais qui n'ont pas encore fait l'objet d'un encaissement ou d'une facturation √† la date de cl√¥ture. " +
    28	        "Le compte 418 ¬´ Clients, produits √† recevoir ¬ª est d√©bit√© par le cr√©dit du compte de produit concern√©. " +
    29	        "Les int√©r√™ts courus non √©chus sur pr√™ts et placements sont √©galement rattach√©s via les comptes d'int√©r√™ts courus.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: 'Produit √† recevoir : prestations r√©alis√©es en d√©cembre non encore factur√©es, 800 000 FCFA HT, TVA 18%',
    34	          lignes: [
    35	            { sens: 'D', compte: '418', libelleCompte: 'Clients, produits √† recevoir', montant: 944000 },
    36	            { sens: 'C', compte: '706', libelleCompte: 'Services vendus', montant: 800000 },
    37	            { sens: 'C', compte: '4431', libelleCompte: 'TVA factur√©e sur ventes', montant: 144000 },
    38	          ],
    39	        },
    40	      ],
    41	    },
    42	    {
    43	      titre: 'Cut-off',
    44	      contenu:
    45	        "Le cut-off (s√©paration des exercices) est le processus de rattachement des charges et produits √† l'exercice auquel ils se rapportent, ind√©pendamment de leur date de paiement ou d'encaissement. " +
    46	        "Il comprend les charges constat√©es d'avance (476), les produits constat√©s d'avance (477), les charges √† payer et les produits √† recevoir. " +
    47	        "La correcte application du cut-off est essentielle pour garantir une image fid√®le de la situation financi√®re et des r√©sultats de l'entreprise.",
    48	    },
    49	  ],
    50	  comptesLies: ['408', '418', '428', '438', '448', '476', '477'],
    51	}

================================================================================
FILE: src/data/syscohada/operations/chapitre29.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_29: ChapitreOperations = {
     4	  numero: 29,
     5	  titre: 'Op√©rations HAO',
     6	  sections: [
     7	    {
     8	      titre: 'Charges HAO',
     9	      contenu:
    10	        "Les charges HAO (Hors Activit√©s Ordinaires) regroupent les charges ne relevant pas de l'activit√© courante de l'entreprise et pr√©sentant un caract√®re extraordinaire ou non r√©current. " +
    11	        "Elles sont enregistr√©es au compte 83 ¬´ Charges HAO ¬ª et comprennent notamment les p√©nalit√©s sur march√©s, les dons extraordinaires, les cr√©ances devenues irr√©couvrables de mani√®re exceptionnelle et les pertes sur calamit√©s. " +
    12	        "Le SYSCOHADA R√©vis√© a r√©duit le p√©rim√®tre des op√©rations HAO pour se rapprocher des normes IFRS.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'P√©nalit√© de 3 000 000 FCFA sur un march√© public pour retard de livraison',
    17	          lignes: [
    18	            { sens: 'D', compte: '831', libelleCompte: 'Charges HAO', montant: 3000000 },
    19	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 3000000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Produits HAO',
    26	      contenu:
    27	        "Les produits HAO sont enregistr√©s au compte 84 ¬´ Produits HAO ¬ª et correspondent √† des produits non li√©s √† l'activit√© ordinaire. " +
    28	        "Ils comprennent les indemnit√©s d'assurance per√ßues suite √† des sinistres, les d√©dits re√ßus sur march√©s, et les subventions d'√©quilibre exceptionnelles. " +
    29	        "Les plus-values de cession d'immobilisations ne sont plus class√©es en HAO dans le SYSCOHADA R√©vis√© mais dans les comptes 82.",
    30	    },
    31	    {
    32	      titre: 'Dotations et reprises HAO',
    33	      contenu:
    34	        "Les dotations aux amortissements et provisions √† caract√®re HAO sont enregistr√©es au compte 85 ¬´ Dotations HAO ¬ª. Les reprises correspondantes figurent au compte 86 ¬´ Reprises HAO ¬ª. " +
    35	        "Ces √©critures concernent principalement les provisions pour restructuration, les d√©pr√©ciations exceptionnelles r√©sultant de catastrophes naturelles et les provisions pour amendes et p√©nalit√©s significatives. " +
    36	        "Le r√©sultat HAO constitue une composante distincte du r√©sultat net dans le compte de r√©sultat SYSCOHADA.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Dotation HAO pour provision pour restructuration de 10 000 000 FCFA',
    41	          lignes: [
    42	            { sens: 'D', compte: '854', libelleCompte: 'Dotations aux provisions pour risques et charges HAO', montant: 10000000 },
    43	            { sens: 'C', compte: '155', libelleCompte: 'Provisions pour risques', montant: 10000000, commentaire: 'Restructuration pr√©vue' },
    44	          ],
    45	        },
    46	      ],
    47	    },
    48	  ],
    49	  comptesLies: ['83', '84', '85', '86', '48'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre30.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_30: ChapitreOperations = {
     4	  numero: 30,
     5	  titre: 'D√©termination du r√©sultat',
     6	  sections: [
     7	    {
     8	      titre: 'Cl√¥ture des comptes de charges et produits',
     9	      contenu:
    10	        "La d√©termination du r√©sultat s'effectue en soldant l'ensemble des comptes de charges (classes 6 et 8 d√©biteurs) et de produits (classes 7 et 8 cr√©diteurs) par le d√©bit ou cr√©dit du compte 13 ¬´ R√©sultat net de l'exercice ¬ª. " +
    11	        "Les comptes de charges sont cr√©dit√©s pour solde par le d√©bit du compte 13. Les comptes de produits sont d√©bit√©s pour solde par le cr√©dit du compte 13. " +
    12	        "Le solde du compte 13 repr√©sente le r√©sultat net : cr√©diteur en cas de b√©n√©fice, d√©biteur en cas de perte.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Cl√¥ture simplifi√©e : total des produits 80 000 000, total des charges 65 000 000, r√©sultat brut 15 000 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '89', libelleCompte: 'Imp√¥ts sur le r√©sultat', montant: 4500000, commentaire: 'IS 30% sur 15M' },
    19	            { sens: 'C', compte: '891', libelleCompte: 'Imp√¥ts sur les b√©n√©fices de l\'exercice', montant: 4500000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: "Calcul de l'IS",
    26	      contenu:
    27	        "L'imp√¥t sur les soci√©t√©s est calcul√© sur le r√©sultat fiscal, obtenu par retraitements extracomptables du r√©sultat comptable (r√©int√©grations des charges non d√©ductibles, d√©ductions des produits non imposables). " +
    28	        "Le taux d'IS varie selon les pays de l'espace OHADA (25% √† 30% g√©n√©ralement). L'imp√¥t est comptabilis√© au d√©bit du compte 891 ¬´ Imp√¥ts sur les b√©n√©fices ¬ª par le cr√©dit du compte 441. " +
    29	        "L'imp√¥t minimum forfaitaire (IMF), lorsqu'il est sup√©rieur √† l'IS, se substitue √† ce dernier.",
    30	    },
    31	    {
    32	      titre: 'R√©sultat net',
    33	      contenu:
    34	        "Le r√©sultat net est d√©termin√© apr√®s imp√¥t et se compose du r√©sultat d'exploitation, du r√©sultat financier, du r√©sultat HAO et de l'imp√¥t sur les b√©n√©fices. " +
    35	        "Un b√©n√©fice net est vir√© au cr√©dit du compte 120 ¬´ R√©sultat de l'exercice (b√©n√©fice) ¬ª. Une perte nette est vir√©e au d√©bit du compte 129 ¬´ R√©sultat de l'exercice (perte) ¬ª. " +
    36	        "Le r√©sultat net reste dans le compte 12 jusqu'√† la d√©cision d'affectation par l'assembl√©e g√©n√©rale.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Constatation du r√©sultat net b√©n√©ficiaire de 10 500 000 FCFA apr√®s IS',
    41	          lignes: [
    42	            { sens: 'D', compte: '89', libelleCompte: 'Imp√¥ts sur le r√©sultat', montant: 10500000, commentaire: 'Solde des comptes de gestion' },
    43	            { sens: 'C', compte: '120', libelleCompte: 'R√©sultat de l\'exercice (b√©n√©fice)', montant: 10500000 },
    44	          ],
    45	        },
    46	      ],
    47	    },
    48	  ],
    49	  comptesLies: ['12', '120', '129', '89', '891'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre31.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_31: ChapitreOperations = {
     4	  numero: 31,
     5	  titre: 'Op√©rations de consolidation',
     6	  sections: [
     7	    {
     8	      titre: 'P√©rim√®tre de consolidation',
     9	      contenu:
    10	        "Le p√©rim√®tre de consolidation comprend la soci√©t√© m√®re et toutes les entit√©s qu'elle contr√¥le directement ou indirectement (filiales), sur lesquelles elle exerce une influence notable (entreprises associ√©es) ou un contr√¥le conjoint (coentreprises). " +
    11	        "Le contr√¥le exclusif est pr√©sum√© lorsque la soci√©t√© m√®re d√©tient directement ou indirectement plus de 50% des droits de vote. L'influence notable est pr√©sum√©e au-del√† de 20%. " +
    12	        "Le SYSCOHADA R√©vis√© s'inspire largement des normes IFRS en mati√®re de consolidation tout en conservant certaines sp√©cificit√©s.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "√âlimination de la participation de la soci√©t√© m√®re (80%) dans une filiale au capital de 50 000 000 FCFA avec √©cart d'acquisition de 5 000 000 FCFA",
    17	          lignes: [
    18	            { sens: 'D', compte: '101', libelleCompte: 'Capital social (filiale)', montant: 40000000, commentaire: '80% de 50M' },
    19	            { sens: 'D', compte: '215', libelleCompte: "Fonds commercial (√©cart d'acquisition)", montant: 5000000 },
    20	            { sens: 'C', compte: '261', libelleCompte: 'Titres de participation', montant: 45000000, commentaire: 'Co√ªt d\'acquisition' },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'M√©thodes (int√©gration globale, proportionnelle, mise en √©quivalence)',
    27	      contenu:
    28	        "L'int√©gration globale s'applique aux filiales sous contr√¥le exclusif : l'int√©gralit√© des actifs, passifs, charges et produits est reprise, avec constatation des int√©r√™ts minoritaires. " +
    29	        "L'int√©gration proportionnelle s'applique aux entit√©s sous contr√¥le conjoint : seule la quote-part correspondant aux droits de la soci√©t√© m√®re est int√©gr√©e. " +
    30	        "La mise en √©quivalence s'applique aux entreprises associ√©es : les titres sont remplac√©s par la quote-part dans les capitaux propres, l'√©cart √©tant trait√© dans le r√©sultat consolid√©.",
    31	    },
    32	  ],
    33	  comptesLies: ['26', '261', '265', '466'],
    34	}

================================================================================
FILE: src/data/syscohada/operations/chapitre32.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_32: ChapitreOperations = {
     4	  numero: 32,
     5	  titre: 'Op√©rations en commun et GIE',
     6	  sections: [
     7	    {
     8	      titre: 'Participation aux r√©sultats',
     9	      contenu:
    10	        "Les op√©rations faites en commun (soci√©t√©s en participation, GIE) donnent lieu √† un partage du r√©sultat entre les participants selon les termes du contrat. " +
    11	        "La quote-part de b√©n√©fice revenant √† chaque participant est comptabilis√©e au cr√©dit du compte 755 ¬´ Quote-part de r√©sultat sur op√©rations faites en commun ¬ª. " +
    12	        "La quote-part de perte est enregistr√©e au d√©bit du compte 652 ¬´ Quote-part de r√©sultat sur op√©rations faites en commun (charges) ¬ª.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Quote-part de b√©n√©fice de 2 500 000 FCFA revenant √† l'entreprise au titre d'une participation dans un GIE",
    17	          lignes: [
    18	            { sens: 'D', compte: '463', libelleCompte: 'Associ√©s, comptes courants', montant: 2500000 },
    19	            { sens: 'C', compte: '755', libelleCompte: 'Quote-part de r√©sultat sur op√©rations faites en commun', montant: 2500000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Comptabilisation chez le g√©rant',
    26	      contenu:
    27	        "Le g√©rant (ou pilote) de l'op√©ration en commun tient une comptabilit√© autonome des op√©rations du groupement. " +
    28	        "Il enregistre l'int√©gralit√© des charges et produits de l'op√©ration dans ses propres comptes, puis r√©partit le r√©sultat entre les participants. " +
    29	        "Les quotes-parts dues aux autres participants sont enregistr√©es au d√©bit du compte 652 par le cr√©dit du compte 463 ¬´ Associ√©s, comptes courants ¬ª.",
    30	    },
    31	    {
    32	      titre: 'Comptabilisation chez les participants',
    33	      contenu:
    34	        "Les participants non-g√©rants comptabilisent uniquement leur quote-part de r√©sultat dans l'op√©ration commune. " +
    35	        "Le versement de leur apport initial est enregistr√© au d√©bit du compte 463 par le cr√©dit du compte de tr√©sorerie. " +
    36	        "La r√©ception de la quote-part de b√©n√©fice se traduit par le d√©bit du compte de tr√©sorerie et le cr√©dit du compte 755 ou le d√©bit du compte 652 en cas de perte.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: "Apport du participant au GIE de 5 000 000 FCFA et r√©ception de sa quote-part de b√©n√©fice de 2 500 000 FCFA",
    41	          lignes: [
    42	            { sens: 'D', compte: '463', libelleCompte: 'Associ√©s, comptes courants', montant: 5000000, commentaire: 'Apport initial' },
    43	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 5000000 },
    44	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 2500000, commentaire: 'Quote-part de b√©n√©fice re√ßue' },
    45	            { sens: 'C', compte: '755', libelleCompte: 'Quote-part de r√©sultat sur op√©rations faites en commun', montant: 2500000 },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['463', '652', '755'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre33.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_33: ChapitreOperations = {
     4	  numero: 33,
     5	  titre: 'Contrats √† long terme',
     6	  sections: [
     7	    {
     8	      titre: "M√©thode √† l'ach√®vement",
     9	      contenu:
    10	        "Selon la m√©thode √† l'ach√®vement, le r√©sultat n'est comptabilis√© qu'√† la livraison d√©finitive du bien ou √† l'ach√®vement de la prestation. " +
    11	        "Pendant l'ex√©cution du contrat, les charges sont enregistr√©es normalement en comptabilit√© et les travaux en cours sont stock√©s au compte 34 ¬´ Produits en cours ¬ª. " +
    12	        "√Ä l'ach√®vement, les en-cours sont annul√©s et le chiffre d'affaires total est comptabilis√© au compte 71 ¬´ Production stock√©e (ou d√©stockage) ¬ª.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Contrat √† long terme (m√©thode √† l'ach√®vement) : stockage des en-cours de production de 8 000 000 FCFA en fin d'ann√©e 1",
    17	          lignes: [
    18	            { sens: 'D', compte: '342', libelleCompte: 'Travaux en cours', montant: 8000000 },
    19	            { sens: 'C', compte: '71', libelleCompte: 'Production stock√©e', montant: 8000000, commentaire: "Stockage des en-cours" },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: "M√©thode √† l'avancement",
    26	      contenu:
    27	        "La m√©thode √† l'avancement (m√©thode pr√©f√©rentielle du SYSCOHADA R√©vis√©) consiste √† comptabiliser le chiffre d'affaires et le r√©sultat au fur et √† mesure de l'avancement des travaux. " +
    28	        "Le pourcentage d'avancement peut √™tre d√©termin√© par le rapport des co√ªts engag√©s sur les co√ªts totaux estim√©s, ou par des mesures physiques d'avancement. " +
    29	        "Le compte 418 ¬´ Clients, produits √† recevoir ¬ª est d√©bit√© par le cr√©dit du compte de produit pour la fraction du chiffre d'affaires acquise.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: "Contrat de 30 000 000 FCFA avanc√© √† 40% : comptabilisation du CA partiel de 12 000 000 FCFA",
    34	          lignes: [
    35	            { sens: 'D', compte: '418', libelleCompte: 'Clients, produits √† recevoir', montant: 12000000, commentaire: '40% de 30M' },
    36	            { sens: 'C', compte: '706', libelleCompte: 'Services vendus', montant: 12000000, commentaire: 'CA √† l\'avancement' },
    37	          ],
    38	        },
    39	      ],
    40	    },
    41	    {
    42	      titre: 'Provision pour perte √† terminaison',
    43	      contenu:
    44	        "Lorsque le r√©sultat pr√©visionnel global du contrat est d√©ficitaire, une provision pour perte √† terminaison doit √™tre constitu√©e imm√©diatement, quelle que soit la m√©thode retenue (ach√®vement ou avancement). " +
    45	        "Le montant de la provision correspond √† la perte totale pr√©visionnelle diminu√©e, le cas √©ch√©ant, de la perte d√©j√† constat√©e par la m√©thode √† l'avancement. " +
    46	        "La provision est constitu√©e au d√©bit du compte 6591 par le cr√©dit du compte 159 ¬´ Provisions pour charges √† r√©partir ¬ª.",
    47	    },
    48	  ],
    49	  comptesLies: ['34', '342', '418', '71'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre34.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_34: ChapitreOperations = {
     4	  numero: 34,
     5	  titre: 'Concessions de service public',
     6	  sections: [
     7	    {
     8	      titre: 'Biens mis en concession',
     9	      contenu:
    10	        "Les biens mis en concession de service public sont des immobilisations mises √† la disposition du concessionnaire par l'autorit√© conc√©dante pour l'exploitation du service public. " +
    11	        "Le concessionnaire inscrit ces biens √† l'actif de son bilan au compte 22 ¬´ Terrains ¬ª ou 237 ¬´ B√¢timents, installations en concession ¬ª selon leur nature, avec en contrepartie un passif au compte des droits du conc√©dant. " +
    12	        "Les biens financ√©s par le concessionnaire (biens de retour) doivent √™tre renouvel√©s et restitu√©s en fin de concession.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Inscription √† l'actif de biens de retour en concession pour 50 000 000 FCFA",
    17	          lignes: [
    18	            { sens: 'D', compte: '237', libelleCompte: 'B√¢timents, installations techniques en concession', montant: 50000000 },
    19	            { sens: 'C', compte: '131', libelleCompte: 'Subventions d\'√©quipement', montant: 50000000, commentaire: 'Droits du conc√©dant' },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Renouvellement',
    26	      contenu:
    27	        "Le concessionnaire a l'obligation de maintenir les installations en bon √©tat de fonctionnement et de proc√©der √† leur renouvellement si n√©cessaire. " +
    28	        "Les d√©penses de renouvellement sont immobilis√©es si elles augmentent la valeur ou la dur√©e de vie des biens, ou comptabilis√©es en charges d'entretien dans le cas contraire. " +
    29	        "Une provision pour renouvellement peut √™tre constitu√©e afin de r√©partir la charge sur la dur√©e de la concession.",
    30	    },
    31	    {
    32	      titre: 'Fin de concession',
    33	      contenu:
    34	        "√Ä l'expiration de la concession, les biens de retour sont restitu√©s gratuitement √† l'autorit√© conc√©dante. Le concessionnaire proc√®de √† la sortie des biens de son actif. " +
    35	        "Les biens de reprise (biens propres du concessionnaire) peuvent √™tre rachet√©s par le conc√©dant √† une valeur convenue. " +
    36	        "Le compte 826 ¬´ Reprises sur provisions pour renouvellement ¬ª est cr√©dit√© pour solder les provisions de renouvellement restantes.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Sortie de l\'actif des biens de retour en fin de concession : VNC 5 000 000 FCFA',
    41	          lignes: [
    42	            { sens: 'D', compte: '131', libelleCompte: 'Subventions d\'√©quipement', montant: 50000000, commentaire: 'Solde des droits du conc√©dant' },
    43	            { sens: 'D', compte: '2837', libelleCompte: 'Amortissements des installations en concession', montant: 45000000 },
    44	            { sens: 'C', compte: '237', libelleCompte: 'B√¢timents, installations techniques en concession', montant: 50000000 },
    45	            { sens: 'C', compte: '865', libelleCompte: 'Reprises de subventions d\'investissement', montant: 45000000, commentaire: 'Reprise des amortissements' },
    46	          ],
    47	        },
    48	      ],
    49	    },
    50	  ],
    51	  comptesLies: ['22', '237', '826'],
    52	}

================================================================================
FILE: src/data/syscohada/operations/chapitre35.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_35: ChapitreOperations = {
     4	  numero: 35,
     5	  titre: 'Op√©rations faites pour le compte de tiers',
     6	  sections: [
     7	    {
     8	      titre: 'Mandats',
     9	      contenu:
    10	        "Lorsqu'une entreprise agit en qualit√© de mandataire pour le compte d'un tiers (mandant), les op√©rations r√©alis√©es pour le compte du mandant ne constituent ni des charges ni des produits pour le mandataire. " +
    11	        "Les sommes re√ßues et d√©caiss√©es pour le compte du mandant transitent par le compte 471 ¬´ D√©biteurs divers et cr√©diteurs divers ¬ª. " +
    12	        "Seule la r√©mun√©ration du mandataire (commission) constitue un produit enregistr√© au compte 706 ¬´ Services vendus ¬ª ou 7071 ¬´ Commissions et courtages ¬ª.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Encaissement de 10 000 000 FCFA pour le compte d'un mandant et versement apr√®s d√©duction d'une commission de 500 000 FCFA",
    17	          lignes: [
    18	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 10000000 },
    19	            { sens: 'C', compte: '471', libelleCompte: 'D√©biteurs divers et cr√©diteurs divers', montant: 10000000, commentaire: 'Fonds re√ßus pour le mandant' },
    20	            { sens: 'D', compte: '471', libelleCompte: 'D√©biteurs divers et cr√©diteurs divers', montant: 10000000 },
    21	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 9500000, commentaire: 'Reversement au mandant' },
    22	            { sens: 'C', compte: '7071', libelleCompte: 'Commissions et courtages', montant: 500000, commentaire: 'Commission du mandataire' },
    23	          ],
    24	        },
    25	      ],
    26	    },
    27	    {
    28	      titre: 'Commissions',
    29	      contenu:
    30	        "Les commissionnaires agissent en leur propre nom mais pour le compte d'un commettant. Contrairement au mandataire, le commissionnaire enregistre les achats et ventes dans ses comptes propres. " +
    31	        "Le r√©sultat de l'op√©ration est ensuite partag√© avec le commettant selon les termes du contrat de commission. " +
    32	        "La commission per√ßue par le commissionnaire est comptabilis√©e en produit au compte 706 ou 7071.",
    33	    },
    34	    {
    35	      titre: 'Op√©rations de transit',
    36	      contenu:
    37	        "Les transitaires en douane r√©alisent des op√©rations pour le compte de leurs clients (importateurs et exportateurs). Les droits de douane, taxes et frais avanc√©s pour le compte des clients ne sont pas des charges du transitaire. " +
    38	        "Ces avances sont enregistr√©es au d√©bit du compte 471 en attente de remboursement par le client. " +
    39	        "Les honoraires de transit constituent le seul produit du transitaire et sont factur√©s distinctement des d√©bours r√©cup√©rables.",
    40	      ecritures: [
    41	        {
    42	          numero: 2,
    43	          description: 'Avance de droits de douane de 2 000 000 FCFA pour un client et facturation des honoraires de transit de 300 000 FCFA',
    44	          lignes: [
    45	            { sens: 'D', compte: '471', libelleCompte: 'D√©biteurs divers et cr√©diteurs divers', montant: 2000000, commentaire: 'Droits de douane avanc√©s' },
    46	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 2000000 },
    47	            { sens: 'D', compte: '411', libelleCompte: 'Clients', montant: 2300000, commentaire: 'D√©bours + honoraires' },
    48	            { sens: 'C', compte: '471', libelleCompte: 'D√©biteurs divers et cr√©diteurs divers', montant: 2000000, commentaire: 'Remboursement des d√©bours' },
    49	            { sens: 'C', compte: '706', libelleCompte: 'Services vendus', montant: 300000, commentaire: 'Honoraires de transit' },
    50	          ],
    51	        },
    52	      ],
    53	    },
    54	  ],
    55	  comptesLies: ['47', '471'],
    56	}

================================================================================
FILE: src/data/syscohada/operations/chapitre36.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_36: ChapitreOperations = {
     4	  numero: 36,
     5	  titre: 'Dissolution et liquidation',
     6	  sections: [
     7	    {
     8	      titre: 'Op√©rations de dissolution',
     9	      contenu:
    10	        "La dissolution d'une soci√©t√© est d√©cid√©e par l'assembl√©e g√©n√©rale extraordinaire ou r√©sulte de l'arriv√©e du terme, de la r√©alisation de l'objet social, ou d'un jugement. " +
    11	        "Le liquidateur nomm√© proc√®de √† la r√©alisation de l'actif (vente des immobilisations, recouvrement des cr√©ances) et au paiement du passif. " +
    12	        "Les op√©rations de liquidation sont enregistr√©es dans les comptes de la soci√©t√© en liquidation jusqu'au partage d√©finitif.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "R√©alisation d'immobilisations lors de la liquidation : VNC 8 000 000 FCFA, prix de vente 6 000 000 FCFA",
    17	          lignes: [
    18	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 6000000 },
    19	            { sens: 'D', compte: '28', libelleCompte: 'Amortissements', montant: 12000000, commentaire: 'Cumul des amortissements' },
    20	            { sens: 'C', compte: '24', libelleCompte: 'Mat√©riel', montant: 20000000, commentaire: 'Valeur brute' },
    21	            { sens: 'C', compte: '82', libelleCompte: "Produits des cessions d'immobilisations", montant: 6000000 },
    22	            { sens: 'D', compte: '81', libelleCompte: "Valeurs comptables des cessions d'immobilisations", montant: 8000000 },
    23	          ],
    24	        },
    25	      ],
    26	    },
    27	    {
    28	      titre: "Liquidation de l'actif",
    29	      contenu:
    30	        "La liquidation de l'actif comprend la r√©alisation des immobilisations, le recouvrement des cr√©ances et la vente des stocks. " +
    31	        "Les plus ou moins-values de cession sont comptabilis√©es normalement. Les frais de liquidation (honoraires du liquidateur, frais de justice) sont enregistr√©s en charges. " +
    32	        "Le r√©sultat de liquidation est d√©termin√© par la diff√©rence entre le produit net de la r√©alisation et l'actif net comptable.",
    33	    },
    34	    {
    35	      titre: 'Partage du boni/mali',
    36	      contenu:
    37	        "Apr√®s paiement de toutes les dettes et des frais de liquidation, le solde disponible (boni de liquidation) est r√©parti entre les associ√©s au prorata de leurs droits. " +
    38	        "Le boni de liquidation correspond √† la diff√©rence entre le capital rembours√© et l'actif net de liquidation. Le mali de liquidation repr√©sente la perte subie par les associ√©s. " +
    39	        "Le compte 101 ¬´ Capital social ¬ª et les r√©serves sont sold√©s lors du partage final.",
    40	      ecritures: [
    41	        {
    42	          numero: 2,
    43	          description: "Partage du boni de liquidation : capital 20 000 000, r√©serves 5 000 000, actif net disponible 28 000 000 FCFA",
    44	          lignes: [
    45	            { sens: 'D', compte: '101', libelleCompte: 'Capital social', montant: 20000000 },
    46	            { sens: 'D', compte: '106', libelleCompte: 'R√©serves', montant: 5000000 },
    47	            { sens: 'D', compte: '120', libelleCompte: 'R√©sultat de liquidation (b√©n√©fice)', montant: 3000000, commentaire: 'Boni de liquidation' },
    48	            { sens: 'C', compte: '461', libelleCompte: 'Associ√©s, op√©rations sur le capital', montant: 28000000 },
    49	          ],
    50	        },
    51	      ],
    52	    },
    53	  ],
    54	  comptesLies: ['101', '106', '12', '46'],
    55	}

================================================================================
FILE: src/data/syscohada/operations/chapitre37.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_37: ChapitreOperations = {
     4	  numero: 37,
     5	  titre: 'Fusion et scission',
     6	  sections: [
     7	    {
     8	      titre: 'Fusion-absorption',
     9	      contenu:
    10	        "La fusion-absorption est l'op√©ration par laquelle une soci√©t√© (absorb√©e) transmet son patrimoine √† une soci√©t√© existante (absorbante) qui l'absorbe. " +
    11	        "La soci√©t√© absorbante augmente son capital en √©mettant de nouvelles actions au profit des actionnaires de l'absorb√©e. Le compte 101 est cr√©dit√© et le compte 1042 ¬´ Prime de fusion ¬ª enregistre la diff√©rence entre la valeur d'apport et la valeur nominale des titres √©mis. " +
    12	        "La soci√©t√© absorb√©e est dissoute sans liquidation ; ses actifs et passifs sont transf√©r√©s √† leur valeur comptable ou √† leur valeur r√©elle selon les cas.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: "Chez l'absorbante : augmentation de capital de 15 000 000 FCFA avec prime de fusion de 3 000 000 FCFA suite √† l'absorption",
    17	          lignes: [
    18	            { sens: 'D', compte: '46', libelleCompte: 'Associ√©s et groupe', montant: 18000000, commentaire: 'Apport net re√ßu de l\'absorb√©e' },
    19	            { sens: 'C', compte: '101', libelleCompte: 'Capital social', montant: 15000000, commentaire: 'Actions √©mises en r√©mun√©ration' },
    20	            { sens: 'C', compte: '1042', libelleCompte: 'Prime de fusion', montant: 3000000 },
    21	          ],
    22	        },
    23	      ],
    24	    },
    25	    {
    26	      titre: 'Fusion par cr√©ation',
    27	      contenu:
    28	        "La fusion par cr√©ation de soci√©t√© nouvelle entra√Æne la dissolution des soci√©t√©s fusionnantes et la cr√©ation d'une entit√© nouvelle qui re√ßoit l'int√©gralit√© de leurs patrimoines. " +
    29	        "Les actionnaires des soci√©t√©s dissoutes re√ßoivent des titres de la nouvelle soci√©t√© en √©change. " +
    30	        "Le traitement comptable est similaire √† la fusion-absorption, avec la constitution du capital initial de la nouvelle soci√©t√© √† partir des apports des soci√©t√©s fusionnantes.",
    31	    },
    32	    {
    33	      titre: 'Scission',
    34	      contenu:
    35	        "La scission est l'op√©ration par laquelle une soci√©t√© transmet son patrimoine √† plusieurs soci√©t√©s existantes ou nouvelles. " +
    36	        "Elle ob√©it aux m√™mes r√®gles que la fusion. Chaque soci√©t√© b√©n√©ficiaire re√ßoit une fraction du patrimoine et √©met des titres en contrepartie. " +
    37	        "L'√©clatement du patrimoine doit respecter l'unit√© de chaque branche d'activit√© transmise.",
    38	    },
    39	    {
    40	      titre: "Apport partiel d'actif",
    41	      contenu:
    42	        "L'apport partiel d'actif est l'op√©ration par laquelle une soci√©t√© apporte une branche compl√®te et autonome d'activit√© √† une autre soci√©t√©, sans √™tre dissoute. " +
    43	        "La soci√©t√© apporteuse re√ßoit en contrepartie des titres de la soci√©t√© b√©n√©ficiaire, inscrits au compte 261 ¬´ Titres de participation ¬ª. " +
    44	        "Le SYSCOHADA R√©vis√© pr√©voit que l'apport partiel d'actif peut b√©n√©ficier du r√©gime fiscal des fusions lorsqu'il porte sur une branche compl√®te d'activit√©.",
    45	      ecritures: [
    46	        {
    47	          numero: 2,
    48	          description: "Apport partiel d'actif d'une branche d'activit√© : actifs nets 25 000 000, titres re√ßus en √©change",
    49	          lignes: [
    50	            { sens: 'D', compte: '261', libelleCompte: 'Titres de participation', montant: 25000000, commentaire: 'Titres re√ßus de la b√©n√©ficiaire' },
    51	            { sens: 'C', compte: '1043', libelleCompte: "Prime d'apport", montant: 5000000 },
    52	            { sens: 'C', compte: '24', libelleCompte: 'Mat√©riel', montant: 15000000, commentaire: 'Actifs apport√©s' },
    53	            { sens: 'C', compte: '31', libelleCompte: 'Marchandises', montant: 5000000, commentaire: 'Stocks apport√©s' },
    54	          ],
    55	        },
    56	      ],
    57	    },
    58	  ],
    59	  comptesLies: ['101', '104', '1042', '1043', '46'],
    60	}

================================================================================
FILE: src/data/syscohada/operations/chapitre38.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_38: ChapitreOperations = {
     4	  numero: 38,
     5	  titre: 'Transformation de soci√©t√©s',
     6	  sections: [
     7	    {
     8	      titre: 'Transformation en SA',
     9	      contenu:
    10	        "La transformation d'une SARL en SA n√©cessite un rapport du commissaire aux comptes sur la situation de la soci√©t√© et un rapport d'un commissaire √† la transformation sur la valeur des biens. " +
    11	        "Si la valeur nominale des actions diff√®re de celle des parts sociales, un ajustement est op√©r√© sur le compte 101 ¬´ Capital social ¬ª avec contrepartie au compte 104 ¬´ Primes li√©es au capital ¬ª. " +
    12	        "Les frais de transformation (publicit√© l√©gale, honoraires) sont enregistr√©s en charges de l'exercice ou immobilis√©s en frais d'√©tablissement.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Transformation d\'une SARL en SA : ajustement du capital de 10 000 000 FCFA (2 000 parts de 5 000) en 1 000 actions de 10 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '101', libelleCompte: 'Capital social (SARL)', montant: 10000000, commentaire: 'Annulation ancien capital' },
    19	            { sens: 'C', compte: '101', libelleCompte: 'Capital social (SA)', montant: 10000000, commentaire: 'Constitution nouveau capital' },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Transformation en SARL',
    26	      contenu:
    27	        "La transformation d'une SA en SARL est possible lorsque le nombre d'actionnaires ne d√©passe pas le maximum l√©gal autoris√© pour une SARL. " +
    28	        "Les actions sont converties en parts sociales. Les titres au porteur deviennent nominatifs. Le capital social est maintenu √† l'identique sauf d√©cision contraire de l'assembl√©e. " +
    29	        "Un rapport du commissaire aux comptes est requis pour attester de la r√©gularit√© de l'op√©ration et de la valeur des actifs.",
    30	    },
    31	    {
    32	      titre: 'Incidences fiscales',
    33	      contenu:
    34	        "La transformation de soci√©t√© n'entra√Æne g√©n√©ralement pas les cons√©quences fiscales d'une dissolution suivie de cr√©ation, √† condition qu'aucune modification substantielle du pacte social n'intervienne. " +
    35	        "En revanche, si la transformation modifie le r√©gime fiscal applicable (passage de l'IR √† l'IS ou inversement), elle peut entra√Æner l'imposition imm√©diate des plus-values latentes et des b√©n√©fices en sursis d'imposition. " +
    36	        "Les droits d'enregistrement sont r√©duits en cas de simple transformation sans modification du capital.",
    37	      ecritures: [
    38	        {
    39	          numero: 2,
    40	          description: 'Frais de transformation : honoraires du commissaire 1 500 000 FCFA, frais de publicit√© 200 000 FCFA',
    41	          lignes: [
    42	            { sens: 'D', compte: '6324', libelleCompte: 'Honoraires', montant: 1500000 },
    43	            { sens: 'D', compte: '6271', libelleCompte: 'Annonces et insertions', montant: 200000 },
    44	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 1700000 },
    45	          ],
    46	        },
    47	      ],
    48	    },
    49	  ],
    50	  comptesLies: ['101', '104', '106'],
    51	}

================================================================================
FILE: src/data/syscohada/operations/chapitre39.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_39: ChapitreOperations = {
     4	  numero: 39,
     5	  titre: 'Comptabilit√© des exploitations agricoles',
     6	  sections: [
     7	    {
     8	      titre: 'Actifs biologiques',
     9	      contenu:
    10	        "Les actifs biologiques (animaux et plantes vivants) sont comptabilis√©s selon le SYSCOHADA R√©vis√© √† leur juste valeur diminu√©e des co√ªts estim√©s au point de vente, lorsque cette juste valeur peut √™tre d√©termin√©e de mani√®re fiable. " +
    11	        "Les actifs biologiques producteurs (arbres fruitiers, animaux reproducteurs) sont inscrits au compte 246 ¬´ Immobilisations animales et agricoles ¬ª et amortis sur leur dur√©e d'utilit√©. " +
    12	        "Les produits agricoles r√©colt√©s sont √©valu√©s √† leur juste valeur au point de r√©colte et inscrits en stocks.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Acquisition d\'un troupeau de 50 bovins reproducteurs √©valu√© √† 25 000 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '246', libelleCompte: 'Immobilisations animales et agricoles', montant: 25000000 },
    19	            { sens: 'C', compte: '521', libelleCompte: 'Banques locales', montant: 25000000 },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Stocks agricoles',
    26	      contenu:
    27	        "Les stocks agricoles comprennent les produits r√©colt√©s (c√©r√©ales, fruits, coton, cacao, etc.), les intrants (semences, engrais, produits phytosanitaires) et les animaux destin√©s √† la vente. " +
    28	        "Les r√©coltes sont √©valu√©es √† leur juste valeur nette des co√ªts estim√©s au point de vente et inscrites au compte 36 ¬´ Produits finis ¬ª ou 33 ¬´ Autres approvisionnements ¬ª. " +
    29	        "Les variations de la juste valeur des actifs biologiques sont comptabilis√©es en r√©sultat de l'exercice.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: 'Entr√©e en stock de la r√©colte de cacao : juste valeur nette 8 000 000 FCFA',
    34	          lignes: [
    35	            { sens: 'D', compte: '36', libelleCompte: 'Produits finis', montant: 8000000, commentaire: 'R√©colte √† la juste valeur' },
    36	            { sens: 'C', compte: '73', libelleCompte: 'Variations de stocks de produits fabriqu√©s', montant: 8000000 },
    37	          ],
    38	        },
    39	      ],
    40	    },
    41	    {
    42	      titre: 'Subventions agricoles',
    43	      contenu:
    44	        "Les exploitations agricoles peuvent b√©n√©ficier de subventions publiques li√©es √† l'exploitation (primes √† la production, aide aux intrants) ou √† l'investissement (√©quipement, modernisation). " +
    45	        "Les subventions d'exploitation sont comptabilis√©es au cr√©dit du compte 71 ¬´ Subventions d'exploitation ¬ª au fur et √† mesure de la r√©alisation des conditions. " +
    46	        "Les subventions d'investissement suivent le traitement classique du chapitre 6 (compte 131) avec reprise au rythme de l'amortissement du bien financ√©.",
    47	    },
    48	  ],
    49	  comptesLies: ['246', '33', '36'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre40.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_40: ChapitreOperations = {
     4	  numero: 40,
     5	  titre: 'Comptabilit√© des associations et EBNL',
     6	  sections: [
     7	    {
     8	      titre: 'Fonds associatifs',
     9	      contenu:
    10	        "Les entit√©s √† but non lucratif (EBNL) enregistrent les fonds permanents mis √† leur disposition au compte 10 ¬´ Capital ¬ª ou plus pr√©cis√©ment au compte 102 ¬´ Fonds associatifs ¬ª ou ¬´ Dotation ¬ª. " +
    11	        "Ces fonds comprennent les apports permanents des fondateurs, les droits d'entr√©e des membres et les exc√©dents affect√©s en fonds de r√©serve. " +
    12	        "Le SYSCOHADA R√©vis√© pr√©voit des dispositions sp√©cifiques pour les EBNL, en adaptant la terminologie et les sch√©mas d'√©critures aux particularit√©s de ces entit√©s.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'R√©ception de la dotation initiale d\'une association : 5 000 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 5000000 },
    19	            { sens: 'C', compte: '102', libelleCompte: 'Fonds associatifs', montant: 5000000, commentaire: 'Dotation initiale' },
    20	          ],
    21	        },
    22	      ],
    23	    },
    24	    {
    25	      titre: 'Subventions',
    26	      contenu:
    27	        "Les subventions constituent souvent la principale source de financement des EBNL. Les subventions de fonctionnement sont enregistr√©es au cr√©dit du compte 75 ¬´ Autres produits ¬ª au fur et √† mesure de leur utilisation. " +
    28	        "Les subventions d'investissement sont inscrites au passif et reprises au r√©sultat sur la dur√©e d'amortissement des biens financ√©s. " +
    29	        "Les subventions re√ßues avec conditions suspensives sont comptabilis√©es en produits constat√©s d'avance jusqu'√† la r√©alisation des conditions.",
    30	      ecritures: [
    31	        {
    32	          numero: 2,
    33	          description: 'Encaissement d\'une subvention de fonctionnement de 12 000 000 FCFA pour un projet annuel',
    34	          lignes: [
    35	            { sens: 'D', compte: '521', libelleCompte: 'Banques locales', montant: 12000000 },
    36	            { sens: 'C', compte: '754', libelleCompte: 'Subventions d\'exploitation', montant: 12000000 },
    37	          ],
    38	        },
    39	      ],
    40	    },
    41	    {
    42	      titre: 'Contributions volontaires',
    43	      contenu:
    44	        "Les contributions volontaires en nature (b√©n√©volat, dons en nature, mises √† disposition gratuites) sont enregistr√©es en engagements hors bilan dans les comptes de classe 8 sp√©cifiques. " +
    45	        "Le compte 86 ¬´ Emplois des contributions volontaires ¬ª est d√©bit√© en contrepartie du cr√©dit du compte 87 ¬´ Contributions volontaires en nature ¬ª. " +
    46	        "Cette comptabilisation, bien que facultative, est recommand√©e pour donner une image fid√®le de l'activit√© r√©elle de l'EBNL et du co√ªt complet de ses programmes.",
    47	    },
    48	  ],
    49	  comptesLies: ['10', '102', '13', '75'],
    50	}

================================================================================
FILE: src/data/syscohada/operations/chapitre41.ts
================================================================================
     1	import type { ChapitreOperations } from '../types'
     2	
     3	export const CHAPITRE_41: ChapitreOperations = {
     4	  numero: 41,
     5	  titre: 'Tableau des flux de tr√©sorerie (TFT)',
     6	  sections: [
     7	    {
     8	      titre: 'Flux li√©s aux activit√©s op√©rationnelles',
     9	      contenu:
    10	        "Les flux de tr√©sorerie li√©s aux activit√©s op√©rationnelles repr√©sentent les encaissements et d√©caissements g√©n√©r√©s par les op√©rations courantes de l'entreprise. " +
    11	        "Le SYSCOHADA R√©vis√© propose la m√©thode indirecte, partant du r√©sultat net et ajustant pour les √©l√©ments sans incidence sur la tr√©sorerie (amortissements, provisions, plus ou moins-values de cession). " +
    12	        "La variation du besoin en fonds de roulement (stocks, cr√©ances, dettes d'exploitation) est ajout√©e pour obtenir la tr√©sorerie nette g√©n√©r√©e par les activit√©s op√©rationnelles.",
    13	      ecritures: [
    14	        {
    15	          numero: 1,
    16	          description: 'Illustration de la capacit√© d\'autofinancement : r√©sultat net 10 500 000 FCFA, dotations aux amortissements 3 000 000 FCFA, reprise de provisions 500 000 FCFA',
    17	          lignes: [
    18	            { sens: 'D', compte: '12', libelleCompte: 'R√©sultat de l\'exercice', montant: 10500000, commentaire: 'B√©n√©fice net' },
    19	            { sens: 'D', compte: '68', libelleCompte: 'Dotations aux amortissements', montant: 3000000, commentaire: 'Charge non d√©caiss√©e' },
    20	            { sens: 'C', compte: '79', libelleCompte: 'Reprises de provisions', montant: 500000, commentaire: 'Produit non encaiss√©' },
    21	            { sens: 'C', compte: '57', libelleCompte: 'Caisse / Tr√©sorerie', montant: 13000000, commentaire: 'CAF = 10,5M + 3M - 0,5M' },
    22	          ],
    23	        },
    24	      ],
    25	    },
    26	    {
    27	      titre: "Flux d'investissement",
    28	      contenu:
    29	        "Les flux d'investissement comprennent les d√©caissements li√©s √† l'acquisition d'immobilisations corporelles, incorporelles et financi√®res, ainsi que les encaissements provenant de leur cession. " +
    30	        "Les pr√™ts accord√©s et les remboursements re√ßus, les acquisitions et cessions de titres de participation font partie de cette cat√©gorie. " +
    31	        "Un flux d'investissement net n√©gatif traduit un effort d'investissement de l'entreprise, signe g√©n√©ralement positif de d√©veloppement.",
    32	    },
    33	    {
    34	      titre: 'Flux de financement',
    35	      contenu:
    36	        "Les flux de financement regroupent les op√©rations ayant une incidence sur la structure financi√®re de l'entreprise : augmentations de capital en num√©raire, emprunts contract√©s et rembours√©s, dividendes vers√©s. " +
    37	        "Les remboursements de dettes de location-acquisition sont inclus dans les flux de financement. " +
    38	        "La variation nette de tr√©sorerie de l'exercice est la somme des trois cat√©gories de flux et doit correspondre √† la variation du solde des comptes 52 et 57 entre le d√©but et la fin de l'exercice.",
    39	      ecritures: [
    40	        {
    41	          numero: 2,
    42	          description: 'V√©rification de la variation de tr√©sorerie : solde banque et caisse au 01/01 de 8 000 000 et au 31/12 de 12 500 000 FCFA',
    43	          lignes: [
    44	            { sens: 'D', compte: '52', libelleCompte: 'Banques', montant: 12500000, commentaire: 'Solde de cl√¥ture' },
    45	            { sens: 'D', compte: '57', libelleCompte: 'Caisse', montant: 0, commentaire: 'Int√©gr√© dans le solde banques' },
    46	            { sens: 'C', compte: '52', libelleCompte: 'Banques', montant: 8000000, commentaire: 'Solde d\'ouverture' },
    47	            { sens: 'C', compte: '57', libelleCompte: 'Caisse', montant: 0, commentaire: 'Variation nette = +4 500 000' },
    48	          ],
    49	        },
    50	      ],
    51	    },
    52	  ],
    53	  comptesLies: ['52', '57', '12', '68', '28'],
    54	}

================================================================================
FILE: src/data/syscohada/operations/index.ts
================================================================================
     1	/**
     2	 * Op√©rations Sp√©cifiques SYSCOHADA - Index et Lazy Loader
     3	 * 41 chapitres couvrant toutes les op√©rations comptables courantes
     4	 */
     5	
     6	import type { ChapitreOperations } from '../types'
     7	
     8	/** Sommaire des 41 chapitres */
     9	export const CHAPITRES_SOMMAIRE: { numero: number; titre: string }[] = [
    10	  { numero: 1, titre: 'Constitution des soci√©t√©s' },
    11	  { numero: 2, titre: 'Augmentation du capital' },
    12	  { numero: 3, titre: 'R√©duction et amortissement du capital' },
    13	  { numero: 4, titre: 'Affectation du r√©sultat' },
    14	  { numero: 5, titre: 'Emprunts' },
    15	  { numero: 6, titre: 'Subventions d\'investissement' },
    16	  { numero: 7, titre: 'Provisions r√©glement√©es' },
    17	  { numero: 8, titre: 'Provisions pour risques et charges' },
    18	  { numero: 9, titre: 'Acquisitions d\'immobilisations incorporelles' },
    19	  { numero: 10, titre: 'Acquisitions d\'immobilisations corporelles' },
    20	  { numero: 11, titre: 'Amortissements des immobilisations' },
    21	  { numero: 12, titre: 'Cessions d\'immobilisations' },
    22	  { numero: 13, titre: 'Location-acquisition et cr√©dit-bail' },
    23	  { numero: 14, titre: 'Immobilisations financi√®res' },
    24	  { numero: 15, titre: 'Stocks : entr√©es' },
    25	  { numero: 16, titre: 'Stocks : sorties et variations' },
    26	  { numero: 17, titre: 'D√©pr√©ciation des stocks' },
    27	  { numero: 18, titre: 'Achats et charges externes' },
    28	  { numero: 19, titre: 'Op√©rations avec les fournisseurs' },
    29	  { numero: 20, titre: 'Op√©rations avec les clients' },
    30	  { numero: 21, titre: 'Charges de personnel' },
    31	  { numero: 22, titre: '√âtat et imp√¥ts' },
    32	  { numero: 23, titre: 'Op√©rations en devises' },
    33	  { numero: 24, titre: 'Op√©rations de tr√©sorerie' },
    34	  { numero: 25, titre: 'Titres de placement' },
    35	  { numero: 26, titre: 'Charges et produits constat√©s d\'avance' },
    36	  { numero: 27, titre: 'Provisions pour d√©pr√©ciation des cr√©ances' },
    37	  { numero: 28, titre: 'Op√©rations inter-exercices' },
    38	  { numero: 29, titre: 'Op√©rations HAO' },
    39	  { numero: 30, titre: 'D√©termination du r√©sultat' },
    40	  { numero: 31, titre: 'Op√©rations de consolidation' },
    41	  { numero: 32, titre: 'Op√©rations en commun et GIE' },
    42	  { numero: 33, titre: 'Contrats √† long terme' },
    43	  { numero: 34, titre: 'Concessions de service public' },
    44	  { numero: 35, titre: 'Op√©rations faites pour le compte de tiers' },
    45	  { numero: 36, titre: 'Dissolution et liquidation' },
    46	  { numero: 37, titre: 'Fusion et scission' },
    47	  { numero: 38, titre: 'Transformation de soci√©t√©s' },
    48	  { numero: 39, titre: 'Comptabilit√© des exploitations agricoles' },
    49	  { numero: 40, titre: 'Comptabilit√© des associations et EBNL' },
    50	  { numero: 41, titre: 'Tableau des flux de tr√©sorerie (TFT)' },
    51	]
    52	
    53	// Cache
    54	const cache = new Map<number, ChapitreOperations>()
    55	
    56	/** Charger un chapitre sp√©cifique (lazy) */
    57	export async function loadChapitre(numero: number): Promise<ChapitreOperations | undefined> {
    58	  if (numero < 1 || numero > 41) return undefined
    59	  if (cache.has(numero)) return cache.get(numero)!
    60	
    61	  const pad = String(numero).padStart(2, '0')
    62	  try {
    63	    const mod = await import(`./chapitre${pad}.ts`)
    64	    const key = `CHAPITRE_${pad}`
    65	    const data: ChapitreOperations = mod[key]
    66	    if (data) {
    67	      cache.set(numero, data)
    68	      return data
    69	    }
    70	  } catch {
    71	    // Module not yet generated
    72	  }
    73	  return undefined
    74	}
    75	
    76	/** Trouver les chapitres li√©s √† un num√©ro de compte */
    77	export async function findChapitresByCompte(numero: string): Promise<ChapitreOperations[]> {
    78	  const results: ChapitreOperations[] = []
    79	  for (const { numero: chapNum } of CHAPITRES_SOMMAIRE) {
    80	    const chapitre = await loadChapitre(chapNum)
    81	    if (!chapitre) continue
    82	    const match = chapitre.comptesLies.some(cl =>
    83	      numero.startsWith(cl) || cl.startsWith(numero)
    84	    )
    85	    if (match) results.push(chapitre)
    86	  }
    87	  return results
    88	}
    89	
    90	/** Rechercher dans les op√©rations */
    91	export async function searchOperations(query: string): Promise<ChapitreOperations[]> {
    92	  const q = query.toLowerCase()
    93	  const results: ChapitreOperations[] = []
    94	
    95	  for (const { numero } of CHAPITRES_SOMMAIRE) {
    96	    const chapitre = await loadChapitre(numero)
    97	    if (!chapitre) continue
    98	
    99	    if (
   100	      chapitre.titre.toLowerCase().includes(q) ||
   101	      chapitre.sections.some(s =>
   102	        s.titre.toLowerCase().includes(q) || s.contenu.toLowerCase().includes(q)
   103	      )
   104	    ) {
   105	      results.push(chapitre)
   106	    }
   107	  }
   108	
   109	  return results
   110	}
   111	
   112	/** Vider le cache */
   113	export function clearOperationsCache(): void {
   114	  cache.clear()
   115	}

================================================================================
FILE: src/data/syscohada/plan/classe1.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 1 - COMPTES DE RESSOURCES DURABLES
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_1_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 10 - CAPITAL ET RESERVES
    10	  // ============================================================
    11	  {
    12	    numero: '10',
    13	    libelle: 'Capital et r√©serves',
    14	    classe: 1,
    15	    nature: 'PASSIF',
    16	    sens: 'CREDITEUR',
    17	    utilisation: 'OBLIGATOIRE'
    18	  },
    19	  {
    20	    numero: '101',
    21	    libelle: 'Capital social',
    22	    classe: 1,
    23	    sousClasse: '10',
    24	    nature: 'PASSIF',
    25	    sens: 'CREDITEUR',
    26	    utilisation: 'OBLIGATOIRE',
    27	    notes: 'Montant du capital figurant dans les statuts de la soci√©t√©'
    28	  },
    29	  {
    30	    numero: '1011',
    31	    libelle: 'Capital souscrit, non appel√©',
    32	    classe: 1,
    33	    sousClasse: '101',
    34	    nature: 'PASSIF',
    35	    sens: 'CREDITEUR',
    36	    utilisation: 'FACULTATIF'
    37	  },
    38	  {
    39	    numero: '1012',
    40	    libelle: 'Capital souscrit, appel√©, non vers√©',
    41	    classe: 1,
    42	    sousClasse: '101',
    43	    nature: 'PASSIF',
    44	    sens: 'CREDITEUR',
    45	    utilisation: 'FACULTATIF'
    46	  },
    47	  {
    48	    numero: '1013',
    49	    libelle: 'Capital souscrit, appel√©, vers√©, non amorti',
    50	    classe: 1,
    51	    sousClasse: '101',
    52	    nature: 'PASSIF',
    53	    sens: 'CREDITEUR',
    54	    utilisation: 'OBLIGATOIRE'
    55	  },
    56	  {
    57	    numero: '1014',
    58	    libelle: 'Capital souscrit, appel√©, vers√©, amorti',
    59	    classe: 1,
    60	    sousClasse: '101',
    61	    nature: 'PASSIF',
    62	    sens: 'CREDITEUR',
    63	    utilisation: 'FACULTATIF'
    64	  },
    65	  {
    66	    numero: '1018',
    67	    libelle: 'Capital souscrit soumis √† des conditions particuli√®res',
    68	    classe: 1,
    69	    sousClasse: '101',
    70	    nature: 'PASSIF',
    71	    sens: 'CREDITEUR',
    72	    utilisation: 'FACULTATIF'
    73	  },
    74	  {
    75	    numero: '102',
    76	    libelle: 'Capital par dotation',
    77	    classe: 1,
    78	    sousClasse: '10',
    79	    nature: 'PASSIF',
    80	    sens: 'CREDITEUR',
    81	    utilisation: 'FACULTATIF',
    82	    notes: 'Utilis√© par les √©tablissements publics et les entreprises individuelles √† caract√®re public'
    83	  },
    84	  {
    85	    numero: '1021',
    86	    libelle: 'Dotation initiale',
    87	    classe: 1,
    88	    sousClasse: '102',
    89	    nature: 'PASSIF',
    90	    sens: 'CREDITEUR',
    91	    utilisation: 'FACULTATIF'
    92	  },
    93	  {
    94	    numero: '1022',
    95	    libelle: 'Dotations compl√©mentaires',
    96	    classe: 1,
    97	    sousClasse: '102',
    98	    nature: 'PASSIF',
    99	    sens: 'CREDITEUR',
   100	    utilisation: 'FACULTATIF'
   101	  },
   102	  {
   103	    numero: '1028',
   104	    libelle: 'Autres dotations',
   105	    classe: 1,
   106	    sousClasse: '102',
   107	    nature: 'PASSIF',
   108	    sens: 'CREDITEUR',
   109	    utilisation: 'FACULTATIF'
   110	  },
   111	  {
   112	    numero: '103',
   113	    libelle: 'Capital personnel',
   114	    classe: 1,
   115	    sousClasse: '10',
   116	    nature: 'PASSIF',
   117	    sens: 'CREDITEUR',
   118	    utilisation: 'FACULTATIF',
   119	    notes: 'Utilis√© par les entreprises individuelles'
   120	  },
   121	  {
   122	    numero: '104',
   123	    libelle: 'Primes li√©es au capital social',
   124	    classe: 1,
   125	    sousClasse: '10',
   126	    nature: 'PASSIF',
   127	    sens: 'CREDITEUR',
   128	    utilisation: 'FACULTATIF'
   129	  },
   130	  {
   131	    numero: '1041',
   132	    libelle: "Primes d'√©mission",
   133	    classe: 1,
   134	    sousClasse: '104',
   135	    nature: 'PASSIF',
   136	    sens: 'CREDITEUR',
   137	    utilisation: 'FACULTATIF'
   138	  },
   139	  {
   140	    numero: '1042',
   141	    libelle: 'Primes de fusion',
   142	    classe: 1,
   143	    sousClasse: '104',
   144	    nature: 'PASSIF',
   145	    sens: 'CREDITEUR',
   146	    utilisation: 'FACULTATIF'
   147	  },
   148	  {
   149	    numero: '1043',
   150	    libelle: 'Primes de scission',
   151	    classe: 1,
   152	    sousClasse: '104',
   153	    nature: 'PASSIF',
   154	    sens: 'CREDITEUR',
   155	    utilisation: 'FACULTATIF'
   156	  },
   157	  {
   158	    numero: '1044',
   159	    libelle: "Primes d'apport partiel d'actif",
   160	    classe: 1,
   161	    sousClasse: '104',
   162	    nature: 'PASSIF',
   163	    sens: 'CREDITEUR',
   164	    utilisation: 'FACULTATIF'
   165	  },
   166	  {
   167	    numero: '1045',
   168	    libelle: "Primes de conversion d'obligations en actions",
   169	    classe: 1,
   170	    sousClasse: '104',
   171	    nature: 'PASSIF',
   172	    sens: 'CREDITEUR',
   173	    utilisation: 'FACULTATIF'
   174	  },
   175	  {
   176	    numero: '1048',
   177	    libelle: 'Autres primes',
   178	    classe: 1,
   179	    sousClasse: '104',
   180	    nature: 'PASSIF',
   181	    sens: 'CREDITEUR',
   182	    utilisation: 'FACULTATIF'
   183	  },
   184	  {
   185	    numero: '105',
   186	    libelle: 'Ecarts de r√©√©valuation',
   187	    classe: 1,
   188	    sousClasse: '10',
   189	    nature: 'PASSIF',
   190	    sens: 'CREDITEUR',
   191	    utilisation: 'FACULTATIF'
   192	  },
   193	  {
   194	    numero: '1051',
   195	    libelle: 'Ecart de r√©√©valuation libre',
   196	    classe: 1,
   197	    sousClasse: '105',
   198	    nature: 'PASSIF',
   199	    sens: 'CREDITEUR',
   200	    utilisation: 'FACULTATIF'
   201	  },
   202	  {
   203	    numero: '1052',
   204	    libelle: 'Ecart de r√©√©valuation l√©gale',
   205	    classe: 1,
   206	    sousClasse: '105',
   207	    nature: 'PASSIF',
   208	    sens: 'CREDITEUR',
   209	    utilisation: 'FACULTATIF'
   210	  },
   211	  {
   212	    numero: '1053',
   213	    libelle: 'Ecart de r√©√©valuation en cours',
   214	    classe: 1,
   215	    sousClasse: '105',
   216	    nature: 'PASSIF',
   217	    sens: 'CREDITEUR',
   218	    utilisation: 'FACULTATIF'
   219	  },
   220	  {
   221	    numero: '106',
   222	    libelle: 'R√©serves',
   223	    classe: 1,
   224	    sousClasse: '10',
   225	    nature: 'PASSIF',
   226	    sens: 'CREDITEUR',
   227	    utilisation: 'OBLIGATOIRE'
   228	  },
   229	  {
   230	    numero: '1061',
   231	    libelle: 'R√©serve l√©gale',
   232	    classe: 1,
   233	    sousClasse: '106',
   234	    nature: 'PASSIF',
   235	    sens: 'CREDITEUR',
   236	    utilisation: 'OBLIGATOIRE',
   237	    notes: 'Obligatoire dans les soci√©t√©s commerciales (10% du b√©n√©fice jusqu\'√† 20% du capital)'
   238	  },
   239	  {
   240	    numero: '1062',
   241	    libelle: 'R√©serves indisponibles',
   242	    classe: 1,
   243	    sousClasse: '106',
   244	    nature: 'PASSIF',
   245	    sens: 'CREDITEUR',
   246	    utilisation: 'FACULTATIF'
   247	  },
   248	  {
   249	    numero: '1063',
   250	    libelle: 'R√©serves statutaires ou contractuelles',
   251	    classe: 1,
   252	    sousClasse: '106',
   253	    nature: 'PASSIF',
   254	    sens: 'CREDITEUR',
   255	    utilisation: 'FACULTATIF'
   256	  },
   257	  {
   258	    numero: '1064',
   259	    libelle: 'R√©serves r√©glement√©es',
   260	    classe: 1,
   261	    sousClasse: '106',
   262	    nature: 'PASSIF',
   263	    sens: 'CREDITEUR',
   264	    utilisation: 'FACULTATIF'
   265	  },
   266	  {
   267	    numero: '1068',
   268	    libelle: 'Autres r√©serves',
   269	    classe: 1,
   270	    sousClasse: '106',
   271	    nature: 'PASSIF',
   272	    sens: 'CREDITEUR',
   273	    utilisation: 'FACULTATIF'
   274	  },
   275	  {
   276	    numero: '109',
   277	    libelle: 'Actionnaire, capital souscrit non appel√©',
   278	    classe: 1,
   279	    sousClasse: '10',
   280	    nature: 'ACTIF',
   281	    sens: 'DEBITEUR',
   282	    utilisation: 'FACULTATIF',
   283	    notes: 'Compte √† solde d√©biteur, figurant √† l\'actif du bilan'
   284	  },
   285	
   286	  // ============================================================
   287	  // 11 - REPORT A NOUVEAU
   288	  // ============================================================
   289	  {
   290	    numero: '11',
   291	    libelle: 'Report √† nouveau',
   292	    classe: 1,
   293	    nature: 'PASSIF',
   294	    sens: 'CREDITEUR',
   295	    utilisation: 'OBLIGATOIRE'
   296	  },
   297	  {
   298	    numero: '110',
   299	    libelle: 'Report √† nouveau cr√©diteur',
   300	    classe: 1,
   301	    sousClasse: '11',
   302	    nature: 'PASSIF',
   303	    sens: 'CREDITEUR',
   304	    utilisation: 'OBLIGATOIRE'
   305	  },
   306	  {
   307	    numero: '119',
   308	    libelle: 'Report √† nouveau d√©biteur',
   309	    classe: 1,
   310	    sousClasse: '11',
   311	    nature: 'PASSIF',
   312	    sens: 'DEBITEUR',
   313	    utilisation: 'OBLIGATOIRE',
   314	    notes: 'Solde d√©biteur repr√©sentant les pertes ant√©rieures non encore apur√©es'
   315	  },
   316	
   317	  // ============================================================
   318	  // 12 - RESULTAT NET DE L'EXERCICE
   319	  // ============================================================
   320	  {
   321	    numero: '12',
   322	    libelle: "R√©sultat net de l'exercice",
   323	    classe: 1,
   324	    nature: 'PASSIF',
   325	    sens: 'CREDITEUR',
   326	    utilisation: 'OBLIGATOIRE'
   327	  },
   328	  {
   329	    numero: '120',
   330	    libelle: 'R√©sultat net : b√©n√©fice',
   331	    classe: 1,
   332	    sousClasse: '12',
   333	    nature: 'PASSIF',
   334	    sens: 'CREDITEUR',
   335	    utilisation: 'OBLIGATOIRE'
   336	  },
   337	  {
   338	    numero: '129',
   339	    libelle: 'R√©sultat net : perte',
   340	    classe: 1,
   341	    sousClasse: '12',
   342	    nature: 'PASSIF',
   343	    sens: 'DEBITEUR',
   344	    utilisation: 'OBLIGATOIRE'
   345	  },
   346	
   347	  // ============================================================
   348	  // 13 - SUBVENTIONS D'INVESTISSEMENT
   349	  // ============================================================
   350	  {
   351	    numero: '13',
   352	    libelle: "Subventions d'investissement",
   353	    classe: 1,
   354	    nature: 'PASSIF',
   355	    sens: 'CREDITEUR',
   356	    utilisation: 'FACULTATIF'
   357	  },
   358	  {
   359	    numero: '131',
   360	    libelle: "Subventions d'√©quipement A",
   361	    classe: 1,
   362	    sousClasse: '13',
   363	    nature: 'PASSIF',
   364	    sens: 'CREDITEUR',
   365	    utilisation: 'FACULTATIF'
   366	  },
   367	  {
   368	    numero: '132',
   369	    libelle: "Subventions d'√©quipement B",
   370	    classe: 1,
   371	    sousClasse: '13',
   372	    nature: 'PASSIF',
   373	    sens: 'CREDITEUR',
   374	    utilisation: 'FACULTATIF'
   375	  },
   376	  {
   377	    numero: '133',
   378	    libelle: "Subventions d'√©quipement C",
   379	    classe: 1,
   380	    sousClasse: '13',
   381	    nature: 'PASSIF',
   382	    sens: 'CREDITEUR',
   383	    utilisation: 'FACULTATIF'
   384	  },
   385	  {
   386	    numero: '138',
   387	    libelle: "Autres subventions d'investissement",
   388	    classe: 1,
   389	    sousClasse: '13',
   390	    nature: 'PASSIF',
   391	    sens: 'CREDITEUR',
   392	    utilisation: 'FACULTATIF'
   393	  },
   394	  {
   395	    numero: '139',
   396	    libelle: "Subventions d'investissement inscrites au compte de r√©sultat",
   397	    classe: 1,
   398	    sousClasse: '13',
   399	    nature: 'PASSIF',
   400	    sens: 'DEBITEUR',
   401	    utilisation: 'FACULTATIF',
   402	    notes: 'Compte √† solde d√©biteur enregistrant la quote-part vir√©e au r√©sultat'
   403	  },
   404	
   405	  // ============================================================
   406	  // 14 - PROVISIONS REGLEMENTEES ET FONDS ASSIMILES
   407	  // ============================================================
   408	  {
   409	    numero: '14',
   410	    libelle: 'Provisions r√©glement√©es et fonds assimil√©s',
   411	    classe: 1,
   412	    nature: 'PASSIF',
   413	    sens: 'CREDITEUR',
   414	    utilisation: 'FACULTATIF'
   415	  },
   416	  {
   417	    numero: '141',
   418	    libelle: 'Amortissements d√©rogatoires',
   419	    classe: 1,
   420	    sousClasse: '14',
   421	    nature: 'PASSIF',
   422	    sens: 'CREDITEUR',
   423	    utilisation: 'FACULTATIF'
   424	  },
   425	  {
   426	    numero: '142',
   427	    libelle: 'Plus-values de cession √† r√©investir',
   428	    classe: 1,
   429	    sousClasse: '14',
   430	    nature: 'PASSIF',
   431	    sens: 'CREDITEUR',
   432	    utilisation: 'FACULTATIF'
   433	  },
   434	  {
   435	    numero: '143',
   436	    libelle: 'Fonds r√©glement√©s',
   437	    classe: 1,
   438	    sousClasse: '14',
   439	    nature: 'PASSIF',
   440	    sens: 'CREDITEUR',
   441	    utilisation: 'FACULTATIF'
   442	  },
   443	  {
   444	    numero: '144',
   445	    libelle: 'Provisions r√©glement√©es relatives aux stocks',
   446	    classe: 1,
   447	    sousClasse: '14',
   448	    nature: 'PASSIF',
   449	    sens: 'CREDITEUR',
   450	    utilisation: 'FACULTATIF'
   451	  },
   452	  {
   453	    numero: '145',
   454	    libelle: 'Provisions r√©glement√©es relatives aux immobilisations',
   455	    classe: 1,
   456	    sousClasse: '14',
   457	    nature: 'PASSIF',
   458	    sens: 'CREDITEUR',
   459	    utilisation: 'FACULTATIF'
   460	  },
   461	  {
   462	    numero: '146',
   463	    libelle: 'Provisions pour propre assureur',
   464	    classe: 1,
   465	    sousClasse: '14',
   466	    nature: 'PASSIF',
   467	    sens: 'CREDITEUR',
   468	    utilisation: 'FACULTATIF'
   469	  },
   470	  {
   471	    numero: '148',
   472	    libelle: 'Autres provisions et fonds r√©glement√©s',
   473	    classe: 1,
   474	    sousClasse: '14',
   475	    nature: 'PASSIF',
   476	    sens: 'CREDITEUR',
   477	    utilisation: 'FACULTATIF'
   478	  },
   479	
   480	  // ============================================================
   481	  // 15 - PROVISIONS POUR RISQUES ET CHARGES
   482	  // ============================================================
   483	  {
   484	    numero: '15',
   485	    libelle: 'Provisions pour risques et charges',
   486	    classe: 1,
   487	    nature: 'PASSIF',
   488	    sens: 'CREDITEUR',
   489	    utilisation: 'FACULTATIF'
   490	  },
   491	  {
   492	    numero: '151',
   493	    libelle: 'Provisions pour risques',
   494	    classe: 1,
   495	    sousClasse: '15',
   496	    nature: 'PASSIF',
   497	    sens: 'CREDITEUR',
   498	    utilisation: 'FACULTATIF'
   499	  },
   500	  {
   501	    numero: '1511',
   502	    libelle: 'Provisions pour litiges',
   503	    classe: 1,
   504	    sousClasse: '151',
   505	    nature: 'PASSIF',
   506	    sens: 'CREDITEUR',
   507	    utilisation: 'FACULTATIF'
   508	  },
   509	  {
   510	    numero: '1512',
   511	    libelle: 'Provisions pour garanties donn√©es aux clients',
   512	    classe: 1,
   513	    sousClasse: '151',
   514	    nature: 'PASSIF',
   515	    sens: 'CREDITEUR',
   516	    utilisation: 'FACULTATIF'
   517	  },
   518	  {
   519	    numero: '1513',
   520	    libelle: 'Provisions pour pertes sur march√©s √† ach√®vement futur',
   521	    classe: 1,
   522	    sousClasse: '151',
   523	    nature: 'PASSIF',
   524	    sens: 'CREDITEUR',
   525	    utilisation: 'FACULTATIF'
   526	  },
   527	  {
   528	    numero: '1514',
   529	    libelle: 'Provisions pour amendes et p√©nalit√©s',
   530	    classe: 1,
   531	    sousClasse: '151',
   532	    nature: 'PASSIF',
   533	    sens: 'CREDITEUR',
   534	    utilisation: 'FACULTATIF'
   535	  },
   536	  {
   537	    numero: '1515',
   538	    libelle: 'Provisions pour pertes de change',
   539	    classe: 1,
   540	    sousClasse: '151',
   541	    nature: 'PASSIF',
   542	    sens: 'CREDITEUR',
   543	    utilisation: 'FACULTATIF'
   544	  },
   545	  {
   546	    numero: '1516',
   547	    libelle: 'Provisions pour pertes sur contrats',
   548	    classe: 1,
   549	    sousClasse: '151',
   550	    nature: 'PASSIF',
   551	    sens: 'CREDITEUR',
   552	    utilisation: 'FACULTATIF'
   553	  },
   554	  {
   555	    numero: '1518',
   556	    libelle: 'Autres provisions pour risques',
   557	    classe: 1,
   558	    sousClasse: '151',
   559	    nature: 'PASSIF',
   560	    sens: 'CREDITEUR',
   561	    utilisation: 'FACULTATIF'
   562	  },
   563	  {
   564	    numero: '152',
   565	    libelle: 'Provisions pour pensions et obligations similaires',
   566	    classe: 1,
   567	    sousClasse: '15',
   568	    nature: 'PASSIF',
   569	    sens: 'CREDITEUR',
   570	    utilisation: 'FACULTATIF'
   571	  },
   572	  {
   573	    numero: '155',
   574	    libelle: 'Provisions pour charges',
   575	    classe: 1,
   576	    sousClasse: '15',
   577	    nature: 'PASSIF',
   578	    sens: 'CREDITEUR',
   579	    utilisation: 'FACULTATIF'
   580	  },
   581	  {
   582	    numero: '1551',
   583	    libelle: 'Provisions pour charges √† r√©partir sur plusieurs exercices',
   584	    classe: 1,
   585	    sousClasse: '155',
   586	    nature: 'PASSIF',
   587	    sens: 'CREDITEUR',
   588	    utilisation: 'FACULTATIF'
   589	  },
   590	  {
   591	    numero: '1552',
   592	    libelle: 'Provisions pour grosses r√©parations',
   593	    classe: 1,
   594	    sousClasse: '155',
   595	    nature: 'PASSIF',
   596	    sens: 'CREDITEUR',
   597	    utilisation: 'FACULTATIF'
   598	  },
   599	  {
   600	    numero: '1558',
   601	    libelle: 'Autres provisions pour charges',
   602	    classe: 1,
   603	    sousClasse: '155',
   604	    nature: 'PASSIF',
   605	    sens: 'CREDITEUR',
   606	    utilisation: 'FACULTATIF'
   607	  },
   608	  {
   609	    numero: '156',
   610	    libelle: 'Provisions pour pertes de change',
   611	    classe: 1,
   612	    sousClasse: '15',
   613	    nature: 'PASSIF',
   614	    sens: 'CREDITEUR',
   615	    utilisation: 'FACULTATIF'
   616	  },
   617	  {
   618	    numero: '157',
   619	    libelle: 'Provisions pour charges √† r√©partir',
   620	    classe: 1,
   621	    sousClasse: '15',
   622	    nature: 'PASSIF',
   623	    sens: 'CREDITEUR',
   624	    utilisation: 'FACULTATIF'
   625	  },
   626	
   627	  // ============================================================
   628	  // 16 - EMPRUNTS ET DETTES ASSIMILEES
   629	  // ============================================================
   630	  {
   631	    numero: '16',
   632	    libelle: 'Emprunts et dettes assimil√©es',
   633	    classe: 1,
   634	    nature: 'PASSIF',
   635	    sens: 'CREDITEUR',
   636	    utilisation: 'OBLIGATOIRE'
   637	  },
   638	  {
   639	    numero: '161',
   640	    libelle: 'Emprunts obligataires',
   641	    classe: 1,
   642	    sousClasse: '16',
   643	    nature: 'PASSIF',
   644	    sens: 'CREDITEUR',
   645	    utilisation: 'FACULTATIF'
   646	  },
   647	  {
   648	    numero: '1611',
   649	    libelle: 'Emprunts obligataires ordinaires',
   650	    classe: 1,
   651	    sousClasse: '161',
   652	    nature: 'PASSIF',
   653	    sens: 'CREDITEUR',
   654	    utilisation: 'FACULTATIF'
   655	  },
   656	  {
   657	    numero: '1612',
   658	    libelle: 'Emprunts obligataires convertibles',
   659	    classe: 1,
   660	    sousClasse: '161',
   661	    nature: 'PASSIF',
   662	    sens: 'CREDITEUR',
   663	    utilisation: 'FACULTATIF'
   664	  },
   665	  {
   666	    numero: '1618',
   667	    libelle: 'Autres emprunts obligataires',
   668	    classe: 1,
   669	    sousClasse: '161',
   670	    nature: 'PASSIF',
   671	    sens: 'CREDITEUR',
   672	    utilisation: 'FACULTATIF'
   673	  },
   674	  {
   675	    numero: '162',
   676	    libelle: 'Emprunts et dettes aupr√®s des √©tablissements de cr√©dit',
   677	    classe: 1,
   678	    sousClasse: '16',
   679	    nature: 'PASSIF',
   680	    sens: 'CREDITEUR',
   681	    utilisation: 'OBLIGATOIRE'
   682	  },
   683	  {
   684	    numero: '163',
   685	    libelle: "Avances re√ßues de l'√âtat",
   686	    classe: 1,
   687	    sousClasse: '16',
   688	    nature: 'PASSIF',
   689	    sens: 'CREDITEUR',
   690	    utilisation: 'FACULTATIF'
   691	  },
   692	  {
   693	    numero: '164',
   694	    libelle: 'Avances re√ßues et comptes courants bloqu√©s',
   695	    classe: 1,
   696	    sousClasse: '16',
   697	    nature: 'PASSIF',
   698	    sens: 'CREDITEUR',
   699	    utilisation: 'FACULTATIF'
   700	  },
   701	  {
   702	    numero: '1641',
   703	    libelle: 'Avances re√ßues',
   704	    classe: 1,
   705	    sousClasse: '164',
   706	    nature: 'PASSIF',
   707	    sens: 'CREDITEUR',
   708	    utilisation: 'FACULTATIF'
   709	  },
   710	  {
   711	    numero: '1642',
   712	    libelle: 'Comptes courants bloqu√©s',
   713	    classe: 1,
   714	    sousClasse: '164',
   715	    nature: 'PASSIF',
   716	    sens: 'CREDITEUR',
   717	    utilisation: 'FACULTATIF'
   718	  },
   719	  {
   720	    numero: '165',
   721	    libelle: 'D√©p√¥ts et cautionnements re√ßus',
   722	    classe: 1,
   723	    sousClasse: '16',
   724	    nature: 'PASSIF',
   725	    sens: 'CREDITEUR',
   726	    utilisation: 'FACULTATIF'
   727	  },
   728	  {
   729	    numero: '1651',
   730	    libelle: 'D√©p√¥ts re√ßus',
   731	    classe: 1,
   732	    sousClasse: '165',
   733	    nature: 'PASSIF',
   734	    sens: 'CREDITEUR',
   735	    utilisation: 'FACULTATIF'
   736	  },
   737	  {
   738	    numero: '1652',
   739	    libelle: 'Cautionnements re√ßus',
   740	    classe: 1,
   741	    sousClasse: '165',
   742	    nature: 'PASSIF',
   743	    sens: 'CREDITEUR',
   744	    utilisation: 'FACULTATIF'
   745	  },
   746	  {
   747	    numero: '166',
   748	    libelle: 'Int√©r√™ts courus',
   749	    classe: 1,
   750	    sousClasse: '16',
   751	    nature: 'PASSIF',
   752	    sens: 'CREDITEUR',
   753	    utilisation: 'OBLIGATOIRE',
   754	    notes: 'Int√©r√™ts courus et non √©chus √† rattacher aux emprunts correspondants'
   755	  },
   756	  {
   757	    numero: '1661',
   758	    libelle: 'Int√©r√™ts courus sur emprunts obligataires',
   759	    classe: 1,
   760	    sousClasse: '166',
   761	    nature: 'PASSIF',
   762	    sens: 'CREDITEUR',
   763	    utilisation: 'FACULTATIF'
   764	  },
   765	  {
   766	    numero: '1662',
   767	    libelle: 'Int√©r√™ts courus sur emprunts et dettes bancaires',
   768	    classe: 1,
   769	    sousClasse: '166',
   770	    nature: 'PASSIF',
   771	    sens: 'CREDITEUR',
   772	    utilisation: 'FACULTATIF'
   773	  },
   774	  {
   775	    numero: '1663',
   776	    libelle: "Int√©r√™ts courus sur avances re√ßues de l'√âtat",
   777	    classe: 1,
   778	    sousClasse: '166',
   779	    nature: 'PASSIF',
   780	    sens: 'CREDITEUR',
   781	    utilisation: 'FACULTATIF'
   782	  },
   783	  {
   784	    numero: '1664',
   785	    libelle: 'Int√©r√™ts courus sur comptes courants bloqu√©s',
   786	    classe: 1,
   787	    sousClasse: '166',
   788	    nature: 'PASSIF',
   789	    sens: 'CREDITEUR',
   790	    utilisation: 'FACULTATIF'
   791	  },
   792	  {
   793	    numero: '1665',
   794	    libelle: 'Int√©r√™ts courus sur d√©p√¥ts et cautionnements re√ßus',
   795	    classe: 1,
   796	    sousClasse: '166',
   797	    nature: 'PASSIF',
   798	    sens: 'CREDITEUR',
   799	    utilisation: 'FACULTATIF'
   800	  },
   801	  {
   802	    numero: '1667',
   803	    libelle: 'Int√©r√™ts courus sur emprunts assortis de conditions particuli√®res',
   804	    classe: 1,
   805	    sousClasse: '166',
   806	    nature: 'PASSIF',
   807	    sens: 'CREDITEUR',
   808	    utilisation: 'FACULTATIF'
   809	  },
   810	  {
   811	    numero: '1668',
   812	    libelle: 'Int√©r√™ts courus sur autres emprunts et dettes',
   813	    classe: 1,
   814	    sousClasse: '166',
   815	    nature: 'PASSIF',
   816	    sens: 'CREDITEUR',
   817	    utilisation: 'FACULTATIF'
   818	  },
   819	  {
   820	    numero: '167',
   821	    libelle: 'Emprunts et dettes assortis de conditions particuli√®res',
   822	    classe: 1,
   823	    sousClasse: '16',
   824	    nature: 'PASSIF',
   825	    sens: 'CREDITEUR',
   826	    utilisation: 'FACULTATIF'
   827	  },
   828	  {
   829	    numero: '1671',
   830	    libelle: 'Emprunts participatifs',
   831	    classe: 1,
   832	    sousClasse: '167',
   833	    nature: 'PASSIF',
   834	    sens: 'CREDITEUR',
   835	    utilisation: 'FACULTATIF'
   836	  },
   837	  {
   838	    numero: '1672',
   839	    libelle: 'Emprunts convertibles',
   840	    classe: 1,
   841	    sousClasse: '167',
   842	    nature: 'PASSIF',
   843	    sens: 'CREDITEUR',
   844	    utilisation: 'FACULTATIF'
   845	  },
   846	  {
   847	    numero: '1673',
   848	    libelle: 'Obligations cautionn√©es',
   849	    classe: 1,
   850	    sousClasse: '167',
   851	    nature: 'PASSIF',
   852	    sens: 'CREDITEUR',
   853	    utilisation: 'FACULTATIF'
   854	  },
   855	  {
   856	    numero: '1674',
   857	    libelle: 'Titres participatifs',
   858	    classe: 1,
   859	    sousClasse: '167',
   860	    nature: 'PASSIF',
   861	    sens: 'CREDITEUR',
   862	    utilisation: 'FACULTATIF'
   863	  },
   864	  {
   865	    numero: '1676',
   866	    libelle: 'Avances assorties de conditions particuli√®res',
   867	    classe: 1,
   868	    sousClasse: '167',
   869	    nature: 'PASSIF',
   870	    sens: 'CREDITEUR',
   871	    utilisation: 'FACULTATIF'
   872	  },
   873	  {
   874	    numero: '1678',
   875	    libelle: 'Autres emprunts et dettes assortis de conditions particuli√®res',
   876	    classe: 1,
   877	    sousClasse: '167',
   878	    nature: 'PASSIF',
   879	    sens: 'CREDITEUR',
   880	    utilisation: 'FACULTATIF'
   881	  },
   882	  {
   883	    numero: '168',
   884	    libelle: 'Autres emprunts et dettes assimil√©es',
   885	    classe: 1,
   886	    sousClasse: '16',
   887	    nature: 'PASSIF',
   888	    sens: 'CREDITEUR',
   889	    utilisation: 'FACULTATIF'
   890	  },
   891	  {
   892	    numero: '1681',
   893	    libelle: 'Rentes viag√®res capitalis√©es',
   894	    classe: 1,
   895	    sousClasse: '168',
   896	    nature: 'PASSIF',
   897	    sens: 'CREDITEUR',
   898	    utilisation: 'FACULTATIF'
   899	  },
   900	  {
   901	    numero: '1682',
   902	    libelle: 'Billets de fonds',
   903	    classe: 1,
   904	    sousClasse: '168',
   905	    nature: 'PASSIF',
   906	    sens: 'CREDITEUR',
   907	    utilisation: 'FACULTATIF'
   908	  },
   909	  {
   910	    numero: '1683',
   911	    libelle: 'Dettes cons√©cutives √† des titres emprunt√©s',
   912	    classe: 1,
   913	    sousClasse: '168',
   914	    nature: 'PASSIF',
   915	    sens: 'CREDITEUR',
   916	    utilisation: 'FACULTATIF'
   917	  },
   918	  {
   919	    numero: '1686',
   920	    libelle: 'Autres emprunts et dettes',
   921	    classe: 1,
   922	    sousClasse: '168',
   923	    nature: 'PASSIF',
   924	    sens: 'CREDITEUR',
   925	    utilisation: 'FACULTATIF'
   926	  },
   927	  {
   928	    numero: '169',
   929	    libelle: 'Primes de remboursement des obligations',
   930	    classe: 1,
   931	    sousClasse: '16',
   932	    nature: 'ACTIF',
   933	    sens: 'DEBITEUR',
   934	    utilisation: 'FACULTATIF',
   935	    notes: 'Compte √† solde d√©biteur figurant √† l\'actif du bilan, amorti sur la dur√©e de l\'emprunt'
   936	  },
   937	
   938	  // ============================================================
   939	  // 17 - DETTES DE LOCATION-ACQUISITION ET CREDIT-BAIL
   940	  // ============================================================
   941	  {
   942	    numero: '17',
   943	    libelle: 'Dettes de location-acquisition et cr√©dit-bail',
   944	    classe: 1,
   945	    nature: 'PASSIF',
   946	    sens: 'CREDITEUR',
   947	    utilisation: 'FACULTATIF',
   948	    notes: 'Nouveau dans le SYSCOHADA R√©vis√© 2017 - Inscription des dettes de cr√©dit-bail au bilan'
   949	  },
   950	  {
   951	    numero: '172',
   952	    libelle: 'Emprunts √©quivalents de location-acquisition immobili√®re',
   953	    classe: 1,
   954	    sousClasse: '17',
   955	    nature: 'PASSIF',
   956	    sens: 'CREDITEUR',
   957	    utilisation: 'FACULTATIF'
   958	  },
   959	  {
   960	    numero: '173',
   961	    libelle: 'Emprunts √©quivalents de location-acquisition mobili√®re',
   962	    classe: 1,
   963	    sousClasse: '17',
   964	    nature: 'PASSIF',
   965	    sens: 'CREDITEUR',
   966	    utilisation: 'FACULTATIF'
   967	  },
   968	  {
   969	    numero: '176',
   970	    libelle: 'Int√©r√™ts courus sur dettes de location-acquisition',
   971	    classe: 1,
   972	    sousClasse: '17',
   973	    nature: 'PASSIF',
   974	    sens: 'CREDITEUR',
   975	    utilisation: 'FACULTATIF'
   976	  },
   977	
   978	  // ============================================================
   979	  // 18 - DETTES LIEES A DES PARTICIPATIONS ET COMPTES DE LIAISON
   980	  // ============================================================
   981	  {
   982	    numero: '18',
   983	    libelle: 'Dettes li√©es √† des participations et comptes de liaison',
   984	    classe: 1,
   985	    nature: 'SPECIAL',
   986	    sens: 'DEBITEUR',
   987	    utilisation: 'FACULTATIF',
   988	    notes: 'Comptes de nature sp√©ciale pouvant avoir un solde d√©biteur ou cr√©diteur'
   989	  },
   990	  {
   991	    numero: '181',
   992	    libelle: 'Dettes li√©es √† des participations (groupe)',
   993	    classe: 1,
   994	    sousClasse: '18',
   995	    nature: 'PASSIF',
   996	    sens: 'CREDITEUR',
   997	    utilisation: 'FACULTATIF'
   998	  },
   999	  {
  1000	    numero: '182',
  1001	    libelle: 'Dettes li√©es √† des participations (hors groupe)',
  1002	    classe: 1,
  1003	    sousClasse: '18',
  1004	    nature: 'PASSIF',
  1005	    sens: 'CREDITEUR',
  1006	    utilisation: 'FACULTATIF'
  1007	  },
  1008	  {
  1009	    numero: '183',
  1010	    libelle: 'Comptes de liaison des √©tablissements',
  1011	    classe: 1,
  1012	    sousClasse: '18',
  1013	    nature: 'SPECIAL',
  1014	    sens: 'DEBITEUR',
  1015	    utilisation: 'FACULTATIF',
  1016	    notes: 'Compte de liaison entre √©tablissements d\'une m√™me entit√©'
  1017	  },
  1018	  {
  1019	    numero: '184',
  1020	    libelle: 'Comptes de liaison des soci√©t√©s en participation',
  1021	    classe: 1,
  1022	    sousClasse: '18',
  1023	    nature: 'SPECIAL',
  1024	    sens: 'DEBITEUR',
  1025	    utilisation: 'FACULTATIF'
  1026	  },
  1027	  {
  1028	    numero: '185',
  1029	    libelle: 'Comptes de liaison des soci√©t√©s en participation (non bloqu√©s)',
  1030	    classe: 1,
  1031	    sousClasse: '18',
  1032	    nature: 'SPECIAL',
  1033	    sens: 'DEBITEUR',
  1034	    utilisation: 'FACULTATIF'
  1035	  },
  1036	  {
  1037	    numero: '186',
  1038	    libelle: 'Comptes de liaison charges',
  1039	    classe: 1,
  1040	    sousClasse: '18',
  1041	    nature: 'SPECIAL',
  1042	    sens: 'DEBITEUR',
  1043	    utilisation: 'FACULTATIF'
  1044	  },
  1045	  {
  1046	    numero: '187',
  1047	    libelle: 'Comptes de liaison produits',
  1048	    classe: 1,
  1049	    sousClasse: '18',
  1050	    nature: 'SPECIAL',
  1051	    sens: 'CREDITEUR',
  1052	    utilisation: 'FACULTATIF'
  1053	  },
  1054	  {
  1055	    numero: '188',
  1056	    libelle: 'Comptes de liaison des soci√©t√©s en participation',
  1057	    classe: 1,
  1058	    sousClasse: '18',
  1059	    nature: 'SPECIAL',
  1060	    sens: 'DEBITEUR',
  1061	    utilisation: 'FACULTATIF'
  1062	  },
  1063	
  1064	  // ============================================================
  1065	  // 19 - PROVISIONS FINANCIERES POUR RISQUES ET CHARGES
  1066	  // ============================================================
  1067	  {
  1068	    numero: '19',
  1069	    libelle: 'Provisions financi√®res pour risques et charges',
  1070	    classe: 1,
  1071	    nature: 'PASSIF',
  1072	    sens: 'CREDITEUR',
  1073	    utilisation: 'FACULTATIF'
  1074	  },
  1075	  {
  1076	    numero: '191',
  1077	    libelle: 'Provisions pour risques sur op√©rations financi√®res',
  1078	    classe: 1,
  1079	    sousClasse: '19',
  1080	    nature: 'PASSIF',
  1081	    sens: 'CREDITEUR',
  1082	    utilisation: 'FACULTATIF'
  1083	  },
  1084	  {
  1085	    numero: '194',
  1086	    libelle: 'Provisions pour d√©pr√©ciation des titres de participation',
  1087	    classe: 1,
  1088	    sousClasse: '19',
  1089	    nature: 'PASSIF',
  1090	    sens: 'CREDITEUR',
  1091	    utilisation: 'FACULTATIF'
  1092	  },
  1093	  {
  1094	    numero: '195',
  1095	    libelle: 'Provisions pour risques et charges sur op√©rations √† long terme',
  1096	    classe: 1,
  1097	    sousClasse: '19',
  1098	    nature: 'PASSIF',
  1099	    sens: 'CREDITEUR',
  1100	    utilisation: 'FACULTATIF'
  1101	  },
  1102	  {
  1103	    numero: '196',
  1104	    libelle: 'Provisions pour pensions et obligations similaires',
  1105	    classe: 1,
  1106	    sousClasse: '19',
  1107	    nature: 'PASSIF',
  1108	    sens: 'CREDITEUR',
  1109	    utilisation: 'FACULTATIF'
  1110	  },
  1111	  {
  1112	    numero: '197',
  1113	    libelle: 'Provisions financi√®res pour risques et charges',
  1114	    classe: 1,
  1115	    sousClasse: '19',
  1116	    nature: 'PASSIF',
  1117	    sens: 'CREDITEUR',
  1118	    utilisation: 'FACULTATIF'
  1119	  }
  1120	]

================================================================================
FILE: src/data/syscohada/plan/classe2.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * SYSCOHADA Revis√© (2017) - CLASSE 2 : COMPTES D'ACTIF IMMOBILISE
     5	 *
     6	 * Comptes 20 √† 29 couvrant les charges immobilis√©es, immobilisations
     7	 * incorporelles, terrains, b√¢timents, mat√©riel, avances et acomptes,
     8	 * titres de participation, autres immobilisations financi√®res,
     9	 * amortissements et provisions pour d√©pr√©ciation.
    10	 */
    11	export const CLASSE_2_COMPTES: CompteComptable[] = [
    12	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    13	  // 20 - CHARGES IMMOBILISEES
    14	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    15	  {
    16	    numero: '20',
    17	    libelle: 'Charges immobilis√©es',
    18	    classe: 2,
    19	    nature: 'ACTIF',
    20	    sens: 'DEBITEUR',
    21	    utilisation: 'FACULTATIF',
    22	  },
    23	  {
    24	    numero: '201',
    25	    libelle: "Frais d'√©tablissement",
    26	    classe: 2,
    27	    sousClasse: '20',
    28	    nature: 'ACTIF',
    29	    sens: 'DEBITEUR',
    30	    utilisation: 'FACULTATIF',
    31	  },
    32	  {
    33	    numero: '2011',
    34	    libelle: 'Frais de constitution',
    35	    classe: 2,
    36	    sousClasse: '201',
    37	    nature: 'ACTIF',
    38	    sens: 'DEBITEUR',
    39	    utilisation: 'FACULTATIF',
    40	  },
    41	  {
    42	    numero: '2012',
    43	    libelle: 'Frais de prospection',
    44	    classe: 2,
    45	    sousClasse: '201',
    46	    nature: 'ACTIF',
    47	    sens: 'DEBITEUR',
    48	    utilisation: 'FACULTATIF',
    49	  },
    50	  {
    51	    numero: '2013',
    52	    libelle: 'Frais de publicit√© et de lancement',
    53	    classe: 2,
    54	    sousClasse: '201',
    55	    nature: 'ACTIF',
    56	    sens: 'DEBITEUR',
    57	    utilisation: 'FACULTATIF',
    58	  },
    59	  {
    60	    numero: '2014',
    61	    libelle: 'Frais de fonctionnement ant√©rieurs au d√©marrage',
    62	    classe: 2,
    63	    sousClasse: '201',
    64	    nature: 'ACTIF',
    65	    sens: 'DEBITEUR',
    66	    utilisation: 'FACULTATIF',
    67	  },
    68	  {
    69	    numero: '2015',
    70	    libelle: 'Frais de modification du capital',
    71	    classe: 2,
    72	    sousClasse: '201',
    73	    nature: 'ACTIF',
    74	    sens: 'DEBITEUR',
    75	    utilisation: 'FACULTATIF',
    76	  },
    77	  {
    78	    numero: '2016',
    79	    libelle: "Frais d'entr√©e √† la bourse",
    80	    classe: 2,
    81	    sousClasse: '201',
    82	    nature: 'ACTIF',
    83	    sens: 'DEBITEUR',
    84	    utilisation: 'FACULTATIF',
    85	  },
    86	  {
    87	    numero: '2018',
    88	    libelle: "Autres frais d'√©tablissement",
    89	    classe: 2,
    90	    sousClasse: '201',
    91	    nature: 'ACTIF',
    92	    sens: 'DEBITEUR',
    93	    utilisation: 'FACULTATIF',
    94	  },
    95	  {
    96	    numero: '202',
    97	    libelle: 'Charges √† r√©partir sur plusieurs exercices',
    98	    classe: 2,
    99	    sousClasse: '20',
   100	    nature: 'ACTIF',
   101	    sens: 'DEBITEUR',
   102	    utilisation: 'FACULTATIF',
   103	  },
   104	  {
   105	    numero: '2021',
   106	    libelle: 'Charges diff√©r√©es',
   107	    classe: 2,
   108	    sousClasse: '202',
   109	    nature: 'ACTIF',
   110	    sens: 'DEBITEUR',
   111	    utilisation: 'FACULTATIF',
   112	  },
   113	  {
   114	    numero: '2022',
   115	    libelle: "Frais d'acquisition d'immobilisations",
   116	    classe: 2,
   117	    sousClasse: '202',
   118	    nature: 'ACTIF',
   119	    sens: 'DEBITEUR',
   120	    utilisation: 'FACULTATIF',
   121	  },
   122	  {
   123	    numero: '2026',
   124	    libelle: "Frais d'√©mission des emprunts",
   125	    classe: 2,
   126	    sousClasse: '202',
   127	    nature: 'ACTIF',
   128	    sens: 'DEBITEUR',
   129	    utilisation: 'FACULTATIF',
   130	  },
   131	  {
   132	    numero: '2028',
   133	    libelle: 'Autres charges √† r√©partir',
   134	    classe: 2,
   135	    sousClasse: '202',
   136	    nature: 'ACTIF',
   137	    sens: 'DEBITEUR',
   138	    utilisation: 'FACULTATIF',
   139	  },
   140	  {
   141	    numero: '206',
   142	    libelle: 'Primes de remboursement des obligations',
   143	    classe: 2,
   144	    sousClasse: '20',
   145	    nature: 'ACTIF',
   146	    sens: 'DEBITEUR',
   147	    utilisation: 'FACULTATIF',
   148	  },
   149	
   150	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   151	  // 21 - IMMOBILISATIONS INCORPORELLES
   152	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   153	  {
   154	    numero: '21',
   155	    libelle: 'Immobilisations incorporelles',
   156	    classe: 2,
   157	    nature: 'ACTIF',
   158	    sens: 'DEBITEUR',
   159	    utilisation: 'OBLIGATOIRE',
   160	  },
   161	  {
   162	    numero: '211',
   163	    libelle: 'Frais de d√©veloppement',
   164	    classe: 2,
   165	    sousClasse: '21',
   166	    nature: 'ACTIF',
   167	    sens: 'DEBITEUR',
   168	    utilisation: 'FACULTATIF',
   169	  },
   170	  {
   171	    numero: '212',
   172	    libelle: 'Brevets, licences, concessions et droits similaires',
   173	    classe: 2,
   174	    sousClasse: '21',
   175	    nature: 'ACTIF',
   176	    sens: 'DEBITEUR',
   177	    utilisation: 'FACULTATIF',
   178	  },
   179	  {
   180	    numero: '2121',
   181	    libelle: 'Brevets',
   182	    classe: 2,
   183	    sousClasse: '212',
   184	    nature: 'ACTIF',
   185	    sens: 'DEBITEUR',
   186	    utilisation: 'FACULTATIF',
   187	  },
   188	  {
   189	    numero: '2122',
   190	    libelle: 'Licences',
   191	    classe: 2,
   192	    sousClasse: '212',
   193	    nature: 'ACTIF',
   194	    sens: 'DEBITEUR',
   195	    utilisation: 'FACULTATIF',
   196	  },
   197	  {
   198	    numero: '2123',
   199	    libelle: 'Concessions',
   200	    classe: 2,
   201	    sousClasse: '212',
   202	    nature: 'ACTIF',
   203	    sens: 'DEBITEUR',
   204	    utilisation: 'FACULTATIF',
   205	  },
   206	  {
   207	    numero: '2128',
   208	    libelle: 'Autres droits et valeurs similaires',
   209	    classe: 2,
   210	    sousClasse: '212',
   211	    nature: 'ACTIF',
   212	    sens: 'DEBITEUR',
   213	    utilisation: 'FACULTATIF',
   214	  },
   215	  {
   216	    numero: '213',
   217	    libelle: 'Logiciels et sites internet',
   218	    classe: 2,
   219	    sousClasse: '21',
   220	    nature: 'ACTIF',
   221	    sens: 'DEBITEUR',
   222	    utilisation: 'FACULTATIF',
   223	  },
   224	  {
   225	    numero: '2131',
   226	    libelle: 'Logiciels acquis',
   227	    classe: 2,
   228	    sousClasse: '213',
   229	    nature: 'ACTIF',
   230	    sens: 'DEBITEUR',
   231	    utilisation: 'FACULTATIF',
   232	  },
   233	  {
   234	    numero: '2132',
   235	    libelle: 'Logiciels cr√©√©s',
   236	    classe: 2,
   237	    sousClasse: '213',
   238	    nature: 'ACTIF',
   239	    sens: 'DEBITEUR',
   240	    utilisation: 'FACULTATIF',
   241	  },
   242	  {
   243	    numero: '2133',
   244	    libelle: 'Sites internet',
   245	    classe: 2,
   246	    sousClasse: '213',
   247	    nature: 'ACTIF',
   248	    sens: 'DEBITEUR',
   249	    utilisation: 'FACULTATIF',
   250	  },
   251	  {
   252	    numero: '214',
   253	    libelle: 'Marques',
   254	    classe: 2,
   255	    sousClasse: '21',
   256	    nature: 'ACTIF',
   257	    sens: 'DEBITEUR',
   258	    utilisation: 'FACULTATIF',
   259	  },
   260	  {
   261	    numero: '215',
   262	    libelle: 'Fonds commercial',
   263	    classe: 2,
   264	    sousClasse: '21',
   265	    nature: 'ACTIF',
   266	    sens: 'DEBITEUR',
   267	    utilisation: 'FACULTATIF',
   268	  },
   269	  {
   270	    numero: '2151',
   271	    libelle: 'Fonds commercial acquis',
   272	    classe: 2,
   273	    sousClasse: '215',
   274	    nature: 'ACTIF',
   275	    sens: 'DEBITEUR',
   276	    utilisation: 'FACULTATIF',
   277	  },
   278	  {
   279	    numero: '2152',
   280	    libelle: 'Droit au bail',
   281	    classe: 2,
   282	    sousClasse: '215',
   283	    nature: 'ACTIF',
   284	    sens: 'DEBITEUR',
   285	    utilisation: 'FACULTATIF',
   286	  },
   287	  {
   288	    numero: '2153',
   289	    libelle: 'Pas de porte',
   290	    classe: 2,
   291	    sousClasse: '215',
   292	    nature: 'ACTIF',
   293	    sens: 'DEBITEUR',
   294	    utilisation: 'FACULTATIF',
   295	  },
   296	  {
   297	    numero: '216',
   298	    libelle: 'Droit au bail',
   299	    classe: 2,
   300	    sousClasse: '21',
   301	    nature: 'ACTIF',
   302	    sens: 'DEBITEUR',
   303	    utilisation: 'FACULTATIF',
   304	  },
   305	  {
   306	    numero: '217',
   307	    libelle: 'Investissements de cr√©ation',
   308	    classe: 2,
   309	    sousClasse: '21',
   310	    nature: 'ACTIF',
   311	    sens: 'DEBITEUR',
   312	    utilisation: 'FACULTATIF',
   313	  },
   314	  {
   315	    numero: '218',
   316	    libelle: 'Autres immobilisations incorporelles',
   317	    classe: 2,
   318	    sousClasse: '21',
   319	    nature: 'ACTIF',
   320	    sens: 'DEBITEUR',
   321	    utilisation: 'FACULTATIF',
   322	  },
   323	  {
   324	    numero: '219',
   325	    libelle: 'Immobilisations incorporelles en cours',
   326	    classe: 2,
   327	    sousClasse: '21',
   328	    nature: 'ACTIF',
   329	    sens: 'DEBITEUR',
   330	    utilisation: 'FACULTATIF',
   331	  },
   332	
   333	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   334	  // 22 - TERRAINS
   335	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   336	  {
   337	    numero: '22',
   338	    libelle: 'Terrains',
   339	    classe: 2,
   340	    nature: 'ACTIF',
   341	    sens: 'DEBITEUR',
   342	    utilisation: 'OBLIGATOIRE',
   343	  },
   344	  {
   345	    numero: '221',
   346	    libelle: 'Terrains agricoles et forestiers',
   347	    classe: 2,
   348	    sousClasse: '22',
   349	    nature: 'ACTIF',
   350	    sens: 'DEBITEUR',
   351	    utilisation: 'FACULTATIF',
   352	  },
   353	  {
   354	    numero: '2211',
   355	    libelle: "Terrains d'exploitation agricole",
   356	    classe: 2,
   357	    sousClasse: '221',
   358	    nature: 'ACTIF',
   359	    sens: 'DEBITEUR',
   360	    utilisation: 'FACULTATIF',
   361	  },
   362	  {
   363	    numero: '2212',
   364	    libelle: "Terrains d'exploitation foresti√®re",
   365	    classe: 2,
   366	    sousClasse: '221',
   367	    nature: 'ACTIF',
   368	    sens: 'DEBITEUR',
   369	    utilisation: 'FACULTATIF',
   370	  },
   371	  {
   372	    numero: '222',
   373	    libelle: 'Terrains nus',
   374	    classe: 2,
   375	    sousClasse: '22',
   376	    nature: 'ACTIF',
   377	    sens: 'DEBITEUR',
   378	    utilisation: 'FACULTATIF',
   379	  },
   380	  {
   381	    numero: '2221',
   382	    libelle: 'Terrains √† b√¢tir',
   383	    classe: 2,
   384	    sousClasse: '222',
   385	    nature: 'ACTIF',
   386	    sens: 'DEBITEUR',
   387	    utilisation: 'FACULTATIF',
   388	  },
   389	  {
   390	    numero: '2228',
   391	    libelle: 'Autres terrains nus',
   392	    classe: 2,
   393	    sousClasse: '222',
   394	    nature: 'ACTIF',
   395	    sens: 'DEBITEUR',
   396	    utilisation: 'FACULTATIF',
   397	  },
   398	  {
   399	    numero: '223',
   400	    libelle: 'Terrains b√¢tis',
   401	    classe: 2,
   402	    sousClasse: '22',
   403	    nature: 'ACTIF',
   404	    sens: 'DEBITEUR',
   405	    utilisation: 'OBLIGATOIRE',
   406	  },
   407	  {
   408	    numero: '2231',
   409	    libelle: 'Terrains sous b√¢timents',
   410	    classe: 2,
   411	    sousClasse: '223',
   412	    nature: 'ACTIF',
   413	    sens: 'DEBITEUR',
   414	    utilisation: 'OBLIGATOIRE',
   415	  },
   416	  {
   417	    numero: '2232',
   418	    libelle: 'Terrains sous infrastructure',
   419	    classe: 2,
   420	    sousClasse: '223',
   421	    nature: 'ACTIF',
   422	    sens: 'DEBITEUR',
   423	    utilisation: 'FACULTATIF',
   424	  },
   425	  {
   426	    numero: '2235',
   427	    libelle: 'Terrains des gisements',
   428	    classe: 2,
   429	    sousClasse: '223',
   430	    nature: 'ACTIF',
   431	    sens: 'DEBITEUR',
   432	    utilisation: 'FACULTATIF',
   433	  },
   434	  {
   435	    numero: '224',
   436	    libelle: 'Travaux de mise en valeur des terrains',
   437	    classe: 2,
   438	    sousClasse: '22',
   439	    nature: 'ACTIF',
   440	    sens: 'DEBITEUR',
   441	    utilisation: 'FACULTATIF',
   442	  },
   443	  {
   444	    numero: '2241',
   445	    libelle: 'Am√©nagements de terrains',
   446	    classe: 2,
   447	    sousClasse: '224',
   448	    nature: 'ACTIF',
   449	    sens: 'DEBITEUR',
   450	    utilisation: 'FACULTATIF',
   451	  },
   452	  {
   453	    numero: '2248',
   454	    libelle: 'Autres travaux',
   455	    classe: 2,
   456	    sousClasse: '224',
   457	    nature: 'ACTIF',
   458	    sens: 'DEBITEUR',
   459	    utilisation: 'FACULTATIF',
   460	  },
   461	  {
   462	    numero: '225',
   463	    libelle: 'Terrains de gisement',
   464	    classe: 2,
   465	    sousClasse: '22',
   466	    nature: 'ACTIF',
   467	    sens: 'DEBITEUR',
   468	    utilisation: 'FACULTATIF',
   469	  },
   470	  {
   471	    numero: '2251',
   472	    libelle: 'Carri√®res',
   473	    classe: 2,
   474	    sousClasse: '225',
   475	    nature: 'ACTIF',
   476	    sens: 'DEBITEUR',
   477	    utilisation: 'FACULTATIF',
   478	  },
   479	  {
   480	    numero: '2252',
   481	    libelle: 'Mines',
   482	    classe: 2,
   483	    sousClasse: '225',
   484	    nature: 'ACTIF',
   485	    sens: 'DEBITEUR',
   486	    utilisation: 'FACULTATIF',
   487	  },
   488	  {
   489	    numero: '228',
   490	    libelle: 'Autres terrains',
   491	    classe: 2,
   492	    sousClasse: '22',
   493	    nature: 'ACTIF',
   494	    sens: 'DEBITEUR',
   495	    utilisation: 'FACULTATIF',
   496	  },
   497	  {
   498	    numero: '2281',
   499	    libelle: 'Terrains en concession',
   500	    classe: 2,
   501	    sousClasse: '228',
   502	    nature: 'ACTIF',
   503	    sens: 'DEBITEUR',
   504	    utilisation: 'FACULTATIF',
   505	  },
   506	  {
   507	    numero: '2288',
   508	    libelle: 'Divers terrains',
   509	    classe: 2,
   510	    sousClasse: '228',
   511	    nature: 'ACTIF',
   512	    sens: 'DEBITEUR',
   513	    utilisation: 'FACULTATIF',
   514	  },
   515	
   516	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   517	  // 23 - BATIMENTS, INSTALLATIONS TECHNIQUES ET AGENCEMENTS
   518	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   519	  {
   520	    numero: '23',
   521	    libelle: 'B√¢timents, installations techniques et agencements',
   522	    classe: 2,
   523	    nature: 'ACTIF',
   524	    sens: 'DEBITEUR',
   525	    utilisation: 'OBLIGATOIRE',
   526	  },
   527	  {
   528	    numero: '231',
   529	    libelle: 'B√¢timents industriels, agricoles et commerciaux',
   530	    classe: 2,
   531	    sousClasse: '23',
   532	    nature: 'ACTIF',
   533	    sens: 'DEBITEUR',
   534	    utilisation: 'OBLIGATOIRE',
   535	  },
   536	  {
   537	    numero: '2311',
   538	    libelle: 'B√¢timents industriels',
   539	    classe: 2,
   540	    sousClasse: '231',
   541	    nature: 'ACTIF',
   542	    sens: 'DEBITEUR',
   543	    utilisation: 'OBLIGATOIRE',
   544	  },
   545	  {
   546	    numero: '2312',
   547	    libelle: 'B√¢timents agricoles',
   548	    classe: 2,
   549	    sousClasse: '231',
   550	    nature: 'ACTIF',
   551	    sens: 'DEBITEUR',
   552	    utilisation: 'FACULTATIF',
   553	  },
   554	  {
   555	    numero: '2313',
   556	    libelle: 'B√¢timents commerciaux',
   557	    classe: 2,
   558	    sousClasse: '231',
   559	    nature: 'ACTIF',
   560	    sens: 'DEBITEUR',
   561	    utilisation: 'OBLIGATOIRE',
   562	  },
   563	  {
   564	    numero: '2314',
   565	    libelle: 'B√¢timents administratifs',
   566	    classe: 2,
   567	    sousClasse: '231',
   568	    nature: 'ACTIF',
   569	    sens: 'DEBITEUR',
   570	    utilisation: 'OBLIGATOIRE',
   571	  },
   572	  {
   573	    numero: '2315',
   574	    libelle: 'Hangars, ateliers et chantiers',
   575	    classe: 2,
   576	    sousClasse: '231',
   577	    nature: 'ACTIF',
   578	    sens: 'DEBITEUR',
   579	    utilisation: 'FACULTATIF',
   580	  },
   581	  {
   582	    numero: '232',
   583	    libelle: 'B√¢timents administratifs et commerciaux √† usage professionnel',
   584	    classe: 2,
   585	    sousClasse: '23',
   586	    nature: 'ACTIF',
   587	    sens: 'DEBITEUR',
   588	    utilisation: 'OBLIGATOIRE',
   589	  },
   590	  {
   591	    numero: '233',
   592	    libelle: "Ouvrages d'infrastructure",
   593	    classe: 2,
   594	    sousClasse: '23',
   595	    nature: 'ACTIF',
   596	    sens: 'DEBITEUR',
   597	    utilisation: 'FACULTATIF',
   598	  },
   599	  {
   600	    numero: '2331',
   601	    libelle: 'Voies de terre (routes, parkings)',
   602	    classe: 2,
   603	    sousClasse: '233',
   604	    nature: 'ACTIF',
   605	    sens: 'DEBITEUR',
   606	    utilisation: 'FACULTATIF',
   607	  },
   608	  {
   609	    numero: '2332',
   610	    libelle: 'Voies de fer',
   611	    classe: 2,
   612	    sousClasse: '233',
   613	    nature: 'ACTIF',
   614	    sens: 'DEBITEUR',
   615	    utilisation: 'FACULTATIF',
   616	  },
   617	  {
   618	    numero: '2333',
   619	    libelle: "Voies d'eau",
   620	    classe: 2,
   621	    sousClasse: '233',
   622	    nature: 'ACTIF',
   623	    sens: 'DEBITEUR',
   624	    utilisation: 'FACULTATIF',
   625	  },
   626	  {
   627	    numero: '2338',
   628	    libelle: "Autres ouvrages d'infrastructure",
   629	    classe: 2,
   630	    sousClasse: '233',
   631	    nature: 'ACTIF',
   632	    sens: 'DEBITEUR',
   633	    utilisation: 'FACULTATIF',
   634	  },
   635	  {
   636	    numero: '234',
   637	    libelle: 'Installations techniques',
   638	    classe: 2,
   639	    sousClasse: '23',
   640	    nature: 'ACTIF',
   641	    sens: 'DEBITEUR',
   642	    utilisation: 'OBLIGATOIRE',
   643	  },
   644	  {
   645	    numero: '2341',
   646	    libelle: 'Installations complexes sp√©cialis√©es',
   647	    classe: 2,
   648	    sousClasse: '234',
   649	    nature: 'ACTIF',
   650	    sens: 'DEBITEUR',
   651	    utilisation: 'OBLIGATOIRE',
   652	  },
   653	  {
   654	    numero: '2342',
   655	    libelle: 'Installations √† caract√®re sp√©cifique',
   656	    classe: 2,
   657	    sousClasse: '234',
   658	    nature: 'ACTIF',
   659	    sens: 'DEBITEUR',
   660	    utilisation: 'FACULTATIF',
   661	  },
   662	  {
   663	    numero: '2343',
   664	    libelle: 'Installations de voirie',
   665	    classe: 2,
   666	    sousClasse: '234',
   667	    nature: 'ACTIF',
   668	    sens: 'DEBITEUR',
   669	    utilisation: 'FACULTATIF',
   670	  },
   671	  {
   672	    numero: '2344',
   673	    libelle: 'Installations de t√©l√©communications',
   674	    classe: 2,
   675	    sousClasse: '234',
   676	    nature: 'ACTIF',
   677	    sens: 'DEBITEUR',
   678	    utilisation: 'FACULTATIF',
   679	  },
   680	  {
   681	    numero: '2348',
   682	    libelle: 'Autres installations techniques',
   683	    classe: 2,
   684	    sousClasse: '234',
   685	    nature: 'ACTIF',
   686	    sens: 'DEBITEUR',
   687	    utilisation: 'FACULTATIF',
   688	  },
   689	  {
   690	    numero: '235',
   691	    libelle: 'Am√©nagements de bureaux',
   692	    classe: 2,
   693	    sousClasse: '23',
   694	    nature: 'ACTIF',
   695	    sens: 'DEBITEUR',
   696	    utilisation: 'OBLIGATOIRE',
   697	  },
   698	  {
   699	    numero: '237',
   700	    libelle: 'B√¢timents industriels, agricoles et commerciaux mis en concession',
   701	    classe: 2,
   702	    sousClasse: '23',
   703	    nature: 'ACTIF',
   704	    sens: 'DEBITEUR',
   705	    utilisation: 'FACULTATIF',
   706	  },
   707	  {
   708	    numero: '238',
   709	    libelle: 'Autres b√¢timents et installations',
   710	    classe: 2,
   711	    sousClasse: '23',
   712	    nature: 'ACTIF',
   713	    sens: 'DEBITEUR',
   714	    utilisation: 'FACULTATIF',
   715	  },
   716	  {
   717	    numero: '239',
   718	    libelle: 'B√¢timents et installations en cours',
   719	    classe: 2,
   720	    sousClasse: '23',
   721	    nature: 'ACTIF',
   722	    sens: 'DEBITEUR',
   723	    utilisation: 'FACULTATIF',
   724	  },
   725	
   726	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   727	  // 24 - MATERIEL
   728	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   729	  {
   730	    numero: '24',
   731	    libelle: 'Mat√©riel',
   732	    classe: 2,
   733	    nature: 'ACTIF',
   734	    sens: 'DEBITEUR',
   735	    utilisation: 'OBLIGATOIRE',
   736	  },
   737	  {
   738	    numero: '241',
   739	    libelle: 'Mat√©riel et outillage industriel et commercial',
   740	    classe: 2,
   741	    sousClasse: '24',
   742	    nature: 'ACTIF',
   743	    sens: 'DEBITEUR',
   744	    utilisation: 'OBLIGATOIRE',
   745	  },
   746	  {
   747	    numero: '2411',
   748	    libelle: 'Mat√©riel industriel',
   749	    classe: 2,
   750	    sousClasse: '241',
   751	    nature: 'ACTIF',
   752	    sens: 'DEBITEUR',
   753	    utilisation: 'OBLIGATOIRE',
   754	  },
   755	  {
   756	    numero: '2412',
   757	    libelle: 'Outillage industriel',
   758	    classe: 2,
   759	    sousClasse: '241',
   760	    nature: 'ACTIF',
   761	    sens: 'DEBITEUR',
   762	    utilisation: 'FACULTATIF',
   763	  },
   764	  {
   765	    numero: '2413',
   766	    libelle: 'Mat√©riel commercial',
   767	    classe: 2,
   768	    sousClasse: '241',
   769	    nature: 'ACTIF',
   770	    sens: 'DEBITEUR',
   771	    utilisation: 'FACULTATIF',
   772	  },
   773	  {
   774	    numero: '2414',
   775	    libelle: 'Outillage commercial',
   776	    classe: 2,
   777	    sousClasse: '241',
   778	    nature: 'ACTIF',
   779	    sens: 'DEBITEUR',
   780	    utilisation: 'FACULTATIF',
   781	  },
   782	  {
   783	    numero: '242',
   784	    libelle: 'Mat√©riel et outillage agricole',
   785	    classe: 2,
   786	    sousClasse: '24',
   787	    nature: 'ACTIF',
   788	    sens: 'DEBITEUR',
   789	    utilisation: 'FACULTATIF',
   790	  },
   791	  {
   792	    numero: '243',
   793	    libelle: "Mat√©riel d'emballage r√©cup√©rable et identifiable",
   794	    classe: 2,
   795	    sousClasse: '24',
   796	    nature: 'ACTIF',
   797	    sens: 'DEBITEUR',
   798	    utilisation: 'FACULTATIF',
   799	  },
   800	  {
   801	    numero: '244',
   802	    libelle: 'Mat√©riel et mobilier de bureau',
   803	    classe: 2,
   804	    sousClasse: '24',
   805	    nature: 'ACTIF',
   806	    sens: 'DEBITEUR',
   807	    utilisation: 'OBLIGATOIRE',
   808	  },
   809	  {
   810	    numero: '2441',
   811	    libelle: 'Mat√©riel de bureau',
   812	    classe: 2,
   813	    sousClasse: '244',
   814	    nature: 'ACTIF',
   815	    sens: 'DEBITEUR',
   816	    utilisation: 'OBLIGATOIRE',
   817	  },
   818	  {
   819	    numero: '2442',
   820	    libelle: 'Mat√©riel informatique',
   821	    classe: 2,
   822	    sousClasse: '244',
   823	    nature: 'ACTIF',
   824	    sens: 'DEBITEUR',
   825	    utilisation: 'OBLIGATOIRE',
   826	  },
   827	  {
   828	    numero: '2443',
   829	    libelle: 'Mat√©riel bureautique',
   830	    classe: 2,
   831	    sousClasse: '244',
   832	    nature: 'ACTIF',
   833	    sens: 'DEBITEUR',
   834	    utilisation: 'FACULTATIF',
   835	  },
   836	  {
   837	    numero: '2444',
   838	    libelle: 'Mobilier de bureau',
   839	    classe: 2,
   840	    sousClasse: '244',
   841	    nature: 'ACTIF',
   842	    sens: 'DEBITEUR',
   843	    utilisation: 'OBLIGATOIRE',
   844	  },
   845	  {
   846	    numero: '245',
   847	    libelle: 'Mat√©riel de transport',
   848	    classe: 2,
   849	    sousClasse: '24',
   850	    nature: 'ACTIF',
   851	    sens: 'DEBITEUR',
   852	    utilisation: 'OBLIGATOIRE',
   853	  },
   854	  {
   855	    numero: '2451',
   856	    libelle: 'Mat√©riel automobile',
   857	    classe: 2,
   858	    sousClasse: '245',
   859	    nature: 'ACTIF',
   860	    sens: 'DEBITEUR',
   861	    utilisation: 'OBLIGATOIRE',
   862	  },
   863	  {
   864	    numero: '2452',
   865	    libelle: 'Mat√©riel ferroviaire',
   866	    classe: 2,
   867	    sousClasse: '245',
   868	    nature: 'ACTIF',
   869	    sens: 'DEBITEUR',
   870	    utilisation: 'FACULTATIF',
   871	  },
   872	  {
   873	    numero: '2453',
   874	    libelle: 'Mat√©riel fluvial et maritime',
   875	    classe: 2,
   876	    sousClasse: '245',
   877	    nature: 'ACTIF',
   878	    sens: 'DEBITEUR',
   879	    utilisation: 'FACULTATIF',
   880	  },
   881	  {
   882	    numero: '2454',
   883	    libelle: 'Mat√©riel a√©rien',
   884	    classe: 2,
   885	    sousClasse: '245',
   886	    nature: 'ACTIF',
   887	    sens: 'DEBITEUR',
   888	    utilisation: 'FACULTATIF',
   889	  },
   890	  {
   891	    numero: '2458',
   892	    libelle: 'Autres mat√©riels de transport',
   893	    classe: 2,
   894	    sousClasse: '245',
   895	    nature: 'ACTIF',
   896	    sens: 'DEBITEUR',
   897	    utilisation: 'FACULTATIF',
   898	  },
   899	  {
   900	    numero: '246',
   901	    libelle: 'Immobilisations animales et agricoles',
   902	    classe: 2,
   903	    sousClasse: '24',
   904	    nature: 'ACTIF',
   905	    sens: 'DEBITEUR',
   906	    utilisation: 'FACULTATIF',
   907	  },
   908	  {
   909	    numero: '2461',
   910	    libelle: 'Cheptel, animaux de trait',
   911	    classe: 2,
   912	    sousClasse: '246',
   913	    nature: 'ACTIF',
   914	    sens: 'DEBITEUR',
   915	    utilisation: 'FACULTATIF',
   916	  },
   917	  {
   918	    numero: '2462',
   919	    libelle: 'Cheptel, animaux reproducteurs',
   920	    classe: 2,
   921	    sousClasse: '246',
   922	    nature: 'ACTIF',
   923	    sens: 'DEBITEUR',
   924	    utilisation: 'FACULTATIF',
   925	  },
   926	  {
   927	    numero: '2468',
   928	    libelle: 'Autres immobilisations animales et agricoles',
   929	    classe: 2,
   930	    sousClasse: '246',
   931	    nature: 'ACTIF',
   932	    sens: 'DEBITEUR',
   933	    utilisation: 'FACULTATIF',
   934	  },
   935	  {
   936	    numero: '248',
   937	    libelle: 'Autres mat√©riels',
   938	    classe: 2,
   939	    sousClasse: '24',
   940	    nature: 'ACTIF',
   941	    sens: 'DEBITEUR',
   942	    utilisation: 'FACULTATIF',
   943	  },
   944	  {
   945	    numero: '2481',
   946	    libelle: "Collections et oeuvres d'art",
   947	    classe: 2,
   948	    sousClasse: '248',
   949	    nature: 'ACTIF',
   950	    sens: 'DEBITEUR',
   951	    utilisation: 'FACULTATIF',
   952	  },
   953	  {
   954	    numero: '2488',
   955	    libelle: 'Divers mat√©riels',
   956	    classe: 2,
   957	    sousClasse: '248',
   958	    nature: 'ACTIF',
   959	    sens: 'DEBITEUR',
   960	    utilisation: 'FACULTATIF',
   961	  },
   962	  {
   963	    numero: '249',
   964	    libelle: 'Mat√©riel en cours',
   965	    classe: 2,
   966	    sousClasse: '24',
   967	    nature: 'ACTIF',
   968	    sens: 'DEBITEUR',
   969	    utilisation: 'FACULTATIF',
   970	  },
   971	
   972	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   973	  // 25 - AVANCES ET ACOMPTES VERSES SUR IMMOBILISATIONS
   974	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   975	  {
   976	    numero: '25',
   977	    libelle: 'Avances et acomptes vers√©s sur immobilisations',
   978	    classe: 2,
   979	    nature: 'ACTIF',
   980	    sens: 'DEBITEUR',
   981	    utilisation: 'FACULTATIF',
   982	  },
   983	  {
   984	    numero: '251',
   985	    libelle: 'Avances et acomptes sur immobilisations incorporelles',
   986	    classe: 2,
   987	    sousClasse: '25',
   988	    nature: 'ACTIF',
   989	    sens: 'DEBITEUR',
   990	    utilisation: 'FACULTATIF',
   991	  },
   992	  {
   993	    numero: '252',
   994	    libelle: 'Avances et acomptes sur immobilisations corporelles',
   995	    classe: 2,
   996	    sousClasse: '25',
   997	    nature: 'ACTIF',
   998	    sens: 'DEBITEUR',
   999	    utilisation: 'FACULTATIF',
  1000	  },
  1001	
  1002	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1003	  // 26 - TITRES DE PARTICIPATION
  1004	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1005	  {
  1006	    numero: '26',
  1007	    libelle: 'Titres de participation',
  1008	    classe: 2,
  1009	    nature: 'ACTIF',
  1010	    sens: 'DEBITEUR',
  1011	    utilisation: 'FACULTATIF',
  1012	  },
  1013	  {
  1014	    numero: '261',
  1015	    libelle: 'Titres de participation dans des soci√©t√©s',
  1016	    classe: 2,
  1017	    sousClasse: '26',
  1018	    nature: 'ACTIF',
  1019	    sens: 'DEBITEUR',
  1020	    utilisation: 'FACULTATIF',
  1021	  },
  1022	  {
  1023	    numero: '2611',
  1024	    libelle: 'Actions',
  1025	    classe: 2,
  1026	    sousClasse: '261',
  1027	    nature: 'ACTIF',
  1028	    sens: 'DEBITEUR',
  1029	    utilisation: 'FACULTATIF',
  1030	  },
  1031	  {
  1032	    numero: '2612',
  1033	    libelle: 'Parts sociales',
  1034	    classe: 2,
  1035	    sousClasse: '261',
  1036	    nature: 'ACTIF',
  1037	    sens: 'DEBITEUR',
  1038	    utilisation: 'FACULTATIF',
  1039	  },
  1040	  {
  1041	    numero: '2618',
  1042	    libelle: 'Autres titres',
  1043	    classe: 2,
  1044	    sousClasse: '261',
  1045	    nature: 'ACTIF',
  1046	    sens: 'DEBITEUR',
  1047	    utilisation: 'FACULTATIF',
  1048	  },
  1049	  {
  1050	    numero: '262',
  1051	    libelle: 'Titres de participation dans des organismes',
  1052	    classe: 2,
  1053	    sousClasse: '26',
  1054	    nature: 'ACTIF',
  1055	    sens: 'DEBITEUR',
  1056	    utilisation: 'FACULTATIF',
  1057	  },
  1058	  {
  1059	    numero: '265',
  1060	    libelle: 'Titres de participation dans des entit√©s du groupe',
  1061	    classe: 2,
  1062	    sousClasse: '26',
  1063	    nature: 'ACTIF',
  1064	    sens: 'DEBITEUR',
  1065	    utilisation: 'FACULTATIF',
  1066	  },
  1067	  {
  1068	    numero: '266',
  1069	    libelle: 'Autres formes de participation',
  1070	    classe: 2,
  1071	    sousClasse: '26',
  1072	    nature: 'ACTIF',
  1073	    sens: 'DEBITEUR',
  1074	    utilisation: 'FACULTATIF',
  1075	  },
  1076	
  1077	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1078	  // 27 - AUTRES IMMOBILISATIONS FINANCIERES
  1079	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1080	  {
  1081	    numero: '27',
  1082	    libelle: 'Autres immobilisations financi√®res',
  1083	    classe: 2,
  1084	    nature: 'ACTIF',
  1085	    sens: 'DEBITEUR',
  1086	    utilisation: 'FACULTATIF',
  1087	  },
  1088	  {
  1089	    numero: '271',
  1090	    libelle: 'Pr√™ts et cr√©ances non commerciales',
  1091	    classe: 2,
  1092	    sousClasse: '27',
  1093	    nature: 'ACTIF',
  1094	    sens: 'DEBITEUR',
  1095	    utilisation: 'FACULTATIF',
  1096	  },
  1097	  {
  1098	    numero: '2711',
  1099	    libelle: 'Pr√™ts participatifs',
  1100	    classe: 2,
  1101	    sousClasse: '271',
  1102	    nature: 'ACTIF',
  1103	    sens: 'DEBITEUR',
  1104	    utilisation: 'FACULTATIF',
  1105	  },
  1106	  {
  1107	    numero: '2712',
  1108	    libelle: 'Pr√™ts aux associ√©s',
  1109	    classe: 2,
  1110	    sousClasse: '271',
  1111	    nature: 'ACTIF',
  1112	    sens: 'DEBITEUR',
  1113	    utilisation: 'FACULTATIF',
  1114	  },
  1115	  {
  1116	    numero: '2713',
  1117	    libelle: 'Billets de fonds',
  1118	    classe: 2,
  1119	    sousClasse: '271',
  1120	    nature: 'ACTIF',
  1121	    sens: 'DEBITEUR',
  1122	    utilisation: 'FACULTATIF',
  1123	  },
  1124	  {
  1125	    numero: '2714',
  1126	    libelle: 'Pr√™ts au personnel',
  1127	    classe: 2,
  1128	    sousClasse: '271',
  1129	    nature: 'ACTIF',
  1130	    sens: 'DEBITEUR',
  1131	    utilisation: 'FACULTATIF',
  1132	  },
  1133	  {
  1134	    numero: '2718',
  1135	    libelle: 'Autres pr√™ts',
  1136	    classe: 2,
  1137	    sousClasse: '271',
  1138	    nature: 'ACTIF',
  1139	    sens: 'DEBITEUR',
  1140	    utilisation: 'FACULTATIF',
  1141	  },
  1142	  {
  1143	    numero: '272',
  1144	    libelle: 'Pr√™ts immobilis√©s',
  1145	    classe: 2,
  1146	    sousClasse: '27',
  1147	    nature: 'ACTIF',
  1148	    sens: 'DEBITEUR',
  1149	    utilisation: 'FACULTATIF',
  1150	  },
  1151	  {
  1152	    numero: '274',
  1153	    libelle: 'Titres immobilis√©s',
  1154	    classe: 2,
  1155	    sousClasse: '27',
  1156	    nature: 'ACTIF',
  1157	    sens: 'DEBITEUR',
  1158	    utilisation: 'FACULTATIF',
  1159	  },
  1160	  {
  1161	    numero: '2741',
  1162	    libelle: 'Titres immobilis√©s (droit de propri√©t√©)',
  1163	    classe: 2,
  1164	    sousClasse: '274',
  1165	    nature: 'ACTIF',
  1166	    sens: 'DEBITEUR',
  1167	    utilisation: 'FACULTATIF',
  1168	  },
  1169	  {
  1170	    numero: '2742',
  1171	    libelle: 'Titres immobilis√©s (droit de cr√©ance)',
  1172	    classe: 2,
  1173	    sousClasse: '274',
  1174	    nature: 'ACTIF',
  1175	    sens: 'DEBITEUR',
  1176	    utilisation: 'FACULTATIF',
  1177	  },
  1178	  {
  1179	    numero: '2748',
  1180	    libelle: 'Autres titres immobilis√©s',
  1181	    classe: 2,
  1182	    sousClasse: '274',
  1183	    nature: 'ACTIF',
  1184	    sens: 'DEBITEUR',
  1185	    utilisation: 'FACULTATIF',
  1186	  },
  1187	  {
  1188	    numero: '275',
  1189	    libelle: 'D√©p√¥ts et cautionnements vers√©s',
  1190	    classe: 2,
  1191	    sousClasse: '27',
  1192	    nature: 'ACTIF',
  1193	    sens: 'DEBITEUR',
  1194	    utilisation: 'FACULTATIF',
  1195	  },
  1196	  {
  1197	    numero: '2751',
  1198	    libelle: 'D√©p√¥ts',
  1199	    classe: 2,
  1200	    sousClasse: '275',
  1201	    nature: 'ACTIF',
  1202	    sens: 'DEBITEUR',
  1203	    utilisation: 'FACULTATIF',
  1204	  },
  1205	  {
  1206	    numero: '2752',
  1207	    libelle: 'Cautionnements',
  1208	    classe: 2,
  1209	    sousClasse: '275',
  1210	    nature: 'ACTIF',
  1211	    sens: 'DEBITEUR',
  1212	    utilisation: 'FACULTATIF',
  1213	  },
  1214	  {
  1215	    numero: '276',
  1216	    libelle: 'Int√©r√™ts courus',
  1217	    classe: 2,
  1218	    sousClasse: '27',
  1219	    nature: 'ACTIF',
  1220	    sens: 'DEBITEUR',
  1221	    utilisation: 'FACULTATIF',
  1222	  },
  1223	  {
  1224	    numero: '2761',
  1225	    libelle: 'Int√©r√™ts courus sur pr√™ts',
  1226	    classe: 2,
  1227	    sousClasse: '276',
  1228	    nature: 'ACTIF',
  1229	    sens: 'DEBITEUR',
  1230	    utilisation: 'FACULTATIF',
  1231	  },
  1232	  {
  1233	    numero: '2762',
  1234	    libelle: 'Int√©r√™ts courus sur titres immobilis√©s',
  1235	    classe: 2,
  1236	    sousClasse: '276',
  1237	    nature: 'ACTIF',
  1238	    sens: 'DEBITEUR',
  1239	    utilisation: 'FACULTATIF',
  1240	  },
  1241	  {
  1242	    numero: '2768',
  1243	    libelle: 'Int√©r√™ts courus sur cr√©ances diverses',
  1244	    classe: 2,
  1245	    sousClasse: '276',
  1246	    nature: 'ACTIF',
  1247	    sens: 'DEBITEUR',
  1248	    utilisation: 'FACULTATIF',
  1249	  },
  1250	  {
  1251	    numero: '277',
  1252	    libelle: 'Cr√©ances rattach√©es √† des participations',
  1253	    classe: 2,
  1254	    sousClasse: '27',
  1255	    nature: 'ACTIF',
  1256	    sens: 'DEBITEUR',
  1257	    utilisation: 'FACULTATIF',
  1258	  },
  1259	  {
  1260	    numero: '278',
  1261	    libelle: 'Cr√©ances financi√®res diverses',
  1262	    classe: 2,
  1263	    sousClasse: '27',
  1264	    nature: 'ACTIF',
  1265	    sens: 'DEBITEUR',
  1266	    utilisation: 'FACULTATIF',
  1267	  },
  1268	
  1269	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1270	  // 28 - AMORTISSEMENTS
  1271	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1272	  {
  1273	    numero: '28',
  1274	    libelle: 'Amortissements',
  1275	    classe: 2,
  1276	    nature: 'ACTIF',
  1277	    sens: 'CREDITEUR',
  1278	    utilisation: 'OBLIGATOIRE',
  1279	  },
  1280	  {
  1281	    numero: '281',
  1282	    libelle: 'Amortissements des charges immobilis√©es',
  1283	    classe: 2,
  1284	    sousClasse: '28',
  1285	    nature: 'ACTIF',
  1286	    sens: 'CREDITEUR',
  1287	    utilisation: 'FACULTATIF',
  1288	  },
  1289	  {
  1290	    numero: '2811',
  1291	    libelle: "Amortissements des frais d'√©tablissement",
  1292	    classe: 2,
  1293	    sousClasse: '281',
  1294	    nature: 'ACTIF',
  1295	    sens: 'CREDITEUR',
  1296	    utilisation: 'FACULTATIF',
  1297	  },
  1298	  {
  1299	    numero: '2812',
  1300	    libelle: 'Amortissements des charges √† r√©partir',
  1301	    classe: 2,
  1302	    sousClasse: '281',
  1303	    nature: 'ACTIF',
  1304	    sens: 'CREDITEUR',
  1305	    utilisation: 'FACULTATIF',
  1306	  },
  1307	  {
  1308	    numero: '2816',
  1309	    libelle: 'Amortissements des primes de remboursement',
  1310	    classe: 2,
  1311	    sousClasse: '281',
  1312	    nature: 'ACTIF',
  1313	    sens: 'CREDITEUR',
  1314	    utilisation: 'FACULTATIF',
  1315	  },
  1316	  {
  1317	    numero: '282',
  1318	    libelle: 'Amortissements des immobilisations incorporelles',
  1319	    classe: 2,
  1320	    sousClasse: '28',
  1321	    nature: 'ACTIF',
  1322	    sens: 'CREDITEUR',
  1323	    utilisation: 'FACULTATIF',
  1324	  },
  1325	  {
  1326	    numero: '2821',
  1327	    libelle: 'Amortissements des frais de d√©veloppement',
  1328	    classe: 2,
  1329	    sousClasse: '282',
  1330	    nature: 'ACTIF',
  1331	    sens: 'CREDITEUR',
  1332	    utilisation: 'FACULTATIF',
  1333	  },
  1334	  {
  1335	    numero: '2822',
  1336	    libelle: 'Amortissements des brevets, licences',
  1337	    classe: 2,
  1338	    sousClasse: '282',
  1339	    nature: 'ACTIF',
  1340	    sens: 'CREDITEUR',
  1341	    utilisation: 'FACULTATIF',
  1342	  },
  1343	  {
  1344	    numero: '2823',
  1345	    libelle: 'Amortissements des logiciels',
  1346	    classe: 2,
  1347	    sousClasse: '282',
  1348	    nature: 'ACTIF',
  1349	    sens: 'CREDITEUR',
  1350	    utilisation: 'FACULTATIF',
  1351	  },
  1352	  {
  1353	    numero: '2828',
  1354	    libelle: 'Amortissements des autres immobilisations incorporelles',
  1355	    classe: 2,
  1356	    sousClasse: '282',
  1357	    nature: 'ACTIF',
  1358	    sens: 'CREDITEUR',
  1359	    utilisation: 'FACULTATIF',
  1360	  },
  1361	  {
  1362	    numero: '283',
  1363	    libelle: 'Amortissements des terrains',
  1364	    classe: 2,
  1365	    sousClasse: '28',
  1366	    nature: 'ACTIF',
  1367	    sens: 'CREDITEUR',
  1368	    utilisation: 'FACULTATIF',
  1369	  },
  1370	  {
  1371	    numero: '284',
  1372	    libelle: 'Amortissements des b√¢timents et installations',
  1373	    classe: 2,
  1374	    sousClasse: '28',
  1375	    nature: 'ACTIF',
  1376	    sens: 'CREDITEUR',
  1377	    utilisation: 'OBLIGATOIRE',
  1378	  },
  1379	  {
  1380	    numero: '2841',
  1381	    libelle: 'Amortissements des b√¢timents',
  1382	    classe: 2,
  1383	    sousClasse: '284',
  1384	    nature: 'ACTIF',
  1385	    sens: 'CREDITEUR',
  1386	    utilisation: 'OBLIGATOIRE',
  1387	  },
  1388	  {
  1389	    numero: '2842',
  1390	    libelle: "Amortissements des ouvrages d'infrastructure",
  1391	    classe: 2,
  1392	    sousClasse: '284',
  1393	    nature: 'ACTIF',
  1394	    sens: 'CREDITEUR',
  1395	    utilisation: 'FACULTATIF',
  1396	  },
  1397	  {
  1398	    numero: '2843',
  1399	    libelle: 'Amortissements des installations techniques',
  1400	    classe: 2,
  1401	    sousClasse: '284',
  1402	    nature: 'ACTIF',
  1403	    sens: 'CREDITEUR',
  1404	    utilisation: 'OBLIGATOIRE',
  1405	  },
  1406	  {
  1407	    numero: '2844',
  1408	    libelle: 'Amortissements des am√©nagements de bureaux',
  1409	    classe: 2,
  1410	    sousClasse: '284',
  1411	    nature: 'ACTIF',
  1412	    sens: 'CREDITEUR',
  1413	    utilisation: 'OBLIGATOIRE',
  1414	  },
  1415	  {
  1416	    numero: '2845',
  1417	    libelle: 'Amortissements des am√©nagements, agencements',
  1418	    classe: 2,
  1419	    sousClasse: '284',
  1420	    nature: 'ACTIF',
  1421	    sens: 'CREDITEUR',
  1422	    utilisation: 'FACULTATIF',
  1423	  },
  1424	  {
  1425	    numero: '2848',
  1426	    libelle: 'Amortissements des autres b√¢timents',
  1427	    classe: 2,
  1428	    sousClasse: '284',
  1429	    nature: 'ACTIF',
  1430	    sens: 'CREDITEUR',
  1431	    utilisation: 'FACULTATIF',
  1432	  },
  1433	  {
  1434	    numero: '285',
  1435	    libelle: 'Amortissements du mat√©riel',
  1436	    classe: 2,
  1437	    sousClasse: '28',
  1438	    nature: 'ACTIF',
  1439	    sens: 'CREDITEUR',
  1440	    utilisation: 'OBLIGATOIRE',
  1441	  },
  1442	  {
  1443	    numero: '2851',
  1444	    libelle: 'Amortissements du mat√©riel et outillage',
  1445	    classe: 2,
  1446	    sousClasse: '285',
  1447	    nature: 'ACTIF',
  1448	    sens: 'CREDITEUR',
  1449	    utilisation: 'OBLIGATOIRE',
  1450	  },
  1451	  {
  1452	    numero: '2852',
  1453	    libelle: 'Amortissements du mat√©riel agricole',
  1454	    classe: 2,
  1455	    sousClasse: '285',
  1456	    nature: 'ACTIF',
  1457	    sens: 'CREDITEUR',
  1458	    utilisation: 'FACULTATIF',
  1459	  },
  1460	  {
  1461	    numero: '2853',
  1462	    libelle: "Amortissements du mat√©riel d'emballage",
  1463	    classe: 2,
  1464	    sousClasse: '285',
  1465	    nature: 'ACTIF',
  1466	    sens: 'CREDITEUR',
  1467	    utilisation: 'FACULTATIF',
  1468	  },
  1469	  {
  1470	    numero: '2854',
  1471	    libelle: 'Amortissements du mat√©riel et mobilier de bureau',
  1472	    classe: 2,
  1473	    sousClasse: '285',
  1474	    nature: 'ACTIF',
  1475	    sens: 'CREDITEUR',
  1476	    utilisation: 'OBLIGATOIRE',
  1477	  },
  1478	  {
  1479	    numero: '2855',
  1480	    libelle: 'Amortissements du mat√©riel de transport',
  1481	    classe: 2,
  1482	    sousClasse: '285',
  1483	    nature: 'ACTIF',
  1484	    sens: 'CREDITEUR',
  1485	    utilisation: 'OBLIGATOIRE',
  1486	  },
  1487	  {
  1488	    numero: '2856',
  1489	    libelle: 'Amortissements des immobilisations animales',
  1490	    classe: 2,
  1491	    sousClasse: '285',
  1492	    nature: 'ACTIF',
  1493	    sens: 'CREDITEUR',
  1494	    utilisation: 'FACULTATIF',
  1495	  },
  1496	  {
  1497	    numero: '2858',
  1498	    libelle: 'Amortissements des autres mat√©riels',
  1499	    classe: 2,
  1500	    sousClasse: '285',
  1501	    nature: 'ACTIF',
  1502	    sens: 'CREDITEUR',
  1503	    utilisation: 'FACULTATIF',
  1504	  },
  1505	
  1506	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1507	  // 29 - PROVISIONS POUR DEPRECIATION DES IMMOBILISATIONS
  1508	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1509	  {
  1510	    numero: '29',
  1511	    libelle: 'Provisions pour d√©pr√©ciation des immobilisations',
  1512	    classe: 2,
  1513	    nature: 'ACTIF',
  1514	    sens: 'CREDITEUR',
  1515	    utilisation: 'FACULTATIF',
  1516	  },
  1517	  {
  1518	    numero: '291',
  1519	    libelle: 'Provisions pour d√©pr√©ciation des immobilisations incorporelles',
  1520	    classe: 2,
  1521	    sousClasse: '29',
  1522	    nature: 'ACTIF',
  1523	    sens: 'CREDITEUR',
  1524	    utilisation: 'FACULTATIF',
  1525	  },
  1526	  {
  1527	    numero: '292',
  1528	    libelle: 'Provisions pour d√©pr√©ciation des terrains',
  1529	    classe: 2,
  1530	    sousClasse: '29',
  1531	    nature: 'ACTIF',
  1532	    sens: 'CREDITEUR',
  1533	    utilisation: 'FACULTATIF',
  1534	  },
  1535	  {
  1536	    numero: '293',
  1537	    libelle: 'Provisions pour d√©pr√©ciation des b√¢timents',
  1538	    classe: 2,
  1539	    sousClasse: '29',
  1540	    nature: 'ACTIF',
  1541	    sens: 'CREDITEUR',
  1542	    utilisation: 'FACULTATIF',
  1543	  },
  1544	  {
  1545	    numero: '294',
  1546	    libelle: 'Provisions pour d√©pr√©ciation du mat√©riel',
  1547	    classe: 2,
  1548	    sousClasse: '29',
  1549	    nature: 'ACTIF',
  1550	    sens: 'CREDITEUR',
  1551	    utilisation: 'FACULTATIF',
  1552	  },
  1553	  {
  1554	    numero: '295',
  1555	    libelle: 'Provisions pour d√©pr√©ciation des avances et acomptes',
  1556	    classe: 2,
  1557	    sousClasse: '29',
  1558	    nature: 'ACTIF',
  1559	    sens: 'CREDITEUR',
  1560	    utilisation: 'FACULTATIF',
  1561	  },
  1562	  {
  1563	    numero: '296',
  1564	    libelle: 'Provisions pour d√©pr√©ciation des titres de participation',
  1565	    classe: 2,
  1566	    sousClasse: '29',
  1567	    nature: 'ACTIF',
  1568	    sens: 'CREDITEUR',
  1569	    utilisation: 'FACULTATIF',
  1570	  },
  1571	  {
  1572	    numero: '297',
  1573	    libelle: 'Provisions pour d√©pr√©ciation des autres immobilisations financi√®res',
  1574	    classe: 2,
  1575	    sousClasse: '29',
  1576	    nature: 'ACTIF',
  1577	    sens: 'CREDITEUR',
  1578	    utilisation: 'FACULTATIF',
  1579	  },
  1580	]

================================================================================
FILE: src/data/syscohada/plan/classe3.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 3 - COMPTES DE STOCKS
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_3_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 31 - MARCHANDISES
    10	  // ============================================================
    11	  {
    12	    numero: '31',
    13	    libelle: 'Marchandises',
    14	    classe: 3,
    15	    nature: 'ACTIF',
    16	    sens: 'DEBITEUR',
    17	    utilisation: 'OBLIGATOIRE',
    18	    secteurs: ['COMMERCE', 'DISTRIBUTION']
    19	  },
    20	  {
    21	    numero: '311',
    22	    libelle: 'Marchandises A',
    23	    classe: 3,
    24	    sousClasse: '31',
    25	    nature: 'ACTIF',
    26	    sens: 'DEBITEUR',
    27	    utilisation: 'OBLIGATOIRE'
    28	  },
    29	  {
    30	    numero: '312',
    31	    libelle: 'Marchandises B',
    32	    classe: 3,
    33	    sousClasse: '31',
    34	    nature: 'ACTIF',
    35	    sens: 'DEBITEUR',
    36	    utilisation: 'FACULTATIF'
    37	  },
    38	  {
    39	    numero: '313',
    40	    libelle: 'Marchandises C',
    41	    classe: 3,
    42	    sousClasse: '31',
    43	    nature: 'ACTIF',
    44	    sens: 'DEBITEUR',
    45	    utilisation: 'FACULTATIF'
    46	  },
    47	  {
    48	    numero: '318',
    49	    libelle: 'Autres marchandises',
    50	    classe: 3,
    51	    sousClasse: '31',
    52	    nature: 'ACTIF',
    53	    sens: 'DEBITEUR',
    54	    utilisation: 'FACULTATIF'
    55	  },
    56	
    57	  // ============================================================
    58	  // 32 - MATIERES PREMIERES ET FOURNITURES LIEES
    59	  // ============================================================
    60	  {
    61	    numero: '32',
    62	    libelle: 'Mati√®res premi√®res et fournitures li√©es',
    63	    classe: 3,
    64	    nature: 'ACTIF',
    65	    sens: 'DEBITEUR',
    66	    utilisation: 'OBLIGATOIRE',
    67	    secteurs: ['INDUSTRIE', 'PRODUCTION']
    68	  },
    69	  {
    70	    numero: '321',
    71	    libelle: 'Mati√®res premi√®res',
    72	    classe: 3,
    73	    sousClasse: '32',
    74	    nature: 'ACTIF',
    75	    sens: 'DEBITEUR',
    76	    utilisation: 'OBLIGATOIRE'
    77	  },
    78	  {
    79	    numero: '322',
    80	    libelle: 'Mati√®res et fournitures consommables',
    81	    classe: 3,
    82	    sousClasse: '32',
    83	    nature: 'ACTIF',
    84	    sens: 'DEBITEUR',
    85	    utilisation: 'OBLIGATOIRE'
    86	  },
    87	  {
    88	    numero: '3221',
    89	    libelle: 'Combustibles',
    90	    classe: 3,
    91	    sousClasse: '322',
    92	    nature: 'ACTIF',
    93	    sens: 'DEBITEUR',
    94	    utilisation: 'FACULTATIF'
    95	  },
    96	  {
    97	    numero: '3222',
    98	    libelle: "Produits d'entretien",
    99	    classe: 3,
   100	    sousClasse: '322',
   101	    nature: 'ACTIF',
   102	    sens: 'DEBITEUR',
   103	    utilisation: 'FACULTATIF'
   104	  },
   105	  {
   106	    numero: '3223',
   107	    libelle: "Fournitures d'atelier et d'usine",
   108	    classe: 3,
   109	    sousClasse: '322',
   110	    nature: 'ACTIF',
   111	    sens: 'DEBITEUR',
   112	    utilisation: 'FACULTATIF'
   113	  },
   114	  {
   115	    numero: '3224',
   116	    libelle: 'Fournitures de magasin',
   117	    classe: 3,
   118	    sousClasse: '322',
   119	    nature: 'ACTIF',
   120	    sens: 'DEBITEUR',
   121	    utilisation: 'FACULTATIF'
   122	  },
   123	  {
   124	    numero: '3225',
   125	    libelle: 'Fournitures de bureau',
   126	    classe: 3,
   127	    sousClasse: '322',
   128	    nature: 'ACTIF',
   129	    sens: 'DEBITEUR',
   130	    utilisation: 'FACULTATIF'
   131	  },
   132	  {
   133	    numero: '323',
   134	    libelle: 'Emballages',
   135	    classe: 3,
   136	    sousClasse: '32',
   137	    nature: 'ACTIF',
   138	    sens: 'DEBITEUR',
   139	    utilisation: 'FACULTATIF'
   140	  },
   141	  {
   142	    numero: '3231',
   143	    libelle: 'Emballages perdus',
   144	    classe: 3,
   145	    sousClasse: '323',
   146	    nature: 'ACTIF',
   147	    sens: 'DEBITEUR',
   148	    utilisation: 'FACULTATIF'
   149	  },
   150	  {
   151	    numero: '3232',
   152	    libelle: 'Emballages r√©cup√©rables non identifiables',
   153	    classe: 3,
   154	    sousClasse: '323',
   155	    nature: 'ACTIF',
   156	    sens: 'DEBITEUR',
   157	    utilisation: 'FACULTATIF'
   158	  },
   159	  {
   160	    numero: '3233',
   161	    libelle: 'Emballages √† usage mixte',
   162	    classe: 3,
   163	    sousClasse: '323',
   164	    nature: 'ACTIF',
   165	    sens: 'DEBITEUR',
   166	    utilisation: 'FACULTATIF'
   167	  },
   168	
   169	  // ============================================================
   170	  // 33 - AUTRES APPROVISIONNEMENTS
   171	  // ============================================================
   172	  {
   173	    numero: '33',
   174	    libelle: 'Autres approvisionnements',
   175	    classe: 3,
   176	    nature: 'ACTIF',
   177	    sens: 'DEBITEUR',
   178	    utilisation: 'FACULTATIF'
   179	  },
   180	  {
   181	    numero: '331',
   182	    libelle: 'Mati√®res consommables',
   183	    classe: 3,
   184	    sousClasse: '33',
   185	    nature: 'ACTIF',
   186	    sens: 'DEBITEUR',
   187	    utilisation: 'FACULTATIF'
   188	  },
   189	  {
   190	    numero: '332',
   191	    libelle: 'Fournitures consommables',
   192	    classe: 3,
   193	    sousClasse: '33',
   194	    nature: 'ACTIF',
   195	    sens: 'DEBITEUR',
   196	    utilisation: 'FACULTATIF'
   197	  },
   198	  {
   199	    numero: '3321',
   200	    libelle: 'Combustibles',
   201	    classe: 3,
   202	    sousClasse: '332',
   203	    nature: 'ACTIF',
   204	    sens: 'DEBITEUR',
   205	    utilisation: 'FACULTATIF'
   206	  },
   207	  {
   208	    numero: '3322',
   209	    libelle: "Produits d'entretien",
   210	    classe: 3,
   211	    sousClasse: '332',
   212	    nature: 'ACTIF',
   213	    sens: 'DEBITEUR',
   214	    utilisation: 'FACULTATIF'
   215	  },
   216	  {
   217	    numero: '3323',
   218	    libelle: "Fournitures d'atelier et d'usine",
   219	    classe: 3,
   220	    sousClasse: '332',
   221	    nature: 'ACTIF',
   222	    sens: 'DEBITEUR',
   223	    utilisation: 'FACULTATIF'
   224	  },
   225	  {
   226	    numero: '3324',
   227	    libelle: 'Fournitures de magasin',
   228	    classe: 3,
   229	    sousClasse: '332',
   230	    nature: 'ACTIF',
   231	    sens: 'DEBITEUR',
   232	    utilisation: 'FACULTATIF'
   233	  },
   234	  {
   235	    numero: '3325',
   236	    libelle: 'Fournitures de bureau',
   237	    classe: 3,
   238	    sousClasse: '332',
   239	    nature: 'ACTIF',
   240	    sens: 'DEBITEUR',
   241	    utilisation: 'FACULTATIF'
   242	  },
   243	  {
   244	    numero: '333',
   245	    libelle: 'Emballages',
   246	    classe: 3,
   247	    sousClasse: '33',
   248	    nature: 'ACTIF',
   249	    sens: 'DEBITEUR',
   250	    utilisation: 'FACULTATIF'
   251	  },
   252	  {
   253	    numero: '3331',
   254	    libelle: 'Emballages perdus',
   255	    classe: 3,
   256	    sousClasse: '333',
   257	    nature: 'ACTIF',
   258	    sens: 'DEBITEUR',
   259	    utilisation: 'FACULTATIF'
   260	  },
   261	  {
   262	    numero: '3332',
   263	    libelle: 'Emballages r√©cup√©rables non identifiables',
   264	    classe: 3,
   265	    sousClasse: '333',
   266	    nature: 'ACTIF',
   267	    sens: 'DEBITEUR',
   268	    utilisation: 'FACULTATIF'
   269	  },
   270	  {
   271	    numero: '3333',
   272	    libelle: 'Emballages √† usage mixte',
   273	    classe: 3,
   274	    sousClasse: '333',
   275	    nature: 'ACTIF',
   276	    sens: 'DEBITEUR',
   277	    utilisation: 'FACULTATIF'
   278	  },
   279	
   280	  // ============================================================
   281	  // 34 - PRODUITS EN COURS
   282	  // ============================================================
   283	  {
   284	    numero: '34',
   285	    libelle: 'Produits en cours',
   286	    classe: 3,
   287	    nature: 'ACTIF',
   288	    sens: 'DEBITEUR',
   289	    utilisation: 'FACULTATIF',
   290	    secteurs: ['INDUSTRIE', 'PRODUCTION']
   291	  },
   292	  {
   293	    numero: '341',
   294	    libelle: 'Produits en cours',
   295	    classe: 3,
   296	    sousClasse: '34',
   297	    nature: 'ACTIF',
   298	    sens: 'DEBITEUR',
   299	    utilisation: 'FACULTATIF'
   300	  },
   301	  {
   302	    numero: '342',
   303	    libelle: 'Travaux en cours',
   304	    classe: 3,
   305	    sousClasse: '34',
   306	    nature: 'ACTIF',
   307	    sens: 'DEBITEUR',
   308	    utilisation: 'FACULTATIF'
   309	  },
   310	  {
   311	    numero: '343',
   312	    libelle: 'Produits interm√©diaires en cours',
   313	    classe: 3,
   314	    sousClasse: '34',
   315	    nature: 'ACTIF',
   316	    sens: 'DEBITEUR',
   317	    utilisation: 'FACULTATIF'
   318	  },
   319	  {
   320	    numero: '344',
   321	    libelle: 'Produits r√©siduels en cours',
   322	    classe: 3,
   323	    sousClasse: '34',
   324	    nature: 'ACTIF',
   325	    sens: 'DEBITEUR',
   326	    utilisation: 'FACULTATIF'
   327	  },
   328	
   329	  // ============================================================
   330	  // 35 - SERVICES EN COURS
   331	  // ============================================================
   332	  {
   333	    numero: '35',
   334	    libelle: 'Services en cours',
   335	    classe: 3,
   336	    nature: 'ACTIF',
   337	    sens: 'DEBITEUR',
   338	    utilisation: 'FACULTATIF',
   339	    secteurs: ['SERVICES']
   340	  },
   341	  {
   342	    numero: '351',
   343	    libelle: '√âtudes en cours',
   344	    classe: 3,
   345	    sousClasse: '35',
   346	    nature: 'ACTIF',
   347	    sens: 'DEBITEUR',
   348	    utilisation: 'FACULTATIF'
   349	  },
   350	  {
   351	    numero: '352',
   352	    libelle: 'Prestations de services en cours',
   353	    classe: 3,
   354	    sousClasse: '35',
   355	    nature: 'ACTIF',
   356	    sens: 'DEBITEUR',
   357	    utilisation: 'FACULTATIF'
   358	  },
   359	
   360	  // ============================================================
   361	  // 36 - PRODUITS FINIS
   362	  // ============================================================
   363	  {
   364	    numero: '36',
   365	    libelle: 'Produits finis',
   366	    classe: 3,
   367	    nature: 'ACTIF',
   368	    sens: 'DEBITEUR',
   369	    utilisation: 'OBLIGATOIRE',
   370	    secteurs: ['INDUSTRIE', 'PRODUCTION']
   371	  },
   372	  {
   373	    numero: '361',
   374	    libelle: 'Produits finis A',
   375	    classe: 3,
   376	    sousClasse: '36',
   377	    nature: 'ACTIF',
   378	    sens: 'DEBITEUR',
   379	    utilisation: 'OBLIGATOIRE'
   380	  },
   381	  {
   382	    numero: '362',
   383	    libelle: 'Produits finis B',
   384	    classe: 3,
   385	    sousClasse: '36',
   386	    nature: 'ACTIF',
   387	    sens: 'DEBITEUR',
   388	    utilisation: 'FACULTATIF'
   389	  },
   390	  {
   391	    numero: '363',
   392	    libelle: 'Produits finis C',
   393	    classe: 3,
   394	    sousClasse: '36',
   395	    nature: 'ACTIF',
   396	    sens: 'DEBITEUR',
   397	    utilisation: 'FACULTATIF'
   398	  },
   399	  {
   400	    numero: '368',
   401	    libelle: 'Autres produits finis',
   402	    classe: 3,
   403	    sousClasse: '36',
   404	    nature: 'ACTIF',
   405	    sens: 'DEBITEUR',
   406	    utilisation: 'FACULTATIF'
   407	  },
   408	
   409	  // ============================================================
   410	  // 37 - PRODUITS INTERMEDIAIRES ET RESIDUELS
   411	  // ============================================================
   412	  {
   413	    numero: '37',
   414	    libelle: 'Produits interm√©diaires et r√©siduels',
   415	    classe: 3,
   416	    nature: 'ACTIF',
   417	    sens: 'DEBITEUR',
   418	    utilisation: 'FACULTATIF'
   419	  },
   420	  {
   421	    numero: '371',
   422	    libelle: 'Produits interm√©diaires',
   423	    classe: 3,
   424	    sousClasse: '37',
   425	    nature: 'ACTIF',
   426	    sens: 'DEBITEUR',
   427	    utilisation: 'FACULTATIF'
   428	  },
   429	  {
   430	    numero: '372',
   431	    libelle: 'Produits r√©siduels (d√©chets, rebuts)',
   432	    classe: 3,
   433	    sousClasse: '37',
   434	    nature: 'ACTIF',
   435	    sens: 'DEBITEUR',
   436	    utilisation: 'FACULTATIF'
   437	  },
   438	
   439	  // ============================================================
   440	  // 38 - STOCKS EN COURS DE ROUTE, EN CONSIGNATION OU EN DEPOT
   441	  // ============================================================
   442	  {
   443	    numero: '38',
   444	    libelle: 'Stocks en cours de route, en consignation ou en d√©p√¥t',
   445	    classe: 3,
   446	    nature: 'ACTIF',
   447	    sens: 'DEBITEUR',
   448	    utilisation: 'FACULTATIF'
   449	  },
   450	  {
   451	    numero: '381',
   452	    libelle: 'Stocks en cours de route',
   453	    classe: 3,
   454	    sousClasse: '38',
   455	    nature: 'ACTIF',
   456	    sens: 'DEBITEUR',
   457	    utilisation: 'FACULTATIF'
   458	  },
   459	  {
   460	    numero: '382',
   461	    libelle: 'Stocks en consignation ou en d√©p√¥t',
   462	    classe: 3,
   463	    sousClasse: '38',
   464	    nature: 'ACTIF',
   465	    sens: 'DEBITEUR',
   466	    utilisation: 'FACULTATIF'
   467	  },
   468	  {
   469	    numero: '383',
   470	    libelle: "Stocks provenant d'immobilisations mises hors service",
   471	    classe: 3,
   472	    sousClasse: '38',
   473	    nature: 'ACTIF',
   474	    sens: 'DEBITEUR',
   475	    utilisation: 'FACULTATIF'
   476	  },
   477	
   478	  // ============================================================
   479	  // 39 - DEPRECIATIONS DES STOCKS
   480	  // ============================================================
   481	  {
   482	    numero: '39',
   483	    libelle: 'D√©pr√©ciations des stocks',
   484	    classe: 3,
   485	    nature: 'ACTIF',
   486	    sens: 'CREDITEUR',
   487	    utilisation: 'FACULTATIF'
   488	  },
   489	  {
   490	    numero: '391',
   491	    libelle: 'D√©pr√©ciations des marchandises',
   492	    classe: 3,
   493	    sousClasse: '39',
   494	    nature: 'ACTIF',
   495	    sens: 'CREDITEUR',
   496	    utilisation: 'FACULTATIF'
   497	  },
   498	  {
   499	    numero: '392',
   500	    libelle: 'D√©pr√©ciations des mati√®res premi√®res',
   501	    classe: 3,
   502	    sousClasse: '39',
   503	    nature: 'ACTIF',
   504	    sens: 'CREDITEUR',
   505	    utilisation: 'FACULTATIF'
   506	  },
   507	  {
   508	    numero: '393',
   509	    libelle: 'D√©pr√©ciations des autres approvisionnements',
   510	    classe: 3,
   511	    sousClasse: '39',
   512	    nature: 'ACTIF',
   513	    sens: 'CREDITEUR',
   514	    utilisation: 'FACULTATIF'
   515	  },
   516	  {
   517	    numero: '394',
   518	    libelle: 'D√©pr√©ciations des produits en cours',
   519	    classe: 3,
   520	    sousClasse: '39',
   521	    nature: 'ACTIF',
   522	    sens: 'CREDITEUR',
   523	    utilisation: 'FACULTATIF'
   524	  },
   525	  {
   526	    numero: '395',
   527	    libelle: 'D√©pr√©ciations des services en cours',
   528	    classe: 3,
   529	    sousClasse: '39',
   530	    nature: 'ACTIF',
   531	    sens: 'CREDITEUR',
   532	    utilisation: 'FACULTATIF'
   533	  },
   534	  {
   535	    numero: '396',
   536	    libelle: 'D√©pr√©ciations des produits finis',
   537	    classe: 3,
   538	    sousClasse: '39',
   539	    nature: 'ACTIF',
   540	    sens: 'CREDITEUR',
   541	    utilisation: 'FACULTATIF'
   542	  },
   543	  {
   544	    numero: '397',
   545	    libelle: 'D√©pr√©ciations des produits interm√©diaires et r√©siduels',
   546	    classe: 3,
   547	    sousClasse: '39',
   548	    nature: 'ACTIF',
   549	    sens: 'CREDITEUR',
   550	    utilisation: 'FACULTATIF'
   551	  },
   552	  {
   553	    numero: '398',
   554	    libelle: 'D√©pr√©ciations des stocks en cours de route',
   555	    classe: 3,
   556	    sousClasse: '39',
   557	    nature: 'ACTIF',
   558	    sens: 'CREDITEUR',
   559	    utilisation: 'FACULTATIF'
   560	  }
   561	]

================================================================================
FILE: src/data/syscohada/plan/classe4.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 4 - COMPTES DE TIERS
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_4_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 40 - FOURNISSEURS ET COMPTES RATTACHES
    10	  // ============================================================
    11	  {
    12	    numero: '40',
    13	    libelle: 'Fournisseurs et comptes rattach√©s',
    14	    classe: 4,
    15	    nature: 'PASSIF',
    16	    sens: 'CREDITEUR',
    17	    utilisation: 'OBLIGATOIRE'
    18	  },
    19	  {
    20	    numero: '401',
    21	    libelle: 'Fournisseurs, dettes en compte',
    22	    classe: 4,
    23	    sousClasse: '40',
    24	    nature: 'PASSIF',
    25	    sens: 'CREDITEUR',
    26	    utilisation: 'OBLIGATOIRE'
    27	  },
    28	  {
    29	    numero: '4011',
    30	    libelle: 'Fournisseurs locaux',
    31	    classe: 4,
    32	    sousClasse: '401',
    33	    nature: 'PASSIF',
    34	    sens: 'CREDITEUR',
    35	    utilisation: 'OBLIGATOIRE'
    36	  },
    37	  {
    38	    numero: '4012',
    39	    libelle: 'Fournisseurs groupe',
    40	    classe: 4,
    41	    sousClasse: '401',
    42	    nature: 'PASSIF',
    43	    sens: 'CREDITEUR',
    44	    utilisation: 'FACULTATIF'
    45	  },
    46	  {
    47	    numero: '4013',
    48	    libelle: 'Fournisseurs sous-traitants',
    49	    classe: 4,
    50	    sousClasse: '401',
    51	    nature: 'PASSIF',
    52	    sens: 'CREDITEUR',
    53	    utilisation: 'FACULTATIF'
    54	  },
    55	  {
    56	    numero: '4017',
    57	    libelle: 'Fournisseurs, retenues de garantie',
    58	    classe: 4,
    59	    sousClasse: '401',
    60	    nature: 'PASSIF',
    61	    sens: 'CREDITEUR',
    62	    utilisation: 'FACULTATIF'
    63	  },
    64	  {
    65	    numero: '4018',
    66	    libelle: 'Fournisseurs, factures non parvenues',
    67	    classe: 4,
    68	    sousClasse: '401',
    69	    nature: 'PASSIF',
    70	    sens: 'CREDITEUR',
    71	    utilisation: 'OBLIGATOIRE'
    72	  },
    73	  {
    74	    numero: '402',
    75	    libelle: 'Fournisseurs, effets √† payer',
    76	    classe: 4,
    77	    sousClasse: '40',
    78	    nature: 'PASSIF',
    79	    sens: 'CREDITEUR',
    80	    utilisation: 'FACULTATIF'
    81	  },
    82	  {
    83	    numero: '403',
    84	    libelle: "Fournisseurs d'immobilisations, dettes en compte",
    85	    classe: 4,
    86	    sousClasse: '40',
    87	    nature: 'PASSIF',
    88	    sens: 'CREDITEUR',
    89	    utilisation: 'FACULTATIF'
    90	  },
    91	  {
    92	    numero: '404',
    93	    libelle: "Fournisseurs d'immobilisations, effets √† payer",
    94	    classe: 4,
    95	    sousClasse: '40',
    96	    nature: 'PASSIF',
    97	    sens: 'CREDITEUR',
    98	    utilisation: 'FACULTATIF'
    99	  },
   100	  {
   101	    numero: '405',
   102	    libelle: "Fournisseurs d'investissements",
   103	    classe: 4,
   104	    sousClasse: '40',
   105	    nature: 'PASSIF',
   106	    sens: 'CREDITEUR',
   107	    utilisation: 'FACULTATIF'
   108	  },
   109	  {
   110	    numero: '408',
   111	    libelle: 'Fournisseurs, factures non parvenues',
   112	    classe: 4,
   113	    sousClasse: '40',
   114	    nature: 'PASSIF',
   115	    sens: 'CREDITEUR',
   116	    utilisation: 'OBLIGATOIRE'
   117	  },
   118	  {
   119	    numero: '4081',
   120	    libelle: 'Fournisseurs',
   121	    classe: 4,
   122	    sousClasse: '408',
   123	    nature: 'PASSIF',
   124	    sens: 'CREDITEUR',
   125	    utilisation: 'OBLIGATOIRE'
   126	  },
   127	  {
   128	    numero: '4082',
   129	    libelle: "Fournisseurs d'immobilisations",
   130	    classe: 4,
   131	    sousClasse: '408',
   132	    nature: 'PASSIF',
   133	    sens: 'CREDITEUR',
   134	    utilisation: 'FACULTATIF'
   135	  },
   136	  {
   137	    numero: '4083',
   138	    libelle: "Fournisseurs, factures non parvenues d'exploitation",
   139	    classe: 4,
   140	    sousClasse: '408',
   141	    nature: 'PASSIF',
   142	    sens: 'CREDITEUR',
   143	    utilisation: 'OBLIGATOIRE'
   144	  },
   145	  {
   146	    numero: '409',
   147	    libelle: 'Fournisseurs d√©biteurs',
   148	    classe: 4,
   149	    sousClasse: '40',
   150	    nature: 'ACTIF',
   151	    sens: 'DEBITEUR',
   152	    utilisation: 'FACULTATIF'
   153	  },
   154	  {
   155	    numero: '4091',
   156	    libelle: 'Fournisseurs, avances et acomptes vers√©s',
   157	    classe: 4,
   158	    sousClasse: '409',
   159	    nature: 'ACTIF',
   160	    sens: 'DEBITEUR',
   161	    utilisation: 'FACULTATIF'
   162	  },
   163	  {
   164	    numero: '4094',
   165	    libelle: 'Fournisseurs, cr√©ances pour emballages √† rendre',
   166	    classe: 4,
   167	    sousClasse: '409',
   168	    nature: 'ACTIF',
   169	    sens: 'DEBITEUR',
   170	    utilisation: 'FACULTATIF'
   171	  },
   172	  {
   173	    numero: '4098',
   174	    libelle: 'Rabais, remises, ristournes √† obtenir',
   175	    classe: 4,
   176	    sousClasse: '409',
   177	    nature: 'ACTIF',
   178	    sens: 'DEBITEUR',
   179	    utilisation: 'FACULTATIF'
   180	  },
   181	
   182	  // ============================================================
   183	  // 41 - CLIENTS ET COMPTES RATTACHES
   184	  // ============================================================
   185	  {
   186	    numero: '41',
   187	    libelle: 'Clients et comptes rattach√©s',
   188	    classe: 4,
   189	    nature: 'ACTIF',
   190	    sens: 'DEBITEUR',
   191	    utilisation: 'OBLIGATOIRE'
   192	  },
   193	  {
   194	    numero: '411',
   195	    libelle: 'Clients',
   196	    classe: 4,
   197	    sousClasse: '41',
   198	    nature: 'ACTIF',
   199	    sens: 'DEBITEUR',
   200	    utilisation: 'OBLIGATOIRE'
   201	  },
   202	  {
   203	    numero: '4111',
   204	    libelle: 'Clients locaux',
   205	    classe: 4,
   206	    sousClasse: '411',
   207	    nature: 'ACTIF',
   208	    sens: 'DEBITEUR',
   209	    utilisation: 'OBLIGATOIRE'
   210	  },
   211	  {
   212	    numero: '4112',
   213	    libelle: 'Clients groupe',
   214	    classe: 4,
   215	    sousClasse: '411',
   216	    nature: 'ACTIF',
   217	    sens: 'DEBITEUR',
   218	    utilisation: 'FACULTATIF'
   219	  },
   220	  {
   221	    numero: '4114',
   222	    libelle: 'Clients, √âtat et collectivit√©s publiques',
   223	    classe: 4,
   224	    sousClasse: '411',
   225	    nature: 'ACTIF',
   226	    sens: 'DEBITEUR',
   227	    utilisation: 'FACULTATIF'
   228	  },
   229	  {
   230	    numero: '4118',
   231	    libelle: 'Clients divers',
   232	    classe: 4,
   233	    sousClasse: '411',
   234	    nature: 'ACTIF',
   235	    sens: 'DEBITEUR',
   236	    utilisation: 'FACULTATIF'
   237	  },
   238	  {
   239	    numero: '412',
   240	    libelle: 'Clients, effets √† recevoir',
   241	    classe: 4,
   242	    sousClasse: '41',
   243	    nature: 'ACTIF',
   244	    sens: 'DEBITEUR',
   245	    utilisation: 'FACULTATIF'
   246	  },
   247	  {
   248	    numero: '413',
   249	    libelle: 'Clients, cr√©ances douteuses ou litigieuses',
   250	    classe: 4,
   251	    sousClasse: '41',
   252	    nature: 'ACTIF',
   253	    sens: 'DEBITEUR',
   254	    utilisation: 'FACULTATIF'
   255	  },
   256	  {
   257	    numero: '414',
   258	    libelle: "Cr√©ances sur cessions courantes d'immobilisations",
   259	    classe: 4,
   260	    sousClasse: '41',
   261	    nature: 'ACTIF',
   262	    sens: 'DEBITEUR',
   263	    utilisation: 'FACULTATIF'
   264	  },
   265	  {
   266	    numero: '415',
   267	    libelle: 'Clients, effets escompt√©s non √©chus',
   268	    classe: 4,
   269	    sousClasse: '41',
   270	    nature: 'ACTIF',
   271	    sens: 'DEBITEUR',
   272	    utilisation: 'FACULTATIF'
   273	  },
   274	  {
   275	    numero: '416',
   276	    libelle: 'Cr√©ances litigieuses',
   277	    classe: 4,
   278	    sousClasse: '41',
   279	    nature: 'ACTIF',
   280	    sens: 'DEBITEUR',
   281	    utilisation: 'FACULTATIF'
   282	  },
   283	  {
   284	    numero: '418',
   285	    libelle: 'Clients, produits non encore factur√©s',
   286	    classe: 4,
   287	    sousClasse: '41',
   288	    nature: 'ACTIF',
   289	    sens: 'DEBITEUR',
   290	    utilisation: 'OBLIGATOIRE'
   291	  },
   292	  {
   293	    numero: '4181',
   294	    libelle: 'Clients, factures √† √©tablir',
   295	    classe: 4,
   296	    sousClasse: '418',
   297	    nature: 'ACTIF',
   298	    sens: 'DEBITEUR',
   299	    utilisation: 'OBLIGATOIRE'
   300	  },
   301	  {
   302	    numero: '4186',
   303	    libelle: 'Clients, int√©r√™ts courus',
   304	    classe: 4,
   305	    sousClasse: '418',
   306	    nature: 'ACTIF',
   307	    sens: 'DEBITEUR',
   308	    utilisation: 'FACULTATIF'
   309	  },
   310	  {
   311	    numero: '419',
   312	    libelle: 'Clients cr√©diteurs',
   313	    classe: 4,
   314	    sousClasse: '41',
   315	    nature: 'PASSIF',
   316	    sens: 'CREDITEUR',
   317	    utilisation: 'FACULTATIF'
   318	  },
   319	  {
   320	    numero: '4191',
   321	    libelle: 'Clients, avances et acomptes re√ßus',
   322	    classe: 4,
   323	    sousClasse: '419',
   324	    nature: 'PASSIF',
   325	    sens: 'CREDITEUR',
   326	    utilisation: 'FACULTATIF'
   327	  },
   328	  {
   329	    numero: '4194',
   330	    libelle: 'Clients, dettes pour emballages consign√©s',
   331	    classe: 4,
   332	    sousClasse: '419',
   333	    nature: 'PASSIF',
   334	    sens: 'CREDITEUR',
   335	    utilisation: 'FACULTATIF'
   336	  },
   337	  {
   338	    numero: '4198',
   339	    libelle: 'Rabais, remises, ristournes √† accorder',
   340	    classe: 4,
   341	    sousClasse: '419',
   342	    nature: 'PASSIF',
   343	    sens: 'CREDITEUR',
   344	    utilisation: 'FACULTATIF'
   345	  },
   346	
   347	  // ============================================================
   348	  // 42 - PERSONNEL
   349	  // ============================================================
   350	  {
   351	    numero: '42',
   352	    libelle: 'Personnel',
   353	    classe: 4,
   354	    nature: 'PASSIF',
   355	    sens: 'CREDITEUR',
   356	    utilisation: 'OBLIGATOIRE'
   357	  },
   358	  {
   359	    numero: '421',
   360	    libelle: 'Personnel, avances et acomptes',
   361	    classe: 4,
   362	    sousClasse: '42',
   363	    nature: 'ACTIF',
   364	    sens: 'DEBITEUR',
   365	    utilisation: 'FACULTATIF'
   366	  },
   367	  {
   368	    numero: '4211',
   369	    libelle: 'Personnel, avances',
   370	    classe: 4,
   371	    sousClasse: '421',
   372	    nature: 'ACTIF',
   373	    sens: 'DEBITEUR',
   374	    utilisation: 'FACULTATIF'
   375	  },
   376	  {
   377	    numero: '4212',
   378	    libelle: 'Personnel, acomptes',
   379	    classe: 4,
   380	    sousClasse: '421',
   381	    nature: 'ACTIF',
   382	    sens: 'DEBITEUR',
   383	    utilisation: 'FACULTATIF'
   384	  },
   385	  {
   386	    numero: '4213',
   387	    libelle: 'Frais avanc√©s et fournitures au personnel',
   388	    classe: 4,
   389	    sousClasse: '421',
   390	    nature: 'ACTIF',
   391	    sens: 'DEBITEUR',
   392	    utilisation: 'FACULTATIF'
   393	  },
   394	  {
   395	    numero: '422',
   396	    libelle: 'Personnel, r√©mun√©rations dues',
   397	    classe: 4,
   398	    sousClasse: '42',
   399	    nature: 'PASSIF',
   400	    sens: 'CREDITEUR',
   401	    utilisation: 'OBLIGATOIRE'
   402	  },
   403	  {
   404	    numero: '4221',
   405	    libelle: 'Personnel, r√©mun√©rations dues',
   406	    classe: 4,
   407	    sousClasse: '422',
   408	    nature: 'PASSIF',
   409	    sens: 'CREDITEUR',
   410	    utilisation: 'OBLIGATOIRE'
   411	  },
   412	  {
   413	    numero: '4222',
   414	    libelle: 'Personnel, pr√™ts',
   415	    classe: 4,
   416	    sousClasse: '422',
   417	    nature: 'ACTIF',
   418	    sens: 'DEBITEUR',
   419	    utilisation: 'FACULTATIF'
   420	  },
   421	  {
   422	    numero: '423',
   423	    libelle: 'Personnel, oppositions, saisies-arr√™ts',
   424	    classe: 4,
   425	    sousClasse: '42',
   426	    nature: 'PASSIF',
   427	    sens: 'CREDITEUR',
   428	    utilisation: 'FACULTATIF'
   429	  },
   430	  {
   431	    numero: '424',
   432	    libelle: 'Personnel, oeuvres sociales internes',
   433	    classe: 4,
   434	    sousClasse: '42',
   435	    nature: 'PASSIF',
   436	    sens: 'CREDITEUR',
   437	    utilisation: 'FACULTATIF'
   438	  },
   439	  {
   440	    numero: '425',
   441	    libelle: 'Repr√©sentants du personnel',
   442	    classe: 4,
   443	    sousClasse: '42',
   444	    nature: 'PASSIF',
   445	    sens: 'CREDITEUR',
   446	    utilisation: 'FACULTATIF'
   447	  },
   448	  {
   449	    numero: '426',
   450	    libelle: 'Personnel, d√©p√¥ts re√ßus',
   451	    classe: 4,
   452	    sousClasse: '42',
   453	    nature: 'PASSIF',
   454	    sens: 'CREDITEUR',
   455	    utilisation: 'FACULTATIF'
   456	  },
   457	  {
   458	    numero: '427',
   459	    libelle: 'Personnel, frais m√©dicaux et pharmacie',
   460	    classe: 4,
   461	    sousClasse: '42',
   462	    nature: 'PASSIF',
   463	    sens: 'CREDITEUR',
   464	    utilisation: 'FACULTATIF'
   465	  },
   466	  {
   467	    numero: '428',
   468	    libelle: 'Personnel, charges √† payer et produits √† recevoir',
   469	    classe: 4,
   470	    sousClasse: '42',
   471	    nature: 'PASSIF',
   472	    sens: 'CREDITEUR',
   473	    utilisation: 'OBLIGATOIRE'
   474	  },
   475	  {
   476	    numero: '4281',
   477	    libelle: 'Dettes provisionn√©es pour cong√©s √† payer',
   478	    classe: 4,
   479	    sousClasse: '428',
   480	    nature: 'PASSIF',
   481	    sens: 'CREDITEUR',
   482	    utilisation: 'OBLIGATOIRE'
   483	  },
   484	  {
   485	    numero: '4282',
   486	    libelle: 'Dettes provisionn√©es pour gratifications',
   487	    classe: 4,
   488	    sousClasse: '428',
   489	    nature: 'PASSIF',
   490	    sens: 'CREDITEUR',
   491	    utilisation: 'FACULTATIF'
   492	  },
   493	  {
   494	    numero: '4286',
   495	    libelle: 'Autres charges √† payer',
   496	    classe: 4,
   497	    sousClasse: '428',
   498	    nature: 'PASSIF',
   499	    sens: 'CREDITEUR',
   500	    utilisation: 'FACULTATIF'
   501	  },
   502	
   503	  // ============================================================
   504	  // 43 - ORGANISMES SOCIAUX
   505	  // ============================================================
   506	  {
   507	    numero: '43',
   508	    libelle: 'Organismes sociaux',
   509	    classe: 4,
   510	    nature: 'PASSIF',
   511	    sens: 'CREDITEUR',
   512	    utilisation: 'OBLIGATOIRE'
   513	  },
   514	  {
   515	    numero: '431',
   516	    libelle: 'S√©curit√© sociale',
   517	    classe: 4,
   518	    sousClasse: '43',
   519	    nature: 'PASSIF',
   520	    sens: 'CREDITEUR',
   521	    utilisation: 'OBLIGATOIRE'
   522	  },
   523	  {
   524	    numero: '432',
   525	    libelle: 'Caisses de retraite',
   526	    classe: 4,
   527	    sousClasse: '43',
   528	    nature: 'PASSIF',
   529	    sens: 'CREDITEUR',
   530	    utilisation: 'OBLIGATOIRE'
   531	  },
   532	  {
   533	    numero: '433',
   534	    libelle: 'Autres organismes sociaux',
   535	    classe: 4,
   536	    sousClasse: '43',
   537	    nature: 'PASSIF',
   538	    sens: 'CREDITEUR',
   539	    utilisation: 'FACULTATIF'
   540	  },
   541	  {
   542	    numero: '438',
   543	    libelle: 'Organismes sociaux, charges √† payer',
   544	    classe: 4,
   545	    sousClasse: '43',
   546	    nature: 'PASSIF',
   547	    sens: 'CREDITEUR',
   548	    utilisation: 'FACULTATIF'
   549	  },
   550	  {
   551	    numero: '4381',
   552	    libelle: 'Charges sociales sur cong√©s √† payer',
   553	    classe: 4,
   554	    sousClasse: '438',
   555	    nature: 'PASSIF',
   556	    sens: 'CREDITEUR',
   557	    utilisation: 'FACULTATIF'
   558	  },
   559	  {
   560	    numero: '4382',
   561	    libelle: 'Charges sociales sur gratifications',
   562	    classe: 4,
   563	    sousClasse: '438',
   564	    nature: 'PASSIF',
   565	    sens: 'CREDITEUR',
   566	    utilisation: 'FACULTATIF'
   567	  },
   568	  {
   569	    numero: '4386',
   570	    libelle: 'Autres charges √† payer',
   571	    classe: 4,
   572	    sousClasse: '438',
   573	    nature: 'PASSIF',
   574	    sens: 'CREDITEUR',
   575	    utilisation: 'FACULTATIF'
   576	  },
   577	
   578	  // ============================================================
   579	  // 44 - ETAT ET COLLECTIVITES PUBLIQUES
   580	  // ============================================================
   581	  {
   582	    numero: '44',
   583	    libelle: '√âtat et collectivit√©s publiques',
   584	    classe: 4,
   585	    nature: 'SPECIAL',
   586	    sens: 'DEBITEUR',
   587	    utilisation: 'OBLIGATOIRE'
   588	  },
   589	  {
   590	    numero: '441',
   591	    libelle: '√âtat, subventions √† recevoir',
   592	    classe: 4,
   593	    sousClasse: '44',
   594	    nature: 'ACTIF',
   595	    sens: 'DEBITEUR',
   596	    utilisation: 'FACULTATIF'
   597	  },
   598	  {
   599	    numero: '442',
   600	    libelle: '√âtat, imp√¥ts et taxes recouvrables sur des tiers',
   601	    classe: 4,
   602	    sousClasse: '44',
   603	    nature: 'ACTIF',
   604	    sens: 'DEBITEUR',
   605	    utilisation: 'FACULTATIF'
   606	  },
   607	  {
   608	    numero: '443',
   609	    libelle: '√âtat, TVA factur√©e',
   610	    classe: 4,
   611	    sousClasse: '44',
   612	    nature: 'PASSIF',
   613	    sens: 'CREDITEUR',
   614	    utilisation: 'OBLIGATOIRE'
   615	  },
   616	  {
   617	    numero: '4431',
   618	    libelle: 'TVA factur√©e sur ventes',
   619	    classe: 4,
   620	    sousClasse: '443',
   621	    nature: 'PASSIF',
   622	    sens: 'CREDITEUR',
   623	    utilisation: 'OBLIGATOIRE'
   624	  },
   625	  {
   626	    numero: '4432',
   627	    libelle: 'TVA factur√©e sur prestations',
   628	    classe: 4,
   629	    sousClasse: '443',
   630	    nature: 'PASSIF',
   631	    sens: 'CREDITEUR',
   632	    utilisation: 'OBLIGATOIRE'
   633	  },
   634	  {
   635	    numero: '4433',
   636	    libelle: 'TVA factur√©e sur travaux',
   637	    classe: 4,
   638	    sousClasse: '443',
   639	    nature: 'PASSIF',
   640	    sens: 'CREDITEUR',
   641	    utilisation: 'FACULTATIF'
   642	  },
   643	  {
   644	    numero: '4434',
   645	    libelle: 'TVA sur factures √† √©tablir',
   646	    classe: 4,
   647	    sousClasse: '443',
   648	    nature: 'PASSIF',
   649	    sens: 'CREDITEUR',
   650	    utilisation: 'FACULTATIF'
   651	  },
   652	  {
   653	    numero: '444',
   654	    libelle: '√âtat, imp√¥ts sur les b√©n√©fices',
   655	    classe: 4,
   656	    sousClasse: '44',
   657	    nature: 'PASSIF',
   658	    sens: 'CREDITEUR',
   659	    utilisation: 'OBLIGATOIRE'
   660	  },
   661	  {
   662	    numero: '4441',
   663	    libelle: "Imp√¥t sur les b√©n√©fices de l'exercice",
   664	    classe: 4,
   665	    sousClasse: '444',
   666	    nature: 'PASSIF',
   667	    sens: 'CREDITEUR',
   668	    utilisation: 'OBLIGATOIRE'
   669	  },
   670	  {
   671	    numero: '4442',
   672	    libelle: "Acomptes provisionnels d'IS",
   673	    classe: 4,
   674	    sousClasse: '444',
   675	    nature: 'ACTIF',
   676	    sens: 'DEBITEUR',
   677	    utilisation: 'OBLIGATOIRE'
   678	  },
   679	  {
   680	    numero: '4449',
   681	    libelle: "Exc√©dent d'IS",
   682	    classe: 4,
   683	    sousClasse: '444',
   684	    nature: 'ACTIF',
   685	    sens: 'DEBITEUR',
   686	    utilisation: 'FACULTATIF'
   687	  },
   688	  {
   689	    numero: '445',
   690	    libelle: '√âtat, TVA r√©cup√©rable',
   691	    classe: 4,
   692	    sousClasse: '44',
   693	    nature: 'ACTIF',
   694	    sens: 'DEBITEUR',
   695	    utilisation: 'OBLIGATOIRE'
   696	  },
   697	  {
   698	    numero: '4451',
   699	    libelle: 'TVA r√©cup√©rable sur immobilisations',
   700	    classe: 4,
   701	    sousClasse: '445',
   702	    nature: 'ACTIF',
   703	    sens: 'DEBITEUR',
   704	    utilisation: 'OBLIGATOIRE'
   705	  },
   706	  {
   707	    numero: '4452',
   708	    libelle: 'TVA r√©cup√©rable sur achats',
   709	    classe: 4,
   710	    sousClasse: '445',
   711	    nature: 'ACTIF',
   712	    sens: 'DEBITEUR',
   713	    utilisation: 'OBLIGATOIRE'
   714	  },
   715	  {
   716	    numero: '4453',
   717	    libelle: 'TVA r√©cup√©rable sur transports',
   718	    classe: 4,
   719	    sousClasse: '445',
   720	    nature: 'ACTIF',
   721	    sens: 'DEBITEUR',
   722	    utilisation: 'FACULTATIF'
   723	  },
   724	  {
   725	    numero: '4454',
   726	    libelle: 'TVA r√©cup√©rable sur services ext√©rieurs',
   727	    classe: 4,
   728	    sousClasse: '445',
   729	    nature: 'ACTIF',
   730	    sens: 'DEBITEUR',
   731	    utilisation: 'OBLIGATOIRE'
   732	  },
   733	  {
   734	    numero: '4455',
   735	    libelle: 'TVA r√©cup√©rable sur factures non parvenues',
   736	    classe: 4,
   737	    sousClasse: '445',
   738	    nature: 'ACTIF',
   739	    sens: 'DEBITEUR',
   740	    utilisation: 'FACULTATIF'
   741	  },
   742	  {
   743	    numero: '4456',
   744	    libelle: "TVA transf√©r√©e par d'autres entit√©s du groupe",
   745	    classe: 4,
   746	    sousClasse: '445',
   747	    nature: 'ACTIF',
   748	    sens: 'DEBITEUR',
   749	    utilisation: 'FACULTATIF'
   750	  },
   751	  {
   752	    numero: '4458',
   753	    libelle: 'TVA √† r√©gulariser ou en attente',
   754	    classe: 4,
   755	    sousClasse: '445',
   756	    nature: 'SPECIAL',
   757	    sens: 'DEBITEUR',
   758	    utilisation: 'FACULTATIF'
   759	  },
   760	  {
   761	    numero: '446',
   762	    libelle: '√âtat, autres imp√¥ts et taxes',
   763	    classe: 4,
   764	    sousClasse: '44',
   765	    nature: 'PASSIF',
   766	    sens: 'CREDITEUR',
   767	    utilisation: 'OBLIGATOIRE'
   768	  },
   769	  {
   770	    numero: '4461',
   771	    libelle: "Taxes sur le chiffre d'affaires",
   772	    classe: 4,
   773	    sousClasse: '446',
   774	    nature: 'PASSIF',
   775	    sens: 'CREDITEUR',
   776	    utilisation: 'FACULTATIF'
   777	  },
   778	  {
   779	    numero: '4462',
   780	    libelle: 'Droits de douane',
   781	    classe: 4,
   782	    sousClasse: '446',
   783	    nature: 'PASSIF',
   784	    sens: 'CREDITEUR',
   785	    utilisation: 'FACULTATIF'
   786	  },
   787	  {
   788	    numero: '4463',
   789	    libelle: 'Taxes sur les salaires',
   790	    classe: 4,
   791	    sousClasse: '446',
   792	    nature: 'PASSIF',
   793	    sens: 'CREDITEUR',
   794	    utilisation: 'OBLIGATOIRE'
   795	  },
   796	  {
   797	    numero: '4464',
   798	    libelle: 'Patentes et licences',
   799	    classe: 4,
   800	    sousClasse: '446',
   801	    nature: 'PASSIF',
   802	    sens: 'CREDITEUR',
   803	    utilisation: 'OBLIGATOIRE'
   804	  },
   805	  {
   806	    numero: '4465',
   807	    libelle: 'Taxes fonci√®res',
   808	    classe: 4,
   809	    sousClasse: '446',
   810	    nature: 'PASSIF',
   811	    sens: 'CREDITEUR',
   812	    utilisation: 'FACULTATIF'
   813	  },
   814	  {
   815	    numero: '4468',
   816	    libelle: 'Autres imp√¥ts et taxes',
   817	    classe: 4,
   818	    sousClasse: '446',
   819	    nature: 'PASSIF',
   820	    sens: 'CREDITEUR',
   821	    utilisation: 'FACULTATIF'
   822	  },
   823	  {
   824	    numero: '447',
   825	    libelle: '√âtat, imp√¥ts retenus √† la source',
   826	    classe: 4,
   827	    sousClasse: '44',
   828	    nature: 'PASSIF',
   829	    sens: 'CREDITEUR',
   830	    utilisation: 'OBLIGATOIRE'
   831	  },
   832	  {
   833	    numero: '4471',
   834	    libelle: 'Imp√¥t g√©n√©ral sur le revenu',
   835	    classe: 4,
   836	    sousClasse: '447',
   837	    nature: 'PASSIF',
   838	    sens: 'CREDITEUR',
   839	    utilisation: 'OBLIGATOIRE'
   840	  },
   841	  {
   842	    numero: '4472',
   843	    libelle: 'Imp√¥t sur les revenus de capitaux mobiliers',
   844	    classe: 4,
   845	    sousClasse: '447',
   846	    nature: 'PASSIF',
   847	    sens: 'CREDITEUR',
   848	    utilisation: 'FACULTATIF'
   849	  },
   850	  {
   851	    numero: '4478',
   852	    libelle: 'Autres imp√¥ts et taxes retenus √† la source',
   853	    classe: 4,
   854	    sousClasse: '447',
   855	    nature: 'PASSIF',
   856	    sens: 'CREDITEUR',
   857	    utilisation: 'FACULTATIF'
   858	  },
   859	  {
   860	    numero: '448',
   861	    libelle: '√âtat, charges √† payer et produits √† recevoir',
   862	    classe: 4,
   863	    sousClasse: '44',
   864	    nature: 'SPECIAL',
   865	    sens: 'CREDITEUR',
   866	    utilisation: 'OBLIGATOIRE'
   867	  },
   868	  {
   869	    numero: '4481',
   870	    libelle: 'Charges fiscales sur cong√©s √† payer',
   871	    classe: 4,
   872	    sousClasse: '448',
   873	    nature: 'SPECIAL',
   874	    sens: 'CREDITEUR',
   875	    utilisation: 'FACULTATIF'
   876	  },
   877	  {
   878	    numero: '4486',
   879	    libelle: 'Charges √† payer',
   880	    classe: 4,
   881	    sousClasse: '448',
   882	    nature: 'SPECIAL',
   883	    sens: 'CREDITEUR',
   884	    utilisation: 'OBLIGATOIRE'
   885	  },
   886	  {
   887	    numero: '4487',
   888	    libelle: 'Produits √† recevoir',
   889	    classe: 4,
   890	    sousClasse: '448',
   891	    nature: 'SPECIAL',
   892	    sens: 'DEBITEUR',
   893	    utilisation: 'FACULTATIF'
   894	  },
   895	  {
   896	    numero: '449',
   897	    libelle: '√âtat, cr√©ances fiscales et pr√©comptes',
   898	    classe: 4,
   899	    sousClasse: '44',
   900	    nature: 'ACTIF',
   901	    sens: 'DEBITEUR',
   902	    utilisation: 'FACULTATIF'
   903	  },
   904	  {
   905	    numero: '4491',
   906	    libelle: '√âtat, cr√©dit de TVA √† reporter',
   907	    classe: 4,
   908	    sousClasse: '449',
   909	    nature: 'ACTIF',
   910	    sens: 'DEBITEUR',
   911	    utilisation: 'FACULTATIF'
   912	  },
   913	  {
   914	    numero: '4492',
   915	    libelle: "√âtat, cr√©dit d'imp√¥t",
   916	    classe: 4,
   917	    sousClasse: '449',
   918	    nature: 'ACTIF',
   919	    sens: 'DEBITEUR',
   920	    utilisation: 'FACULTATIF'
   921	  },
   922	  {
   923	    numero: '4499',
   924	    libelle: 'Autres cr√©ances fiscales',
   925	    classe: 4,
   926	    sousClasse: '449',
   927	    nature: 'ACTIF',
   928	    sens: 'DEBITEUR',
   929	    utilisation: 'FACULTATIF'
   930	  },
   931	
   932	  // ============================================================
   933	  // 45 - ORGANISMES INTERNATIONAUX
   934	  // ============================================================
   935	  {
   936	    numero: '45',
   937	    libelle: 'Organismes internationaux',
   938	    classe: 4,
   939	    nature: 'SPECIAL',
   940	    sens: 'DEBITEUR',
   941	    utilisation: 'FACULTATIF'
   942	  },
   943	  {
   944	    numero: '451',
   945	    libelle: 'Op√©rations avec les organismes africains',
   946	    classe: 4,
   947	    sousClasse: '45',
   948	    nature: 'SPECIAL',
   949	    sens: 'DEBITEUR',
   950	    utilisation: 'FACULTATIF'
   951	  },
   952	  {
   953	    numero: '452',
   954	    libelle: 'Op√©rations avec les autres organismes internationaux',
   955	    classe: 4,
   956	    sousClasse: '45',
   957	    nature: 'SPECIAL',
   958	    sens: 'DEBITEUR',
   959	    utilisation: 'FACULTATIF'
   960	  },
   961	  {
   962	    numero: '458',
   963	    libelle: 'Organismes internationaux, charges √† payer',
   964	    classe: 4,
   965	    sousClasse: '45',
   966	    nature: 'SPECIAL',
   967	    sens: 'CREDITEUR',
   968	    utilisation: 'FACULTATIF'
   969	  },
   970	
   971	  // ============================================================
   972	  // 46 - ASSOCIES ET GROUPE
   973	  // ============================================================
   974	  {
   975	    numero: '46',
   976	    libelle: 'Associ√©s et groupe',
   977	    classe: 4,
   978	    nature: 'SPECIAL',
   979	    sens: 'DEBITEUR',
   980	    utilisation: 'FACULTATIF'
   981	  },
   982	  {
   983	    numero: '461',
   984	    libelle: 'Associ√©s, op√©rations sur le capital',
   985	    classe: 4,
   986	    sousClasse: '46',
   987	    nature: 'ACTIF',
   988	    sens: 'DEBITEUR',
   989	    utilisation: 'FACULTATIF'
   990	  },
   991	  {
   992	    numero: '4611',
   993	    libelle: 'Apporteurs, apports en nature',
   994	    classe: 4,
   995	    sousClasse: '461',
   996	    nature: 'ACTIF',
   997	    sens: 'DEBITEUR',
   998	    utilisation: 'FACULTATIF'
   999	  },
  1000	  {
  1001	    numero: '4612',
  1002	    libelle: 'Apporteurs, apports en num√©raire',
  1003	    classe: 4,
  1004	    sousClasse: '461',
  1005	    nature: 'ACTIF',
  1006	    sens: 'DEBITEUR',
  1007	    utilisation: 'FACULTATIF'
  1008	  },
  1009	  {
  1010	    numero: '4613',
  1011	    libelle: 'Actionnaires, capital souscrit appel√© non vers√©',
  1012	    classe: 4,
  1013	    sousClasse: '461',
  1014	    nature: 'ACTIF',
  1015	    sens: 'DEBITEUR',
  1016	    utilisation: 'FACULTATIF'
  1017	  },
  1018	  {
  1019	    numero: '4614',
  1020	    libelle: 'Actionnaires d√©faillants',
  1021	    classe: 4,
  1022	    sousClasse: '461',
  1023	    nature: 'ACTIF',
  1024	    sens: 'DEBITEUR',
  1025	    utilisation: 'FACULTATIF'
  1026	  },
  1027	  {
  1028	    numero: '4615',
  1029	    libelle: 'Associ√©s, versements anticip√©s',
  1030	    classe: 4,
  1031	    sousClasse: '461',
  1032	    nature: 'PASSIF',
  1033	    sens: 'CREDITEUR',
  1034	    utilisation: 'FACULTATIF'
  1035	  },
  1036	  {
  1037	    numero: '4618',
  1038	    libelle: 'Associ√©s, autres apports',
  1039	    classe: 4,
  1040	    sousClasse: '461',
  1041	    nature: 'ACTIF',
  1042	    sens: 'DEBITEUR',
  1043	    utilisation: 'FACULTATIF'
  1044	  },
  1045	  {
  1046	    numero: '462',
  1047	    libelle: 'Associ√©s, comptes courants',
  1048	    classe: 4,
  1049	    sousClasse: '46',
  1050	    nature: 'SPECIAL',
  1051	    sens: 'CREDITEUR',
  1052	    utilisation: 'FACULTATIF'
  1053	  },
  1054	  {
  1055	    numero: '4621',
  1056	    libelle: 'Principal',
  1057	    classe: 4,
  1058	    sousClasse: '462',
  1059	    nature: 'SPECIAL',
  1060	    sens: 'CREDITEUR',
  1061	    utilisation: 'FACULTATIF'
  1062	  },
  1063	  {
  1064	    numero: '4626',
  1065	    libelle: 'Int√©r√™ts courus',
  1066	    classe: 4,
  1067	    sousClasse: '462',
  1068	    nature: 'SPECIAL',
  1069	    sens: 'CREDITEUR',
  1070	    utilisation: 'FACULTATIF'
  1071	  },
  1072	  {
  1073	    numero: '463',
  1074	    libelle: 'Associ√©s, op√©rations faites en commun et en GIE',
  1075	    classe: 4,
  1076	    sousClasse: '46',
  1077	    nature: 'SPECIAL',
  1078	    sens: 'DEBITEUR',
  1079	    utilisation: 'FACULTATIF'
  1080	  },
  1081	  {
  1082	    numero: '464',
  1083	    libelle: 'Associ√©s, op√©rations de capital',
  1084	    classe: 4,
  1085	    sousClasse: '46',
  1086	    nature: 'SPECIAL',
  1087	    sens: 'DEBITEUR',
  1088	    utilisation: 'FACULTATIF'
  1089	  },
  1090	  {
  1091	    numero: '465',
  1092	    libelle: 'Associ√©s, dividendes √† payer',
  1093	    classe: 4,
  1094	    sousClasse: '46',
  1095	    nature: 'PASSIF',
  1096	    sens: 'CREDITEUR',
  1097	    utilisation: 'FACULTATIF'
  1098	  },
  1099	  {
  1100	    numero: '466',
  1101	    libelle: 'Groupe, comptes courants',
  1102	    classe: 4,
  1103	    sousClasse: '46',
  1104	    nature: 'SPECIAL',
  1105	    sens: 'DEBITEUR',
  1106	    utilisation: 'FACULTATIF'
  1107	  },
  1108	  {
  1109	    numero: '4661',
  1110	    libelle: 'Groupe, comptes courants d√©biteurs',
  1111	    classe: 4,
  1112	    sousClasse: '466',
  1113	    nature: 'ACTIF',
  1114	    sens: 'DEBITEUR',
  1115	    utilisation: 'FACULTATIF'
  1116	  },
  1117	  {
  1118	    numero: '4662',
  1119	    libelle: 'Groupe, comptes courants cr√©diteurs',
  1120	    classe: 4,
  1121	    sousClasse: '466',
  1122	    nature: 'PASSIF',
  1123	    sens: 'CREDITEUR',
  1124	    utilisation: 'FACULTATIF'
  1125	  },
  1126	  {
  1127	    numero: '467',
  1128	    libelle: 'Actionnaires, restant d√ª sur capital appel√©',
  1129	    classe: 4,
  1130	    sousClasse: '46',
  1131	    nature: 'ACTIF',
  1132	    sens: 'DEBITEUR',
  1133	    utilisation: 'FACULTATIF'
  1134	  },
  1135	
  1136	  // ============================================================
  1137	  // 47 - DEBITEURS ET CREDITEURS DIVERS
  1138	  // ============================================================
  1139	  {
  1140	    numero: '47',
  1141	    libelle: 'D√©biteurs et cr√©diteurs divers',
  1142	    classe: 4,
  1143	    nature: 'SPECIAL',
  1144	    sens: 'DEBITEUR',
  1145	    utilisation: 'OBLIGATOIRE'
  1146	  },
  1147	  {
  1148	    numero: '471',
  1149	    libelle: "Compte d'attente",
  1150	    classe: 4,
  1151	    sousClasse: '47',
  1152	    nature: 'SPECIAL',
  1153	    sens: 'DEBITEUR',
  1154	    utilisation: 'OBLIGATOIRE'
  1155	  },
  1156	  {
  1157	    numero: '472',
  1158	    libelle: "Cr√©ances sur cessions d'immobilisations",
  1159	    classe: 4,
  1160	    sousClasse: '47',
  1161	    nature: 'ACTIF',
  1162	    sens: 'DEBITEUR',
  1163	    utilisation: 'FACULTATIF'
  1164	  },
  1165	  {
  1166	    numero: '473',
  1167	    libelle: 'Dettes sur acquisitions de titres de placement',
  1168	    classe: 4,
  1169	    sousClasse: '47',
  1170	    nature: 'PASSIF',
  1171	    sens: 'CREDITEUR',
  1172	    utilisation: 'FACULTATIF'
  1173	  },
  1174	  {
  1175	    numero: '474',
  1176	    libelle: 'R√©partition p√©riodique des charges et produits',
  1177	    classe: 4,
  1178	    sousClasse: '47',
  1179	    nature: 'SPECIAL',
  1180	    sens: 'DEBITEUR',
  1181	    utilisation: 'FACULTATIF'
  1182	  },
  1183	  {
  1184	    numero: '4741',
  1185	    libelle: 'Charges',
  1186	    classe: 4,
  1187	    sousClasse: '474',
  1188	    nature: 'SPECIAL',
  1189	    sens: 'DEBITEUR',
  1190	    utilisation: 'FACULTATIF'
  1191	  },
  1192	  {
  1193	    numero: '4748',
  1194	    libelle: 'Produits',
  1195	    classe: 4,
  1196	    sousClasse: '474',
  1197	    nature: 'SPECIAL',
  1198	    sens: 'CREDITEUR',
  1199	    utilisation: 'FACULTATIF'
  1200	  },
  1201	  {
  1202	    numero: '475',
  1203	    libelle: 'Cr√©ances sur cessions de titres de placement',
  1204	    classe: 4,
  1205	    sousClasse: '47',
  1206	    nature: 'ACTIF',
  1207	    sens: 'DEBITEUR',
  1208	    utilisation: 'FACULTATIF'
  1209	  },
  1210	  {
  1211	    numero: '476',
  1212	    libelle: "Charges constat√©es d'avance",
  1213	    classe: 4,
  1214	    sousClasse: '47',
  1215	    nature: 'ACTIF',
  1216	    sens: 'DEBITEUR',
  1217	    utilisation: 'OBLIGATOIRE'
  1218	  },
  1219	  {
  1220	    numero: '477',
  1221	    libelle: "Produits constat√©s d'avance",
  1222	    classe: 4,
  1223	    sousClasse: '47',
  1224	    nature: 'PASSIF',
  1225	    sens: 'CREDITEUR',
  1226	    utilisation: 'OBLIGATOIRE'
  1227	  },
  1228	  {
  1229	    numero: '478',
  1230	    libelle: '√âcarts de conversion - Actif',
  1231	    classe: 4,
  1232	    sousClasse: '47',
  1233	    nature: 'ACTIF',
  1234	    sens: 'DEBITEUR',
  1235	    utilisation: 'FACULTATIF'
  1236	  },
  1237	  {
  1238	    numero: '4781',
  1239	    libelle: 'Diminution des cr√©ances',
  1240	    classe: 4,
  1241	    sousClasse: '478',
  1242	    nature: 'ACTIF',
  1243	    sens: 'DEBITEUR',
  1244	    utilisation: 'FACULTATIF'
  1245	  },
  1246	  {
  1247	    numero: '4782',
  1248	    libelle: 'Augmentation des dettes',
  1249	    classe: 4,
  1250	    sousClasse: '478',
  1251	    nature: 'ACTIF',
  1252	    sens: 'DEBITEUR',
  1253	    utilisation: 'FACULTATIF'
  1254	  },
  1255	  {
  1256	    numero: '479',
  1257	    libelle: '√âcarts de conversion - Passif',
  1258	    classe: 4,
  1259	    sousClasse: '47',
  1260	    nature: 'PASSIF',
  1261	    sens: 'CREDITEUR',
  1262	    utilisation: 'FACULTATIF'
  1263	  },
  1264	  {
  1265	    numero: '4791',
  1266	    libelle: 'Augmentation des cr√©ances',
  1267	    classe: 4,
  1268	    sousClasse: '479',
  1269	    nature: 'PASSIF',
  1270	    sens: 'CREDITEUR',
  1271	    utilisation: 'FACULTATIF'
  1272	  },
  1273	  {
  1274	    numero: '4792',
  1275	    libelle: 'Diminution des dettes',
  1276	    classe: 4,
  1277	    sousClasse: '479',
  1278	    nature: 'PASSIF',
  1279	    sens: 'CREDITEUR',
  1280	    utilisation: 'FACULTATIF'
  1281	  },
  1282	
  1283	  // ============================================================
  1284	  // 48 - CREANCES ET DETTES H.A.O.
  1285	  // ============================================================
  1286	  {
  1287	    numero: '48',
  1288	    libelle: 'Cr√©ances et dettes H.A.O.',
  1289	    classe: 4,
  1290	    nature: 'SPECIAL',
  1291	    sens: 'DEBITEUR',
  1292	    utilisation: 'FACULTATIF'
  1293	  },
  1294	  {
  1295	    numero: '481',
  1296	    libelle: "Fournisseurs d'investissements",
  1297	    classe: 4,
  1298	    sousClasse: '48',
  1299	    nature: 'PASSIF',
  1300	    sens: 'CREDITEUR',
  1301	    utilisation: 'FACULTATIF'
  1302	  },
  1303	  {
  1304	    numero: '482',
  1305	    libelle: "Cr√©ances sur cessions d'immobilisations",
  1306	    classe: 4,
  1307	    sousClasse: '48',
  1308	    nature: 'ACTIF',
  1309	    sens: 'DEBITEUR',
  1310	    utilisation: 'FACULTATIF'
  1311	  },
  1312	  {
  1313	    numero: '483',
  1314	    libelle: 'Dettes sur acquisitions de titres de placement',
  1315	    classe: 4,
  1316	    sousClasse: '48',
  1317	    nature: 'PASSIF',
  1318	    sens: 'CREDITEUR',
  1319	    utilisation: 'FACULTATIF'
  1320	  },
  1321	  {
  1322	    numero: '484',
  1323	    libelle: 'Autres cr√©ances H.A.O.',
  1324	    classe: 4,
  1325	    sousClasse: '48',
  1326	    nature: 'ACTIF',
  1327	    sens: 'DEBITEUR',
  1328	    utilisation: 'FACULTATIF'
  1329	  },
  1330	  {
  1331	    numero: '485',
  1332	    libelle: 'Autres dettes H.A.O.',
  1333	    classe: 4,
  1334	    sousClasse: '48',
  1335	    nature: 'PASSIF',
  1336	    sens: 'CREDITEUR',
  1337	    utilisation: 'FACULTATIF'
  1338	  },
  1339	  {
  1340	    numero: '486',
  1341	    libelle: 'Cr√©ances H.A.O., charges √† payer',
  1342	    classe: 4,
  1343	    sousClasse: '48',
  1344	    nature: 'SPECIAL',
  1345	    sens: 'DEBITEUR',
  1346	    utilisation: 'FACULTATIF'
  1347	  },
  1348	  {
  1349	    numero: '488',
  1350	    libelle: 'Autres cr√©ances et dettes H.A.O.',
  1351	    classe: 4,
  1352	    sousClasse: '48',
  1353	    nature: 'SPECIAL',
  1354	    sens: 'DEBITEUR',
  1355	    utilisation: 'FACULTATIF'
  1356	  },
  1357	
  1358	  // ============================================================
  1359	  // 49 - DEPRECIATIONS ET RISQUES PROVISIONNES
  1360	  // ============================================================
  1361	  {
  1362	    numero: '49',
  1363	    libelle: 'D√©pr√©ciations et risques provisionn√©s',
  1364	    classe: 4,
  1365	    nature: 'ACTIF',
  1366	    sens: 'CREDITEUR',
  1367	    utilisation: 'FACULTATIF'
  1368	  },
  1369	  {
  1370	    numero: '491',
  1371	    libelle: 'D√©pr√©ciations des comptes clients',
  1372	    classe: 4,
  1373	    sousClasse: '49',
  1374	    nature: 'ACTIF',
  1375	    sens: 'CREDITEUR',
  1376	    utilisation: 'FACULTATIF'
  1377	  },
  1378	  {
  1379	    numero: '4911',
  1380	    libelle: 'Cr√©ances douteuses',
  1381	    classe: 4,
  1382	    sousClasse: '491',
  1383	    nature: 'ACTIF',
  1384	    sens: 'CREDITEUR',
  1385	    utilisation: 'FACULTATIF'
  1386	  },
  1387	  {
  1388	    numero: '4912',
  1389	    libelle: 'Cr√©ances litigieuses',
  1390	    classe: 4,
  1391	    sousClasse: '491',
  1392	    nature: 'ACTIF',
  1393	    sens: 'CREDITEUR',
  1394	    utilisation: 'FACULTATIF'
  1395	  },
  1396	  {
  1397	    numero: '492',
  1398	    libelle: 'D√©pr√©ciations des comptes personnel',
  1399	    classe: 4,
  1400	    sousClasse: '49',
  1401	    nature: 'ACTIF',
  1402	    sens: 'CREDITEUR',
  1403	    utilisation: 'FACULTATIF'
  1404	  },
  1405	  {
  1406	    numero: '493',
  1407	    libelle: 'D√©pr√©ciations des comptes organismes sociaux',
  1408	    classe: 4,
  1409	    sousClasse: '49',
  1410	    nature: 'ACTIF',
  1411	    sens: 'CREDITEUR',
  1412	    utilisation: 'FACULTATIF'
  1413	  },
  1414	  {
  1415	    numero: '494',
  1416	    libelle: 'D√©pr√©ciations des comptes √âtat',
  1417	    classe: 4,
  1418	    sousClasse: '49',
  1419	    nature: 'ACTIF',
  1420	    sens: 'CREDITEUR',
  1421	    utilisation: 'FACULTATIF'
  1422	  },
  1423	  {
  1424	    numero: '495',
  1425	    libelle: 'D√©pr√©ciations des comptes organismes internationaux',
  1426	    classe: 4,
  1427	    sousClasse: '49',
  1428	    nature: 'ACTIF',
  1429	    sens: 'CREDITEUR',
  1430	    utilisation: 'FACULTATIF'
  1431	  },
  1432	  {
  1433	    numero: '496',
  1434	    libelle: 'D√©pr√©ciations des comptes associ√©s et groupe',
  1435	    classe: 4,
  1436	    sousClasse: '49',
  1437	    nature: 'ACTIF',
  1438	    sens: 'CREDITEUR',
  1439	    utilisation: 'FACULTATIF'
  1440	  },
  1441	  {
  1442	    numero: '497',
  1443	    libelle: 'D√©pr√©ciations des comptes d√©biteurs divers',
  1444	    classe: 4,
  1445	    sousClasse: '49',
  1446	    nature: 'ACTIF',
  1447	    sens: 'CREDITEUR',
  1448	    utilisation: 'FACULTATIF'
  1449	  },
  1450	  {
  1451	    numero: '498',
  1452	    libelle: 'D√©pr√©ciations des comptes de cr√©ances H.A.O.',
  1453	    classe: 4,
  1454	    sousClasse: '49',
  1455	    nature: 'ACTIF',
  1456	    sens: 'CREDITEUR',
  1457	    utilisation: 'FACULTATIF'
  1458	  }
  1459	]

================================================================================
FILE: src/data/syscohada/plan/classe5.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 5 - COMPTES DE TRESORERIE
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_5_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 50 - TITRES DE PLACEMENT
    10	  // ============================================================
    11	  {
    12	    numero: '50',
    13	    libelle: 'Titres de placement',
    14	    classe: 5,
    15	    nature: 'ACTIF',
    16	    sens: 'DEBITEUR',
    17	    utilisation: 'FACULTATIF'
    18	  },
    19	  {
    20	    numero: '501',
    21	    libelle: 'Actions',
    22	    classe: 5,
    23	    sousClasse: '50',
    24	    nature: 'ACTIF',
    25	    sens: 'DEBITEUR',
    26	    utilisation: 'FACULTATIF'
    27	  },
    28	  {
    29	    numero: '5011',
    30	    libelle: 'Actions cot√©es',
    31	    classe: 5,
    32	    sousClasse: '501',
    33	    nature: 'ACTIF',
    34	    sens: 'DEBITEUR',
    35	    utilisation: 'FACULTATIF'
    36	  },
    37	  {
    38	    numero: '5012',
    39	    libelle: 'Actions non cot√©es',
    40	    classe: 5,
    41	    sousClasse: '501',
    42	    nature: 'ACTIF',
    43	    sens: 'DEBITEUR',
    44	    utilisation: 'FACULTATIF'
    45	  },
    46	  {
    47	    numero: '502',
    48	    libelle: 'Obligations',
    49	    classe: 5,
    50	    sousClasse: '50',
    51	    nature: 'ACTIF',
    52	    sens: 'DEBITEUR',
    53	    utilisation: 'FACULTATIF'
    54	  },
    55	  {
    56	    numero: '5021',
    57	    libelle: "Obligations √©mises par l'entit√© et rachet√©es",
    58	    classe: 5,
    59	    sousClasse: '502',
    60	    nature: 'ACTIF',
    61	    sens: 'DEBITEUR',
    62	    utilisation: 'FACULTATIF'
    63	  },
    64	  {
    65	    numero: '5022',
    66	    libelle: "Obligations d'√âtat",
    67	    classe: 5,
    68	    sousClasse: '502',
    69	    nature: 'ACTIF',
    70	    sens: 'DEBITEUR',
    71	    utilisation: 'FACULTATIF'
    72	  },
    73	  {
    74	    numero: '5028',
    75	    libelle: 'Autres obligations',
    76	    classe: 5,
    77	    sousClasse: '502',
    78	    nature: 'ACTIF',
    79	    sens: 'DEBITEUR',
    80	    utilisation: 'FACULTATIF'
    81	  },
    82	  {
    83	    numero: '503',
    84	    libelle: 'Parts de capital dans des organismes',
    85	    classe: 5,
    86	    sousClasse: '50',
    87	    nature: 'ACTIF',
    88	    sens: 'DEBITEUR',
    89	    utilisation: 'FACULTATIF'
    90	  },
    91	  {
    92	    numero: '504',
    93	    libelle: 'Bons du Tr√©sor et bons de caisse √† court terme',
    94	    classe: 5,
    95	    sousClasse: '50',
    96	    nature: 'ACTIF',
    97	    sens: 'DEBITEUR',
    98	    utilisation: 'FACULTATIF'
    99	  },
   100	  {
   101	    numero: '505',
   102	    libelle: 'Ch√®ques de voyage',
   103	    classe: 5,
   104	    sousClasse: '50',
   105	    nature: 'ACTIF',
   106	    sens: 'DEBITEUR',
   107	    utilisation: 'FACULTATIF'
   108	  },
   109	  {
   110	    numero: '506',
   111	    libelle: 'Int√©r√™ts courus',
   112	    classe: 5,
   113	    sousClasse: '50',
   114	    nature: 'ACTIF',
   115	    sens: 'DEBITEUR',
   116	    utilisation: 'FACULTATIF'
   117	  },
   118	  {
   119	    numero: '508',
   120	    libelle: 'Autres valeurs assimil√©es',
   121	    classe: 5,
   122	    sousClasse: '50',
   123	    nature: 'ACTIF',
   124	    sens: 'DEBITEUR',
   125	    utilisation: 'FACULTATIF'
   126	  },
   127	
   128	  // ============================================================
   129	  // 51 - VALEURS A ENCAISSER
   130	  // ============================================================
   131	  {
   132	    numero: '51',
   133	    libelle: 'Valeurs √† encaisser',
   134	    classe: 5,
   135	    nature: 'ACTIF',
   136	    sens: 'DEBITEUR',
   137	    utilisation: 'FACULTATIF'
   138	  },
   139	  {
   140	    numero: '511',
   141	    libelle: 'Effets √† recevoir',
   142	    classe: 5,
   143	    sousClasse: '51',
   144	    nature: 'ACTIF',
   145	    sens: 'DEBITEUR',
   146	    utilisation: 'FACULTATIF'
   147	  },
   148	  {
   149	    numero: '5111',
   150	    libelle: 'Effets √† recevoir',
   151	    classe: 5,
   152	    sousClasse: '511',
   153	    nature: 'ACTIF',
   154	    sens: 'DEBITEUR',
   155	    utilisation: 'FACULTATIF'
   156	  },
   157	  {
   158	    numero: '5112',
   159	    libelle: "Effets √† l'encaissement",
   160	    classe: 5,
   161	    sousClasse: '511',
   162	    nature: 'ACTIF',
   163	    sens: 'DEBITEUR',
   164	    utilisation: 'FACULTATIF'
   165	  },
   166	  {
   167	    numero: '5113',
   168	    libelle: "Effets √† l'escompte",
   169	    classe: 5,
   170	    sousClasse: '511',
   171	    nature: 'ACTIF',
   172	    sens: 'DEBITEUR',
   173	    utilisation: 'FACULTATIF'
   174	  },
   175	  {
   176	    numero: '512',
   177	    libelle: "Effets √† l'encaissement",
   178	    classe: 5,
   179	    sousClasse: '51',
   180	    nature: 'ACTIF',
   181	    sens: 'DEBITEUR',
   182	    utilisation: 'FACULTATIF'
   183	  },
   184	  {
   185	    numero: '513',
   186	    libelle: 'Ch√®ques √† encaisser',
   187	    classe: 5,
   188	    sousClasse: '51',
   189	    nature: 'ACTIF',
   190	    sens: 'DEBITEUR',
   191	    utilisation: 'FACULTATIF'
   192	  },
   193	  {
   194	    numero: '514',
   195	    libelle: "Ch√®ques √† l'encaissement",
   196	    classe: 5,
   197	    sousClasse: '51',
   198	    nature: 'ACTIF',
   199	    sens: 'DEBITEUR',
   200	    utilisation: 'FACULTATIF'
   201	  },
   202	  {
   203	    numero: '515',
   204	    libelle: 'Cartes de cr√©dit √† encaisser',
   205	    classe: 5,
   206	    sousClasse: '51',
   207	    nature: 'ACTIF',
   208	    sens: 'DEBITEUR',
   209	    utilisation: 'FACULTATIF'
   210	  },
   211	  {
   212	    numero: '518',
   213	    libelle: 'Autres valeurs √† encaisser',
   214	    classe: 5,
   215	    sousClasse: '51',
   216	    nature: 'ACTIF',
   217	    sens: 'DEBITEUR',
   218	    utilisation: 'FACULTATIF'
   219	  },
   220	
   221	  // ============================================================
   222	  // 52 - BANQUES
   223	  // ============================================================
   224	  {
   225	    numero: '52',
   226	    libelle: 'Banques',
   227	    classe: 5,
   228	    nature: 'ACTIF',
   229	    sens: 'DEBITEUR',
   230	    utilisation: 'OBLIGATOIRE'
   231	  },
   232	  {
   233	    numero: '521',
   234	    libelle: 'Banques locales',
   235	    classe: 5,
   236	    sousClasse: '52',
   237	    nature: 'ACTIF',
   238	    sens: 'DEBITEUR',
   239	    utilisation: 'OBLIGATOIRE'
   240	  },
   241	  {
   242	    numero: '5211',
   243	    libelle: 'Banque A',
   244	    classe: 5,
   245	    sousClasse: '521',
   246	    nature: 'ACTIF',
   247	    sens: 'DEBITEUR',
   248	    utilisation: 'OBLIGATOIRE'
   249	  },
   250	  {
   251	    numero: '5212',
   252	    libelle: 'Banque B',
   253	    classe: 5,
   254	    sousClasse: '521',
   255	    nature: 'ACTIF',
   256	    sens: 'DEBITEUR',
   257	    utilisation: 'FACULTATIF'
   258	  },
   259	  {
   260	    numero: '522',
   261	    libelle: 'Banques, autres √âtats UEMOA ou CEMAC',
   262	    classe: 5,
   263	    sousClasse: '52',
   264	    nature: 'ACTIF',
   265	    sens: 'DEBITEUR',
   266	    utilisation: 'FACULTATIF'
   267	  },
   268	  {
   269	    numero: '523',
   270	    libelle: 'Banques, autres √âtats zone franc',
   271	    classe: 5,
   272	    sousClasse: '52',
   273	    nature: 'ACTIF',
   274	    sens: 'DEBITEUR',
   275	    utilisation: 'FACULTATIF'
   276	  },
   277	  {
   278	    numero: '524',
   279	    libelle: 'Banques hors zone franc',
   280	    classe: 5,
   281	    sousClasse: '52',
   282	    nature: 'ACTIF',
   283	    sens: 'DEBITEUR',
   284	    utilisation: 'FACULTATIF'
   285	  },
   286	  {
   287	    numero: '525',
   288	    libelle: 'Banques, soldes cr√©diteurs',
   289	    classe: 5,
   290	    sousClasse: '52',
   291	    nature: 'PASSIF',
   292	    sens: 'CREDITEUR',
   293	    utilisation: 'FACULTATIF'
   294	  },
   295	  {
   296	    numero: '526',
   297	    libelle: 'Banques, int√©r√™ts courus',
   298	    classe: 5,
   299	    sousClasse: '52',
   300	    nature: 'SPECIAL',
   301	    sens: 'DEBITEUR',
   302	    utilisation: 'FACULTATIF'
   303	  },
   304	  {
   305	    numero: '528',
   306	    libelle: 'Autres √©tablissements financiers et assimil√©s',
   307	    classe: 5,
   308	    sousClasse: '52',
   309	    nature: 'ACTIF',
   310	    sens: 'DEBITEUR',
   311	    utilisation: 'FACULTATIF'
   312	  },
   313	
   314	  // ============================================================
   315	  // 53 - ETABLISSEMENTS FINANCIERS ET ASSIMILES
   316	  // ============================================================
   317	  {
   318	    numero: '53',
   319	    libelle: '√âtablissements financiers et assimil√©s',
   320	    classe: 5,
   321	    nature: 'ACTIF',
   322	    sens: 'DEBITEUR',
   323	    utilisation: 'FACULTATIF'
   324	  },
   325	  {
   326	    numero: '531',
   327	    libelle: 'Ch√®ques postaux',
   328	    classe: 5,
   329	    sousClasse: '53',
   330	    nature: 'ACTIF',
   331	    sens: 'DEBITEUR',
   332	    utilisation: 'FACULTATIF'
   333	  },
   334	  {
   335	    numero: '532',
   336	    libelle: 'Tr√©sor',
   337	    classe: 5,
   338	    sousClasse: '53',
   339	    nature: 'ACTIF',
   340	    sens: 'DEBITEUR',
   341	    utilisation: 'FACULTATIF'
   342	  },
   343	  {
   344	    numero: '533',
   345	    libelle: "Soci√©t√©s de gestion et d'interm√©diation",
   346	    classe: 5,
   347	    sousClasse: '53',
   348	    nature: 'ACTIF',
   349	    sens: 'DEBITEUR',
   350	    utilisation: 'FACULTATIF'
   351	  },
   352	  {
   353	    numero: '538',
   354	    libelle: 'Autres √©tablissements financiers',
   355	    classe: 5,
   356	    sousClasse: '53',
   357	    nature: 'ACTIF',
   358	    sens: 'DEBITEUR',
   359	    utilisation: 'FACULTATIF'
   360	  },
   361	
   362	  // ============================================================
   363	  // 54 - INSTRUMENTS DE TRESORERIE
   364	  // ============================================================
   365	  {
   366	    numero: '54',
   367	    libelle: 'Instruments de tr√©sorerie',
   368	    classe: 5,
   369	    nature: 'ACTIF',
   370	    sens: 'DEBITEUR',
   371	    utilisation: 'FACULTATIF'
   372	  },
   373	  {
   374	    numero: '541',
   375	    libelle: "Options de taux d'int√©r√™t",
   376	    classe: 5,
   377	    sousClasse: '54',
   378	    nature: 'ACTIF',
   379	    sens: 'DEBITEUR',
   380	    utilisation: 'FACULTATIF'
   381	  },
   382	  {
   383	    numero: '542',
   384	    libelle: 'Options de taux de change',
   385	    classe: 5,
   386	    sousClasse: '54',
   387	    nature: 'ACTIF',
   388	    sens: 'DEBITEUR',
   389	    utilisation: 'FACULTATIF'
   390	  },
   391	  {
   392	    numero: '543',
   393	    libelle: 'Options de cours de mati√®res',
   394	    classe: 5,
   395	    sousClasse: '54',
   396	    nature: 'ACTIF',
   397	    sens: 'DEBITEUR',
   398	    utilisation: 'FACULTATIF'
   399	  },
   400	  {
   401	    numero: '544',
   402	    libelle: "Instruments de taux d'int√©r√™t",
   403	    classe: 5,
   404	    sousClasse: '54',
   405	    nature: 'ACTIF',
   406	    sens: 'DEBITEUR',
   407	    utilisation: 'FACULTATIF'
   408	  },
   409	  {
   410	    numero: '545',
   411	    libelle: 'Instruments de taux de change',
   412	    classe: 5,
   413	    sousClasse: '54',
   414	    nature: 'ACTIF',
   415	    sens: 'DEBITEUR',
   416	    utilisation: 'FACULTATIF'
   417	  },
   418	  {
   419	    numero: '548',
   420	    libelle: 'Autres instruments de tr√©sorerie',
   421	    classe: 5,
   422	    sousClasse: '54',
   423	    nature: 'ACTIF',
   424	    sens: 'DEBITEUR',
   425	    utilisation: 'FACULTATIF'
   426	  },
   427	
   428	  // ============================================================
   429	  // 55 - REGIES D'AVANCE, ACCREDITIFS ET FONDS ATTRIBUES
   430	  // ============================================================
   431	  {
   432	    numero: '55',
   433	    libelle: "R√©gies d'avance, accr√©dits et fonds attribu√©s",
   434	    classe: 5,
   435	    nature: 'ACTIF',
   436	    sens: 'DEBITEUR',
   437	    utilisation: 'FACULTATIF'
   438	  },
   439	  {
   440	    numero: '551',
   441	    libelle: "R√©gies d'avance",
   442	    classe: 5,
   443	    sousClasse: '55',
   444	    nature: 'ACTIF',
   445	    sens: 'DEBITEUR',
   446	    utilisation: 'FACULTATIF'
   447	  },
   448	  {
   449	    numero: '552',
   450	    libelle: 'Accr√©dits',
   451	    classe: 5,
   452	    sousClasse: '55',
   453	    nature: 'ACTIF',
   454	    sens: 'DEBITEUR',
   455	    utilisation: 'FACULTATIF'
   456	  },
   457	  {
   458	    numero: '558',
   459	    libelle: 'Fonds attribu√©s',
   460	    classe: 5,
   461	    sousClasse: '55',
   462	    nature: 'ACTIF',
   463	    sens: 'DEBITEUR',
   464	    utilisation: 'FACULTATIF'
   465	  },
   466	
   467	  // ============================================================
   468	  // 56 - BANQUES, CREDITS DE TRESORERIE ET D'ESCOMPTE
   469	  // ============================================================
   470	  {
   471	    numero: '56',
   472	    libelle: "Banques, cr√©dits de tr√©sorerie et d'escompte",
   473	    classe: 5,
   474	    nature: 'PASSIF',
   475	    sens: 'CREDITEUR',
   476	    utilisation: 'FACULTATIF'
   477	  },
   478	  {
   479	    numero: '561',
   480	    libelle: 'Cr√©dits de tr√©sorerie',
   481	    classe: 5,
   482	    sousClasse: '56',
   483	    nature: 'PASSIF',
   484	    sens: 'CREDITEUR',
   485	    utilisation: 'FACULTATIF'
   486	  },
   487	  {
   488	    numero: '562',
   489	    libelle: "Cr√©dits d'escompte",
   490	    classe: 5,
   491	    sousClasse: '56',
   492	    nature: 'PASSIF',
   493	    sens: 'CREDITEUR',
   494	    utilisation: 'FACULTATIF'
   495	  },
   496	  {
   497	    numero: '564',
   498	    libelle: 'Escompte de cr√©dits de campagne',
   499	    classe: 5,
   500	    sousClasse: '56',
   501	    nature: 'PASSIF',
   502	    sens: 'CREDITEUR',
   503	    utilisation: 'FACULTATIF'
   504	  },
   505	  {
   506	    numero: '565',
   507	    libelle: 'Escompte de cr√©dits ordinaires',
   508	    classe: 5,
   509	    sousClasse: '56',
   510	    nature: 'PASSIF',
   511	    sens: 'CREDITEUR',
   512	    utilisation: 'FACULTATIF'
   513	  },
   514	  {
   515	    numero: '566',
   516	    libelle: 'Banques, int√©r√™ts courus',
   517	    classe: 5,
   518	    sousClasse: '56',
   519	    nature: 'PASSIF',
   520	    sens: 'CREDITEUR',
   521	    utilisation: 'FACULTATIF'
   522	  },
   523	  {
   524	    numero: '568',
   525	    libelle: 'Autres cr√©dits de tr√©sorerie',
   526	    classe: 5,
   527	    sousClasse: '56',
   528	    nature: 'PASSIF',
   529	    sens: 'CREDITEUR',
   530	    utilisation: 'FACULTATIF'
   531	  },
   532	
   533	  // ============================================================
   534	  // 57 - CAISSE
   535	  // ============================================================
   536	  {
   537	    numero: '57',
   538	    libelle: 'Caisse',
   539	    classe: 5,
   540	    nature: 'ACTIF',
   541	    sens: 'DEBITEUR',
   542	    utilisation: 'OBLIGATOIRE'
   543	  },
   544	  {
   545	    numero: '571',
   546	    libelle: 'Caisse si√®ge social',
   547	    classe: 5,
   548	    sousClasse: '57',
   549	    nature: 'ACTIF',
   550	    sens: 'DEBITEUR',
   551	    utilisation: 'OBLIGATOIRE'
   552	  },
   553	  {
   554	    numero: '572',
   555	    libelle: 'Caisse succursale A',
   556	    classe: 5,
   557	    sousClasse: '57',
   558	    nature: 'ACTIF',
   559	    sens: 'DEBITEUR',
   560	    utilisation: 'FACULTATIF'
   561	  },
   562	  {
   563	    numero: '573',
   564	    libelle: 'Caisse succursale B',
   565	    classe: 5,
   566	    sousClasse: '57',
   567	    nature: 'ACTIF',
   568	    sens: 'DEBITEUR',
   569	    utilisation: 'FACULTATIF'
   570	  },
   571	  {
   572	    numero: '578',
   573	    libelle: 'Autres caisses',
   574	    classe: 5,
   575	    sousClasse: '57',
   576	    nature: 'ACTIF',
   577	    sens: 'DEBITEUR',
   578	    utilisation: 'FACULTATIF'
   579	  },
   580	
   581	  // ============================================================
   582	  // 58 - REGIES DE RECETTES
   583	  // ============================================================
   584	  {
   585	    numero: '58',
   586	    libelle: 'R√©gies de recettes',
   587	    classe: 5,
   588	    nature: 'ACTIF',
   589	    sens: 'DEBITEUR',
   590	    utilisation: 'FACULTATIF'
   591	  },
   592	  {
   593	    numero: '581',
   594	    libelle: 'R√©gie de recettes si√®ge social',
   595	    classe: 5,
   596	    sousClasse: '58',
   597	    nature: 'ACTIF',
   598	    sens: 'DEBITEUR',
   599	    utilisation: 'FACULTATIF'
   600	  },
   601	  {
   602	    numero: '582',
   603	    libelle: 'R√©gie de recettes succursale A',
   604	    classe: 5,
   605	    sousClasse: '58',
   606	    nature: 'ACTIF',
   607	    sens: 'DEBITEUR',
   608	    utilisation: 'FACULTATIF'
   609	  },
   610	  {
   611	    numero: '588',
   612	    libelle: 'Autres r√©gies de recettes',
   613	    classe: 5,
   614	    sousClasse: '58',
   615	    nature: 'ACTIF',
   616	    sens: 'DEBITEUR',
   617	    utilisation: 'FACULTATIF'
   618	  },
   619	
   620	  // ============================================================
   621	  // 59 - DEPRECIATIONS ET RISQUES PROVISIONNES
   622	  // ============================================================
   623	  {
   624	    numero: '59',
   625	    libelle: 'D√©pr√©ciations et risques provisionn√©s',
   626	    classe: 5,
   627	    nature: 'ACTIF',
   628	    sens: 'CREDITEUR',
   629	    utilisation: 'FACULTATIF'
   630	  },
   631	  {
   632	    numero: '591',
   633	    libelle: 'D√©pr√©ciations des titres de placement',
   634	    classe: 5,
   635	    sousClasse: '59',
   636	    nature: 'ACTIF',
   637	    sens: 'CREDITEUR',
   638	    utilisation: 'FACULTATIF'
   639	  },
   640	  {
   641	    numero: '592',
   642	    libelle: 'D√©pr√©ciations des valeurs √† encaisser',
   643	    classe: 5,
   644	    sousClasse: '59',
   645	    nature: 'ACTIF',
   646	    sens: 'CREDITEUR',
   647	    utilisation: 'FACULTATIF'
   648	  },
   649	  {
   650	    numero: '593',
   651	    libelle: 'D√©pr√©ciations des comptes banques',
   652	    classe: 5,
   653	    sousClasse: '59',
   654	    nature: 'ACTIF',
   655	    sens: 'CREDITEUR',
   656	    utilisation: 'FACULTATIF'
   657	  },
   658	  {
   659	    numero: '594',
   660	    libelle: 'D√©pr√©ciations des instruments de tr√©sorerie',
   661	    classe: 5,
   662	    sousClasse: '59',
   663	    nature: 'ACTIF',
   664	    sens: 'CREDITEUR',
   665	    utilisation: 'FACULTATIF'
   666	  },
   667	  {
   668	    numero: '598',
   669	    libelle: 'Autres d√©pr√©ciations des comptes de tr√©sorerie',
   670	    classe: 5,
   671	    sousClasse: '59',
   672	    nature: 'ACTIF',
   673	    sens: 'CREDITEUR',
   674	    utilisation: 'FACULTATIF'
   675	  },
   676	  {
   677	    numero: '599',
   678	    libelle: 'Risques provisionn√©s √† caract√®re financier',
   679	    classe: 5,
   680	    sousClasse: '59',
   681	    nature: 'ACTIF',
   682	    sens: 'CREDITEUR',
   683	    utilisation: 'FACULTATIF'
   684	  }
   685	]

================================================================================
FILE: src/data/syscohada/plan/classe6.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 6 - COMPTES DE CHARGES DES ACTIVITES ORDINAIRES
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_6_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 60 - ACHATS ET VARIATIONS DE STOCKS
    10	  // ============================================================
    11	  {
    12	    numero: '60',
    13	    libelle: 'Achats et variations de stocks',
    14	    classe: 6,
    15	    nature: 'CHARGE',
    16	    sens: 'DEBITEUR',
    17	    utilisation: 'OBLIGATOIRE'
    18	  },
    19	  // --- 601 Achats de marchandises ---
    20	  {
    21	    numero: '601',
    22	    libelle: 'Achats de marchandises',
    23	    classe: 6,
    24	    sousClasse: '60',
    25	    nature: 'CHARGE',
    26	    sens: 'DEBITEUR',
    27	    utilisation: 'OBLIGATOIRE',
    28	    secteurs: ['COMMERCE']
    29	  },
    30	  {
    31	    numero: '6011',
    32	    libelle: 'dans la R√©gion',
    33	    classe: 6,
    34	    sousClasse: '601',
    35	    nature: 'CHARGE',
    36	    sens: 'DEBITEUR',
    37	    utilisation: 'OBLIGATOIRE'
    38	  },
    39	  {
    40	    numero: '6012',
    41	    libelle: 'hors R√©gion',
    42	    classe: 6,
    43	    sousClasse: '601',
    44	    nature: 'CHARGE',
    45	    sens: 'DEBITEUR',
    46	    utilisation: 'FACULTATIF'
    47	  },
    48	  {
    49	    numero: '6019',
    50	    libelle: 'Rabais, remises et ristournes obtenus sur achats de marchandises',
    51	    classe: 6,
    52	    sousClasse: '601',
    53	    nature: 'CHARGE',
    54	    sens: 'CREDITEUR',
    55	    utilisation: 'FACULTATIF'
    56	  },
    57	  // --- 602 Achats de mati√®res premi√®res et fournitures li√©es ---
    58	  {
    59	    numero: '602',
    60	    libelle: 'Achats de mati√®res premi√®res et fournitures li√©es',
    61	    classe: 6,
    62	    sousClasse: '60',
    63	    nature: 'CHARGE',
    64	    sens: 'DEBITEUR',
    65	    utilisation: 'OBLIGATOIRE',
    66	    secteurs: ['INDUSTRIE', 'PRODUCTION']
    67	  },
    68	  {
    69	    numero: '6021',
    70	    libelle: 'Achats de mati√®res premi√®res',
    71	    classe: 6,
    72	    sousClasse: '602',
    73	    nature: 'CHARGE',
    74	    sens: 'DEBITEUR',
    75	    utilisation: 'OBLIGATOIRE'
    76	  },
    77	  {
    78	    numero: '6022',
    79	    libelle: 'Achats de mati√®res et fournitures consommables',
    80	    classe: 6,
    81	    sousClasse: '602',
    82	    nature: 'CHARGE',
    83	    sens: 'DEBITEUR',
    84	    utilisation: 'OBLIGATOIRE'
    85	  },
    86	  {
    87	    numero: '6023',
    88	    libelle: "Achats d'emballages",
    89	    classe: 6,
    90	    sousClasse: '602',
    91	    nature: 'CHARGE',
    92	    sens: 'DEBITEUR',
    93	    utilisation: 'FACULTATIF'
    94	  },
    95	  {
    96	    numero: '6029',
    97	    libelle: 'Rabais, remises et ristournes obtenus',
    98	    classe: 6,
    99	    sousClasse: '602',
   100	    nature: 'CHARGE',
   101	    sens: 'CREDITEUR',
   102	    utilisation: 'FACULTATIF'
   103	  },
   104	  // --- 603 Variations des stocks de biens achet√©s ---
   105	  {
   106	    numero: '603',
   107	    libelle: 'Variations des stocks de biens achet√©s',
   108	    classe: 6,
   109	    sousClasse: '60',
   110	    nature: 'CHARGE',
   111	    sens: 'DEBITEUR',
   112	    utilisation: 'OBLIGATOIRE'
   113	  },
   114	  {
   115	    numero: '6031',
   116	    libelle: 'Variations des stocks de marchandises',
   117	    classe: 6,
   118	    sousClasse: '603',
   119	    nature: 'CHARGE',
   120	    sens: 'DEBITEUR',
   121	    utilisation: 'OBLIGATOIRE'
   122	  },
   123	  {
   124	    numero: '6032',
   125	    libelle: 'Variations des stocks de mati√®res premi√®res',
   126	    classe: 6,
   127	    sousClasse: '603',
   128	    nature: 'CHARGE',
   129	    sens: 'DEBITEUR',
   130	    utilisation: 'OBLIGATOIRE'
   131	  },
   132	  {
   133	    numero: '6033',
   134	    libelle: "Variations des stocks d'autres approvisionnements",
   135	    classe: 6,
   136	    sousClasse: '603',
   137	    nature: 'CHARGE',
   138	    sens: 'DEBITEUR',
   139	    utilisation: 'FACULTATIF'
   140	  },
   141	  // --- 604 Achats stock√©s de mati√®res et fournitures consommables ---
   142	  {
   143	    numero: '604',
   144	    libelle: 'Achats stock√©s de mati√®res et fournitures consommables',
   145	    classe: 6,
   146	    sousClasse: '60',
   147	    nature: 'CHARGE',
   148	    sens: 'DEBITEUR',
   149	    utilisation: 'FACULTATIF'
   150	  },
   151	  {
   152	    numero: '6041',
   153	    libelle: 'Mati√®res consommables',
   154	    classe: 6,
   155	    sousClasse: '604',
   156	    nature: 'CHARGE',
   157	    sens: 'DEBITEUR',
   158	    utilisation: 'FACULTATIF'
   159	  },
   160	  {
   161	    numero: '6042',
   162	    libelle: 'Mati√®res combustibles',
   163	    classe: 6,
   164	    sousClasse: '604',
   165	    nature: 'CHARGE',
   166	    sens: 'DEBITEUR',
   167	    utilisation: 'FACULTATIF'
   168	  },
   169	  {
   170	    numero: '6043',
   171	    libelle: "Produits d'entretien",
   172	    classe: 6,
   173	    sousClasse: '604',
   174	    nature: 'CHARGE',
   175	    sens: 'DEBITEUR',
   176	    utilisation: 'FACULTATIF'
   177	  },
   178	  {
   179	    numero: '6044',
   180	    libelle: "Fournitures d'atelier et d'usine",
   181	    classe: 6,
   182	    sousClasse: '604',
   183	    nature: 'CHARGE',
   184	    sens: 'DEBITEUR',
   185	    utilisation: 'FACULTATIF'
   186	  },
   187	  {
   188	    numero: '6046',
   189	    libelle: 'Fournitures de bureau',
   190	    classe: 6,
   191	    sousClasse: '604',
   192	    nature: 'CHARGE',
   193	    sens: 'DEBITEUR',
   194	    utilisation: 'OBLIGATOIRE'
   195	  },
   196	  {
   197	    numero: '6047',
   198	    libelle: "Fournitures et mati√®res d'emballages",
   199	    classe: 6,
   200	    sousClasse: '604',
   201	    nature: 'CHARGE',
   202	    sens: 'DEBITEUR',
   203	    utilisation: 'FACULTATIF'
   204	  },
   205	  {
   206	    numero: '6049',
   207	    libelle: 'Rabais, remises et ristournes obtenus',
   208	    classe: 6,
   209	    sousClasse: '604',
   210	    nature: 'CHARGE',
   211	    sens: 'CREDITEUR',
   212	    utilisation: 'FACULTATIF'
   213	  },
   214	  // --- 605 Autres achats ---
   215	  {
   216	    numero: '605',
   217	    libelle: 'Autres achats',
   218	    classe: 6,
   219	    sousClasse: '60',
   220	    nature: 'CHARGE',
   221	    sens: 'DEBITEUR',
   222	    utilisation: 'OBLIGATOIRE'
   223	  },
   224	  {
   225	    numero: '6051',
   226	    libelle: 'Fournitures non stockables - eau',
   227	    classe: 6,
   228	    sousClasse: '605',
   229	    nature: 'CHARGE',
   230	    sens: 'DEBITEUR',
   231	    utilisation: 'OBLIGATOIRE'
   232	  },
   233	  {
   234	    numero: '6052',
   235	    libelle: 'Fournitures non stockables - √©lectricit√©',
   236	    classe: 6,
   237	    sousClasse: '605',
   238	    nature: 'CHARGE',
   239	    sens: 'DEBITEUR',
   240	    utilisation: 'OBLIGATOIRE'
   241	  },
   242	  {
   243	    numero: '6053',
   244	    libelle: 'Fournitures non stockables - autres √©nergies',
   245	    classe: 6,
   246	    sousClasse: '605',
   247	    nature: 'CHARGE',
   248	    sens: 'DEBITEUR',
   249	    utilisation: 'FACULTATIF'
   250	  },
   251	  {
   252	    numero: '6054',
   253	    libelle: "Fournitures d'entretien non stockables",
   254	    classe: 6,
   255	    sousClasse: '605',
   256	    nature: 'CHARGE',
   257	    sens: 'DEBITEUR',
   258	    utilisation: 'FACULTATIF'
   259	  },
   260	  {
   261	    numero: '6055',
   262	    libelle: 'Fournitures de bureau non stockables',
   263	    classe: 6,
   264	    sousClasse: '605',
   265	    nature: 'CHARGE',
   266	    sens: 'DEBITEUR',
   267	    utilisation: 'FACULTATIF'
   268	  },
   269	  {
   270	    numero: '6056',
   271	    libelle: 'Achats de petit mat√©riel et outillage',
   272	    classe: 6,
   273	    sousClasse: '605',
   274	    nature: 'CHARGE',
   275	    sens: 'DEBITEUR',
   276	    utilisation: 'FACULTATIF'
   277	  },
   278	  {
   279	    numero: '6057',
   280	    libelle: "Achats d'√©tudes et de prestations de services",
   281	    classe: 6,
   282	    sousClasse: '605',
   283	    nature: 'CHARGE',
   284	    sens: 'DEBITEUR',
   285	    utilisation: 'FACULTATIF'
   286	  },
   287	  {
   288	    numero: '6058',
   289	    libelle: 'Achats de travaux, mat√©riels et √©quipements',
   290	    classe: 6,
   291	    sousClasse: '605',
   292	    nature: 'CHARGE',
   293	    sens: 'DEBITEUR',
   294	    utilisation: 'FACULTATIF'
   295	  },
   296	  {
   297	    numero: '6059',
   298	    libelle: 'Rabais, remises et ristournes obtenus',
   299	    classe: 6,
   300	    sousClasse: '605',
   301	    nature: 'CHARGE',
   302	    sens: 'CREDITEUR',
   303	    utilisation: 'FACULTATIF'
   304	  },
   305	  // --- 608 Achats d'emballages ---
   306	  {
   307	    numero: '608',
   308	    libelle: "Achats d'emballages",
   309	    classe: 6,
   310	    sousClasse: '60',
   311	    nature: 'CHARGE',
   312	    sens: 'DEBITEUR',
   313	    utilisation: 'FACULTATIF'
   314	  },
   315	
   316	  // ============================================================
   317	  // 61 - TRANSPORTS
   318	  // ============================================================
   319	  {
   320	    numero: '61',
   321	    libelle: 'Transports',
   322	    classe: 6,
   323	    nature: 'CHARGE',
   324	    sens: 'DEBITEUR',
   325	    utilisation: 'OBLIGATOIRE'
   326	  },
   327	  {
   328	    numero: '611',
   329	    libelle: 'Transports sur achats',
   330	    classe: 6,
   331	    sousClasse: '61',
   332	    nature: 'CHARGE',
   333	    sens: 'DEBITEUR',
   334	    utilisation: 'OBLIGATOIRE'
   335	  },
   336	  {
   337	    numero: '612',
   338	    libelle: 'Transports sur ventes',
   339	    classe: 6,
   340	    sousClasse: '61',
   341	    nature: 'CHARGE',
   342	    sens: 'DEBITEUR',
   343	    utilisation: 'OBLIGATOIRE'
   344	  },
   345	  {
   346	    numero: '613',
   347	    libelle: 'Transports pour le compte de tiers',
   348	    classe: 6,
   349	    sousClasse: '61',
   350	    nature: 'CHARGE',
   351	    sens: 'DEBITEUR',
   352	    utilisation: 'FACULTATIF'
   353	  },
   354	  {
   355	    numero: '614',
   356	    libelle: 'Transports du personnel',
   357	    classe: 6,
   358	    sousClasse: '61',
   359	    nature: 'CHARGE',
   360	    sens: 'DEBITEUR',
   361	    utilisation: 'FACULTATIF'
   362	  },
   363	  {
   364	    numero: '616',
   365	    libelle: 'Transports de plis',
   366	    classe: 6,
   367	    sousClasse: '61',
   368	    nature: 'CHARGE',
   369	    sens: 'DEBITEUR',
   370	    utilisation: 'FACULTATIF'
   371	  },
   372	  {
   373	    numero: '618',
   374	    libelle: 'Autres frais de transport',
   375	    classe: 6,
   376	    sousClasse: '61',
   377	    nature: 'CHARGE',
   378	    sens: 'DEBITEUR',
   379	    utilisation: 'FACULTATIF'
   380	  },
   381	  {
   382	    numero: '619',
   383	    libelle: 'Rabais, remises et ristournes obtenus sur transports',
   384	    classe: 6,
   385	    sousClasse: '61',
   386	    nature: 'CHARGE',
   387	    sens: 'CREDITEUR',
   388	    utilisation: 'FACULTATIF'
   389	  },
   390	
   391	  // ============================================================
   392	  // 62 - SERVICES EXTERIEURS A
   393	  // ============================================================
   394	  {
   395	    numero: '62',
   396	    libelle: 'Services ext√©rieurs A',
   397	    classe: 6,
   398	    nature: 'CHARGE',
   399	    sens: 'DEBITEUR',
   400	    utilisation: 'OBLIGATOIRE'
   401	  },
   402	  // --- 621 Sous-traitance g√©n√©rale ---
   403	  {
   404	    numero: '621',
   405	    libelle: 'Sous-traitance g√©n√©rale',
   406	    classe: 6,
   407	    sousClasse: '62',
   408	    nature: 'CHARGE',
   409	    sens: 'DEBITEUR',
   410	    utilisation: 'FACULTATIF'
   411	  },
   412	  // --- 622 Locations et charges locatives ---
   413	  {
   414	    numero: '622',
   415	    libelle: 'Locations et charges locatives',
   416	    classe: 6,
   417	    sousClasse: '62',
   418	    nature: 'CHARGE',
   419	    sens: 'DEBITEUR',
   420	    utilisation: 'OBLIGATOIRE'
   421	  },
   422	  {
   423	    numero: '6221',
   424	    libelle: 'Locations de terrains',
   425	    classe: 6,
   426	    sousClasse: '622',
   427	    nature: 'CHARGE',
   428	    sens: 'DEBITEUR',
   429	    utilisation: 'FACULTATIF'
   430	  },
   431	  {
   432	    numero: '6222',
   433	    libelle: 'Locations de b√¢timents',
   434	    classe: 6,
   435	    sousClasse: '622',
   436	    nature: 'CHARGE',
   437	    sens: 'DEBITEUR',
   438	    utilisation: 'OBLIGATOIRE'
   439	  },
   440	  {
   441	    numero: '6223',
   442	    libelle: 'Locations de mat√©riel et outillage',
   443	    classe: 6,
   444	    sousClasse: '622',
   445	    nature: 'CHARGE',
   446	    sens: 'DEBITEUR',
   447	    utilisation: 'FACULTATIF'
   448	  },
   449	  {
   450	    numero: '6224',
   451	    libelle: 'Malis sur emballages',
   452	    classe: 6,
   453	    sousClasse: '622',
   454	    nature: 'CHARGE',
   455	    sens: 'DEBITEUR',
   456	    utilisation: 'FACULTATIF'
   457	  },
   458	  {
   459	    numero: '6225',
   460	    libelle: 'Locations de mat√©riel de transport',
   461	    classe: 6,
   462	    sousClasse: '622',
   463	    nature: 'CHARGE',
   464	    sens: 'DEBITEUR',
   465	    utilisation: 'FACULTATIF'
   466	  },
   467	  {
   468	    numero: '6228',
   469	    libelle: 'Locations et charges locatives diverses',
   470	    classe: 6,
   471	    sousClasse: '622',
   472	    nature: 'CHARGE',
   473	    sens: 'DEBITEUR',
   474	    utilisation: 'FACULTATIF'
   475	  },
   476	  // --- 623 Redevances de cr√©dit-bail et contrats assimil√©s ---
   477	  {
   478	    numero: '623',
   479	    libelle: 'Redevances de cr√©dit-bail et contrats assimil√©s',
   480	    classe: 6,
   481	    sousClasse: '62',
   482	    nature: 'CHARGE',
   483	    sens: 'DEBITEUR',
   484	    utilisation: 'FACULTATIF'
   485	  },
   486	  {
   487	    numero: '6231',
   488	    libelle: 'Cr√©dit-bail immobilier',
   489	    classe: 6,
   490	    sousClasse: '623',
   491	    nature: 'CHARGE',
   492	    sens: 'DEBITEUR',
   493	    utilisation: 'FACULTATIF'
   494	  },
   495	  {
   496	    numero: '6232',
   497	    libelle: 'Cr√©dit-bail mobilier',
   498	    classe: 6,
   499	    sousClasse: '623',
   500	    nature: 'CHARGE',
   501	    sens: 'DEBITEUR',
   502	    utilisation: 'FACULTATIF'
   503	  },
   504	  {
   505	    numero: '6233',
   506	    libelle: 'Contrats assimil√©s',
   507	    classe: 6,
   508	    sousClasse: '623',
   509	    nature: 'CHARGE',
   510	    sens: 'DEBITEUR',
   511	    utilisation: 'FACULTATIF'
   512	  },
   513	  // --- 624 Entretien, r√©parations et maintenance ---
   514	  {
   515	    numero: '624',
   516	    libelle: 'Entretien, r√©parations et maintenance',
   517	    classe: 6,
   518	    sousClasse: '62',
   519	    nature: 'CHARGE',
   520	    sens: 'DEBITEUR',
   521	    utilisation: 'OBLIGATOIRE'
   522	  },
   523	  {
   524	    numero: '6241',
   525	    libelle: 'Entretien et r√©parations des biens immobiliers',
   526	    classe: 6,
   527	    sousClasse: '624',
   528	    nature: 'CHARGE',
   529	    sens: 'DEBITEUR',
   530	    utilisation: 'OBLIGATOIRE'
   531	  },
   532	  {
   533	    numero: '6242',
   534	    libelle: 'Entretien et r√©parations des biens mobiliers',
   535	    classe: 6,
   536	    sousClasse: '624',
   537	    nature: 'CHARGE',
   538	    sens: 'DEBITEUR',
   539	    utilisation: 'OBLIGATOIRE'
   540	  },
   541	  {
   542	    numero: '6243',
   543	    libelle: 'Maintenance',
   544	    classe: 6,
   545	    sousClasse: '624',
   546	    nature: 'CHARGE',
   547	    sens: 'DEBITEUR',
   548	    utilisation: 'FACULTATIF'
   549	  },
   550	  {
   551	    numero: '6248',
   552	    libelle: 'Autres entretiens et r√©parations',
   553	    classe: 6,
   554	    sousClasse: '624',
   555	    nature: 'CHARGE',
   556	    sens: 'DEBITEUR',
   557	    utilisation: 'FACULTATIF'
   558	  },
   559	  // --- 625 Primes d'assurance ---
   560	  {
   561	    numero: '625',
   562	    libelle: "Primes d'assurance",
   563	    classe: 6,
   564	    sousClasse: '62',
   565	    nature: 'CHARGE',
   566	    sens: 'DEBITEUR',
   567	    utilisation: 'OBLIGATOIRE'
   568	  },
   569	  {
   570	    numero: '6251',
   571	    libelle: 'Assurances multirisques',
   572	    classe: 6,
   573	    sousClasse: '625',
   574	    nature: 'CHARGE',
   575	    sens: 'DEBITEUR',
   576	    utilisation: 'OBLIGATOIRE'
   577	  },
   578	  {
   579	    numero: '6252',
   580	    libelle: 'Assurances mat√©riel de transport',
   581	    classe: 6,
   582	    sousClasse: '625',
   583	    nature: 'CHARGE',
   584	    sens: 'DEBITEUR',
   585	    utilisation: 'OBLIGATOIRE'
   586	  },
   587	  {
   588	    numero: '6253',
   589	    libelle: "Assurances risques d'exploitation",
   590	    classe: 6,
   591	    sousClasse: '625',
   592	    nature: 'CHARGE',
   593	    sens: 'DEBITEUR',
   594	    utilisation: 'FACULTATIF'
   595	  },
   596	  {
   597	    numero: '6254',
   598	    libelle: 'Assurances responsabilit√© du dirigeant',
   599	    classe: 6,
   600	    sousClasse: '625',
   601	    nature: 'CHARGE',
   602	    sens: 'DEBITEUR',
   603	    utilisation: 'FACULTATIF'
   604	  },
   605	  {
   606	    numero: '6256',
   607	    libelle: 'Assurances transport sur achats',
   608	    classe: 6,
   609	    sousClasse: '625',
   610	    nature: 'CHARGE',
   611	    sens: 'DEBITEUR',
   612	    utilisation: 'FACULTATIF'
   613	  },
   614	  {
   615	    numero: '6258',
   616	    libelle: "Autres primes d'assurance",
   617	    classe: 6,
   618	    sousClasse: '625',
   619	    nature: 'CHARGE',
   620	    sens: 'DEBITEUR',
   621	    utilisation: 'FACULTATIF'
   622	  },
   623	  // --- 626 √âtudes, recherches et documentation ---
   624	  {
   625	    numero: '626',
   626	    libelle: '√âtudes, recherches et documentation',
   627	    classe: 6,
   628	    sousClasse: '62',
   629	    nature: 'CHARGE',
   630	    sens: 'DEBITEUR',
   631	    utilisation: 'FACULTATIF'
   632	  },
   633	  {
   634	    numero: '6261',
   635	    libelle: '√âtudes et recherches',
   636	    classe: 6,
   637	    sousClasse: '626',
   638	    nature: 'CHARGE',
   639	    sens: 'DEBITEUR',
   640	    utilisation: 'FACULTATIF'
   641	  },
   642	  {
   643	    numero: '6265',
   644	    libelle: 'Documentation g√©n√©rale',
   645	    classe: 6,
   646	    sousClasse: '626',
   647	    nature: 'CHARGE',
   648	    sens: 'DEBITEUR',
   649	    utilisation: 'FACULTATIF'
   650	  },
   651	  {
   652	    numero: '6266',
   653	    libelle: 'Documentation technique',
   654	    classe: 6,
   655	    sousClasse: '626',
   656	    nature: 'CHARGE',
   657	    sens: 'DEBITEUR',
   658	    utilisation: 'FACULTATIF'
   659	  },
   660	  // --- 627 Publicit√©, publications, relations publiques ---
   661	  {
   662	    numero: '627',
   663	    libelle: 'Publicit√©, publications, relations publiques',
   664	    classe: 6,
   665	    sousClasse: '62',
   666	    nature: 'CHARGE',
   667	    sens: 'DEBITEUR',
   668	    utilisation: 'FACULTATIF'
   669	  },
   670	  {
   671	    numero: '6271',
   672	    libelle: 'Annonces et insertions',
   673	    classe: 6,
   674	    sousClasse: '627',
   675	    nature: 'CHARGE',
   676	    sens: 'DEBITEUR',
   677	    utilisation: 'FACULTATIF'
   678	  },
   679	  {
   680	    numero: '6272',
   681	    libelle: 'Catalogues et imprim√©s',
   682	    classe: 6,
   683	    sousClasse: '627',
   684	    nature: 'CHARGE',
   685	    sens: 'DEBITEUR',
   686	    utilisation: 'FACULTATIF'
   687	  },
   688	  {
   689	    numero: '6273',
   690	    libelle: '√âchantillons',
   691	    classe: 6,
   692	    sousClasse: '627',
   693	    nature: 'CHARGE',
   694	    sens: 'DEBITEUR',
   695	    utilisation: 'FACULTATIF'
   696	  },
   697	  {
   698	    numero: '6274',
   699	    libelle: 'Foires et expositions',
   700	    classe: 6,
   701	    sousClasse: '627',
   702	    nature: 'CHARGE',
   703	    sens: 'DEBITEUR',
   704	    utilisation: 'FACULTATIF'
   705	  },
   706	  {
   707	    numero: '6275',
   708	    libelle: 'Publications',
   709	    classe: 6,
   710	    sousClasse: '627',
   711	    nature: 'CHARGE',
   712	    sens: 'DEBITEUR',
   713	    utilisation: 'FACULTATIF'
   714	  },
   715	  {
   716	    numero: '6276',
   717	    libelle: 'Cadeaux √† la client√®le',
   718	    classe: 6,
   719	    sousClasse: '627',
   720	    nature: 'CHARGE',
   721	    sens: 'DEBITEUR',
   722	    utilisation: 'FACULTATIF'
   723	  },
   724	  {
   725	    numero: '6277',
   726	    libelle: 'Frais de colloques, s√©minaires, conf√©rences',
   727	    classe: 6,
   728	    sousClasse: '627',
   729	    nature: 'CHARGE',
   730	    sens: 'DEBITEUR',
   731	    utilisation: 'FACULTATIF'
   732	  },
   733	  {
   734	    numero: '6278',
   735	    libelle: 'Autres charges de publicit√© et de relations publiques',
   736	    classe: 6,
   737	    sousClasse: '627',
   738	    nature: 'CHARGE',
   739	    sens: 'DEBITEUR',
   740	    utilisation: 'FACULTATIF'
   741	  },
   742	  // --- 628 Frais de t√©l√©communications ---
   743	  {
   744	    numero: '628',
   745	    libelle: 'Frais de t√©l√©communications',
   746	    classe: 6,
   747	    sousClasse: '62',
   748	    nature: 'CHARGE',
   749	    sens: 'DEBITEUR',
   750	    utilisation: 'OBLIGATOIRE'
   751	  },
   752	  {
   753	    numero: '6281',
   754	    libelle: 'Frais de t√©l√©phone',
   755	    classe: 6,
   756	    sousClasse: '628',
   757	    nature: 'CHARGE',
   758	    sens: 'DEBITEUR',
   759	    utilisation: 'OBLIGATOIRE'
   760	  },
   761	  {
   762	    numero: '6282',
   763	    libelle: 'Frais de t√©l√©copie',
   764	    classe: 6,
   765	    sousClasse: '628',
   766	    nature: 'CHARGE',
   767	    sens: 'DEBITEUR',
   768	    utilisation: 'FACULTATIF'
   769	  },
   770	  {
   771	    numero: '6283',
   772	    libelle: "Frais d'internet",
   773	    classe: 6,
   774	    sousClasse: '628',
   775	    nature: 'CHARGE',
   776	    sens: 'DEBITEUR',
   777	    utilisation: 'OBLIGATOIRE'
   778	  },
   779	  {
   780	    numero: '6288',
   781	    libelle: 'Autres frais de t√©l√©communications',
   782	    classe: 6,
   783	    sousClasse: '628',
   784	    nature: 'CHARGE',
   785	    sens: 'DEBITEUR',
   786	    utilisation: 'FACULTATIF'
   787	  },
   788	  // --- 629 Rabais, remises et ristournes obtenus ---
   789	  {
   790	    numero: '629',
   791	    libelle: 'Rabais, remises et ristournes obtenus',
   792	    classe: 6,
   793	    sousClasse: '62',
   794	    nature: 'CHARGE',
   795	    sens: 'CREDITEUR',
   796	    utilisation: 'FACULTATIF'
   797	  },
   798	
   799	  // ============================================================
   800	  // 63 - SERVICES EXTERIEURS B
   801	  // ============================================================
   802	  {
   803	    numero: '63',
   804	    libelle: 'Services ext√©rieurs B',
   805	    classe: 6,
   806	    nature: 'CHARGE',
   807	    sens: 'DEBITEUR',
   808	    utilisation: 'OBLIGATOIRE'
   809	  },
   810	  // --- 631 Frais bancaires ---
   811	  {
   812	    numero: '631',
   813	    libelle: 'Frais bancaires',
   814	    classe: 6,
   815	    sousClasse: '63',
   816	    nature: 'CHARGE',
   817	    sens: 'DEBITEUR',
   818	    utilisation: 'OBLIGATOIRE'
   819	  },
   820	  {
   821	    numero: '6311',
   822	    libelle: 'Frais sur titres',
   823	    classe: 6,
   824	    sousClasse: '631',
   825	    nature: 'CHARGE',
   826	    sens: 'DEBITEUR',
   827	    utilisation: 'FACULTATIF'
   828	  },
   829	  {
   830	    numero: '6312',
   831	    libelle: 'Frais sur effets',
   832	    classe: 6,
   833	    sousClasse: '631',
   834	    nature: 'CHARGE',
   835	    sens: 'DEBITEUR',
   836	    utilisation: 'FACULTATIF'
   837	  },
   838	  {
   839	    numero: '6313',
   840	    libelle: 'Locations de coffres',
   841	    classe: 6,
   842	    sousClasse: '631',
   843	    nature: 'CHARGE',
   844	    sens: 'DEBITEUR',
   845	    utilisation: 'FACULTATIF'
   846	  },
   847	  {
   848	    numero: '6314',
   849	    libelle: 'Commissions sur cartes de cr√©dit',
   850	    classe: 6,
   851	    sousClasse: '631',
   852	    nature: 'CHARGE',
   853	    sens: 'DEBITEUR',
   854	    utilisation: 'FACULTATIF'
   855	  },
   856	  {
   857	    numero: '6318',
   858	    libelle: 'Autres frais bancaires',
   859	    classe: 6,
   860	    sousClasse: '631',
   861	    nature: 'CHARGE',
   862	    sens: 'DEBITEUR',
   863	    utilisation: 'OBLIGATOIRE'
   864	  },
   865	  // --- 632 R√©mun√©rations d'interm√©diaires et de conseils ---
   866	  {
   867	    numero: '632',
   868	    libelle: "R√©mun√©rations d'interm√©diaires et de conseils",
   869	    classe: 6,
   870	    sousClasse: '63',
   871	    nature: 'CHARGE',
   872	    sens: 'DEBITEUR',
   873	    utilisation: 'OBLIGATOIRE'
   874	  },
   875	  {
   876	    numero: '6321',
   877	    libelle: 'Commissions et courtages sur achats',
   878	    classe: 6,
   879	    sousClasse: '632',
   880	    nature: 'CHARGE',
   881	    sens: 'DEBITEUR',
   882	    utilisation: 'FACULTATIF'
   883	  },
   884	  {
   885	    numero: '6322',
   886	    libelle: 'Commissions et courtages sur ventes',
   887	    classe: 6,
   888	    sousClasse: '632',
   889	    nature: 'CHARGE',
   890	    sens: 'DEBITEUR',
   891	    utilisation: 'FACULTATIF'
   892	  },
   893	  {
   894	    numero: '6324',
   895	    libelle: 'Honoraires',
   896	    classe: 6,
   897	    sousClasse: '632',
   898	    nature: 'CHARGE',
   899	    sens: 'DEBITEUR',
   900	    utilisation: 'OBLIGATOIRE'
   901	  },
   902	  {
   903	    numero: '6325',
   904	    libelle: "Frais d'actes et de contentieux",
   905	    classe: 6,
   906	    sousClasse: '632',
   907	    nature: 'CHARGE',
   908	    sens: 'DEBITEUR',
   909	    utilisation: 'FACULTATIF'
   910	  },
   911	  {
   912	    numero: '6328',
   913	    libelle: "Autres r√©mun√©rations d'interm√©diaires et de conseils",
   914	    classe: 6,
   915	    sousClasse: '632',
   916	    nature: 'CHARGE',
   917	    sens: 'DEBITEUR',
   918	    utilisation: 'FACULTATIF'
   919	  },
   920	  // --- 633 Frais de formation du personnel ---
   921	  {
   922	    numero: '633',
   923	    libelle: 'Frais de formation du personnel',
   924	    classe: 6,
   925	    sousClasse: '63',
   926	    nature: 'CHARGE',
   927	    sens: 'DEBITEUR',
   928	    utilisation: 'FACULTATIF'
   929	  },
   930	  // --- 634 Redevances pour brevets, licences, logiciels et droits similaires ---
   931	  {
   932	    numero: '634',
   933	    libelle: 'Redevances pour brevets, licences, logiciels et droits similaires',
   934	    classe: 6,
   935	    sousClasse: '63',
   936	    nature: 'CHARGE',
   937	    sens: 'DEBITEUR',
   938	    utilisation: 'FACULTATIF'
   939	  },
   940	  {
   941	    numero: '6341',
   942	    libelle: 'Redevances pour brevets',
   943	    classe: 6,
   944	    sousClasse: '634',
   945	    nature: 'CHARGE',
   946	    sens: 'DEBITEUR',
   947	    utilisation: 'FACULTATIF'
   948	  },
   949	  {
   950	    numero: '6342',
   951	    libelle: 'Redevances pour licences',
   952	    classe: 6,
   953	    sousClasse: '634',
   954	    nature: 'CHARGE',
   955	    sens: 'DEBITEUR',
   956	    utilisation: 'FACULTATIF'
   957	  },
   958	  {
   959	    numero: '6343',
   960	    libelle: 'Redevances pour logiciels',
   961	    classe: 6,
   962	    sousClasse: '634',
   963	    nature: 'CHARGE',
   964	    sens: 'DEBITEUR',
   965	    utilisation: 'FACULTATIF'
   966	  },
   967	  {
   968	    numero: '6344',
   969	    libelle: 'Redevances pour marques',
   970	    classe: 6,
   971	    sousClasse: '634',
   972	    nature: 'CHARGE',
   973	    sens: 'DEBITEUR',
   974	    utilisation: 'FACULTATIF'
   975	  },
   976	  {
   977	    numero: '6345',
   978	    libelle: 'Redevances pour proc√©d√©s',
   979	    classe: 6,
   980	    sousClasse: '634',
   981	    nature: 'CHARGE',
   982	    sens: 'DEBITEUR',
   983	    utilisation: 'FACULTATIF'
   984	  },
   985	  // --- 635 Cotisations ---
   986	  {
   987	    numero: '635',
   988	    libelle: 'Cotisations',
   989	    classe: 6,
   990	    sousClasse: '63',
   991	    nature: 'CHARGE',
   992	    sens: 'DEBITEUR',
   993	    utilisation: 'FACULTATIF'
   994	  },
   995	  {
   996	    numero: '6351',
   997	    libelle: 'Cotisations',
   998	    classe: 6,
   999	    sousClasse: '635',
  1000	    nature: 'CHARGE',
  1001	    sens: 'DEBITEUR',
  1002	    utilisation: 'FACULTATIF'
  1003	  },
  1004	  {
  1005	    numero: '6358',
  1006	    libelle: 'Concours divers',
  1007	    classe: 6,
  1008	    sousClasse: '635',
  1009	    nature: 'CHARGE',
  1010	    sens: 'DEBITEUR',
  1011	    utilisation: 'FACULTATIF'
  1012	  },
  1013	  // --- 636 Frais de r√©ception ---
  1014	  {
  1015	    numero: '636',
  1016	    libelle: 'Frais de r√©ception',
  1017	    classe: 6,
  1018	    sousClasse: '63',
  1019	    nature: 'CHARGE',
  1020	    sens: 'DEBITEUR',
  1021	    utilisation: 'FACULTATIF'
  1022	  },
  1023	  // --- 637 Frais de d√©placement, missions et r√©ceptions ---
  1024	  {
  1025	    numero: '637',
  1026	    libelle: 'Frais de d√©placement, missions et r√©ceptions',
  1027	    classe: 6,
  1028	    sousClasse: '63',
  1029	    nature: 'CHARGE',
  1030	    sens: 'DEBITEUR',
  1031	    utilisation: 'OBLIGATOIRE'
  1032	  },
  1033	  {
  1034	    numero: '6371',
  1035	    libelle: 'Voyages et d√©placements',
  1036	    classe: 6,
  1037	    sousClasse: '637',
  1038	    nature: 'CHARGE',
  1039	    sens: 'DEBITEUR',
  1040	    utilisation: 'OBLIGATOIRE'
  1041	  },
  1042	  {
  1043	    numero: '6372',
  1044	    libelle: 'Frais de d√©m√©nagement',
  1045	    classe: 6,
  1046	    sousClasse: '637',
  1047	    nature: 'CHARGE',
  1048	    sens: 'DEBITEUR',
  1049	    utilisation: 'FACULTATIF'
  1050	  },
  1051	  {
  1052	    numero: '6373',
  1053	    libelle: 'Frais de mission',
  1054	    classe: 6,
  1055	    sousClasse: '637',
  1056	    nature: 'CHARGE',
  1057	    sens: 'DEBITEUR',
  1058	    utilisation: 'OBLIGATOIRE'
  1059	  },
  1060	  {
  1061	    numero: '6374',
  1062	    libelle: 'Frais de r√©ception',
  1063	    classe: 6,
  1064	    sousClasse: '637',
  1065	    nature: 'CHARGE',
  1066	    sens: 'DEBITEUR',
  1067	    utilisation: 'FACULTATIF'
  1068	  },
  1069	  // --- 638 Autres charges externes ---
  1070	  {
  1071	    numero: '638',
  1072	    libelle: 'Autres charges externes',
  1073	    classe: 6,
  1074	    sousClasse: '63',
  1075	    nature: 'CHARGE',
  1076	    sens: 'DEBITEUR',
  1077	    utilisation: 'FACULTATIF'
  1078	  },
  1079	  {
  1080	    numero: '6381',
  1081	    libelle: 'Frais de recrutement du personnel',
  1082	    classe: 6,
  1083	    sousClasse: '638',
  1084	    nature: 'CHARGE',
  1085	    sens: 'DEBITEUR',
  1086	    utilisation: 'FACULTATIF'
  1087	  },
  1088	  {
  1089	    numero: '6382',
  1090	    libelle: 'R√©mun√©rations transit√©es par des tiers',
  1091	    classe: 6,
  1092	    sousClasse: '638',
  1093	    nature: 'CHARGE',
  1094	    sens: 'DEBITEUR',
  1095	    utilisation: 'FACULTATIF'
  1096	  },
  1097	  {
  1098	    numero: '6383',
  1099	    libelle: 'R√©ceptions',
  1100	    classe: 6,
  1101	    sousClasse: '638',
  1102	    nature: 'CHARGE',
  1103	    sens: 'DEBITEUR',
  1104	    utilisation: 'FACULTATIF'
  1105	  },
  1106	  {
  1107	    numero: '6384',
  1108	    libelle: 'Missions',
  1109	    classe: 6,
  1110	    sousClasse: '638',
  1111	    nature: 'CHARGE',
  1112	    sens: 'DEBITEUR',
  1113	    utilisation: 'FACULTATIF'
  1114	  },
  1115	  {
  1116	    numero: '6388',
  1117	    libelle: 'Autres charges externes',
  1118	    classe: 6,
  1119	    sousClasse: '638',
  1120	    nature: 'CHARGE',
  1121	    sens: 'DEBITEUR',
  1122	    utilisation: 'FACULTATIF'
  1123	  },
  1124	  // --- 639 Rabais, remises et ristournes obtenus ---
  1125	  {
  1126	    numero: '639',
  1127	    libelle: 'Rabais, remises et ristournes obtenus',
  1128	    classe: 6,
  1129	    sousClasse: '63',
  1130	    nature: 'CHARGE',
  1131	    sens: 'CREDITEUR',
  1132	    utilisation: 'FACULTATIF'
  1133	  },
  1134	
  1135	  // ============================================================
  1136	  // 64 - IMPOTS ET TAXES
  1137	  // ============================================================
  1138	  {
  1139	    numero: '64',
  1140	    libelle: 'Imp√¥ts et taxes',
  1141	    classe: 6,
  1142	    nature: 'CHARGE',
  1143	    sens: 'DEBITEUR',
  1144	    utilisation: 'OBLIGATOIRE'
  1145	  },
  1146	  // --- 641 Imp√¥ts et taxes directs ---
  1147	  {
  1148	    numero: '641',
  1149	    libelle: 'Imp√¥ts et taxes directs',
  1150	    classe: 6,
  1151	    sousClasse: '64',
  1152	    nature: 'CHARGE',
  1153	    sens: 'DEBITEUR',
  1154	    utilisation: 'OBLIGATOIRE'
  1155	  },
  1156	  {
  1157	    numero: '6411',
  1158	    libelle: 'Patentes, licences, taxes annexes',
  1159	    classe: 6,
  1160	    sousClasse: '641',
  1161	    nature: 'CHARGE',
  1162	    sens: 'DEBITEUR',
  1163	    utilisation: 'OBLIGATOIRE'
  1164	  },
  1165	  {
  1166	    numero: '6412',
  1167	    libelle: 'Imp√¥ts fonciers et taxes annexes',
  1168	    classe: 6,
  1169	    sousClasse: '641',
  1170	    nature: 'CHARGE',
  1171	    sens: 'DEBITEUR',
  1172	    utilisation: 'FACULTATIF'
  1173	  },
  1174	  {
  1175	    numero: '6413',
  1176	    libelle: 'Taxes sur appointements et salaires',
  1177	    classe: 6,
  1178	    sousClasse: '641',
  1179	    nature: 'CHARGE',
  1180	    sens: 'DEBITEUR',
  1181	    utilisation: 'OBLIGATOIRE'
  1182	  },
  1183	  {
  1184	    numero: '6414',
  1185	    libelle: "Taxes d'apprentissage",
  1186	    classe: 6,
  1187	    sousClasse: '641',
  1188	    nature: 'CHARGE',
  1189	    sens: 'DEBITEUR',
  1190	    utilisation: 'FACULTATIF'
  1191	  },
  1192	  {
  1193	    numero: '6415',
  1194	    libelle: 'Formation professionnelle continue',
  1195	    classe: 6,
  1196	    sousClasse: '641',
  1197	    nature: 'CHARGE',
  1198	    sens: 'DEBITEUR',
  1199	    utilisation: 'FACULTATIF'
  1200	  },
  1201	  {
  1202	    numero: '6418',
  1203	    libelle: 'Autres imp√¥ts et taxes directs',
  1204	    classe: 6,
  1205	    sousClasse: '641',
  1206	    nature: 'CHARGE',
  1207	    sens: 'DEBITEUR',
  1208	    utilisation: 'FACULTATIF'
  1209	  },
  1210	  // --- 642 Imp√¥ts et taxes indirects ---
  1211	  {
  1212	    numero: '642',
  1213	    libelle: 'Imp√¥ts et taxes indirects',
  1214	    classe: 6,
  1215	    sousClasse: '64',
  1216	    nature: 'CHARGE',
  1217	    sens: 'DEBITEUR',
  1218	    utilisation: 'FACULTATIF'
  1219	  },
  1220	  // --- 645 Imp√¥ts et taxes sur le chiffre d'affaires non r√©cup√©rables ---
  1221	  {
  1222	    numero: '645',
  1223	    libelle: "Imp√¥ts et taxes sur le chiffre d'affaires non r√©cup√©rables",
  1224	    classe: 6,
  1225	    sousClasse: '64',
  1226	    nature: 'CHARGE',
  1227	    sens: 'DEBITEUR',
  1228	    utilisation: 'FACULTATIF'
  1229	  },
  1230	  // --- 646 Droits d'enregistrement ---
  1231	  {
  1232	    numero: '646',
  1233	    libelle: "Droits d'enregistrement",
  1234	    classe: 6,
  1235	    sousClasse: '64',
  1236	    nature: 'CHARGE',
  1237	    sens: 'DEBITEUR',
  1238	    utilisation: 'FACULTATIF'
  1239	  },
  1240	  {
  1241	    numero: '6461',
  1242	    libelle: 'Droits de mutation',
  1243	    classe: 6,
  1244	    sousClasse: '646',
  1245	    nature: 'CHARGE',
  1246	    sens: 'DEBITEUR',
  1247	    utilisation: 'FACULTATIF'
  1248	  },
  1249	  {
  1250	    numero: '6462',
  1251	    libelle: 'Droits de timbre',
  1252	    classe: 6,
  1253	    sousClasse: '646',
  1254	    nature: 'CHARGE',
  1255	    sens: 'DEBITEUR',
  1256	    utilisation: 'FACULTATIF'
  1257	  },
  1258	  {
  1259	    numero: '6463',
  1260	    libelle: 'Taxes sur les v√©hicules de soci√©t√©',
  1261	    classe: 6,
  1262	    sousClasse: '646',
  1263	    nature: 'CHARGE',
  1264	    sens: 'DEBITEUR',
  1265	    utilisation: 'FACULTATIF'
  1266	  },
  1267	  {
  1268	    numero: '6468',
  1269	    libelle: 'Autres droits',
  1270	    classe: 6,
  1271	    sousClasse: '646',
  1272	    nature: 'CHARGE',
  1273	    sens: 'DEBITEUR',
  1274	    utilisation: 'FACULTATIF'
  1275	  },
  1276	  // --- 647 P√©nalit√©s et amendes fiscales ---
  1277	  {
  1278	    numero: '647',
  1279	    libelle: 'P√©nalit√©s et amendes fiscales',
  1280	    classe: 6,
  1281	    sousClasse: '64',
  1282	    nature: 'CHARGE',
  1283	    sens: 'DEBITEUR',
  1284	    utilisation: 'FACULTATIF'
  1285	  },
  1286	  {
  1287	    numero: '6471',
  1288	    libelle: "P√©nalit√©s d'assiette, imp√¥ts directs",
  1289	    classe: 6,
  1290	    sousClasse: '647',
  1291	    nature: 'CHARGE',
  1292	    sens: 'DEBITEUR',
  1293	    utilisation: 'FACULTATIF'
  1294	  },
  1295	  {
  1296	    numero: '6472',
  1297	    libelle: "P√©nalit√©s d'assiette, imp√¥ts indirects",
  1298	    classe: 6,
  1299	    sousClasse: '647',
  1300	    nature: 'CHARGE',
  1301	    sens: 'DEBITEUR',
  1302	    utilisation: 'FACULTATIF'
  1303	  },
  1304	  {
  1305	    numero: '6473',
  1306	    libelle: 'P√©nalit√©s de recouvrement',
  1307	    classe: 6,
  1308	    sousClasse: '647',
  1309	    nature: 'CHARGE',
  1310	    sens: 'DEBITEUR',
  1311	    utilisation: 'FACULTATIF'
  1312	  },
  1313	  {
  1314	    numero: '6478',
  1315	    libelle: 'Autres p√©nalit√©s et amendes fiscales',
  1316	    classe: 6,
  1317	    sousClasse: '647',
  1318	    nature: 'CHARGE',
  1319	    sens: 'DEBITEUR',
  1320	    utilisation: 'FACULTATIF'
  1321	  },
  1322	  // --- 648 Autres imp√¥ts et taxes ---
  1323	  {
  1324	    numero: '648',
  1325	    libelle: 'Autres imp√¥ts et taxes',
  1326	    classe: 6,
  1327	    sousClasse: '64',
  1328	    nature: 'CHARGE',
  1329	    sens: 'DEBITEUR',
  1330	    utilisation: 'FACULTATIF'
  1331	  },
  1332	
  1333	  // ============================================================
  1334	  // 65 - AUTRES CHARGES
  1335	  // ============================================================
  1336	  {
  1337	    numero: '65',
  1338	    libelle: 'Autres charges',
  1339	    classe: 6,
  1340	    nature: 'CHARGE',
  1341	    sens: 'DEBITEUR',
  1342	    utilisation: 'FACULTATIF'
  1343	  },
  1344	  // --- 651 Pertes sur cr√©ances clients et autres d√©biteurs ---
  1345	  {
  1346	    numero: '651',
  1347	    libelle: 'Pertes sur cr√©ances clients et autres d√©biteurs',
  1348	    classe: 6,
  1349	    sousClasse: '65',
  1350	    nature: 'CHARGE',
  1351	    sens: 'DEBITEUR',
  1352	    utilisation: 'FACULTATIF'
  1353	  },
  1354	  {
  1355	    numero: '6511',
  1356	    libelle: 'Pertes sur cr√©ances clients',
  1357	    classe: 6,
  1358	    sousClasse: '651',
  1359	    nature: 'CHARGE',
  1360	    sens: 'DEBITEUR',
  1361	    utilisation: 'FACULTATIF'
  1362	  },
  1363	  {
  1364	    numero: '6515',
  1365	    libelle: "Pertes sur cr√©ances de l'√âtat",
  1366	    classe: 6,
  1367	    sousClasse: '651',
  1368	    nature: 'CHARGE',
  1369	    sens: 'DEBITEUR',
  1370	    utilisation: 'FACULTATIF'
  1371	  },
  1372	  {
  1373	    numero: '6518',
  1374	    libelle: 'Pertes sur autres cr√©ances',
  1375	    classe: 6,
  1376	    sousClasse: '651',
  1377	    nature: 'CHARGE',
  1378	    sens: 'DEBITEUR',
  1379	    utilisation: 'FACULTATIF'
  1380	  },
  1381	  // --- 652 Quote-part de r√©sultat sur op√©rations faites en commun ---
  1382	  {
  1383	    numero: '652',
  1384	    libelle: 'Quote-part de r√©sultat sur op√©rations faites en commun',
  1385	    classe: 6,
  1386	    sousClasse: '65',
  1387	    nature: 'CHARGE',
  1388	    sens: 'DEBITEUR',
  1389	    utilisation: 'FACULTATIF'
  1390	  },
  1391	  {
  1392	    numero: '6521',
  1393	    libelle: 'Quote-part transf√©r√©e de b√©n√©fice',
  1394	    classe: 6,
  1395	    sousClasse: '652',
  1396	    nature: 'CHARGE',
  1397	    sens: 'DEBITEUR',
  1398	    utilisation: 'FACULTATIF'
  1399	  },
  1400	  {
  1401	    numero: '6525',
  1402	    libelle: 'Pertes imput√©es par transfert',
  1403	    classe: 6,
  1404	    sousClasse: '652',
  1405	    nature: 'CHARGE',
  1406	    sens: 'DEBITEUR',
  1407	    utilisation: 'FACULTATIF'
  1408	  },
  1409	  // --- 653 Quote-part de r√©sultat sur op√©rations faites pour compte ---
  1410	  {
  1411	    numero: '653',
  1412	    libelle: 'Quote-part de r√©sultat sur op√©rations faites pour compte',
  1413	    classe: 6,
  1414	    sousClasse: '65',
  1415	    nature: 'CHARGE',
  1416	    sens: 'DEBITEUR',
  1417	    utilisation: 'FACULTATIF'
  1418	  },
  1419	  // --- 654 Valeurs comptables des cessions courantes d'immobilisations ---
  1420	  {
  1421	    numero: '654',
  1422	    libelle: "Valeurs comptables des cessions courantes d'immobilisations",
  1423	    classe: 6,
  1424	    sousClasse: '65',
  1425	    nature: 'CHARGE',
  1426	    sens: 'DEBITEUR',
  1427	    utilisation: 'FACULTATIF'
  1428	  },
  1429	  // --- 658 Charges diverses ---
  1430	  {
  1431	    numero: '658',
  1432	    libelle: 'Charges diverses',
  1433	    classe: 6,
  1434	    sousClasse: '65',
  1435	    nature: 'CHARGE',
  1436	    sens: 'DEBITEUR',
  1437	    utilisation: 'FACULTATIF'
  1438	  },
  1439	  {
  1440	    numero: '6581',
  1441	    libelle: "Jetons de pr√©sence et r√©mun√©rations d'administrateurs",
  1442	    classe: 6,
  1443	    sousClasse: '658',
  1444	    nature: 'CHARGE',
  1445	    sens: 'DEBITEUR',
  1446	    utilisation: 'FACULTATIF'
  1447	  },
  1448	  {
  1449	    numero: '6582',
  1450	    libelle: 'Dons',
  1451	    classe: 6,
  1452	    sousClasse: '658',
  1453	    nature: 'CHARGE',
  1454	    sens: 'DEBITEUR',
  1455	    utilisation: 'FACULTATIF'
  1456	  },
  1457	  {
  1458	    numero: '6583',
  1459	    libelle: 'M√©c√©nat',
  1460	    classe: 6,
  1461	    sousClasse: '658',
  1462	    nature: 'CHARGE',
  1463	    sens: 'DEBITEUR',
  1464	    utilisation: 'FACULTATIF'
  1465	  },
  1466	  {
  1467	    numero: '6588',
  1468	    libelle: 'Autres charges diverses',
  1469	    classe: 6,
  1470	    sousClasse: '658',
  1471	    nature: 'CHARGE',
  1472	    sens: 'DEBITEUR',
  1473	    utilisation: 'FACULTATIF'
  1474	  },
  1475	  // --- 659 Charges provisionn√©es d'exploitation ---
  1476	  {
  1477	    numero: '659',
  1478	    libelle: "Charges provisionn√©es d'exploitation",
  1479	    classe: 6,
  1480	    sousClasse: '65',
  1481	    nature: 'CHARGE',
  1482	    sens: 'DEBITEUR',
  1483	    utilisation: 'FACULTATIF'
  1484	  },
  1485	  {
  1486	    numero: '6591',
  1487	    libelle: 'sur risques √† court terme',
  1488	    classe: 6,
  1489	    sousClasse: '659',
  1490	    nature: 'CHARGE',
  1491	    sens: 'DEBITEUR',
  1492	    utilisation: 'FACULTATIF'
  1493	  },
  1494	  {
  1495	    numero: '6593',
  1496	    libelle: 'sur stocks',
  1497	    classe: 6,
  1498	    sousClasse: '659',
  1499	    nature: 'CHARGE',
  1500	    sens: 'DEBITEUR',
  1501	    utilisation: 'FACULTATIF'
  1502	  },
  1503	  {
  1504	    numero: '6594',
  1505	    libelle: 'sur cr√©ances',
  1506	    classe: 6,
  1507	    sousClasse: '659',
  1508	    nature: 'CHARGE',
  1509	    sens: 'DEBITEUR',
  1510	    utilisation: 'FACULTATIF'
  1511	  },
  1512	  {
  1513	    numero: '6598',
  1514	    libelle: 'Autres charges provisionn√©es',
  1515	    classe: 6,
  1516	    sousClasse: '659',
  1517	    nature: 'CHARGE',
  1518	    sens: 'DEBITEUR',
  1519	    utilisation: 'FACULTATIF'
  1520	  },
  1521	
  1522	  // ============================================================
  1523	  // 66 - CHARGES DE PERSONNEL
  1524	  // ============================================================
  1525	  {
  1526	    numero: '66',
  1527	    libelle: 'Charges de personnel',
  1528	    classe: 6,
  1529	    nature: 'CHARGE',
  1530	    sens: 'DEBITEUR',
  1531	    utilisation: 'OBLIGATOIRE'
  1532	  },
  1533	  // --- 661 R√©mun√©rations directes vers√©es au personnel national ---
  1534	  {
  1535	    numero: '661',
  1536	    libelle: 'R√©mun√©rations directes vers√©es au personnel national',
  1537	    classe: 6,
  1538	    sousClasse: '66',
  1539	    nature: 'CHARGE',
  1540	    sens: 'DEBITEUR',
  1541	    utilisation: 'OBLIGATOIRE'
  1542	  },
  1543	  {
  1544	    numero: '6611',
  1545	    libelle: 'Appointements salaires et commissions',
  1546	    classe: 6,
  1547	    sousClasse: '661',
  1548	    nature: 'CHARGE',
  1549	    sens: 'DEBITEUR',
  1550	    utilisation: 'OBLIGATOIRE'
  1551	  },
  1552	  {
  1553	    numero: '6612',
  1554	    libelle: 'Primes et gratifications',
  1555	    classe: 6,
  1556	    sousClasse: '661',
  1557	    nature: 'CHARGE',
  1558	    sens: 'DEBITEUR',
  1559	    utilisation: 'OBLIGATOIRE'
  1560	  },
  1561	  {
  1562	    numero: '6613',
  1563	    libelle: 'Cong√©s pay√©s',
  1564	    classe: 6,
  1565	    sousClasse: '661',
  1566	    nature: 'CHARGE',
  1567	    sens: 'DEBITEUR',
  1568	    utilisation: 'OBLIGATOIRE'
  1569	  },
  1570	  {
  1571	    numero: '6614',
  1572	    libelle: "Indemnit√©s de pr√©avis, de licenciement et de recherche d'embauche",
  1573	    classe: 6,
  1574	    sousClasse: '661',
  1575	    nature: 'CHARGE',
  1576	    sens: 'DEBITEUR',
  1577	    utilisation: 'FACULTATIF'
  1578	  },
  1579	  {
  1580	    numero: '6615',
  1581	    libelle: 'Indemnit√©s de maladie vers√©es aux travailleurs',
  1582	    classe: 6,
  1583	    sousClasse: '661',
  1584	    nature: 'CHARGE',
  1585	    sens: 'DEBITEUR',
  1586	    utilisation: 'FACULTATIF'
  1587	  },
  1588	  {
  1589	    numero: '6616',
  1590	    libelle: 'Suppl√©ment familial',
  1591	    classe: 6,
  1592	    sousClasse: '661',
  1593	    nature: 'CHARGE',
  1594	    sens: 'DEBITEUR',
  1595	    utilisation: 'FACULTATIF'
  1596	  },
  1597	  {
  1598	    numero: '6617',
  1599	    libelle: 'Avantages en nature',
  1600	    classe: 6,
  1601	    sousClasse: '661',
  1602	    nature: 'CHARGE',
  1603	    sens: 'DEBITEUR',
  1604	    utilisation: 'FACULTATIF'
  1605	  },
  1606	  {
  1607	    numero: '6618',
  1608	    libelle: 'Autres r√©mun√©rations directes',
  1609	    classe: 6,
  1610	    sousClasse: '661',
  1611	    nature: 'CHARGE',
  1612	    sens: 'DEBITEUR',
  1613	    utilisation: 'FACULTATIF'
  1614	  },
  1615	  // --- 662 R√©mun√©rations directes vers√©es au personnel non national ---
  1616	  {
  1617	    numero: '662',
  1618	    libelle: 'R√©mun√©rations directes vers√©es au personnel non national',
  1619	    classe: 6,
  1620	    sousClasse: '66',
  1621	    nature: 'CHARGE',
  1622	    sens: 'DEBITEUR',
  1623	    utilisation: 'FACULTATIF'
  1624	  },
  1625	  // --- 663 Indemnit√©s forfaitaires vers√©es au personnel ---
  1626	  {
  1627	    numero: '663',
  1628	    libelle: 'Indemnit√©s forfaitaires vers√©es au personnel',
  1629	    classe: 6,
  1630	    sousClasse: '66',
  1631	    nature: 'CHARGE',
  1632	    sens: 'DEBITEUR',
  1633	    utilisation: 'OBLIGATOIRE'
  1634	  },
  1635	  {
  1636	    numero: '6631',
  1637	    libelle: 'Indemnit√©s de logement',
  1638	    classe: 6,
  1639	    sousClasse: '663',
  1640	    nature: 'CHARGE',
  1641	    sens: 'DEBITEUR',
  1642	    utilisation: 'FACULTATIF'
  1643	  },
  1644	  {
  1645	    numero: '6632',
  1646	    libelle: 'Indemnit√©s de repr√©sentation',
  1647	    classe: 6,
  1648	    sousClasse: '663',
  1649	    nature: 'CHARGE',
  1650	    sens: 'DEBITEUR',
  1651	    utilisation: 'FACULTATIF'
  1652	  },
  1653	  {
  1654	    numero: '6633',
  1655	    libelle: "Indemnit√©s d'expatriation",
  1656	    classe: 6,
  1657	    sousClasse: '663',
  1658	    nature: 'CHARGE',
  1659	    sens: 'DEBITEUR',
  1660	    utilisation: 'FACULTATIF'
  1661	  },
  1662	  {
  1663	    numero: '6634',
  1664	    libelle: 'Indemnit√©s de transport',
  1665	    classe: 6,
  1666	    sousClasse: '663',
  1667	    nature: 'CHARGE',
  1668	    sens: 'DEBITEUR',
  1669	    utilisation: 'FACULTATIF'
  1670	  },
  1671	  {
  1672	    numero: '6638',
  1673	    libelle: 'Autres indemnit√©s et avantages divers',
  1674	    classe: 6,
  1675	    sousClasse: '663',
  1676	    nature: 'CHARGE',
  1677	    sens: 'DEBITEUR',
  1678	    utilisation: 'FACULTATIF'
  1679	  },
  1680	  // --- 664 Charges sociales ---
  1681	  {
  1682	    numero: '664',
  1683	    libelle: 'Charges sociales',
  1684	    classe: 6,
  1685	    sousClasse: '66',
  1686	    nature: 'CHARGE',
  1687	    sens: 'DEBITEUR',
  1688	    utilisation: 'OBLIGATOIRE'
  1689	  },
  1690	  {
  1691	    numero: '6641',
  1692	    libelle: 'Charges sociales sur r√©mun√©rations du personnel national',
  1693	    classe: 6,
  1694	    sousClasse: '664',
  1695	    nature: 'CHARGE',
  1696	    sens: 'DEBITEUR',
  1697	    utilisation: 'OBLIGATOIRE'
  1698	  },
  1699	  {
  1700	    numero: '6642',
  1701	    libelle: 'Charges sociales sur r√©mun√©rations du personnel non national',
  1702	    classe: 6,
  1703	    sousClasse: '664',
  1704	    nature: 'CHARGE',
  1705	    sens: 'DEBITEUR',
  1706	    utilisation: 'FACULTATIF'
  1707	  },
  1708	  {
  1709	    numero: '6643',
  1710	    libelle: 'Cotisations aux caisses de retraite',
  1711	    classe: 6,
  1712	    sousClasse: '664',
  1713	    nature: 'CHARGE',
  1714	    sens: 'DEBITEUR',
  1715	    utilisation: 'OBLIGATOIRE'
  1716	  },
  1717	  {
  1718	    numero: '6644',
  1719	    libelle: 'Cotisations aux mutuelles',
  1720	    classe: 6,
  1721	    sousClasse: '664',
  1722	    nature: 'CHARGE',
  1723	    sens: 'DEBITEUR',
  1724	    utilisation: 'FACULTATIF'
  1725	  },
  1726	  {
  1727	    numero: '6645',
  1728	    libelle: 'Assurances maladies/d√©c√®s',
  1729	    classe: 6,
  1730	    sousClasse: '664',
  1731	    nature: 'CHARGE',
  1732	    sens: 'DEBITEUR',
  1733	    utilisation: 'FACULTATIF'
  1734	  },
  1735	  {
  1736	    numero: '6646',
  1737	    libelle: 'Prestations directes',
  1738	    classe: 6,
  1739	    sousClasse: '664',
  1740	    nature: 'CHARGE',
  1741	    sens: 'DEBITEUR',
  1742	    utilisation: 'FACULTATIF'
  1743	  },
  1744	  {
  1745	    numero: '6648',
  1746	    libelle: 'Autres charges sociales',
  1747	    classe: 6,
  1748	    sousClasse: '664',
  1749	    nature: 'CHARGE',
  1750	    sens: 'DEBITEUR',
  1751	    utilisation: 'FACULTATIF'
  1752	  },
  1753	  // --- 665 Charges sociales sur r√©mun√©rations de l'exploitant ---
  1754	  {
  1755	    numero: '665',
  1756	    libelle: "Charges sociales sur r√©mun√©rations de l'exploitant",
  1757	    classe: 6,
  1758	    sousClasse: '66',
  1759	    nature: 'CHARGE',
  1760	    sens: 'DEBITEUR',
  1761	    utilisation: 'FACULTATIF'
  1762	  },
  1763	  // --- 666 R√©mun√©rations et charges sociales de l'exploitant ---
  1764	  {
  1765	    numero: '666',
  1766	    libelle: "R√©mun√©rations et charges sociales de l'exploitant",
  1767	    classe: 6,
  1768	    sousClasse: '66',
  1769	    nature: 'CHARGE',
  1770	    sens: 'DEBITEUR',
  1771	    utilisation: 'FACULTATIF'
  1772	  },
  1773	  {
  1774	    numero: '6661',
  1775	    libelle: "R√©mun√©rations du travail de l'exploitant",
  1776	    classe: 6,
  1777	    sousClasse: '666',
  1778	    nature: 'CHARGE',
  1779	    sens: 'DEBITEUR',
  1780	    utilisation: 'FACULTATIF'
  1781	  },
  1782	  {
  1783	    numero: '6662',
  1784	    libelle: 'Charges sociales',
  1785	    classe: 6,
  1786	    sousClasse: '666',
  1787	    nature: 'CHARGE',
  1788	    sens: 'DEBITEUR',
  1789	    utilisation: 'FACULTATIF'
  1790	  },
  1791	  // --- 667 R√©mun√©rations transf√©r√©es de personnel ext√©rieur ---
  1792	  {
  1793	    numero: '667',
  1794	    libelle: 'R√©mun√©rations transf√©r√©es de personnel ext√©rieur',
  1795	    classe: 6,
  1796	    sousClasse: '66',
  1797	    nature: 'CHARGE',
  1798	    sens: 'DEBITEUR',
  1799	    utilisation: 'FACULTATIF'
  1800	  },
  1801	  // --- 668 Autres charges sociales ---
  1802	  {
  1803	    numero: '668',
  1804	    libelle: 'Autres charges sociales',
  1805	    classe: 6,
  1806	    sousClasse: '66',
  1807	    nature: 'CHARGE',
  1808	    sens: 'DEBITEUR',
  1809	    utilisation: 'FACULTATIF'
  1810	  },
  1811	  {
  1812	    numero: '6681',
  1813	    libelle: "Versements aux syndicats et comit√©s d'entreprise",
  1814	    classe: 6,
  1815	    sousClasse: '668',
  1816	    nature: 'CHARGE',
  1817	    sens: 'DEBITEUR',
  1818	    utilisation: 'FACULTATIF'
  1819	  },
  1820	  {
  1821	    numero: '6682',
  1822	    libelle: 'M√©decine du travail et pharmacie',
  1823	    classe: 6,
  1824	    sousClasse: '668',
  1825	    nature: 'CHARGE',
  1826	    sens: 'DEBITEUR',
  1827	    utilisation: 'FACULTATIF'
  1828	  },
  1829	  {
  1830	    numero: '6683',
  1831	    libelle: 'Cantines, restaurants',
  1832	    classe: 6,
  1833	    sousClasse: '668',
  1834	    nature: 'CHARGE',
  1835	    sens: 'DEBITEUR',
  1836	    utilisation: 'FACULTATIF'
  1837	  },
  1838	  {
  1839	    numero: '6684',
  1840	    libelle: 'Indemnit√©s de stages',
  1841	    classe: 6,
  1842	    sousClasse: '668',
  1843	    nature: 'CHARGE',
  1844	    sens: 'DEBITEUR',
  1845	    utilisation: 'FACULTATIF'
  1846	  },
  1847	  {
  1848	    numero: '6688',
  1849	    libelle: 'Autres charges sociales diverses',
  1850	    classe: 6,
  1851	    sousClasse: '668',
  1852	    nature: 'CHARGE',
  1853	    sens: 'DEBITEUR',
  1854	    utilisation: 'FACULTATIF'
  1855	  },
  1856	
  1857	  // ============================================================
  1858	  // 67 - FRAIS FINANCIERS ET CHARGES ASSIMILEES
  1859	  // ============================================================
  1860	  {
  1861	    numero: '67',
  1862	    libelle: 'Frais financiers et charges assimil√©es',
  1863	    classe: 6,
  1864	    nature: 'CHARGE',
  1865	    sens: 'DEBITEUR',
  1866	    utilisation: 'OBLIGATOIRE'
  1867	  },
  1868	  // --- 671 Int√©r√™ts des emprunts ---
  1869	  {
  1870	    numero: '671',
  1871	    libelle: 'Int√©r√™ts des emprunts',
  1872	    classe: 6,
  1873	    sousClasse: '67',
  1874	    nature: 'CHARGE',
  1875	    sens: 'DEBITEUR',
  1876	    utilisation: 'OBLIGATOIRE'
  1877	  },
  1878	  {
  1879	    numero: '6711',
  1880	    libelle: 'Emprunts obligataires',
  1881	    classe: 6,
  1882	    sousClasse: '671',
  1883	    nature: 'CHARGE',
  1884	    sens: 'DEBITEUR',
  1885	    utilisation: 'FACULTATIF'
  1886	  },
  1887	  {
  1888	    numero: '6712',
  1889	    libelle: 'Emprunts aupr√®s des √©tablissements de cr√©dit',
  1890	    classe: 6,
  1891	    sousClasse: '671',
  1892	    nature: 'CHARGE',
  1893	    sens: 'DEBITEUR',
  1894	    utilisation: 'OBLIGATOIRE'
  1895	  },
  1896	  {
  1897	    numero: '6713',
  1898	    libelle: 'Avances re√ßues et comptes courants bloqu√©s',
  1899	    classe: 6,
  1900	    sousClasse: '671',
  1901	    nature: 'CHARGE',
  1902	    sens: 'DEBITEUR',
  1903	    utilisation: 'FACULTATIF'
  1904	  },
  1905	  // --- 672 Int√©r√™ts dans loyers de cr√©dit-bail et contrats assimil√©s ---
  1906	  {
  1907	    numero: '672',
  1908	    libelle: 'Int√©r√™ts dans loyers de cr√©dit-bail et contrats assimil√©s',
  1909	    classe: 6,
  1910	    sousClasse: '67',
  1911	    nature: 'CHARGE',
  1912	    sens: 'DEBITEUR',
  1913	    utilisation: 'FACULTATIF'
  1914	  },
  1915	  {
  1916	    numero: '6721',
  1917	    libelle: 'Int√©r√™ts de location-acquisition immobili√®re',
  1918	    classe: 6,
  1919	    sousClasse: '672',
  1920	    nature: 'CHARGE',
  1921	    sens: 'DEBITEUR',
  1922	    utilisation: 'FACULTATIF'
  1923	  },
  1924	  {
  1925	    numero: '6722',
  1926	    libelle: 'Int√©r√™ts de location-acquisition mobili√®re',
  1927	    classe: 6,
  1928	    sousClasse: '672',
  1929	    nature: 'CHARGE',
  1930	    sens: 'DEBITEUR',
  1931	    utilisation: 'FACULTATIF'
  1932	  },
  1933	  // --- 673 Escomptes accord√©s ---
  1934	  {
  1935	    numero: '673',
  1936	    libelle: 'Escomptes accord√©s',
  1937	    classe: 6,
  1938	    sousClasse: '67',
  1939	    nature: 'CHARGE',
  1940	    sens: 'DEBITEUR',
  1941	    utilisation: 'FACULTATIF'
  1942	  },
  1943	  // --- 674 Autres int√©r√™ts ---
  1944	  {
  1945	    numero: '674',
  1946	    libelle: 'Autres int√©r√™ts',
  1947	    classe: 6,
  1948	    sousClasse: '67',
  1949	    nature: 'CHARGE',
  1950	    sens: 'DEBITEUR',
  1951	    utilisation: 'FACULTATIF'
  1952	  },
  1953	  // --- 675 Escomptes des effets de commerce ---
  1954	  {
  1955	    numero: '675',
  1956	    libelle: 'Escomptes des effets de commerce',
  1957	    classe: 6,
  1958	    sousClasse: '67',
  1959	    nature: 'CHARGE',
  1960	    sens: 'DEBITEUR',
  1961	    utilisation: 'FACULTATIF'
  1962	  },
  1963	  // --- 676 Pertes de change ---
  1964	  {
  1965	    numero: '676',
  1966	    libelle: 'Pertes de change',
  1967	    classe: 6,
  1968	    sousClasse: '67',
  1969	    nature: 'CHARGE',
  1970	    sens: 'DEBITEUR',
  1971	    utilisation: 'FACULTATIF'
  1972	  },
  1973	  // --- 677 Pertes sur cessions de titres de placement ---
  1974	  {
  1975	    numero: '677',
  1976	    libelle: 'Pertes sur cessions de titres de placement',
  1977	    classe: 6,
  1978	    sousClasse: '67',
  1979	    nature: 'CHARGE',
  1980	    sens: 'DEBITEUR',
  1981	    utilisation: 'FACULTATIF'
  1982	  },
  1983	  // --- 678 Pertes sur risques financiers ---
  1984	  {
  1985	    numero: '678',
  1986	    libelle: 'Pertes sur risques financiers',
  1987	    classe: 6,
  1988	    sousClasse: '67',
  1989	    nature: 'CHARGE',
  1990	    sens: 'DEBITEUR',
  1991	    utilisation: 'FACULTATIF'
  1992	  },
  1993	  {
  1994	    numero: '6781',
  1995	    libelle: 'Pertes de change sur cr√©ances commerciales',
  1996	    classe: 6,
  1997	    sousClasse: '678',
  1998	    nature: 'CHARGE',
  1999	    sens: 'DEBITEUR',
  2000	    utilisation: 'FACULTATIF'
  2001	  },
  2002	  {
  2003	    numero: '6782',
  2004	    libelle: 'Pertes de change sur dettes commerciales',
  2005	    classe: 6,
  2006	    sousClasse: '678',
  2007	    nature: 'CHARGE',
  2008	    sens: 'DEBITEUR',
  2009	    utilisation: 'FACULTATIF'
  2010	  },
  2011	  {
  2012	    numero: '6784',
  2013	    libelle: 'Pertes de change sur op√©rations financi√®res',
  2014	    classe: 6,
  2015	    sousClasse: '678',
  2016	    nature: 'CHARGE',
  2017	    sens: 'DEBITEUR',
  2018	    utilisation: 'FACULTATIF'
  2019	  },
  2020	  {
  2021	    numero: '6788',
  2022	    libelle: 'Autres charges financi√®res',
  2023	    classe: 6,
  2024	    sousClasse: '678',
  2025	    nature: 'CHARGE',
  2026	    sens: 'DEBITEUR',
  2027	    utilisation: 'FACULTATIF'
  2028	  },
  2029	  // --- 679 Charges provisionn√©es financi√®res ---
  2030	  {
  2031	    numero: '679',
  2032	    libelle: 'Charges provisionn√©es financi√®res',
  2033	    classe: 6,
  2034	    sousClasse: '67',
  2035	    nature: 'CHARGE',
  2036	    sens: 'DEBITEUR',
  2037	    utilisation: 'FACULTATIF'
  2038	  },
  2039	  {
  2040	    numero: '6791',
  2041	    libelle: 'Dotations aux provisions pour risques financiers',
  2042	    classe: 6,
  2043	    sousClasse: '679',
  2044	    nature: 'CHARGE',
  2045	    sens: 'DEBITEUR',
  2046	    utilisation: 'FACULTATIF'
  2047	  },
  2048	  {
  2049	    numero: '6795',
  2050	    libelle: 'Dotations aux d√©pr√©ciations des titres de placement',
  2051	    classe: 6,
  2052	    sousClasse: '679',
  2053	    nature: 'CHARGE',
  2054	    sens: 'DEBITEUR',
  2055	    utilisation: 'FACULTATIF'
  2056	  },
  2057	  {
  2058	    numero: '6798',
  2059	    libelle: 'Autres charges provisionn√©es financi√®res',
  2060	    classe: 6,
  2061	    sousClasse: '679',
  2062	    nature: 'CHARGE',
  2063	    sens: 'DEBITEUR',
  2064	    utilisation: 'FACULTATIF'
  2065	  },
  2066	
  2067	  // ============================================================
  2068	  // 68 - DOTATIONS AUX AMORTISSEMENTS
  2069	  // ============================================================
  2070	  {
  2071	    numero: '68',
  2072	    libelle: 'Dotations aux amortissements',
  2073	    classe: 6,
  2074	    nature: 'CHARGE',
  2075	    sens: 'DEBITEUR',
  2076	    utilisation: 'OBLIGATOIRE'
  2077	  },
  2078	  // --- 681 Dotations aux amortissements d'exploitation ---
  2079	  {
  2080	    numero: '681',
  2081	    libelle: "Dotations aux amortissements d'exploitation",
  2082	    classe: 6,
  2083	    sousClasse: '68',
  2084	    nature: 'CHARGE',
  2085	    sens: 'DEBITEUR',
  2086	    utilisation: 'OBLIGATOIRE'
  2087	  },
  2088	  {
  2089	    numero: '6811',
  2090	    libelle: 'Dotations aux amortissements des charges immobilis√©es',
  2091	    classe: 6,
  2092	    sousClasse: '681',
  2093	    nature: 'CHARGE',
  2094	    sens: 'DEBITEUR',
  2095	    utilisation: 'FACULTATIF'
  2096	  },
  2097	  {
  2098	    numero: '6812',
  2099	    libelle: 'Dotations aux amortissements des immobilisations incorporelles',
  2100	    classe: 6,
  2101	    sousClasse: '681',
  2102	    nature: 'CHARGE',
  2103	    sens: 'DEBITEUR',
  2104	    utilisation: 'FACULTATIF'
  2105	  },
  2106	  {
  2107	    numero: '6813',
  2108	    libelle: 'Dotations aux amortissements des immobilisations corporelles',
  2109	    classe: 6,
  2110	    sousClasse: '681',
  2111	    nature: 'CHARGE',
  2112	    sens: 'DEBITEUR',
  2113	    utilisation: 'OBLIGATOIRE'
  2114	  },
  2115	  // --- 687 Dotations aux amortissements √† caract√®re financier ---
  2116	  {
  2117	    numero: '687',
  2118	    libelle: 'Dotations aux amortissements √† caract√®re financier',
  2119	    classe: 6,
  2120	    sousClasse: '68',
  2121	    nature: 'CHARGE',
  2122	    sens: 'DEBITEUR',
  2123	    utilisation: 'FACULTATIF'
  2124	  },
  2125	  {
  2126	    numero: '6871',
  2127	    libelle: 'Dotations aux amortissements des primes de remboursement',
  2128	    classe: 6,
  2129	    sousClasse: '687',
  2130	    nature: 'CHARGE',
  2131	    sens: 'DEBITEUR',
  2132	    utilisation: 'FACULTATIF'
  2133	  },
  2134	  {
  2135	    numero: '6872',
  2136	    libelle: 'Dotations aux provisions pour d√©pr√©ciation des immobilisations financi√®res',
  2137	    classe: 6,
  2138	    sousClasse: '687',
  2139	    nature: 'CHARGE',
  2140	    sens: 'DEBITEUR',
  2141	    utilisation: 'FACULTATIF'
  2142	  },
  2143	
  2144	  // ============================================================
  2145	  // 69 - DOTATIONS AUX PROVISIONS
  2146	  // ============================================================
  2147	  {
  2148	    numero: '69',
  2149	    libelle: 'Dotations aux provisions',
  2150	    classe: 6,
  2151	    nature: 'CHARGE',
  2152	    sens: 'DEBITEUR',
  2153	    utilisation: 'FACULTATIF'
  2154	  },
  2155	  // --- 691 Dotations aux provisions d'exploitation ---
  2156	  {
  2157	    numero: '691',
  2158	    libelle: "Dotations aux provisions d'exploitation",
  2159	    classe: 6,
  2160	    sousClasse: '69',
  2161	    nature: 'CHARGE',
  2162	    sens: 'DEBITEUR',
  2163	    utilisation: 'FACULTATIF'
  2164	  },
  2165	  {
  2166	    numero: '6911',
  2167	    libelle: "pour risques d'exploitation",
  2168	    classe: 6,
  2169	    sousClasse: '691',
  2170	    nature: 'CHARGE',
  2171	    sens: 'DEBITEUR',
  2172	    utilisation: 'FACULTATIF'
  2173	  },
  2174	  {
  2175	    numero: '6912',
  2176	    libelle: 'pour grosses r√©parations',
  2177	    classe: 6,
  2178	    sousClasse: '691',
  2179	    nature: 'CHARGE',
  2180	    sens: 'DEBITEUR',
  2181	    utilisation: 'FACULTATIF'
  2182	  },
  2183	  {
  2184	    numero: '6913',
  2185	    libelle: 'pour d√©pr√©ciation des immobilisations incorporelles',
  2186	    classe: 6,
  2187	    sousClasse: '691',
  2188	    nature: 'CHARGE',
  2189	    sens: 'DEBITEUR',
  2190	    utilisation: 'FACULTATIF'
  2191	  },
  2192	  {
  2193	    numero: '6914',
  2194	    libelle: 'pour d√©pr√©ciation des immobilisations corporelles',
  2195	    classe: 6,
  2196	    sousClasse: '691',
  2197	    nature: 'CHARGE',
  2198	    sens: 'DEBITEUR',
  2199	    utilisation: 'FACULTATIF'
  2200	  },
  2201	  // --- 692 Dotations aux provisions √† caract√®re financier ---
  2202	  {
  2203	    numero: '692',
  2204	    libelle: 'Dotations aux provisions √† caract√®re financier',
  2205	    classe: 6,
  2206	    sousClasse: '69',
  2207	    nature: 'CHARGE',
  2208	    sens: 'DEBITEUR',
  2209	    utilisation: 'FACULTATIF'
  2210	  },
  2211	  // --- 697 Dotations aux provisions financi√®res ---
  2212	  {
  2213	    numero: '697',
  2214	    libelle: 'Dotations aux provisions financi√®res',
  2215	    classe: 6,
  2216	    sousClasse: '69',
  2217	    nature: 'CHARGE',
  2218	    sens: 'DEBITEUR',
  2219	    utilisation: 'FACULTATIF'
  2220	  },
  2221	  {
  2222	    numero: '6971',
  2223	    libelle: 'Dotations aux provisions pour risques financiers',
  2224	    classe: 6,
  2225	    sousClasse: '697',
  2226	    nature: 'CHARGE',
  2227	    sens: 'DEBITEUR',
  2228	    utilisation: 'FACULTATIF'
  2229	  },
  2230	  {
  2231	    numero: '6972',
  2232	    libelle: 'Dotations aux d√©pr√©ciations des immobilisations financi√®res',
  2233	    classe: 6,
  2234	    sousClasse: '697',
  2235	    nature: 'CHARGE',
  2236	    sens: 'DEBITEUR',
  2237	    utilisation: 'FACULTATIF'
  2238	  }
  2239	]

================================================================================
FILE: src/data/syscohada/plan/classe7.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 7 - COMPTES DE PRODUITS
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_7_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 70 - VENTES DE MARCHANDISES
    10	  // ============================================================
    11	  {
    12	    numero: '70',
    13	    libelle: 'Ventes de marchandises',
    14	    classe: 7,
    15	    nature: 'PRODUIT',
    16	    sens: 'CREDITEUR',
    17	    utilisation: 'OBLIGATOIRE',
    18	    secteurs: ['COMMERCE']
    19	  },
    20	  {
    21	    numero: '701',
    22	    libelle: 'Ventes de marchandises A dans la R√©gion',
    23	    classe: 7,
    24	    sousClasse: '70',
    25	    nature: 'PRODUIT',
    26	    sens: 'CREDITEUR',
    27	    utilisation: 'OBLIGATOIRE'
    28	  },
    29	  {
    30	    numero: '702',
    31	    libelle: 'Ventes de marchandises A hors R√©gion',
    32	    classe: 7,
    33	    sousClasse: '70',
    34	    nature: 'PRODUIT',
    35	    sens: 'CREDITEUR',
    36	    utilisation: 'FACULTATIF'
    37	  },
    38	  {
    39	    numero: '703',
    40	    libelle: 'Ventes de marchandises B dans la R√©gion',
    41	    classe: 7,
    42	    sousClasse: '70',
    43	    nature: 'PRODUIT',
    44	    sens: 'CREDITEUR',
    45	    utilisation: 'FACULTATIF'
    46	  },
    47	  {
    48	    numero: '704',
    49	    libelle: 'Ventes de marchandises B hors R√©gion',
    50	    classe: 7,
    51	    sousClasse: '70',
    52	    nature: 'PRODUIT',
    53	    sens: 'CREDITEUR',
    54	    utilisation: 'FACULTATIF'
    55	  },
    56	  {
    57	    numero: '706',
    58	    libelle: 'Ports, emballages perdus et autres frais factur√©s',
    59	    classe: 7,
    60	    sousClasse: '70',
    61	    nature: 'PRODUIT',
    62	    sens: 'CREDITEUR',
    63	    utilisation: 'FACULTATIF'
    64	  },
    65	  {
    66	    numero: '707',
    67	    libelle: 'Produits accessoires',
    68	    classe: 7,
    69	    sousClasse: '70',
    70	    nature: 'PRODUIT',
    71	    sens: 'CREDITEUR',
    72	    utilisation: 'FACULTATIF'
    73	  },
    74	  {
    75	    numero: '709',
    76	    libelle: 'Rabais, remises et ristournes accord√©s',
    77	    classe: 7,
    78	    sousClasse: '70',
    79	    nature: 'PRODUIT',
    80	    sens: 'DEBITEUR',
    81	    utilisation: 'FACULTATIF'
    82	  },
    83	
    84	  // ============================================================
    85	  // 71 - VENTES DE PRODUITS FABRIQUES
    86	  // ============================================================
    87	  {
    88	    numero: '71',
    89	    libelle: 'Ventes de produits fabriqu√©s',
    90	    classe: 7,
    91	    nature: 'PRODUIT',
    92	    sens: 'CREDITEUR',
    93	    utilisation: 'OBLIGATOIRE',
    94	    secteurs: ['INDUSTRIE', 'PRODUCTION']
    95	  },
    96	  {
    97	    numero: '711',
    98	    libelle: 'Ventes de produits finis',
    99	    classe: 7,
   100	    sousClasse: '71',
   101	    nature: 'PRODUIT',
   102	    sens: 'CREDITEUR',
   103	    utilisation: 'OBLIGATOIRE'
   104	  },
   105	  {
   106	    numero: '712',
   107	    libelle: 'Ventes de produits interm√©diaires',
   108	    classe: 7,
   109	    sousClasse: '71',
   110	    nature: 'PRODUIT',
   111	    sens: 'CREDITEUR',
   112	    utilisation: 'FACULTATIF'
   113	  },
   114	  {
   115	    numero: '713',
   116	    libelle: 'Ventes de produits r√©siduels',
   117	    classe: 7,
   118	    sousClasse: '71',
   119	    nature: 'PRODUIT',
   120	    sens: 'CREDITEUR',
   121	    utilisation: 'FACULTATIF'
   122	  },
   123	  {
   124	    numero: '715',
   125	    libelle: 'Ports, emballages perdus et autres frais factur√©s',
   126	    classe: 7,
   127	    sousClasse: '71',
   128	    nature: 'PRODUIT',
   129	    sens: 'CREDITEUR',
   130	    utilisation: 'FACULTATIF'
   131	  },
   132	  {
   133	    numero: '716',
   134	    libelle: 'Produits accessoires',
   135	    classe: 7,
   136	    sousClasse: '71',
   137	    nature: 'PRODUIT',
   138	    sens: 'CREDITEUR',
   139	    utilisation: 'FACULTATIF'
   140	  },
   141	  {
   142	    numero: '719',
   143	    libelle: 'Rabais, remises et ristournes accord√©s',
   144	    classe: 7,
   145	    sousClasse: '71',
   146	    nature: 'PRODUIT',
   147	    sens: 'DEBITEUR',
   148	    utilisation: 'FACULTATIF'
   149	  },
   150	
   151	  // ============================================================
   152	  // 72 - VENTES DE PRESTATIONS DE SERVICES
   153	  // ============================================================
   154	  {
   155	    numero: '72',
   156	    libelle: 'Ventes de prestations de services',
   157	    classe: 7,
   158	    nature: 'PRODUIT',
   159	    sens: 'CREDITEUR',
   160	    utilisation: 'OBLIGATOIRE',
   161	    secteurs: ['SERVICES']
   162	  },
   163	  {
   164	    numero: '721',
   165	    libelle: 'Ventes de services vendus dans la R√©gion',
   166	    classe: 7,
   167	    sousClasse: '72',
   168	    nature: 'PRODUIT',
   169	    sens: 'CREDITEUR',
   170	    utilisation: 'OBLIGATOIRE'
   171	  },
   172	  {
   173	    numero: '722',
   174	    libelle: 'Ventes de services vendus hors R√©gion',
   175	    classe: 7,
   176	    sousClasse: '72',
   177	    nature: 'PRODUIT',
   178	    sens: 'CREDITEUR',
   179	    utilisation: 'FACULTATIF'
   180	  },
   181	  {
   182	    numero: '726',
   183	    libelle: 'Ports et frais accessoires factur√©s',
   184	    classe: 7,
   185	    sousClasse: '72',
   186	    nature: 'PRODUIT',
   187	    sens: 'CREDITEUR',
   188	    utilisation: 'FACULTATIF'
   189	  },
   190	  {
   191	    numero: '729',
   192	    libelle: 'Rabais, remises et ristournes accord√©s',
   193	    classe: 7,
   194	    sousClasse: '72',
   195	    nature: 'PRODUIT',
   196	    sens: 'DEBITEUR',
   197	    utilisation: 'FACULTATIF'
   198	  },
   199	
   200	  // ============================================================
   201	  // 73 - VARIATIONS DE STOCKS DE BIENS PRODUITS ET EN COURS
   202	  // ============================================================
   203	  {
   204	    numero: '73',
   205	    libelle: 'Variations de stocks de biens produits et en cours',
   206	    classe: 7,
   207	    nature: 'PRODUIT',
   208	    sens: 'CREDITEUR',
   209	    utilisation: 'FACULTATIF'
   210	  },
   211	  {
   212	    numero: '731',
   213	    libelle: 'Variations des stocks de produits en cours',
   214	    classe: 7,
   215	    sousClasse: '73',
   216	    nature: 'PRODUIT',
   217	    sens: 'CREDITEUR',
   218	    utilisation: 'FACULTATIF'
   219	  },
   220	  {
   221	    numero: '732',
   222	    libelle: 'Variations des stocks de services en cours',
   223	    classe: 7,
   224	    sousClasse: '73',
   225	    nature: 'PRODUIT',
   226	    sens: 'CREDITEUR',
   227	    utilisation: 'FACULTATIF'
   228	  },
   229	  {
   230	    numero: '733',
   231	    libelle: 'Variations des stocks de produits finis',
   232	    classe: 7,
   233	    sousClasse: '73',
   234	    nature: 'PRODUIT',
   235	    sens: 'CREDITEUR',
   236	    utilisation: 'FACULTATIF'
   237	  },
   238	  {
   239	    numero: '734',
   240	    libelle: 'Variations des stocks de produits interm√©diaires et r√©siduels',
   241	    classe: 7,
   242	    sousClasse: '73',
   243	    nature: 'PRODUIT',
   244	    sens: 'CREDITEUR',
   245	    utilisation: 'FACULTATIF'
   246	  },
   247	  {
   248	    numero: '736',
   249	    libelle: 'Variations des stocks de biens mis en concession',
   250	    classe: 7,
   251	    sousClasse: '73',
   252	    nature: 'PRODUIT',
   253	    sens: 'CREDITEUR',
   254	    utilisation: 'FACULTATIF'
   255	  },
   256	
   257	  // ============================================================
   258	  // 74 - PRODUCTIONS IMMOBILISEES
   259	  // ============================================================
   260	  {
   261	    numero: '74',
   262	    libelle: 'Productions immobilis√©es',
   263	    classe: 7,
   264	    nature: 'PRODUIT',
   265	    sens: 'CREDITEUR',
   266	    utilisation: 'FACULTATIF'
   267	  },
   268	  {
   269	    numero: '741',
   270	    libelle: 'Productions immobilis√©es incorporelles',
   271	    classe: 7,
   272	    sousClasse: '74',
   273	    nature: 'PRODUIT',
   274	    sens: 'CREDITEUR',
   275	    utilisation: 'FACULTATIF'
   276	  },
   277	  {
   278	    numero: '742',
   279	    libelle: 'Productions immobilis√©es corporelles',
   280	    classe: 7,
   281	    sousClasse: '74',
   282	    nature: 'PRODUIT',
   283	    sens: 'CREDITEUR',
   284	    utilisation: 'FACULTATIF'
   285	  },
   286	
   287	  // ============================================================
   288	  // 75 - AUTRES PRODUITS
   289	  // ============================================================
   290	  {
   291	    numero: '75',
   292	    libelle: 'Autres produits',
   293	    classe: 7,
   294	    nature: 'PRODUIT',
   295	    sens: 'CREDITEUR',
   296	    utilisation: 'FACULTATIF'
   297	  },
   298	  {
   299	    numero: '751',
   300	    libelle: 'Redevances pour brevets, licences, logiciels et droits similaires',
   301	    classe: 7,
   302	    sousClasse: '75',
   303	    nature: 'PRODUIT',
   304	    sens: 'CREDITEUR',
   305	    utilisation: 'FACULTATIF'
   306	  },
   307	  {
   308	    numero: '752',
   309	    libelle: 'Revenus des immeubles non affect√©s aux activit√©s professionnelles',
   310	    classe: 7,
   311	    sousClasse: '75',
   312	    nature: 'PRODUIT',
   313	    sens: 'CREDITEUR',
   314	    utilisation: 'FACULTATIF'
   315	  },
   316	  {
   317	    numero: '753',
   318	    libelle: 'Jetons de pr√©sence et r√©mun√©rations d\'administrateurs',
   319	    classe: 7,
   320	    sousClasse: '75',
   321	    nature: 'PRODUIT',
   322	    sens: 'CREDITEUR',
   323	    utilisation: 'FACULTATIF'
   324	  },
   325	  {
   326	    numero: '754',
   327	    libelle: 'Produits des cessions courantes d\'immobilisations',
   328	    classe: 7,
   329	    sousClasse: '75',
   330	    nature: 'PRODUIT',
   331	    sens: 'CREDITEUR',
   332	    utilisation: 'FACULTATIF'
   333	  },
   334	  {
   335	    numero: '755',
   336	    libelle: 'Quote-part de r√©sultat sur op√©rations faites en commun',
   337	    classe: 7,
   338	    sousClasse: '75',
   339	    nature: 'PRODUIT',
   340	    sens: 'CREDITEUR',
   341	    utilisation: 'FACULTATIF'
   342	  },
   343	  {
   344	    numero: '7551',
   345	    libelle: 'Quote-part transf√©r√©e de perte',
   346	    classe: 7,
   347	    sousClasse: '755',
   348	    nature: 'PRODUIT',
   349	    sens: 'CREDITEUR',
   350	    utilisation: 'FACULTATIF'
   351	  },
   352	  {
   353	    numero: '7555',
   354	    libelle: 'B√©n√©fice imput√© par transfert',
   355	    classe: 7,
   356	    sousClasse: '755',
   357	    nature: 'PRODUIT',
   358	    sens: 'CREDITEUR',
   359	    utilisation: 'FACULTATIF'
   360	  },
   361	  {
   362	    numero: '758',
   363	    libelle: 'Produits divers',
   364	    classe: 7,
   365	    sousClasse: '75',
   366	    nature: 'PRODUIT',
   367	    sens: 'CREDITEUR',
   368	    utilisation: 'FACULTATIF'
   369	  },
   370	  {
   371	    numero: '7581',
   372	    libelle: 'Indemnit√©s de fonction et autres r√©mun√©rations d\'administrateurs',
   373	    classe: 7,
   374	    sousClasse: '758',
   375	    nature: 'PRODUIT',
   376	    sens: 'CREDITEUR',
   377	    utilisation: 'FACULTATIF'
   378	  },
   379	  {
   380	    numero: '7582',
   381	    libelle: 'Indemnit√©s d\'assurances re√ßues',
   382	    classe: 7,
   383	    sousClasse: '758',
   384	    nature: 'PRODUIT',
   385	    sens: 'CREDITEUR',
   386	    utilisation: 'FACULTATIF'
   387	  },
   388	  {
   389	    numero: '7588',
   390	    libelle: 'Autres produits divers',
   391	    classe: 7,
   392	    sousClasse: '758',
   393	    nature: 'PRODUIT',
   394	    sens: 'CREDITEUR',
   395	    utilisation: 'FACULTATIF'
   396	  },
   397	  {
   398	    numero: '759',
   399	    libelle: 'Reprises de charges provisionn√©es d\'exploitation',
   400	    classe: 7,
   401	    sousClasse: '75',
   402	    nature: 'PRODUIT',
   403	    sens: 'CREDITEUR',
   404	    utilisation: 'FACULTATIF'
   405	  },
   406	  {
   407	    numero: '7591',
   408	    libelle: 'sur risques √† court terme',
   409	    classe: 7,
   410	    sousClasse: '759',
   411	    nature: 'PRODUIT',
   412	    sens: 'CREDITEUR',
   413	    utilisation: 'FACULTATIF'
   414	  },
   415	  {
   416	    numero: '7593',
   417	    libelle: 'sur stocks',
   418	    classe: 7,
   419	    sousClasse: '759',
   420	    nature: 'PRODUIT',
   421	    sens: 'CREDITEUR',
   422	    utilisation: 'FACULTATIF'
   423	  },
   424	  {
   425	    numero: '7594',
   426	    libelle: 'sur cr√©ances',
   427	    classe: 7,
   428	    sousClasse: '759',
   429	    nature: 'PRODUIT',
   430	    sens: 'CREDITEUR',
   431	    utilisation: 'FACULTATIF'
   432	  },
   433	  {
   434	    numero: '7598',
   435	    libelle: 'sur autres charges provisionn√©es',
   436	    classe: 7,
   437	    sousClasse: '759',
   438	    nature: 'PRODUIT',
   439	    sens: 'CREDITEUR',
   440	    utilisation: 'FACULTATIF'
   441	  },
   442	
   443	  // ============================================================
   444	  // 77 - REVENUS FINANCIERS ET PRODUITS ASSIMILES
   445	  // ============================================================
   446	  {
   447	    numero: '77',
   448	    libelle: 'Revenus financiers et produits assimil√©s',
   449	    classe: 7,
   450	    nature: 'PRODUIT',
   451	    sens: 'CREDITEUR',
   452	    utilisation: 'FACULTATIF'
   453	  },
   454	  {
   455	    numero: '771',
   456	    libelle: 'Int√©r√™ts de pr√™ts',
   457	    classe: 7,
   458	    sousClasse: '77',
   459	    nature: 'PRODUIT',
   460	    sens: 'CREDITEUR',
   461	    utilisation: 'FACULTATIF'
   462	  },
   463	  {
   464	    numero: '772',
   465	    libelle: 'Revenus de participations',
   466	    classe: 7,
   467	    sousClasse: '77',
   468	    nature: 'PRODUIT',
   469	    sens: 'CREDITEUR',
   470	    utilisation: 'FACULTATIF'
   471	  },
   472	  {
   473	    numero: '773',
   474	    libelle: 'Escomptes obtenus',
   475	    classe: 7,
   476	    sousClasse: '77',
   477	    nature: 'PRODUIT',
   478	    sens: 'CREDITEUR',
   479	    utilisation: 'FACULTATIF'
   480	  },
   481	  {
   482	    numero: '774',
   483	    libelle: 'Revenus de titres de placement',
   484	    classe: 7,
   485	    sousClasse: '77',
   486	    nature: 'PRODUIT',
   487	    sens: 'CREDITEUR',
   488	    utilisation: 'FACULTATIF'
   489	  },
   490	  {
   491	    numero: '775',
   492	    libelle: 'Revenus des cr√©ances commerciales',
   493	    classe: 7,
   494	    sousClasse: '77',
   495	    nature: 'PRODUIT',
   496	    sens: 'CREDITEUR',
   497	    utilisation: 'FACULTATIF'
   498	  },
   499	  {
   500	    numero: '776',
   501	    libelle: 'Gains de change',
   502	    classe: 7,
   503	    sousClasse: '77',
   504	    nature: 'PRODUIT',
   505	    sens: 'CREDITEUR',
   506	    utilisation: 'FACULTATIF'
   507	  },
   508	  {
   509	    numero: '777',
   510	    libelle: 'Gains sur cessions de titres de placement',
   511	    classe: 7,
   512	    sousClasse: '77',
   513	    nature: 'PRODUIT',
   514	    sens: 'CREDITEUR',
   515	    utilisation: 'FACULTATIF'
   516	  },
   517	  {
   518	    numero: '778',
   519	    libelle: 'Gains sur risques financiers',
   520	    classe: 7,
   521	    sousClasse: '77',
   522	    nature: 'PRODUIT',
   523	    sens: 'CREDITEUR',
   524	    utilisation: 'FACULTATIF'
   525	  },
   526	  {
   527	    numero: '7781',
   528	    libelle: 'Gains de change sur cr√©ances commerciales',
   529	    classe: 7,
   530	    sousClasse: '778',
   531	    nature: 'PRODUIT',
   532	    sens: 'CREDITEUR',
   533	    utilisation: 'FACULTATIF'
   534	  },
   535	  {
   536	    numero: '7782',
   537	    libelle: 'Gains de change sur dettes commerciales',
   538	    classe: 7,
   539	    sousClasse: '778',
   540	    nature: 'PRODUIT',
   541	    sens: 'CREDITEUR',
   542	    utilisation: 'FACULTATIF'
   543	  },
   544	  {
   545	    numero: '7784',
   546	    libelle: 'Gains de change sur op√©rations financi√®res',
   547	    classe: 7,
   548	    sousClasse: '778',
   549	    nature: 'PRODUIT',
   550	    sens: 'CREDITEUR',
   551	    utilisation: 'FACULTATIF'
   552	  },
   553	  {
   554	    numero: '7788',
   555	    libelle: 'Autres gains sur risques financiers',
   556	    classe: 7,
   557	    sousClasse: '778',
   558	    nature: 'PRODUIT',
   559	    sens: 'CREDITEUR',
   560	    utilisation: 'FACULTATIF'
   561	  },
   562	  {
   563	    numero: '779',
   564	    libelle: 'Reprises de charges provisionn√©es financi√®res',
   565	    classe: 7,
   566	    sousClasse: '77',
   567	    nature: 'PRODUIT',
   568	    sens: 'CREDITEUR',
   569	    utilisation: 'FACULTATIF'
   570	  },
   571	  {
   572	    numero: '7791',
   573	    libelle: 'sur risques financiers',
   574	    classe: 7,
   575	    sousClasse: '779',
   576	    nature: 'PRODUIT',
   577	    sens: 'CREDITEUR',
   578	    utilisation: 'FACULTATIF'
   579	  },
   580	  {
   581	    numero: '7795',
   582	    libelle: 'sur titres de placement',
   583	    classe: 7,
   584	    sousClasse: '779',
   585	    nature: 'PRODUIT',
   586	    sens: 'CREDITEUR',
   587	    utilisation: 'FACULTATIF'
   588	  },
   589	  {
   590	    numero: '7798',
   591	    libelle: 'sur autres risques financiers',
   592	    classe: 7,
   593	    sousClasse: '779',
   594	    nature: 'PRODUIT',
   595	    sens: 'CREDITEUR',
   596	    utilisation: 'FACULTATIF'
   597	  },
   598	
   599	  // ============================================================
   600	  // 78 - TRANSFERTS DE CHARGES
   601	  // ============================================================
   602	  {
   603	    numero: '78',
   604	    libelle: 'Transferts de charges',
   605	    classe: 7,
   606	    nature: 'PRODUIT',
   607	    sens: 'CREDITEUR',
   608	    utilisation: 'FACULTATIF'
   609	  },
   610	  {
   611	    numero: '781',
   612	    libelle: 'Transferts de charges d\'exploitation',
   613	    classe: 7,
   614	    sousClasse: '78',
   615	    nature: 'PRODUIT',
   616	    sens: 'CREDITEUR',
   617	    utilisation: 'FACULTATIF'
   618	  },
   619	  {
   620	    numero: '787',
   621	    libelle: 'Transferts de charges financi√®res',
   622	    classe: 7,
   623	    sousClasse: '78',
   624	    nature: 'PRODUIT',
   625	    sens: 'CREDITEUR',
   626	    utilisation: 'FACULTATIF'
   627	  },
   628	
   629	  // ============================================================
   630	  // 79 - REPRISES DE PROVISIONS
   631	  // ============================================================
   632	  {
   633	    numero: '79',
   634	    libelle: 'Reprises de provisions',
   635	    classe: 7,
   636	    nature: 'PRODUIT',
   637	    sens: 'CREDITEUR',
   638	    utilisation: 'FACULTATIF'
   639	  },
   640	  {
   641	    numero: '791',
   642	    libelle: 'Reprises de provisions d\'exploitation',
   643	    classe: 7,
   644	    sousClasse: '79',
   645	    nature: 'PRODUIT',
   646	    sens: 'CREDITEUR',
   647	    utilisation: 'FACULTATIF'
   648	  },
   649	  {
   650	    numero: '7911',
   651	    libelle: 'pour risques d\'exploitation',
   652	    classe: 7,
   653	    sousClasse: '791',
   654	    nature: 'PRODUIT',
   655	    sens: 'CREDITEUR',
   656	    utilisation: 'FACULTATIF'
   657	  },
   658	  {
   659	    numero: '7912',
   660	    libelle: 'pour grosses r√©parations',
   661	    classe: 7,
   662	    sousClasse: '791',
   663	    nature: 'PRODUIT',
   664	    sens: 'CREDITEUR',
   665	    utilisation: 'FACULTATIF'
   666	  },
   667	  {
   668	    numero: '7913',
   669	    libelle: 'pour d√©pr√©ciation des immobilisations incorporelles',
   670	    classe: 7,
   671	    sousClasse: '791',
   672	    nature: 'PRODUIT',
   673	    sens: 'CREDITEUR',
   674	    utilisation: 'FACULTATIF'
   675	  },
   676	  {
   677	    numero: '7914',
   678	    libelle: 'pour d√©pr√©ciation des immobilisations corporelles',
   679	    classe: 7,
   680	    sousClasse: '791',
   681	    nature: 'PRODUIT',
   682	    sens: 'CREDITEUR',
   683	    utilisation: 'FACULTATIF'
   684	  },
   685	  {
   686	    numero: '797',
   687	    libelle: 'Reprises de provisions financi√®res',
   688	    classe: 7,
   689	    sousClasse: '79',
   690	    nature: 'PRODUIT',
   691	    sens: 'CREDITEUR',
   692	    utilisation: 'FACULTATIF'
   693	  },
   694	  {
   695	    numero: '7971',
   696	    libelle: 'pour risques financiers',
   697	    classe: 7,
   698	    sousClasse: '797',
   699	    nature: 'PRODUIT',
   700	    sens: 'CREDITEUR',
   701	    utilisation: 'FACULTATIF'
   702	  },
   703	  {
   704	    numero: '7972',
   705	    libelle: 'pour d√©pr√©ciation des immobilisations financi√®res',
   706	    classe: 7,
   707	    sousClasse: '797',
   708	    nature: 'PRODUIT',
   709	    sens: 'CREDITEUR',
   710	    utilisation: 'FACULTATIF'
   711	  },
   712	  {
   713	    numero: '798',
   714	    libelle: 'Reprises d\'amortissements',
   715	    classe: 7,
   716	    sousClasse: '79',
   717	    nature: 'PRODUIT',
   718	    sens: 'CREDITEUR',
   719	    utilisation: 'FACULTATIF'
   720	  }
   721	]

================================================================================
FILE: src/data/syscohada/plan/classe8.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 8 - COMPTES DES AUTRES CHARGES ET DES AUTRES PRODUITS
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_8_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 81 - VALEURS COMPTABLES DES CESSIONS D'IMMOBILISATIONS
    10	  // ============================================================
    11	  {
    12	    numero: '81',
    13	    libelle: 'Valeurs comptables des cessions d\'immobilisations',
    14	    classe: 8,
    15	    nature: 'CHARGE',
    16	    sens: 'DEBITEUR',
    17	    utilisation: 'FACULTATIF'
    18	  },
    19	  {
    20	    numero: '811',
    21	    libelle: 'Immobilisations incorporelles',
    22	    classe: 8,
    23	    sousClasse: '81',
    24	    nature: 'CHARGE',
    25	    sens: 'DEBITEUR',
    26	    utilisation: 'FACULTATIF'
    27	  },
    28	  {
    29	    numero: '812',
    30	    libelle: 'Immobilisations corporelles',
    31	    classe: 8,
    32	    sousClasse: '81',
    33	    nature: 'CHARGE',
    34	    sens: 'DEBITEUR',
    35	    utilisation: 'FACULTATIF'
    36	  },
    37	  {
    38	    numero: '813',
    39	    libelle: 'Immobilisations financi√®res',
    40	    classe: 8,
    41	    sousClasse: '81',
    42	    nature: 'CHARGE',
    43	    sens: 'DEBITEUR',
    44	    utilisation: 'FACULTATIF'
    45	  },
    46	  {
    47	    numero: '816',
    48	    libelle: 'Valeurs comptables des cessions de biens mis en concession',
    49	    classe: 8,
    50	    sousClasse: '81',
    51	    nature: 'CHARGE',
    52	    sens: 'DEBITEUR',
    53	    utilisation: 'FACULTATIF'
    54	  },
    55	
    56	  // ============================================================
    57	  // 82 - PRODUITS DES CESSIONS D'IMMOBILISATIONS
    58	  // ============================================================
    59	  {
    60	    numero: '82',
    61	    libelle: 'Produits des cessions d\'immobilisations',
    62	    classe: 8,
    63	    nature: 'PRODUIT',
    64	    sens: 'CREDITEUR',
    65	    utilisation: 'FACULTATIF'
    66	  },
    67	  {
    68	    numero: '821',
    69	    libelle: 'Immobilisations incorporelles',
    70	    classe: 8,
    71	    sousClasse: '82',
    72	    nature: 'PRODUIT',
    73	    sens: 'CREDITEUR',
    74	    utilisation: 'FACULTATIF'
    75	  },
    76	  {
    77	    numero: '822',
    78	    libelle: 'Immobilisations corporelles',
    79	    classe: 8,
    80	    sousClasse: '82',
    81	    nature: 'PRODUIT',
    82	    sens: 'CREDITEUR',
    83	    utilisation: 'FACULTATIF'
    84	  },
    85	  {
    86	    numero: '823',
    87	    libelle: 'Immobilisations financi√®res',
    88	    classe: 8,
    89	    sousClasse: '82',
    90	    nature: 'PRODUIT',
    91	    sens: 'CREDITEUR',
    92	    utilisation: 'FACULTATIF'
    93	  },
    94	  {
    95	    numero: '826',
    96	    libelle: 'Produits des cessions de biens mis en concession',
    97	    classe: 8,
    98	    sousClasse: '82',
    99	    nature: 'PRODUIT',
   100	    sens: 'CREDITEUR',
   101	    utilisation: 'FACULTATIF'
   102	  },
   103	
   104	  // ============================================================
   105	  // 83 - CHARGES HORS ACTIVITES ORDINAIRES
   106	  // ============================================================
   107	  {
   108	    numero: '83',
   109	    libelle: 'Charges hors activit√©s ordinaires',
   110	    classe: 8,
   111	    nature: 'CHARGE',
   112	    sens: 'DEBITEUR',
   113	    utilisation: 'FACULTATIF'
   114	  },
   115	  {
   116	    numero: '831',
   117	    libelle: 'Charges H.A.O. constat√©es',
   118	    classe: 8,
   119	    sousClasse: '83',
   120	    nature: 'CHARGE',
   121	    sens: 'DEBITEUR',
   122	    utilisation: 'FACULTATIF'
   123	  },
   124	  {
   125	    numero: '834',
   126	    libelle: 'Pertes sur cr√©ances H.A.O.',
   127	    classe: 8,
   128	    sousClasse: '83',
   129	    nature: 'CHARGE',
   130	    sens: 'DEBITEUR',
   131	    utilisation: 'FACULTATIF'
   132	  },
   133	  {
   134	    numero: '835',
   135	    libelle: 'Dons et lib√©ralit√©s accord√©s',
   136	    classe: 8,
   137	    sousClasse: '83',
   138	    nature: 'CHARGE',
   139	    sens: 'DEBITEUR',
   140	    utilisation: 'FACULTATIF'
   141	  },
   142	  {
   143	    numero: '836',
   144	    libelle: 'Abandons de cr√©ances consentis',
   145	    classe: 8,
   146	    sousClasse: '83',
   147	    nature: 'CHARGE',
   148	    sens: 'DEBITEUR',
   149	    utilisation: 'FACULTATIF'
   150	  },
   151	  {
   152	    numero: '838',
   153	    libelle: 'Autres charges H.A.O.',
   154	    classe: 8,
   155	    sousClasse: '83',
   156	    nature: 'CHARGE',
   157	    sens: 'DEBITEUR',
   158	    utilisation: 'FACULTATIF'
   159	  },
   160	  {
   161	    numero: '839',
   162	    libelle: 'Charges provisionn√©es H.A.O.',
   163	    classe: 8,
   164	    sousClasse: '83',
   165	    nature: 'CHARGE',
   166	    sens: 'DEBITEUR',
   167	    utilisation: 'FACULTATIF'
   168	  },
   169	
   170	  // ============================================================
   171	  // 84 - PRODUITS HORS ACTIVITES ORDINAIRES
   172	  // ============================================================
   173	  {
   174	    numero: '84',
   175	    libelle: 'Produits hors activit√©s ordinaires',
   176	    classe: 8,
   177	    nature: 'PRODUIT',
   178	    sens: 'CREDITEUR',
   179	    utilisation: 'FACULTATIF'
   180	  },
   181	  {
   182	    numero: '841',
   183	    libelle: 'Produits H.A.O. constat√©s',
   184	    classe: 8,
   185	    sousClasse: '84',
   186	    nature: 'PRODUIT',
   187	    sens: 'CREDITEUR',
   188	    utilisation: 'FACULTATIF'
   189	  },
   190	  {
   191	    numero: '845',
   192	    libelle: 'Dons et lib√©ralit√©s obtenus',
   193	    classe: 8,
   194	    sousClasse: '84',
   195	    nature: 'PRODUIT',
   196	    sens: 'CREDITEUR',
   197	    utilisation: 'FACULTATIF'
   198	  },
   199	  {
   200	    numero: '846',
   201	    libelle: 'Abandons de cr√©ances obtenus',
   202	    classe: 8,
   203	    sousClasse: '84',
   204	    nature: 'PRODUIT',
   205	    sens: 'CREDITEUR',
   206	    utilisation: 'FACULTATIF'
   207	  },
   208	  {
   209	    numero: '848',
   210	    libelle: 'Autres produits H.A.O.',
   211	    classe: 8,
   212	    sousClasse: '84',
   213	    nature: 'PRODUIT',
   214	    sens: 'CREDITEUR',
   215	    utilisation: 'FACULTATIF'
   216	  },
   217	  {
   218	    numero: '849',
   219	    libelle: 'Reprises de charges provisionn√©es H.A.O.',
   220	    classe: 8,
   221	    sousClasse: '84',
   222	    nature: 'PRODUIT',
   223	    sens: 'CREDITEUR',
   224	    utilisation: 'FACULTATIF'
   225	  },
   226	
   227	  // ============================================================
   228	  // 85 - DOTATIONS HORS ACTIVITES ORDINAIRES
   229	  // ============================================================
   230	  {
   231	    numero: '85',
   232	    libelle: 'Dotations hors activit√©s ordinaires',
   233	    classe: 8,
   234	    nature: 'CHARGE',
   235	    sens: 'DEBITEUR',
   236	    utilisation: 'FACULTATIF'
   237	  },
   238	  {
   239	    numero: '851',
   240	    libelle: 'Dotations aux provisions r√©glement√©es',
   241	    classe: 8,
   242	    sousClasse: '85',
   243	    nature: 'CHARGE',
   244	    sens: 'DEBITEUR',
   245	    utilisation: 'FACULTATIF'
   246	  },
   247	  {
   248	    numero: '8511',
   249	    libelle: 'Amortissements d√©rogatoires',
   250	    classe: 8,
   251	    sousClasse: '851',
   252	    nature: 'CHARGE',
   253	    sens: 'DEBITEUR',
   254	    utilisation: 'FACULTATIF'
   255	  },
   256	  {
   257	    numero: '8512',
   258	    libelle: 'Plus-values de cession √† r√©investir',
   259	    classe: 8,
   260	    sousClasse: '851',
   261	    nature: 'CHARGE',
   262	    sens: 'DEBITEUR',
   263	    utilisation: 'FACULTATIF'
   264	  },
   265	  {
   266	    numero: '8518',
   267	    libelle: 'Autres provisions r√©glement√©es',
   268	    classe: 8,
   269	    sousClasse: '851',
   270	    nature: 'CHARGE',
   271	    sens: 'DEBITEUR',
   272	    utilisation: 'FACULTATIF'
   273	  },
   274	  {
   275	    numero: '852',
   276	    libelle: 'Dotations aux amortissements H.A.O.',
   277	    classe: 8,
   278	    sousClasse: '85',
   279	    nature: 'CHARGE',
   280	    sens: 'DEBITEUR',
   281	    utilisation: 'FACULTATIF'
   282	  },
   283	  {
   284	    numero: '853',
   285	    libelle: 'Dotations aux d√©pr√©ciations H.A.O.',
   286	    classe: 8,
   287	    sousClasse: '85',
   288	    nature: 'CHARGE',
   289	    sens: 'DEBITEUR',
   290	    utilisation: 'FACULTATIF'
   291	  },
   292	  {
   293	    numero: '8531',
   294	    libelle: 'D√©pr√©ciations des immobilisations',
   295	    classe: 8,
   296	    sousClasse: '853',
   297	    nature: 'CHARGE',
   298	    sens: 'DEBITEUR',
   299	    utilisation: 'FACULTATIF'
   300	  },
   301	  {
   302	    numero: '8532',
   303	    libelle: 'D√©pr√©ciations des stocks',
   304	    classe: 8,
   305	    sousClasse: '853',
   306	    nature: 'CHARGE',
   307	    sens: 'DEBITEUR',
   308	    utilisation: 'FACULTATIF'
   309	  },
   310	  {
   311	    numero: '8533',
   312	    libelle: 'D√©pr√©ciations des cr√©ances et des comptes de tr√©sorerie',
   313	    classe: 8,
   314	    sousClasse: '853',
   315	    nature: 'CHARGE',
   316	    sens: 'DEBITEUR',
   317	    utilisation: 'FACULTATIF'
   318	  },
   319	  {
   320	    numero: '854',
   321	    libelle: 'Dotations aux provisions pour risques et charges H.A.O.',
   322	    classe: 8,
   323	    sousClasse: '85',
   324	    nature: 'CHARGE',
   325	    sens: 'DEBITEUR',
   326	    utilisation: 'FACULTATIF'
   327	  },
   328	  {
   329	    numero: '858',
   330	    libelle: 'Autres dotations H.A.O.',
   331	    classe: 8,
   332	    sousClasse: '85',
   333	    nature: 'CHARGE',
   334	    sens: 'DEBITEUR',
   335	    utilisation: 'FACULTATIF'
   336	  },
   337	
   338	  // ============================================================
   339	  // 86 - REPRISES HORS ACTIVITES ORDINAIRES
   340	  // ============================================================
   341	  {
   342	    numero: '86',
   343	    libelle: 'Reprises hors activit√©s ordinaires',
   344	    classe: 8,
   345	    nature: 'PRODUIT',
   346	    sens: 'CREDITEUR',
   347	    utilisation: 'FACULTATIF'
   348	  },
   349	  {
   350	    numero: '861',
   351	    libelle: 'Reprises de provisions r√©glement√©es',
   352	    classe: 8,
   353	    sousClasse: '86',
   354	    nature: 'PRODUIT',
   355	    sens: 'CREDITEUR',
   356	    utilisation: 'FACULTATIF'
   357	  },
   358	  {
   359	    numero: '8611',
   360	    libelle: 'Amortissements d√©rogatoires',
   361	    classe: 8,
   362	    sousClasse: '861',
   363	    nature: 'PRODUIT',
   364	    sens: 'CREDITEUR',
   365	    utilisation: 'FACULTATIF'
   366	  },
   367	  {
   368	    numero: '8612',
   369	    libelle: 'Plus-values de cession √† r√©investir',
   370	    classe: 8,
   371	    sousClasse: '861',
   372	    nature: 'PRODUIT',
   373	    sens: 'CREDITEUR',
   374	    utilisation: 'FACULTATIF'
   375	  },
   376	  {
   377	    numero: '8618',
   378	    libelle: 'Autres provisions r√©glement√©es',
   379	    classe: 8,
   380	    sousClasse: '861',
   381	    nature: 'PRODUIT',
   382	    sens: 'CREDITEUR',
   383	    utilisation: 'FACULTATIF'
   384	  },
   385	  {
   386	    numero: '862',
   387	    libelle: 'Reprises d\'amortissements H.A.O.',
   388	    classe: 8,
   389	    sousClasse: '86',
   390	    nature: 'PRODUIT',
   391	    sens: 'CREDITEUR',
   392	    utilisation: 'FACULTATIF'
   393	  },
   394	  {
   395	    numero: '863',
   396	    libelle: 'Reprises de d√©pr√©ciations H.A.O.',
   397	    classe: 8,
   398	    sousClasse: '86',
   399	    nature: 'PRODUIT',
   400	    sens: 'CREDITEUR',
   401	    utilisation: 'FACULTATIF'
   402	  },
   403	  {
   404	    numero: '8631',
   405	    libelle: 'D√©pr√©ciations des immobilisations',
   406	    classe: 8,
   407	    sousClasse: '863',
   408	    nature: 'PRODUIT',
   409	    sens: 'CREDITEUR',
   410	    utilisation: 'FACULTATIF'
   411	  },
   412	  {
   413	    numero: '8632',
   414	    libelle: 'D√©pr√©ciations des stocks',
   415	    classe: 8,
   416	    sousClasse: '863',
   417	    nature: 'PRODUIT',
   418	    sens: 'CREDITEUR',
   419	    utilisation: 'FACULTATIF'
   420	  },
   421	  {
   422	    numero: '8633',
   423	    libelle: 'D√©pr√©ciations des cr√©ances et des comptes de tr√©sorerie',
   424	    classe: 8,
   425	    sousClasse: '863',
   426	    nature: 'PRODUIT',
   427	    sens: 'CREDITEUR',
   428	    utilisation: 'FACULTATIF'
   429	  },
   430	  {
   431	    numero: '864',
   432	    libelle: 'Reprises de provisions pour risques et charges H.A.O.',
   433	    classe: 8,
   434	    sousClasse: '86',
   435	    nature: 'PRODUIT',
   436	    sens: 'CREDITEUR',
   437	    utilisation: 'FACULTATIF'
   438	  },
   439	  {
   440	    numero: '868',
   441	    libelle: 'Autres reprises H.A.O.',
   442	    classe: 8,
   443	    sousClasse: '86',
   444	    nature: 'PRODUIT',
   445	    sens: 'CREDITEUR',
   446	    utilisation: 'FACULTATIF'
   447	  },
   448	  {
   449	    numero: '869',
   450	    libelle: 'Reprises de charges provisionn√©es H.A.O.',
   451	    classe: 8,
   452	    sousClasse: '86',
   453	    nature: 'PRODUIT',
   454	    sens: 'CREDITEUR',
   455	    utilisation: 'FACULTATIF'
   456	  },
   457	
   458	  // ============================================================
   459	  // 87 - PARTICIPATION DES TRAVAILLEURS
   460	  // ============================================================
   461	  {
   462	    numero: '87',
   463	    libelle: 'Participation des travailleurs',
   464	    classe: 8,
   465	    nature: 'CHARGE',
   466	    sens: 'DEBITEUR',
   467	    utilisation: 'FACULTATIF'
   468	  },
   469	  {
   470	    numero: '871',
   471	    libelle: 'Participation l√©gale aux b√©n√©fices',
   472	    classe: 8,
   473	    sousClasse: '87',
   474	    nature: 'CHARGE',
   475	    sens: 'DEBITEUR',
   476	    utilisation: 'FACULTATIF'
   477	  },
   478	  {
   479	    numero: '872',
   480	    libelle: 'Participation contractuelle aux b√©n√©fices',
   481	    classe: 8,
   482	    sousClasse: '87',
   483	    nature: 'CHARGE',
   484	    sens: 'DEBITEUR',
   485	    utilisation: 'FACULTATIF'
   486	  },
   487	  {
   488	    numero: '874',
   489	    libelle: 'Participation facultative aux b√©n√©fices',
   490	    classe: 8,
   491	    sousClasse: '87',
   492	    nature: 'CHARGE',
   493	    sens: 'DEBITEUR',
   494	    utilisation: 'FACULTATIF'
   495	  },
   496	  {
   497	    numero: '878',
   498	    libelle: 'Autres charges de participation',
   499	    classe: 8,
   500	    sousClasse: '87',
   501	    nature: 'CHARGE',
   502	    sens: 'DEBITEUR',
   503	    utilisation: 'FACULTATIF'
   504	  },
   505	
   506	  // ============================================================
   507	  // 88 - SUBVENTIONS D'EQUILIBRE
   508	  // ============================================================
   509	  {
   510	    numero: '88',
   511	    libelle: 'Subventions d\'√©quilibre',
   512	    classe: 8,
   513	    nature: 'PRODUIT',
   514	    sens: 'CREDITEUR',
   515	    utilisation: 'FACULTATIF'
   516	  },
   517	  {
   518	    numero: '881',
   519	    libelle: 'Subventions d\'√©quilibre re√ßues de l\'√âtat',
   520	    classe: 8,
   521	    sousClasse: '88',
   522	    nature: 'PRODUIT',
   523	    sens: 'CREDITEUR',
   524	    utilisation: 'FACULTATIF'
   525	  },
   526	  {
   527	    numero: '882',
   528	    libelle: 'Subventions d\'√©quilibre re√ßues d\'autres organismes',
   529	    classe: 8,
   530	    sousClasse: '88',
   531	    nature: 'PRODUIT',
   532	    sens: 'CREDITEUR',
   533	    utilisation: 'FACULTATIF'
   534	  },
   535	  {
   536	    numero: '886',
   537	    libelle: 'Abandons de cr√©ances √† caract√®re financier',
   538	    classe: 8,
   539	    sousClasse: '88',
   540	    nature: 'PRODUIT',
   541	    sens: 'CREDITEUR',
   542	    utilisation: 'FACULTATIF'
   543	  },
   544	  {
   545	    numero: '888',
   546	    libelle: 'Autres subventions d\'√©quilibre',
   547	    classe: 8,
   548	    sousClasse: '88',
   549	    nature: 'PRODUIT',
   550	    sens: 'CREDITEUR',
   551	    utilisation: 'FACULTATIF'
   552	  },
   553	
   554	  // ============================================================
   555	  // 89 - IMPOTS SUR LE RESULTAT
   556	  // ============================================================
   557	  {
   558	    numero: '89',
   559	    libelle: 'Imp√¥ts sur le r√©sultat',
   560	    classe: 8,
   561	    nature: 'CHARGE',
   562	    sens: 'DEBITEUR',
   563	    utilisation: 'OBLIGATOIRE'
   564	  },
   565	  {
   566	    numero: '891',
   567	    libelle: 'Imp√¥ts sur les b√©n√©fices de l\'exercice',
   568	    classe: 8,
   569	    sousClasse: '89',
   570	    nature: 'CHARGE',
   571	    sens: 'DEBITEUR',
   572	    utilisation: 'OBLIGATOIRE'
   573	  },
   574	  {
   575	    numero: '8911',
   576	    libelle: 'Activit√©s exerc√©es dans l\'√âtat',
   577	    classe: 8,
   578	    sousClasse: '891',
   579	    nature: 'CHARGE',
   580	    sens: 'DEBITEUR',
   581	    utilisation: 'OBLIGATOIRE'
   582	  },
   583	  {
   584	    numero: '8912',
   585	    libelle: 'Activit√©s exerc√©es dans les autres √âtats',
   586	    classe: 8,
   587	    sousClasse: '891',
   588	    nature: 'CHARGE',
   589	    sens: 'DEBITEUR',
   590	    utilisation: 'FACULTATIF'
   591	  },
   592	  {
   593	    numero: '892',
   594	    libelle: 'Rappels d\'imp√¥ts sur les r√©sultats',
   595	    classe: 8,
   596	    sousClasse: '89',
   597	    nature: 'CHARGE',
   598	    sens: 'DEBITEUR',
   599	    utilisation: 'FACULTATIF'
   600	  },
   601	  {
   602	    numero: '895',
   603	    libelle: 'Imp√¥ts minimum forfaitaire (IMF)',
   604	    classe: 8,
   605	    sousClasse: '89',
   606	    nature: 'CHARGE',
   607	    sens: 'DEBITEUR',
   608	    utilisation: 'FACULTATIF'
   609	  },
   610	  {
   611	    numero: '899',
   612	    libelle: 'D√©gr√®vements et annulations d\'imp√¥ts sur r√©sultats',
   613	    classe: 8,
   614	    sousClasse: '89',
   615	    nature: 'PRODUIT',
   616	    sens: 'CREDITEUR',
   617	    utilisation: 'FACULTATIF'
   618	  }
   619	]

================================================================================
FILE: src/data/syscohada/plan/classe9.ts
================================================================================
     1	import type { CompteComptable } from '../types'
     2	
     3	/**
     4	 * CLASSE 9 - COMPTES DES ENGAGEMENTS HORS BILAN ET COMPTABILITE ANALYTIQUE
     5	 * Plan comptable SYSCOHADA R√©vis√© (2017)
     6	 */
     7	export const CLASSE_9_COMPTES: CompteComptable[] = [
     8	  // ============================================================
     9	  // 90 - COMPTES DE FLUX EN ENGAGEMENT
    10	  // ============================================================
    11	  {
    12	    numero: '90',
    13	    libelle: 'Comptes de flux en engagement',
    14	    classe: 9,
    15	    nature: 'SPECIAL',
    16	    sens: 'DEBITEUR',
    17	    utilisation: 'FACULTATIF'
    18	  },
    19	  {
    20	    numero: '901',
    21	    libelle: 'Engagements de financement accord√©s',
    22	    classe: 9,
    23	    sousClasse: '90',
    24	    nature: 'SPECIAL',
    25	    sens: 'DEBITEUR',
    26	    utilisation: 'FACULTATIF'
    27	  },
    28	  {
    29	    numero: '902',
    30	    libelle: 'Engagements de financement obtenus',
    31	    classe: 9,
    32	    sousClasse: '90',
    33	    nature: 'SPECIAL',
    34	    sens: 'DEBITEUR',
    35	    utilisation: 'FACULTATIF'
    36	  },
    37	  {
    38	    numero: '903',
    39	    libelle: 'Engagements de garantie donn√©s',
    40	    classe: 9,
    41	    sousClasse: '90',
    42	    nature: 'SPECIAL',
    43	    sens: 'DEBITEUR',
    44	    utilisation: 'FACULTATIF'
    45	  },
    46	  {
    47	    numero: '904',
    48	    libelle: 'Engagements de garantie obtenus',
    49	    classe: 9,
    50	    sousClasse: '90',
    51	    nature: 'SPECIAL',
    52	    sens: 'DEBITEUR',
    53	    utilisation: 'FACULTATIF'
    54	  },
    55	  {
    56	    numero: '905',
    57	    libelle: 'Engagements r√©ciproques',
    58	    classe: 9,
    59	    sousClasse: '90',
    60	    nature: 'SPECIAL',
    61	    sens: 'DEBITEUR',
    62	    utilisation: 'FACULTATIF'
    63	  },
    64	  {
    65	    numero: '906',
    66	    libelle: 'Biens d√©tenus en fiducie',
    67	    classe: 9,
    68	    sousClasse: '90',
    69	    nature: 'SPECIAL',
    70	    sens: 'DEBITEUR',
    71	    utilisation: 'FACULTATIF'
    72	  },
    73	
    74	  // ============================================================
    75	  // 91 - CONTREPARTIE DES ENGAGEMENTS
    76	  // ============================================================
    77	  {
    78	    numero: '91',
    79	    libelle: 'Contrepartie des engagements',
    80	    classe: 9,
    81	    nature: 'SPECIAL',
    82	    sens: 'CREDITEUR',
    83	    utilisation: 'FACULTATIF'
    84	  },
    85	  {
    86	    numero: '911',
    87	    libelle: 'Contrepartie des engagements de financement accord√©s',
    88	    classe: 9,
    89	    sousClasse: '91',
    90	    nature: 'SPECIAL',
    91	    sens: 'CREDITEUR',
    92	    utilisation: 'FACULTATIF'
    93	  },
    94	  {
    95	    numero: '912',
    96	    libelle: 'Contrepartie des engagements de financement obtenus',
    97	    classe: 9,
    98	    sousClasse: '91',
    99	    nature: 'SPECIAL',
   100	    sens: 'CREDITEUR',
   101	    utilisation: 'FACULTATIF'
   102	  },
   103	  {
   104	    numero: '913',
   105	    libelle: 'Contrepartie des engagements de garantie donn√©s',
   106	    classe: 9,
   107	    sousClasse: '91',
   108	    nature: 'SPECIAL',
   109	    sens: 'CREDITEUR',
   110	    utilisation: 'FACULTATIF'
   111	  },
   112	  {
   113	    numero: '914',
   114	    libelle: 'Contrepartie des engagements de garantie obtenus',
   115	    classe: 9,
   116	    sousClasse: '91',
   117	    nature: 'SPECIAL',
   118	    sens: 'CREDITEUR',
   119	    utilisation: 'FACULTATIF'
   120	  },
   121	  {
   122	    numero: '915',
   123	    libelle: 'Contrepartie des engagements r√©ciproques',
   124	    classe: 9,
   125	    sousClasse: '91',
   126	    nature: 'SPECIAL',
   127	    sens: 'CREDITEUR',
   128	    utilisation: 'FACULTATIF'
   129	  },
   130	  {
   131	    numero: '916',
   132	    libelle: 'Contrepartie des biens d√©tenus en fiducie',
   133	    classe: 9,
   134	    sousClasse: '91',
   135	    nature: 'SPECIAL',
   136	    sens: 'CREDITEUR',
   137	    utilisation: 'FACULTATIF'
   138	  },
   139	
   140	  // ============================================================
   141	  // 92 - COMPTABILITE ANALYTIQUE DE GESTION - COMPTES REFLECHIS
   142	  // ============================================================
   143	  {
   144	    numero: '92',
   145	    libelle: 'Comptabilit√© analytique de gestion - Comptes r√©fl√©chis',
   146	    classe: 9,
   147	    nature: 'SPECIAL',
   148	    sens: 'DEBITEUR',
   149	    utilisation: 'FACULTATIF'
   150	  },
   151	  {
   152	    numero: '921',
   153	    libelle: 'Comptes r√©fl√©chis d\'achats',
   154	    classe: 9,
   155	    sousClasse: '92',
   156	    nature: 'SPECIAL',
   157	    sens: 'DEBITEUR',
   158	    utilisation: 'FACULTATIF'
   159	  },
   160	  {
   161	    numero: '922',
   162	    libelle: 'Comptes r√©fl√©chis de charges',
   163	    classe: 9,
   164	    sousClasse: '92',
   165	    nature: 'SPECIAL',
   166	    sens: 'DEBITEUR',
   167	    utilisation: 'FACULTATIF'
   168	  },
   169	  {
   170	    numero: '923',
   171	    libelle: 'Comptes r√©fl√©chis de produits',
   172	    classe: 9,
   173	    sousClasse: '92',
   174	    nature: 'SPECIAL',
   175	    sens: 'CREDITEUR',
   176	    utilisation: 'FACULTATIF'
   177	  },
   178	  {
   179	    numero: '924',
   180	    libelle: 'Comptes r√©fl√©chis de stocks',
   181	    classe: 9,
   182	    sousClasse: '92',
   183	    nature: 'SPECIAL',
   184	    sens: 'DEBITEUR',
   185	    utilisation: 'FACULTATIF'
   186	  },
   187	
   188	  // ============================================================
   189	  // 93 - COMPTABILITE ANALYTIQUE - COUTS
   190	  // ============================================================
   191	  {
   192	    numero: '93',
   193	    libelle: 'Comptabilit√© analytique - Co√ªts',
   194	    classe: 9,
   195	    nature: 'SPECIAL',
   196	    sens: 'DEBITEUR',
   197	    utilisation: 'FACULTATIF'
   198	  },
   199	  {
   200	    numero: '931',
   201	    libelle: 'Co√ªts d\'achat',
   202	    classe: 9,
   203	    sousClasse: '93',
   204	    nature: 'SPECIAL',
   205	    sens: 'DEBITEUR',
   206	    utilisation: 'FACULTATIF'
   207	  },
   208	  {
   209	    numero: '932',
   210	    libelle: 'Co√ªts de production',
   211	    classe: 9,
   212	    sousClasse: '93',
   213	    nature: 'SPECIAL',
   214	    sens: 'DEBITEUR',
   215	    utilisation: 'FACULTATIF'
   216	  },
   217	  {
   218	    numero: '933',
   219	    libelle: 'Co√ªts de distribution',
   220	    classe: 9,
   221	    sousClasse: '93',
   222	    nature: 'SPECIAL',
   223	    sens: 'DEBITEUR',
   224	    utilisation: 'FACULTATIF'
   225	  },
   226	  {
   227	    numero: '934',
   228	    libelle: 'Co√ªts d\'administration',
   229	    classe: 9,
   230	    sousClasse: '93',
   231	    nature: 'SPECIAL',
   232	    sens: 'DEBITEUR',
   233	    utilisation: 'FACULTATIF'
   234	  },
   235	  {
   236	    numero: '935',
   237	    libelle: 'Co√ªts de revient',
   238	    classe: 9,
   239	    sousClasse: '93',
   240	    nature: 'SPECIAL',
   241	    sens: 'DEBITEUR',
   242	    utilisation: 'FACULTATIF'
   243	  },
   244	  {
   245	    numero: '938',
   246	    libelle: 'Autres co√ªts',
   247	    classe: 9,
   248	    sousClasse: '93',
   249	    nature: 'SPECIAL',
   250	    sens: 'DEBITEUR',
   251	    utilisation: 'FACULTATIF'
   252	  },
   253	
   254	  // ============================================================
   255	  // 94 - INVENTAIRE PERMANENT DES STOCKS
   256	  // ============================================================
   257	  {
   258	    numero: '94',
   259	    libelle: 'Inventaire permanent des stocks',
   260	    classe: 9,
   261	    nature: 'SPECIAL',
   262	    sens: 'DEBITEUR',
   263	    utilisation: 'FACULTATIF'
   264	  },
   265	  {
   266	    numero: '941',
   267	    libelle: 'Stocks de mati√®res',
   268	    classe: 9,
   269	    sousClasse: '94',
   270	    nature: 'SPECIAL',
   271	    sens: 'DEBITEUR',
   272	    utilisation: 'FACULTATIF'
   273	  },
   274	  {
   275	    numero: '942',
   276	    libelle: 'Stocks de produits finis',
   277	    classe: 9,
   278	    sousClasse: '94',
   279	    nature: 'SPECIAL',
   280	    sens: 'DEBITEUR',
   281	    utilisation: 'FACULTATIF'
   282	  },
   283	  {
   284	    numero: '943',
   285	    libelle: 'Stocks d\'en-cours',
   286	    classe: 9,
   287	    sousClasse: '94',
   288	    nature: 'SPECIAL',
   289	    sens: 'DEBITEUR',
   290	    utilisation: 'FACULTATIF'
   291	  },
   292	
   293	  // ============================================================
   294	  // 95 - COMPTES DE SECTIONS ANALYTIQUES
   295	  // ============================================================
   296	  {
   297	    numero: '95',
   298	    libelle: 'Comptes de sections analytiques',
   299	    classe: 9,
   300	    nature: 'SPECIAL',
   301	    sens: 'DEBITEUR',
   302	    utilisation: 'FACULTATIF'
   303	  },
   304	  {
   305	    numero: '951',
   306	    libelle: 'Sections principales',
   307	    classe: 9,
   308	    sousClasse: '95',
   309	    nature: 'SPECIAL',
   310	    sens: 'DEBITEUR',
   311	    utilisation: 'FACULTATIF'
   312	  },
   313	  {
   314	    numero: '952',
   315	    libelle: 'Sections auxiliaires',
   316	    classe: 9,
   317	    sousClasse: '95',
   318	    nature: 'SPECIAL',
   319	    sens: 'DEBITEUR',
   320	    utilisation: 'FACULTATIF'
   321	  },
   322	
   323	  // ============================================================
   324	  // 96 - ECARTS SUR COUTS PREVISIONNELS
   325	  // ============================================================
   326	  {
   327	    numero: '96',
   328	    libelle: '√âcarts sur co√ªts pr√©visionnels',
   329	    classe: 9,
   330	    nature: 'SPECIAL',
   331	    sens: 'DEBITEUR',
   332	    utilisation: 'FACULTATIF'
   333	  },
   334	  {
   335	    numero: '961',
   336	    libelle: '√âcarts sur mati√®res',
   337	    classe: 9,
   338	    sousClasse: '96',
   339	    nature: 'SPECIAL',
   340	    sens: 'DEBITEUR',
   341	    utilisation: 'FACULTATIF'
   342	  },
   343	  {
   344	    numero: '962',
   345	    libelle: '√âcarts sur main d\'oeuvre',
   346	    classe: 9,
   347	    sousClasse: '96',
   348	    nature: 'SPECIAL',
   349	    sens: 'DEBITEUR',
   350	    utilisation: 'FACULTATIF'
   351	  },
   352	  {
   353	    numero: '963',
   354	    libelle: '√âcarts sur charges indirectes',
   355	    classe: 9,
   356	    sousClasse: '96',
   357	    nature: 'SPECIAL',
   358	    sens: 'DEBITEUR',
   359	    utilisation: 'FACULTATIF'
   360	  },
   361	
   362	  // ============================================================
   363	  // 97 - RESULTATS ANALYTIQUES
   364	  // ============================================================
   365	  {
   366	    numero: '97',
   367	    libelle: 'R√©sultats analytiques',
   368	    classe: 9,
   369	    nature: 'SPECIAL',
   370	    sens: 'DEBITEUR',
   371	    utilisation: 'FACULTATIF'
   372	  },
   373	  {
   374	    numero: '971',
   375	    libelle: 'R√©sultats analytiques sur produits',
   376	    classe: 9,
   377	    sousClasse: '97',
   378	    nature: 'SPECIAL',
   379	    sens: 'DEBITEUR',
   380	    utilisation: 'FACULTATIF'
   381	  },
   382	  {
   383	    numero: '972',
   384	    libelle: 'R√©sultats analytiques sur commandes',
   385	    classe: 9,
   386	    sousClasse: '97',
   387	    nature: 'SPECIAL',
   388	    sens: 'DEBITEUR',
   389	    utilisation: 'FACULTATIF'
   390	  },
   391	  {
   392	    numero: '973',
   393	    libelle: 'R√©sultats analytiques sur activit√©s',
   394	    classe: 9,
   395	    sousClasse: '97',
   396	    nature: 'SPECIAL',
   397	    sens: 'DEBITEUR',
   398	    utilisation: 'FACULTATIF'
   399	  },
   400	
   401	  // ============================================================
   402	  // 98 - COMPTES DE LIAISON INTERETABLISSEMENTS ANALYTIQUES
   403	  // ============================================================
   404	  {
   405	    numero: '98',
   406	    libelle: 'Comptes de liaison inter√©tablissements analytiques',
   407	    classe: 9,
   408	    nature: 'SPECIAL',
   409	    sens: 'DEBITEUR',
   410	    utilisation: 'FACULTATIF'
   411	  },
   412	  {
   413	    numero: '981',
   414	    libelle: 'Comptes de liaison envois',
   415	    classe: 9,
   416	    sousClasse: '98',
   417	    nature: 'SPECIAL',
   418	    sens: 'DEBITEUR',
   419	    utilisation: 'FACULTATIF'
   420	  },
   421	  {
   422	    numero: '982',
   423	    libelle: 'Comptes de liaison r√©ceptions',
   424	    classe: 9,
   425	    sousClasse: '98',
   426	    nature: 'SPECIAL',
   427	    sens: 'CREDITEUR',
   428	    utilisation: 'FACULTATIF'
   429	  },
   430	
   431	  // ============================================================
   432	  // 99 - COMPTES D'AJUSTEMENT INTERNE
   433	  // ============================================================
   434	  {
   435	    numero: '99',
   436	    libelle: 'Comptes d\'ajustement interne',
   437	    classe: 9,
   438	    nature: 'SPECIAL',
   439	    sens: 'DEBITEUR',
   440	    utilisation: 'FACULTATIF'
   441	  },
   442	  {
   443	    numero: '991',
   444	    libelle: 'Diff√©rences d\'incorporation',
   445	    classe: 9,
   446	    sousClasse: '99',
   447	    nature: 'SPECIAL',
   448	    sens: 'DEBITEUR',
   449	    utilisation: 'FACULTATIF'
   450	  },
   451	  {
   452	    numero: '995',
   453	    libelle: 'Diff√©rences d\'imputation',
   454	    classe: 9,
   455	    sousClasse: '99',
   456	    nature: 'SPECIAL',
   457	    sens: 'DEBITEUR',
   458	    utilisation: 'FACULTATIF'
   459	  },
   460	  {
   461	    numero: '998',
   462	    libelle: 'R√©sultats de la comptabilit√© analytique',
   463	    classe: 9,
   464	    sousClasse: '99',
   465	    nature: 'SPECIAL',
   466	    sens: 'DEBITEUR',
   467	    utilisation: 'FACULTATIF'
   468	  }
   469	]

================================================================================
FILE: src/data/syscohada/plan/index.ts
================================================================================
     1	/**
     2	 * Plan Comptable SYSCOHADA R√©vis√© - Index combin√©
     3	 * Re-exporte tous les comptes des 9 classes + fonctions helper
     4	 */
     5	
     6	import type { CompteComptable, ClasseSYSCOHADA } from '../types'
     7	import { CLASSE_1_COMPTES } from './classe1'
     8	import { CLASSE_2_COMPTES } from './classe2'
     9	import { CLASSE_3_COMPTES } from './classe3'
    10	import { CLASSE_4_COMPTES } from './classe4'
    11	import { CLASSE_5_COMPTES } from './classe5'
    12	import { CLASSE_6_COMPTES } from './classe6'
    13	import { CLASSE_7_COMPTES } from './classe7'
    14	import { CLASSE_8_COMPTES } from './classe8'
    15	import { CLASSE_9_COMPTES } from './classe9'
    16	
    17	// Re-export des types
    18	export type { CompteComptable, ClasseSYSCOHADA } from '../types'
    19	
    20	/** M√©tadonn√©es des 9 classes SYSCOHADA */
    21	export const SYSCOHADA_REVISE_CLASSES: Record<number, ClasseSYSCOHADA> = {
    22	  1: { numero: '1', libelle: 'COMPTES DE RESSOURCES DURABLES', description: 'Capitaux propres et dettes financi√®res √† long terme' },
    23	  2: { numero: '2', libelle: 'COMPTES D\'ACTIF IMMOBILISE', description: 'Immobilisations incorporelles, corporelles et financi√®res' },
    24	  3: { numero: '3', libelle: 'COMPTES DE STOCKS', description: 'Stocks et en-cours de production' },
    25	  4: { numero: '4', libelle: 'COMPTES DE TIERS', description: 'Cr√©ances et dettes d\'exploitation et hors exploitation' },
    26	  5: { numero: '5', libelle: 'COMPTES DE TRESORERIE', description: 'Disponibilit√©s et √©quivalents de tr√©sorerie' },
    27	  6: { numero: '6', libelle: 'COMPTES DE CHARGES DES ACTIVITES ORDINAIRES', description: 'Charges d\'exploitation, financi√®res et exceptionnelles' },
    28	  7: { numero: '7', libelle: 'COMPTES DE PRODUITS DES ACTIVITES ORDINAIRES', description: 'Produits d\'exploitation, financiers et exceptionnels' },
    29	  8: { numero: '8', libelle: 'COMPTES DES AUTRES CHARGES ET DES AUTRES PRODUITS', description: 'HAO (Hors Activit√©s Ordinaires) et participations' },
    30	  9: { numero: '9', libelle: 'COMPTES DES ENGAGEMENTS HORS BILAN ET COMPTABILITE ANALYTIQUE', description: 'Engagements, analytique et comptes sp√©ciaux' },
    31	}
    32	
    33	/** Plan comptable complet : tous les comptes des 9 classes combin√©s */
    34	export const PLAN_SYSCOHADA_REVISE: CompteComptable[] = [
    35	  ...CLASSE_1_COMPTES,
    36	  ...CLASSE_2_COMPTES,
    37	  ...CLASSE_3_COMPTES,
    38	  ...CLASSE_4_COMPTES,
    39	  ...CLASSE_5_COMPTES,
    40	  ...CLASSE_6_COMPTES,
    41	  ...CLASSE_7_COMPTES,
    42	  ...CLASSE_8_COMPTES,
    43	  ...CLASSE_9_COMPTES,
    44	]
    45	
    46	// --- Index rapide par num√©ro (construit une seule fois) ---
    47	let _indexByNumero: Map<string, CompteComptable> | null = null
    48	
    49	function getIndex(): Map<string, CompteComptable> {
    50	  if (!_indexByNumero) {
    51	    _indexByNumero = new Map(PLAN_SYSCOHADA_REVISE.map(c => [c.numero, c]))
    52	  }
    53	  return _indexByNumero
    54	}
    55	
    56	// --- Fonctions helper ---
    57	
    58	/** Trouver un compte par son num√©ro exact */
    59	export const getSYSCOHADAAccountByNumber = (numero: string): CompteComptable | undefined => {
    60	  return getIndex().get(numero)
    61	}
    62	
    63	/** Trouver tous les comptes d'une classe */
    64	export const getSYSCOHADAAccountsByClass = (classe: number): CompteComptable[] => {
    65	  return PLAN_SYSCOHADA_REVISE.filter(c => c.classe === classe)
    66	}
    67	
    68	/** Trouver les comptes applicables √† un secteur */
    69	export const getSYSCOHADAAccountsBySector = (secteur: string): CompteComptable[] => {
    70	  return PLAN_SYSCOHADA_REVISE.filter(c => !c.secteurs || c.secteurs.includes(secteur))
    71	}
    72	
    73	/** Valider qu'un num√©ro de compte existe dans le plan */
    74	export const validateSYSCOHADAAccount = (numero: string): boolean => {
    75	  return getIndex().has(numero)
    76	}
    77	
    78	/** Rechercher des comptes par num√©ro ou libell√© */
    79	export const searchSYSCOHADAAccounts = (query: string, options?: {
    80	  classe?: number
    81	  nature?: CompteComptable['nature']
    82	  utilisation?: CompteComptable['utilisation']
    83	  limit?: number
    84	}): CompteComptable[] => {
    85	  const q = query.toLowerCase().trim()
    86	  if (!q) return []
    87	
    88	  let results = PLAN_SYSCOHADA_REVISE.filter(c =>
    89	    c.numero.includes(q) || c.libelle.toLowerCase().includes(q)
    90	  )
    91	
    92	  if (options?.classe !== undefined) {
    93	    results = results.filter(c => c.classe === options.classe)
    94	  }
    95	  if (options?.nature) {
    96	    results = results.filter(c => c.nature === options.nature)
    97	  }
    98	  if (options?.utilisation) {
    99	    results = results.filter(c => c.utilisation === options.utilisation)
   100	  }
   101	  if (options?.limit) {
   102	    results = results.slice(0, options.limit)
   103	  }
   104	
   105	  return results
   106	}
   107	
   108	/** Trouver le compte parent (2 chiffres) d'un compte */
   109	export const getParentAccount = (numero: string): CompteComptable | undefined => {
   110	  if (numero.length <= 2) return undefined
   111	  for (let len = numero.length - 1; len >= 2; len--) {
   112	    const parent = getIndex().get(numero.substring(0, len))
   113	    if (parent) return parent
   114	  }
   115	  return undefined
   116	}
   117	
   118	/** Trouver les sous-comptes d'un compte donn√© */
   119	export const getChildAccounts = (numero: string): CompteComptable[] => {
   120	  return PLAN_SYSCOHADA_REVISE.filter(c =>
   121	    c.numero.startsWith(numero) && c.numero !== numero && c.numero.length === numero.length + 1
   122	  )
   123	}
   124	
   125	/** Obtenir les comptes obligatoires par classe */
   126	export const getMandatoryAccounts = (classe?: number): CompteComptable[] => {
   127	  let comptes = PLAN_SYSCOHADA_REVISE.filter(c => c.utilisation === 'OBLIGATOIRE')
   128	  if (classe !== undefined) {
   129	    comptes = comptes.filter(c => c.classe === classe)
   130	  }
   131	  return comptes
   132	}
   133	
   134	/** Trouver le compte OHADA le plus proche d'un num√©ro donn√© */
   135	export const findClosestAccount = (numero: string): { numero: string; libelle: string; score: number } | null => {
   136	  const index = getIndex()
   137	  // 1. Correspondance exacte
   138	  const exact = index.get(numero)
   139	  if (exact) return { numero: exact.numero, libelle: exact.libelle, score: 1 }
   140	
   141	  // 2. Correspondance par pr√©fixes d√©croissants
   142	  for (let len = Math.min(numero.length, 4); len >= 2; len--) {
   143	    const prefix = numero.substring(0, len)
   144	    const match = index.get(prefix)
   145	    if (match) return { numero: match.numero, libelle: match.libelle, score: len / numero.length }
   146	  }
   147	
   148	  // 3. Correspondance par classe (premier chiffre)
   149	  const classe = numero.charAt(0)
   150	  const match = index.get(classe)
   151	  if (match) return { numero: match.numero, libelle: match.libelle, score: 0.1 }
   152	
   153	  return null
   154	}
   155	
   156	/** Exporter les comptes par classe (pour import paresseux) */
   157	export {
   158	  CLASSE_1_COMPTES,
   159	  CLASSE_2_COMPTES,
   160	  CLASSE_3_COMPTES,
   161	  CLASSE_4_COMPTES,
   162	  CLASSE_5_COMPTES,
   163	  CLASSE_6_COMPTES,
   164	  CLASSE_7_COMPTES,
   165	  CLASSE_8_COMPTES,
   166	  CLASSE_9_COMPTES,
   167	}

================================================================================
FILE: src/data/syscohada/types.ts
================================================================================
     1	/**
     2	 * Types pour le r√©f√©rentiel SYSCOHADA R√©vis√© complet
     3	 * Interfaces pour le plan comptable, le fonctionnement des comptes
     4	 * et les op√©rations sp√©cifiques (41 chapitres)
     5	 */
     6	
     7	/** Compte comptable SYSCOHADA (r√©trocompatible avec l'ancien format) */
     8	export interface CompteComptable {
     9	  numero: string
    10	  libelle: string
    11	  classe: number
    12	  sousClasse?: string
    13	  nature: 'ACTIF' | 'PASSIF' | 'CHARGE' | 'PRODUIT' | 'SPECIAL'
    14	  sens: 'DEBITEUR' | 'CREDITEUR'
    15	  utilisation: 'OBLIGATOIRE' | 'FACULTATIF' | 'INTERDIT'
    16	  secteurs?: string[]
    17	  notes?: string
    18	}
    19	
    20	/** M√©tadonn√©es d'une classe SYSCOHADA */
    21	export interface ClasseSYSCOHADA {
    22	  numero: string
    23	  libelle: string
    24	  description: string
    25	}
    26	
    27	/** Fonctionnement d√©taill√© d'un compte (charg√© √† la demande) */
    28	export interface FonctionnementCompte {
    29	  numero: string
    30	  contenu: string
    31	  subdivisions: { numero: string; libelle: string }[]
    32	  commentaires: string[]
    33	  fonctionnement: {
    34	    debit: { description: string; contrePartie: string[] }[]
    35	    credit: { description: string; contrePartie: string[] }[]
    36	  }
    37	  exclusions: {
    38	    description: string
    39	    compteCorrige: string
    40	    libelleCompteCorrige: string
    41	  }[]
    42	  elementsControle: string[]
    43	}
    44	
    45	/** Ligne d'√©criture comptable exemple */
    46	export interface EcritureExemple {
    47	  numero: number
    48	  description: string
    49	  lignes: {
    50	    sens: 'D' | 'C'
    51	    compte: string
    52	    libelleCompte: string
    53	    montant?: number
    54	    commentaire?: string
    55	  }[]
    56	}
    57	
    58	/** Section d'un chapitre d'op√©rations sp√©cifiques */
    59	export interface SectionOperation {
    60	  titre: string
    61	  contenu: string
    62	  ecritures?: EcritureExemple[]
    63	}
    64	
    65	/** Chapitre d'op√©rations sp√©cifiques SYSCOHADA */
    66	export interface ChapitreOperations {
    67	  numero: number
    68	  titre: string
    69	  sections: SectionOperation[]
    70	  comptesLies: string[]
    71	}

================================================================================
FILE: src/data/SYSCOHADARevisePlan.ts
================================================================================
     1	/**
     2	 * Plan Comptable SYSCOHADA R√©vis√© - Fa√ßade de r√©trocompatibilit√©
     3	 *
     4	 * Ce fichier re-exporte depuis le nouveau module structur√© syscohada/.
     5	 * Tous les imports existants continuent de fonctionner sans modification.
     6	 */
     7	
     8	// Re-export du type CompteComptable (compatible avec l'ancien format)
     9	export type { CompteComptable } from './syscohada/types'
    10	
    11	// Re-export de toutes les donn√©es et fonctions depuis le nouveau module
    12	export {
    13	  SYSCOHADA_REVISE_CLASSES,
    14	  PLAN_SYSCOHADA_REVISE,
    15	  getSYSCOHADAAccountByNumber,
    16	  getSYSCOHADAAccountsByClass,
    17	  getSYSCOHADAAccountsBySector,
    18	  validateSYSCOHADAAccount,
    19	} from './syscohada/plan'

================================================================================
FILE: src/main.tsx
================================================================================
     1	import React from 'react'
     2	import ReactDOM from 'react-dom/client'
     3	import { BrowserRouter } from 'react-router-dom'
     4	import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
     5	import { ThemeProvider, CssBaseline } from '@mui/material'
     6	import { Provider } from 'react-redux'
     7	import App from './App.tsx'
     8	import { store } from './store/index.ts'
     9	import fiscasyncTheme from './theme/fiscasyncTheme.ts'
    10	import './index.css'
    11	import './styles/contrast-fix.css'
    12	
    13	// Configuration du client React Query
    14	const queryClient = new QueryClient({
    15	  defaultOptions: {
    16	    queries: {
    17	      staleTime: 5 * 60 * 1000, // 5 minutes
    18	      gcTime: 10 * 60 * 1000, // 10 minutes
    19	      retry: (failureCount, error: any) => {
    20	        // Ne pas retry pour les erreurs d'authentification
    21	        if (error?.response?.status === 401) return false
    22	        return failureCount < 3
    23	      }
    24	    }
    25	  }
    26	})
    27	
    28	// Global unhandled promise rejection handler
    29	// Prevents silent failures and logs errors for debugging
    30	window.addEventListener('unhandledrejection', (event) => {
    31	  console.error('üö® Unhandled promise rejection:', event.reason)
    32	
    33	  // Log detailed error information for debugging
    34	  if (event.reason instanceof Error) {
    35	    console.error('Error name:', event.reason.name)
    36	    console.error('Error message:', event.reason.message)
    37	    console.error('Error stack:', event.reason.stack)
    38	  }
    39	
    40	  // TODO: Send to error tracking service (Sentry, LogRocket, etc.)
    41	  // if (window.Sentry) {
    42	  //   window.Sentry.captureException(event.reason)
    43	  // }
    44	
    45	  // Prevent the default browser error logging
    46	  event.preventDefault()
    47	})
    48	
    49	// Global error handler for synchronous errors
    50	window.addEventListener('error', (event) => {
    51	  console.error('üö® Global error:', event.error || event.message)
    52	
    53	  // TODO: Send to error tracking service
    54	  // if (window.Sentry) {
    55	  //   window.Sentry.captureException(event.error)
    56	  // }
    57	})
    58	
    59	ReactDOM.createRoot(document.getElementById('root')!).render(
    60	  <React.StrictMode>
    61	    <Provider store={store}>
    62	      <QueryClientProvider client={queryClient}>
    63	        <ThemeProvider theme={fiscasyncTheme}>
    64	          <CssBaseline />
    65	          <BrowserRouter
    66	            future={{
    67	              v7_startTransition: true,
    68	              v7_relativeSplatPath: true
    69	            }}
    70	          >
    71	            <App />
    72	          </BrowserRouter>
    73	        </ThemeProvider>
    74	      </QueryClientProvider>
    75	    </Provider>
    76	  </React.StrictMode>,
    77	)
================================================================================
FILE: src/services/__tests__/apiClient.test.ts
================================================================================
     1	/**
     2	 * Tests pour le service API Client
     3	 */
     4	import { describe, it, expect, vi, beforeEach, afterEach } from 'vitest'
     5	
     6	describe('API Client Service', () => {
     7	  beforeEach(() => {
     8	    // Clear sessionStorage before each test
     9	    sessionStorage.clear()
    10	    vi.clearAllMocks()
    11	  })
    12	
    13	  afterEach(() => {
    14	    vi.restoreAllMocks()
    15	  })
    16	
    17	  it('should store tokens securely in sessionStorage', () => {
    18	    const mockTokens = {
    19	      access: 'test-access-token',
    20	      refresh: 'test-refresh-token'
    21	    }
    22	
    23	    // Simulate login
    24	    sessionStorage.setItem('refresh_token', mockTokens.refresh)
    25	
    26	    expect(sessionStorage.getItem('refresh_token')).toBe(mockTokens.refresh)
    27	    // Access token should NOT be in sessionStorage (stored in memory)
    28	    expect(sessionStorage.getItem('access_token')).toBeNull()
    29	  })
    30	
    31	  it('should extract CSRF token from cookies', () => {
    32	    // Mock document.cookie
    33	    Object.defineProperty(document, 'cookie', {
    34	      writable: true,
    35	      value: 'csrftoken=test-csrf-token; other=value'
    36	    })
    37	
    38	    // The apiClient should be able to extract CSRF token
    39	    // This is tested indirectly through the private method
    40	    expect(document.cookie).toContain('csrftoken=test-csrf-token')
    41	  })
    42	
    43	  it('should handle 401 errors and attempt token refresh', async () => {
    44	    // Mock fetch to return 401
    45	    const mockFetch = vi.fn().mockResolvedValueOnce({
    46	      ok: false,
    47	      status: 401,
    48	      json: async () => ({ detail: 'Unauthorized' })
    49	    })
    50	    global.fetch = mockFetch as any
    51	
    52	    // Expect API call to handle 401
    53	    try {
    54	      await fetch('/api/test')
    55	    } catch (_error) {
    56	      // Error should be caught and handled
    57	    }
    58	
    59	    expect(mockFetch).toHaveBeenCalled()
    60	  })
    61	
    62	  it('should clear tokens on logout', () => {
    63	    // Set tokens
    64	    sessionStorage.setItem('refresh_token', 'test-refresh')
    65	
    66	    // Clear on logout
    67	    sessionStorage.removeItem('refresh_token')
    68	    sessionStorage.removeItem('access_token')
    69	
    70	    expect(sessionStorage.getItem('refresh_token')).toBeNull()
    71	    expect(sessionStorage.getItem('access_token')).toBeNull()
    72	  })
    73	
    74	  it('should use environment variable for API base URL', () => {
    75	    // Check that VITE_API_BASE_URL is used
    76	    const apiUrl = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000'
    77	
    78	    expect(apiUrl).toBeDefined()
    79	    expect(typeof apiUrl).toBe('string')
    80	  })
    81	})

================================================================================
FILE: src/services/__tests__/liasseDataService.test.ts
================================================================================
     1	/**
     2	 * Tests Unitaires - Service de Mapping Liasse Fiscale
     3	 *
     4	 * Teste le mapping automatique Balance ‚Üí √âtats financiers SYSCOHADA
     5	 * et les validations de coh√©rence
     6	 */
     7	
     8	import { describe, it, expect, beforeEach } from 'vitest'
     9	import { liasseDataService, BalanceEntry, SYSCOHADA_MAPPING } from '../liasseDataService'
    10	
    11	describe('LiasseDataService - Mapping SYSCOHADA', () => {
    12	  // Balance de test
    13	  const mockBalance: BalanceEntry[] = [
    14	    // ACTIF - Immobilisations
    15	    { compte: '211', intitule: 'Frais de R&D', debit: 50000, credit: 0, solde_debit: 50000, solde_credit: 0 },
    16	    { compte: '2811', intitule: 'Amort Frais R&D', debit: 0, credit: 10000, solde_debit: 0, solde_credit: 10000 },
    17	    { compte: '22', intitule: 'Terrains', debit: 200000, credit: 0, solde_debit: 200000, solde_credit: 0 },
    18	    { compte: '231', intitule: 'B√¢timents', debit: 500000, credit: 0, solde_debit: 500000, solde_credit: 0 },
    19	    { compte: '2831', intitule: 'Amort B√¢timents', debit: 0, credit: 100000, solde_debit: 0, solde_credit: 100000 },
    20	
    21	    // ACTIF - Stocks
    22	    { compte: '31', intitule: 'Marchandises', debit: 80000, credit: 0, solde_debit: 80000, solde_credit: 0 },
    23	
    24	    // ACTIF - Cr√©ances
    25	    { compte: '411', intitule: 'Clients', debit: 150000, credit: 0, solde_debit: 150000, solde_credit: 0 },
    26	
    27	    // ACTIF - Tr√©sorerie
    28	    { compte: '521', intitule: 'Banque', debit: 100000, credit: 0, solde_debit: 100000, solde_credit: 0 },
    29	
    30	    // PASSIF - Capitaux propres
    31	    { compte: '101', intitule: 'Capital', debit: 0, credit: 500000, solde_debit: 0, solde_credit: 500000 },
    32	    { compte: '11', intitule: 'R√©serves', debit: 0, credit: 100000, solde_debit: 0, solde_credit: 100000 },
    33	    { compte: '13', intitule: 'R√©sultat', debit: 0, credit: 270000, solde_debit: 0, solde_credit: 270000 },
    34	
    35	    // PASSIF - Dettes
    36	    { compte: '161', intitule: 'Emprunts', debit: 0, credit: 200000, solde_debit: 0, solde_credit: 200000 },
    37	    { compte: '401', intitule: 'Fournisseurs', debit: 0, credit: 100000, solde_debit: 0, solde_credit: 100000 },
    38	
    39	    // COMPTE DE R√âSULTAT - Charges
    40	    { compte: '601', intitule: 'Achats marchandises', debit: 200000, credit: 0, solde_debit: 200000, solde_credit: 0 },
    41	    { compte: '61', intitule: 'Transport', debit: 30000, credit: 0, solde_debit: 30000, solde_credit: 0 },
    42	    { compte: '66', intitule: 'Charges personnel', debit: 150000, credit: 0, solde_debit: 150000, solde_credit: 0 },
    43	    { compte: '681', intitule: 'Dotations amort', debit: 50000, credit: 0, solde_debit: 50000, solde_credit: 0 },
    44	
    45	    // COMPTE DE R√âSULTAT - Produits
    46	    { compte: '701', intitule: 'Ventes marchandises', debit: 0, credit: 700000, solde_debit: 0, solde_credit: 700000 },
    47	  ]
    48	
    49	  beforeEach(() => {
    50	    liasseDataService.loadBalance(mockBalance)
    51	  })
    52	
    53	  describe('Chargement de la balance', () => {
    54	    it('devrait charger la balance correctement', () => {
    55	      expect(() => liasseDataService.loadBalance(mockBalance)).not.toThrow()
    56	    })
    57	
    58	    it('devrait construire un cache de mapping', () => {
    59	      const bilanActif = liasseDataService.generateBilanActif()
    60	      expect(bilanActif).toBeDefined()
    61	      expect(Array.isArray(bilanActif)).toBe(true)
    62	    })
    63	  })
    64	
    65	  describe('G√©n√©ration Bilan Actif', () => {
    66	    it('devrait g√©n√©rer un bilan actif avec tous les postes', () => {
    67	      const bilanActif = liasseDataService.generateBilanActif()
    68	
    69	      expect(bilanActif).toBeDefined()
    70	      expect(bilanActif.length).toBeGreaterThan(0)
    71	    })
    72	
    73	    it('devrait calculer correctement les immobilisations incorporelles (AD)', () => {
    74	      const bilanActif = liasseDataService.generateBilanActif()
    75	      const posteAD = bilanActif.find((row: any) => row.ref === 'AD')
    76	
    77	      expect(posteAD).toBeDefined()
    78	      expect(posteAD.brut).toBe(50000) // Compte 211
    79	      expect(posteAD.amortProv).toBe(10000) // Compte 2811
    80	      expect(posteAD.net).toBe(40000) // 50000 - 10000
    81	    })
    82	
    83	    it('devrait calculer correctement les terrains (AJ)', () => {
    84	      const bilanActif = liasseDataService.generateBilanActif()
    85	      const posteAJ = bilanActif.find((row: any) => row.ref === 'AJ')
    86	
    87	      expect(posteAJ).toBeDefined()
    88	      expect(posteAJ.brut).toBe(200000)
    89	      expect(posteAJ.net).toBe(200000)
    90	    })
    91	
    92	    it('devrait calculer correctement les b√¢timents (AK)', () => {
    93	      const bilanActif = liasseDataService.generateBilanActif()
    94	      const posteAK = bilanActif.find((row: any) => row.ref === 'AK')
    95	
    96	      expect(posteAK).toBeDefined()
    97	      expect(posteAK.brut).toBe(500000)
    98	      expect(posteAK.amortProv).toBe(100000)
    99	      expect(posteAK.net).toBe(400000)
   100	    })
   101	
   102	    it('devrait calculer correctement les stocks marchandises (BC)', () => {
   103	      const bilanActif = liasseDataService.generateBilanActif()
   104	      const posteBC = bilanActif.find((row: any) => row.ref === 'BC')
   105	
   106	      expect(posteBC).toBeDefined()
   107	      expect(posteBC.brut).toBe(80000)
   108	    })
   109	
   110	    it('devrait calculer correctement les cr√©ances clients (BJ)', () => {
   111	      const bilanActif = liasseDataService.generateBilanActif()
   112	      const posteBJ = bilanActif.find((row: any) => row.ref === 'BJ')
   113	
   114	      expect(posteBJ).toBeDefined()
   115	      expect(posteBJ.brut).toBe(150000)
   116	    })
   117	  })
   118	
   119	  describe('G√©n√©ration Bilan Passif', () => {
   120	    it('devrait g√©n√©rer un bilan passif avec tous les postes', () => {
   121	      const bilanPassif = liasseDataService.generateBilanPassif()
   122	
   123	      expect(bilanPassif).toBeDefined()
   124	      expect(bilanPassif.length).toBeGreaterThan(0)
   125	    })
   126	
   127	    it('devrait calculer correctement le capital (CA)', () => {
   128	      const bilanPassif = liasseDataService.generateBilanPassif()
   129	      const posteCA = bilanPassif.find((row: any) => row.ref === 'CA')
   130	
   131	      expect(posteCA).toBeDefined()
   132	      expect(posteCA.montant).toBe(500000)
   133	    })
   134	
   135	    it('devrait calculer correctement les r√©serves (CC)', () => {
   136	      const bilanPassif = liasseDataService.generateBilanPassif()
   137	      const posteCC = bilanPassif.find((row: any) => row.ref === 'CC')
   138	
   139	      expect(posteCC).toBeDefined()
   140	      expect(posteCC.montant).toBe(100000)
   141	    })
   142	
   143	    it('devrait calculer correctement le r√©sultat (CE)', () => {
   144	      const bilanPassif = liasseDataService.generateBilanPassif()
   145	      const posteCE = bilanPassif.find((row: any) => row.ref === 'CE')
   146	
   147	      expect(posteCE).toBeDefined()
   148	      expect(posteCE.montant).toBe(270000)
   149	    })
   150	
   151	    it('devrait calculer correctement les emprunts (DA)', () => {
   152	      const bilanPassif = liasseDataService.generateBilanPassif()
   153	      const posteDA = bilanPassif.find((row: any) => row.ref === 'DA')
   154	
   155	      expect(posteDA).toBeDefined()
   156	      expect(posteDA.montant).toBe(200000)
   157	    })
   158	  })
   159	
   160	  describe('G√©n√©ration Compte de R√©sultat', () => {
   161	    it('devrait g√©n√©rer un compte de r√©sultat avec charges et produits', () => {
   162	      const { charges, produits } = liasseDataService.generateCompteResultat()
   163	
   164	      expect(charges).toBeDefined()
   165	      expect(produits).toBeDefined()
   166	      expect(Array.isArray(charges)).toBe(true)
   167	      expect(Array.isArray(produits)).toBe(true)
   168	    })
   169	
   170	    it('devrait calculer correctement les achats de marchandises (RA)', () => {
   171	      const { charges } = liasseDataService.generateCompteResultat()
   172	      const posteRA = charges.find((row: any) => row.ref === 'RA')
   173	
   174	      expect(posteRA).toBeDefined()
   175	      expect(posteRA.montant).toBe(200000)
   176	    })
   177	
   178	    it('devrait calculer correctement les charges de personnel (RK)', () => {
   179	      const { charges } = liasseDataService.generateCompteResultat()
   180	      const posteRK = charges.find((row: any) => row.ref === 'RK')
   181	
   182	      expect(posteRK).toBeDefined()
   183	      expect(posteRK.montant).toBe(150000)
   184	    })
   185	
   186	    it('devrait calculer correctement les ventes de marchandises (TA)', () => {
   187	      const { produits } = liasseDataService.generateCompteResultat()
   188	      const posteTA = produits.find((row: any) => row.ref === 'TA')
   189	
   190	      expect(posteTA).toBeDefined()
   191	      expect(posteTA.montant).toBe(700000)
   192	    })
   193	  })
   194	
   195	  describe('Validation de Coh√©rence', () => {
   196	    it('devrait valider l\'√©quilibre du bilan', () => {
   197	      const validation = liasseDataService.validateCoherence()
   198	
   199	      expect(validation).toBeDefined()
   200	      expect(validation.isValid).toBe(true)
   201	      expect(validation.errors).toHaveLength(0)
   202	    })
   203	
   204	    it('devrait d√©tecter un d√©s√©quilibre du bilan', () => {
   205	      // Balance d√©s√©quilibr√©e
   206	      const balanceDesequilibree: BalanceEntry[] = [
   207	        { compte: '22', intitule: 'Terrains', debit: 100000, credit: 0, solde_debit: 100000, solde_credit: 0 },
   208	        { compte: '101', intitule: 'Capital', debit: 0, credit: 50000, solde_debit: 0, solde_credit: 50000 },
   209	      ]
   210	
   211	      liasseDataService.loadBalance(balanceDesequilibree)
   212	      const validation = liasseDataService.validateCoherence()
   213	
   214	      expect(validation.isValid).toBe(false)
   215	      expect(validation.errors.length).toBeGreaterThan(0)
   216	      expect(validation.errors[0]).toContain('bilan n\'est pas √©quilibr√©')
   217	    })
   218	
   219	    it('devrait calculer le r√©sultat correctement', () => {
   220	      const { charges, produits } = liasseDataService.generateCompteResultat()
   221	
   222	      const totalCharges = charges.reduce((sum: number, row: any) => sum + row.montant, 0)
   223	      const totalProduits = produits.reduce((sum: number, row: any) => sum + row.montant, 0)
   224	      const resultat = totalProduits - totalCharges
   225	
   226	      // R√©sultat = 700000 (ventes) - (200000 + 30000 + 150000 + 50000) = 270000
   227	      expect(resultat).toBe(270000)
   228	    })
   229	
   230	    it('devrait v√©rifier la coh√©rence r√©sultat bilan vs compte de r√©sultat', () => {
   231	      const validation = liasseDataService.validateCoherence()
   232	
   233	      expect(validation.isValid).toBe(true)
   234	      expect(validation.errors).not.toContain('Incoh√©rence du r√©sultat')
   235	    })
   236	  })
   237	
   238	  describe('Mapping SYSCOHADA', () => {
   239	    it('devrait avoir un mapping complet pour l\'actif', () => {
   240	      expect(SYSCOHADA_MAPPING.actif).toBeDefined()
   241	      expect(Object.keys(SYSCOHADA_MAPPING.actif).length).toBeGreaterThan(10)
   242	    })
   243	
   244	    it('devrait avoir un mapping complet pour le passif', () => {
   245	      expect(SYSCOHADA_MAPPING.passif).toBeDefined()
   246	      expect(Object.keys(SYSCOHADA_MAPPING.passif).length).toBeGreaterThan(5)
   247	    })
   248	
   249	    it('devrait avoir un mapping complet pour les charges', () => {
   250	      expect(SYSCOHADA_MAPPING.charges).toBeDefined()
   251	      expect(Object.keys(SYSCOHADA_MAPPING.charges).length).toBeGreaterThan(10)
   252	    })
   253	
   254	    it('devrait avoir un mapping complet pour les produits', () => {
   255	      expect(SYSCOHADA_MAPPING.produits).toBeDefined()
   256	      expect(Object.keys(SYSCOHADA_MAPPING.produits).length).toBeGreaterThan(5)
   257	    })
   258	
   259	    it('devrait mapper les comptes par pr√©fixe', () => {
   260	      const balanceAvecPrefixes: BalanceEntry[] = [
   261	        { compte: '2111', intitule: 'Frais R&D d√©taill√©', debit: 10000, credit: 0, solde_debit: 10000, solde_credit: 0 },
   262	        { compte: '2112', intitule: 'Frais R&D autres', debit: 5000, credit: 0, solde_debit: 5000, solde_credit: 0 },
   263	      ]
   264	
   265	      liasseDataService.loadBalance(balanceAvecPrefixes)
   266	      const bilanActif = liasseDataService.generateBilanActif()
   267	      const posteAD = bilanActif.find((row: any) => row.ref === 'AD')
   268	
   269	      // Doit inclure tous les sous-comptes 211*
   270	      expect(posteAD.brut).toBe(15000)
   271	    })
   272	  })
   273	
   274	  describe('Performance', () => {
   275	    it('devrait g√©n√©rer le bilan actif en moins de 100ms', () => {
   276	      const start = performance.now()
   277	      liasseDataService.generateBilanActif()
   278	      const duration = performance.now() - start
   279	
   280	      expect(duration).toBeLessThan(100)
   281	    })
   282	
   283	    it('devrait g√©n√©rer le bilan passif en moins de 100ms', () => {
   284	      const start = performance.now()
   285	      liasseDataService.generateBilanPassif()
   286	      const duration = performance.now() - start
   287	
   288	      expect(duration).toBeLessThan(100)
   289	    })
   290	
   291	    it('devrait valider la coh√©rence en moins de 200ms', () => {
   292	      const start = performance.now()
   293	      liasseDataService.validateCoherence()
   294	      const duration = performance.now() - start
   295	
   296	      expect(duration).toBeLessThan(200)
   297	    })
   298	  })
   299	
   300	  describe('Cas limites', () => {
   301	    it('devrait g√©rer une balance vide', () => {
   302	      liasseDataService.loadBalance([])
   303	      const bilanActif = liasseDataService.generateBilanActif()
   304	
   305	      expect(bilanActif).toBeDefined()
   306	      expect(Array.isArray(bilanActif)).toBe(true)
   307	    })
   308	
   309	    it('devrait g√©rer des valeurs nulles', () => {
   310	      const balanceAvecNulls: BalanceEntry[] = [
   311	        { compte: '22', intitule: 'Terrains', debit: 0, credit: 0, solde_debit: 0, solde_credit: 0 },
   312	      ]
   313	
   314	      liasseDataService.loadBalance(balanceAvecNulls)
   315	      const bilanActif = liasseDataService.generateBilanActif()
   316	      const posteAJ = bilanActif.find((row: any) => row.ref === 'AJ')
   317	
   318	      expect(posteAJ.brut).toBe(0)
   319	    })
   320	
   321	    it('devrait g√©rer des comptes inexistants dans le mapping', () => {
   322	      const balanceAvecInconnus: BalanceEntry[] = [
   323	        { compte: '999', intitule: 'Compte inconnu', debit: 1000, credit: 0, solde_debit: 1000, solde_credit: 0 },
   324	      ]
   325	
   326	      expect(() => {
   327	        liasseDataService.loadBalance(balanceAvecInconnus)
   328	        liasseDataService.generateBilanActif()
   329	      }).not.toThrow()
   330	    })
   331	  })
   332	})

================================================================================
FILE: src/services/accountingService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion comptable et plan de comptes
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface CompteComptable {
     9	  id: string
    10	  numero: string
    11	  libelle: string
    12	  classe: number
    13	  niveau: number
    14	  type_compte: 'DETAIL' | 'TITRE' | 'SOUS_TITRE'
    15	  nature: 'DEBIT' | 'CREDIT' | 'SOLDE'
    16	  is_actif: boolean
    17	  compte_parent?: string
    18	  comptes_enfants?: CompteComptable[]
    19	  solde_debiteur?: number
    20	  solde_crediteur?: number
    21	  mouvements_count?: number
    22	  derniere_utilisation?: string
    23	  created_at: string
    24	  updated_at: string
    25	}
    26	
    27	export interface PlanComptable {
    28	  id: string
    29	  nom: string
    30	  version: string
    31	  norme: 'SYSCOHADA' | 'IFRS' | 'PCG' | 'OHADA'
    32	  pays: string
    33	  description: string
    34	  is_officiel: boolean
    35	  is_default: boolean
    36	  comptes: CompteComplet[]
    37	  created_at: string
    38	  updated_at: string
    39	}
    40	
    41	export interface CompteComplet extends CompteComptable {
    42	  plan_comptable: string
    43	  regles_validation?: string[]
    44	  comptes_lies?: string[]
    45	  mapping_fiscal?: {
    46	    code_impot: string
    47	    taux_applicable?: number
    48	    exemption?: boolean
    49	  }
    50	}
    51	
    52	export interface EcritureComptable {
    53	  id: string
    54	  numero_piece: string
    55	  date_ecriture: string
    56	  libelle: string
    57	  montant_total: number
    58	  devise: string
    59	  statut: 'BROUILLON' | 'VALIDEE' | 'CLOTUREE'
    60	  journal: string
    61	  exercice: string
    62	  lignes: LigneEcriture[]
    63	  piece_jointe?: string
    64	  created_by: string
    65	  validated_by?: string
    66	  created_at: string
    67	  updated_at: string
    68	}
    69	
    70	export interface LigneEcriture {
    71	  id: string
    72	  compte: string
    73	  compte_detail?: CompteComptable
    74	  libelle: string
    75	  debit: number
    76	  credit: number
    77	  ordre: number
    78	  reference?: string
    79	  tiers?: string
    80	  created_at: string
    81	}
    82	
    83	export interface Journal {
    84	  id: string
    85	  code: string
    86	  libelle: string
    87	  type_journal: 'VENTE' | 'ACHAT' | 'BANQUE' | 'CAISSE' | 'OD' | 'REPORT'
    88	  is_actif: boolean
    89	  sequence_actuelle: number
    90	  prefixe_numero?: string
    91	  comptes_autorises?: string[]
    92	  created_at: string
    93	}
    94	
    95	export interface Balance {
    96	  exercice: string
    97	  date_arret: string
    98	  comptes: Array<{
    99	    numero: string
   100	    libelle: string
   101	    solde_initial_debit: number
   102	    solde_initial_credit: number
   103	    mouvements_debit: number
   104	    mouvements_credit: number
   105	    solde_final_debit: number
   106	    solde_final_credit: number
   107	  }>
   108	  totaux: {
   109	    total_debits: number
   110	    total_credits: number
   111	    equilibre: boolean
   112	  }
   113	}
   114	
   115	export interface GrandLivre {
   116	  compte: string
   117	  compte_detail?: CompteComptable
   118	  periode_debut: string
   119	  periode_fin: string
   120	  solde_initial: number
   121	  mouvements: Array<{
   122	    date: string
   123	    numero_piece: string
   124	    libelle: string
   125	    debit: number
   126	    credit: number
   127	    solde_progressif: number
   128	  }>
   129	  solde_final: number
   130	  total_debit: number
   131	  total_credit: number
   132	}
   133	
   134	class AccountingService {
   135	  private baseUrl = '/api/v1/accounting'
   136	
   137	  // Plan comptable - CONNEXION R√âELLE AU BACKEND
   138	  async getPlansComptables(params?: {
   139	    norme?: string
   140	    pays?: string
   141	    is_officiel?: boolean
   142	    page?: number
   143	  }) {
   144	    console.log('üîÑ Fetching plans comptables from backend...', params)
   145	    return apiClient.get(`${this.baseUrl}/plans/`, params)
   146	  }
   147	
   148	  async getPlanComptable(id: string): Promise<PlanComptable> {
   149	    console.log(`üîÑ Fetching plan comptable ${id} from backend...`)
   150	    return apiClient.get(`${this.baseUrl}/plans/${id}/`)
   151	  }
   152	
   153	  async createPlanComptable(plan: Partial<PlanComptable>): Promise<PlanComptable> {
   154	    console.log('üì§ Creating plan comptable in backend...', plan)
   155	    return apiClient.post(`${this.baseUrl}/plans/`, plan)
   156	  }
   157	
   158	  async updatePlanComptable(id: string, plan: Partial<PlanComptable>): Promise<PlanComptable> {
   159	    console.log(`üì§ Updating plan comptable ${id} in backend...`)
   160	    return apiClient.patch(`${this.baseUrl}/plans/${id}/`, plan)
   161	  }
   162	
   163	  async deletePlanComptable(id: string): Promise<void> {
   164	    console.log(`üóëÔ∏è Deleting plan comptable ${id} from backend...`)
   165	    return apiClient.delete(`${this.baseUrl}/plans/${id}/`)
   166	  }
   167	
   168	  async duplicatePlanComptable(id: string, newName: string): Promise<PlanComptable> {
   169	    console.log(`üìã Duplicating plan comptable ${id} as ${newName}...`)
   170	    return apiClient.post(`${this.baseUrl}/plans/${id}/duplicate/`, { nom: newName })
   171	  }
   172	
   173	  // Comptes comptables - CONNEXION R√âELLE AU BACKEND
   174	  async getComptes(params?: {
   175	    plan_comptable?: string
   176	    classe?: number
   177	    niveau?: number
   178	    type_compte?: string
   179	    search?: string
   180	    is_actif?: boolean
   181	    page?: number
   182	    page_size?: number
   183	  }) {
   184	    console.log('üîÑ Fetching comptes from backend...', params)
   185	    return apiClient.get(`${this.baseUrl}/comptes/`, params)
   186	  }
   187	
   188	  async getCompte(id: string): Promise<CompteComplet> {
   189	    console.log(`üîÑ Fetching compte ${id} from backend...`)
   190	    return apiClient.get(`${this.baseUrl}/comptes/${id}/`)
   191	  }
   192	
   193	  async createCompte(compte: Partial<CompteComplet>): Promise<CompteComplet> {
   194	    console.log('üì§ Creating compte in backend...', compte)
   195	    return apiClient.post(`${this.baseUrl}/comptes/`, compte)
   196	  }
   197	
   198	  async updateCompte(id: string, compte: Partial<CompteComplet>): Promise<CompteComplet> {
   199	    console.log(`üì§ Updating compte ${id} in backend...`)
   200	    return apiClient.patch(`${this.baseUrl}/comptes/${id}/`, compte)
   201	  }
   202	
   203	  async deleteCompte(id: string): Promise<void> {
   204	    console.log(`üóëÔ∏è Deleting compte ${id} from backend...`)
   205	    return apiClient.delete(`${this.baseUrl}/comptes/${id}/`)
   206	  }
   207	
   208	  async getCompteHierarchy(plan_id: string) {
   209	    console.log(`üå≥ Getting compte hierarchy for plan ${plan_id}...`)
   210	    return apiClient.get(`${this.baseUrl}/plans/${plan_id}/hierarchy/`)
   211	  }
   212	
   213	  async searchComptes(query: string, plan_id?: string) {
   214	    console.log(`üîç Searching comptes: ${query}...`)
   215	    return apiClient.get(`${this.baseUrl}/comptes/search/`, { q: query, plan_comptable: plan_id })
   216	  }
   217	
   218	  // √âcritures comptables - CONNEXION R√âELLE AU BACKEND
   219	  async getEcritures(params?: {
   220	    journal?: string
   221	    exercice?: string
   222	    date_debut?: string
   223	    date_fin?: string
   224	    statut?: string
   225	    compte?: string
   226	    page?: number
   227	  }) {
   228	    console.log('üîÑ Fetching √©critures from backend...', params)
   229	    return apiClient.get(`${this.baseUrl}/ecritures/`, params)
   230	  }
   231	
   232	  async getEcriture(id: string): Promise<EcritureComptable> {
   233	    console.log(`üîÑ Fetching √©criture ${id} from backend...`)
   234	    return apiClient.get(`${this.baseUrl}/ecritures/${id}/`)
   235	  }
   236	
   237	  async createEcriture(ecriture: Partial<EcritureComptable>): Promise<EcritureComptable> {
   238	    console.log('üì§ Creating √©criture in backend...', ecriture)
   239	    return apiClient.post(`${this.baseUrl}/ecritures/`, ecriture)
   240	  }
   241	
   242	  async updateEcriture(id: string, ecriture: Partial<EcritureComptable>): Promise<EcritureComptable> {
   243	    console.log(`üì§ Updating √©criture ${id} in backend...`)
   244	    return apiClient.patch(`${this.baseUrl}/ecritures/${id}/`, ecriture)
   245	  }
   246	
   247	  async deleteEcriture(id: string): Promise<void> {
   248	    console.log(`üóëÔ∏è Deleting √©criture ${id} from backend...`)
   249	    return apiClient.delete(`${this.baseUrl}/ecritures/${id}/`)
   250	  }
   251	
   252	  async validateEcriture(id: string): Promise<EcritureComptable> {
   253	    console.log(`‚úÖ Validating √©criture ${id} on backend...`)
   254	    return apiClient.post(`${this.baseUrl}/ecritures/${id}/validate/`)
   255	  }
   256	
   257	  async unvalidateEcriture(id: string): Promise<EcritureComptable> {
   258	    console.log(`‚ùå Unvalidating √©criture ${id} on backend...`)
   259	    return apiClient.post(`${this.baseUrl}/ecritures/${id}/unvalidate/`)
   260	  }
   261	
   262	  async duplicateEcriture(id: string): Promise<EcritureComptable> {
   263	    console.log(`üìã Duplicating √©criture ${id}...`)
   264	    return apiClient.post(`${this.baseUrl}/ecritures/${id}/duplicate/`)
   265	  }
   266	
   267	  // Journaux - CONNEXION R√âELLE AU BACKEND
   268	  async getJournaux(params?: {
   269	    type_journal?: string
   270	    is_actif?: boolean
   271	    page?: number
   272	  }) {
   273	    console.log('üîÑ Fetching journaux from backend...', params)
   274	    return apiClient.get(`${this.baseUrl}/journaux/`, params)
   275	  }
   276	
   277	  async getJournal(id: string): Promise<Journal> {
   278	    console.log(`üîÑ Fetching journal ${id} from backend...`)
   279	    return apiClient.get(`${this.baseUrl}/journaux/${id}/`)
   280	  }
   281	
   282	  async createJournal(journal: Partial<Journal>): Promise<Journal> {
   283	    console.log('üì§ Creating journal in backend...', journal)
   284	    return apiClient.post(`${this.baseUrl}/journaux/`, journal)
   285	  }
   286	
   287	  async updateJournal(id: string, journal: Partial<Journal>): Promise<Journal> {
   288	    console.log(`üì§ Updating journal ${id} in backend...`)
   289	    return apiClient.patch(`${this.baseUrl}/journaux/${id}/`, journal)
   290	  }
   291	
   292	  async deleteJournal(id: string): Promise<void> {
   293	    console.log(`üóëÔ∏è Deleting journal ${id} from backend...`)
   294	    return apiClient.delete(`${this.baseUrl}/journaux/${id}/`)
   295	  }
   296	
   297	  // √âtats comptables - CONNEXION R√âELLE AU BACKEND
   298	  async getBalance(params: {
   299	    exercice: string
   300	    date_arret?: string
   301	    comptes_debut?: string
   302	    comptes_fin?: string
   303	    niveau_detail?: number
   304	  }): Promise<Balance> {
   305	    console.log('üìä Getting balance from backend...', params)
   306	    return apiClient.get(`${this.baseUrl}/balance/`, params)
   307	  }
   308	
   309	  async getGrandLivre(params: {
   310	    compte: string
   311	    periode_debut: string
   312	    periode_fin: string
   313	    inclure_ods?: boolean
   314	  }): Promise<GrandLivre> {
   315	    console.log(`üìñ Getting grand livre for compte ${params.compte}...`)
   316	    return apiClient.get(`${this.baseUrl}/grand-livre/`, params)
   317	  }
   318	
   319	  async getJournalGeneral(params: {
   320	    journal: string
   321	    periode_debut: string
   322	    periode_fin: string
   323	    page?: number
   324	  }) {
   325	    console.log(`üìë Getting journal g√©n√©ral for ${params.journal}...`)
   326	    return apiClient.get(`${this.baseUrl}/journal-general/`, params)
   327	  }
   328	
   329	  async getBalanceAuxiliaire(params: {
   330	    exercice: string
   331	    type_tiers: 'CLIENT' | 'FOURNISSEUR'
   332	    date_arret?: string
   333	  }) {
   334	    console.log('üìä Getting balance auxiliaire from backend...', params)
   335	    return apiClient.get(`${this.baseUrl}/balance-auxiliaire/`, params)
   336	  }
   337	
   338	  // Import/Export - CONNEXION R√âELLE AU BACKEND
   339	  async importEcritures(file: File, options?: {
   340	    journal_id: string
   341	    format: 'CSV' | 'EXCEL' | 'FEC'
   342	    mapping?: any
   343	  }) {
   344	    console.log('üì§ Importing √©critures to backend...', options)
   345	    return apiClient.upload(`${this.baseUrl}/import/ecritures/`, file, options)
   346	  }
   347	
   348	  async importPlanComptable(file: File, options?: {
   349	    format: 'CSV' | 'EXCEL'
   350	    replace_existing: boolean
   351	  }) {
   352	    console.log('üì§ Importing plan comptable to backend...', options)
   353	    return apiClient.upload(`${this.baseUrl}/import/plan/`, file, options)
   354	  }
   355	
   356	  async exportBalance(params: {
   357	    exercice: string
   358	    format: 'EXCEL' | 'CSV' | 'PDF'
   359	    date_arret?: string
   360	  }): Promise<Blob> {
   361	    console.log('üì• Exporting balance from backend...', params)
   362	    const response = await apiClient.client.get(`${this.baseUrl}/export/balance/`, {
   363	      params,
   364	      responseType: 'blob'
   365	    })
   366	    return response.data
   367	  }
   368	
   369	  async exportGrandLivre(params: {
   370	    compte: string
   371	    periode_debut: string
   372	    periode_fin: string
   373	    format: 'EXCEL' | 'CSV' | 'PDF'
   374	  }): Promise<Blob> {
   375	    console.log('üì• Exporting grand livre from backend...', params)
   376	    const response = await apiClient.client.get(`${this.baseUrl}/export/grand-livre/`, {
   377	      params,
   378	      responseType: 'blob'
   379	    })
   380	    return response.data
   381	  }
   382	
   383	  async exportFEC(exercice: string): Promise<Blob> {
   384	    console.log(`üì• Exporting FEC for exercice ${exercice}...`)
   385	    const response = await apiClient.client.get(`${this.baseUrl}/export/fec/`, {
   386	      params: { exercice },
   387	      responseType: 'blob'
   388	    })
   389	    return response.data
   390	  }
   391	
   392	  // Validation et contr√¥les - CONNEXION R√âELLE AU BACKEND
   393	  async validateBalance(exercice: string) {
   394	    console.log(`üîç Validating balance for exercice ${exercice}...`)
   395	    return apiClient.post(`${this.baseUrl}/validate/balance/`, { exercice })
   396	  }
   397	
   398	  async validateEcrituresLot(ecriture_ids: string[]) {
   399	    console.log(`‚úÖ Batch validating ${ecriture_ids.length} √©critures...`)
   400	    return apiClient.post(`${this.baseUrl}/validate/ecritures-lot/`, { ecriture_ids })
   401	  }
   402	
   403	  async getAnomaliesComptables(params?: {
   404	    exercice?: string
   405	    type_anomalie?: string
   406	    severite?: string
   407	  }) {
   408	    console.log('üîç Getting anomalies comptables from backend...', params)
   409	    return apiClient.get(`${this.baseUrl}/anomalies/`, params)
   410	  }
   411	
   412	  // Cl√¥ture d'exercice - CONNEXION R√âELLE AU BACKEND
   413	  async startCloture(exercice: string, options?: {
   414	    generer_reports: boolean
   415	    valider_toutes_ecritures: boolean
   416	  }) {
   417	    console.log(`üîí Starting cl√¥ture for exercice ${exercice}...`)
   418	    return apiClient.post(`${this.baseUrl}/cloture/start/`, { exercice, ...options })
   419	  }
   420	
   421	  async getClotureStatus(exercice: string) {
   422	    console.log(`üîÑ Getting cl√¥ture status for exercice ${exercice}...`)
   423	    return apiClient.get(`${this.baseUrl}/cloture/status/`, { exercice })
   424	  }
   425	
   426	  async cancelCloture(exercice: string) {
   427	    console.log(`‚ùå Cancelling cl√¥ture for exercice ${exercice}...`)
   428	    return apiClient.post(`${this.baseUrl}/cloture/cancel/`, { exercice })
   429	  }
   430	
   431	  // Validation et Mapping - CONNEXION R√âELLE AU BACKEND
   432	  async validatePlanComptable(entrepriseId: string) {
   433	    console.log(`üîç Validating plan comptable for entreprise ${entrepriseId}...`)
   434	    return apiClient.post(`${this.baseUrl}/validation_plan_comptable/`, { entreprise_id: entrepriseId })
   435	  }
   436	
   437	  async mappingAutomatique(entrepriseId: string) {
   438	    console.log(`ü§ñ Running automatic mapping for entreprise ${entrepriseId}...`)
   439	    return apiClient.post(`${this.baseUrl}/mapping_automatique/`, { entreprise_id: entrepriseId })
   440	  }
   441	
   442	  async determinerTypeLiasse(params: {
   443	    chiffre_affaires: number
   444	    secteur_activite: string
   445	    forme_juridique: string
   446	    is_groupe: boolean
   447	  }) {
   448	    console.log('üîç Determining type liasse...', params)
   449	    return apiClient.post(`${this.baseUrl}/determiner_type_liasse/`, params)
   450	  }
   451	}
   452	
   453	export const accountingService = new AccountingService()
   454	export default accountingService
================================================================================
FILE: src/services/apiClient.ts
================================================================================
     1	/**
     2	 * Client API principal avec gestion JWT et connexion r√©elle au backend
     3	 */
     4	
     5	import axios, { AxiosInstance, AxiosError, InternalAxiosRequestConfig } from 'axios'
     6	
     7	// Configuration de base - CONNEXION R√âELLE AU BACKEND
     8	const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000'
     9	console.log('üîß API_BASE_URL:', API_BASE_URL, '(from env:', import.meta.env.VITE_API_BASE_URL, ')')
    10	
    11	// Types pour l'authentification
    12	export interface LoginCredentials {
    13	  username: string
    14	  password: string
    15	}
    16	
    17	export interface AuthTokens {
    18	  access: string
    19	  refresh: string
    20	}
    21	
    22	export interface User {
    23	  id: number
    24	  username: string
    25	  email: string
    26	  first_name: string
    27	  last_name: string
    28	  name?: string
    29	  is_staff: boolean
    30	  is_superuser: boolean
    31	  entreprise_courante?: {
    32	    id: number
    33	    raison_sociale: string
    34	  }
    35	  role?: string
    36	}
    37	
    38	export interface AuthResponse {
    39	  success: boolean
    40	  message: string
    41	  data: {
    42	    access: string
    43	    refresh: string
    44	    user: User
    45	  }
    46	}
    47	
    48	// Types pour le signup SaaS
    49	export interface SignupData {
    50	  // Informations entreprise
    51	  name: string
    52	  legal_form: string
    53	  rccm?: string
    54	  ifu?: string
    55	  country: string
    56	  city?: string
    57	  address?: string
    58	  sector: string
    59	  annual_revenue_range?: string
    60	  billing_email?: string
    61	
    62	  // Informations utilisateur propri√©taire
    63	  user_first_name: string
    64	  user_last_name: string
    65	  user_email: string
    66	  user_password: string
    67	  user_fonction?: string
    68	  user_telephone?: string
    69	}
    70	
    71	export interface Organization {
    72	  id: string
    73	  name: string
    74	  slug: string
    75	  legal_form: string
    76	  rccm: string
    77	  ifu: string
    78	  country: string
    79	  city: string
    80	  sector: string
    81	  subscription_plan: string
    82	  subscription_status: string
    83	  liasses_quota: number
    84	  liasses_used: number
    85	  quota_percentage: number
    86	  has_quota_remaining: boolean
    87	  trial_end_date?: string
    88	}
    89	
    90	export interface SignupResponse {
    91	  message: string
    92	  organization: Organization
    93	  user: {
    94	    id: number
    95	    email: string
    96	    first_name: string
    97	    last_name: string
    98	  }
    99	  tokens: {
   100	    access: string
   101	    refresh: string
   102	  }
   103	  onboarding: {
   104	    plan: string
   105	    liasses_remaining: number
   106	    trial_end: string | null
   107	  }
   108	}
   109	
   110	// Cl√©s de stockage
   111	const TOKEN_KEY = 'fiscasync_access_token'
   112	const REFRESH_TOKEN_KEY = 'fiscasync_refresh_token'
   113	const USER_KEY = 'fiscasync_user'
   114	
   115	/**
   116	 * Classe singleton pour g√©rer toutes les connexions API
   117	 */
   118	class ApiClient {
   119	  private api: AxiosInstance
   120	  private isRefreshing = false
   121	  private refreshSubscribers: Array<(token: string) => void> = []
   122	
   123	  // üîí S√âCURIT√â AM√âLIOR√âE: Access token en m√©moire uniquement (non persist√©)
   124	  private accessTokenMemory: string | null = null
   125	
   126	  constructor() {
   127	    this.api = axios.create({
   128	      baseURL: API_BASE_URL,
   129	      timeout: 30000,
   130	      headers: {
   131	        'Content-Type': 'application/json',
   132	      },
   133	    })
   134	
   135	    this.setupInterceptors()
   136	  }
   137	
   138	  /**
   139	   * R√©cup√®re le CSRF token depuis les cookies
   140	   */
   141	  private getCSRFToken(): string | null {
   142	    const name = 'csrftoken'
   143	    const value = `; ${document.cookie}`
   144	    const parts = value.split(`; ${name}=`)
   145	    if (parts.length === 2) {
   146	      return parts.pop()?.split(';').shift() || null
   147	    }
   148	    return null
   149	  }
   150	
   151	  /**
   152	   * Configuration des intercepteurs pour g√©rer automatiquement les tokens
   153	   */
   154	  private setupInterceptors() {
   155	    // Request interceptor - Ajoute le token JWT et CSRF √† chaque requ√™te
   156	    this.api.interceptors.request.use(
   157	      (config: InternalAxiosRequestConfig) => {
   158	        const token = this.getAccessToken()
   159	        if (token && config.headers) {
   160	          config.headers.Authorization = `Bearer ${token}`
   161	        }
   162	
   163	        // Ajouter le CSRF token pour les requ√™tes modifiant les donn√©es
   164	        const csrfToken = this.getCSRFToken()
   165	        if (csrfToken && config.headers && ['post', 'put', 'patch', 'delete'].includes(config.method?.toLowerCase() || '')) {
   166	          config.headers['X-CSRFToken'] = csrfToken
   167	        }
   168	
   169	        console.log(`üöÄ API Request: ${config.method?.toUpperCase()} ${config.url}`)
   170	        return config
   171	      },
   172	      (error) => {
   173	        console.error('‚ùå Request Error:', error)
   174	        return Promise.reject(error)
   175	      }
   176	    )
   177	
   178	    // Response interceptor - G√®re le refresh token automatiquement
   179	    this.api.interceptors.response.use(
   180	      (response) => {
   181	        console.log(`‚úÖ API Response: ${response.status} ${response.config.url}`)
   182	        return response
   183	      },
   184	      async (error: AxiosError) => {
   185	        const originalRequest = error.config as any
   186	
   187	        console.error(`‚ùå API Error: ${error.response?.status} ${originalRequest?.url}`)
   188	
   189	        if (error.response?.status === 401 && !originalRequest._retry) {
   190	          if (this.isRefreshing) {
   191	            return new Promise((resolve) => {
   192	              this.refreshSubscribers.push((token: string) => {
   193	                originalRequest.headers.Authorization = `Bearer ${token}`
   194	                resolve(this.api(originalRequest))
   195	              })
   196	            })
   197	          }
   198	
   199	          originalRequest._retry = true
   200	          this.isRefreshing = true
   201	
   202	          try {
   203	            const newToken = await this.refreshToken()
   204	            this.isRefreshing = false
   205	            this.onRefreshed(newToken)
   206	            this.refreshSubscribers = []
   207	            return this.api(originalRequest)
   208	          } catch (refreshError) {
   209	            this.isRefreshing = false
   210	            this.logout()
   211	            window.location.href = '/login'
   212	            return Promise.reject(refreshError)
   213	          }
   214	        }
   215	
   216	        return Promise.reject(error)
   217	      }
   218	    )
   219	  }
   220	
   221	  /**
   222	   * Notifie tous les subscribers apr√®s un refresh r√©ussi
   223	   */
   224	  private onRefreshed(token: string) {
   225	    this.refreshSubscribers.forEach((callback) => callback(token))
   226	  }
   227	
   228	  /**
   229	   * üîí S√âCURIT√â: R√©cup√®re le token d'acc√®s depuis la m√©moire (non persist√©)
   230	   */
   231	  public getAccessToken(): string | null {
   232	    return this.accessTokenMemory
   233	  }
   234	
   235	  /**
   236	   * üîí S√âCURIT√â: R√©cup√®re le refresh token depuis sessionStorage
   237	   * Note: sessionStorage est plus s√ªr que localStorage (effac√© √† fermeture onglet)
   238	   */
   239	  private getRefreshToken(): string | null {
   240	    return sessionStorage.getItem(REFRESH_TOKEN_KEY)
   241	  }
   242	
   243	  /**
   244	   * üîí S√âCURIT√â AM√âLIOR√âE: Sauvegarde les tokens de mani√®re s√©curis√©e
   245	   * - Access token: En m√©moire uniquement (effac√© au rafra√Æchissement page)
   246	   * - Refresh token: Dans sessionStorage (effac√© √† fermeture onglet)
   247	   */
   248	  private saveTokens(access: string, refresh: string) {
   249	    // Access token en m√©moire seulement - protection XSS
   250	    this.accessTokenMemory = access
   251	
   252	    // Refresh token dans sessionStorage - meilleur que localStorage
   253	    sessionStorage.setItem(REFRESH_TOKEN_KEY, refresh)
   254	
   255	    // Nettoyer l'ancien localStorage si pr√©sent
   256	    localStorage.removeItem(TOKEN_KEY)
   257	    localStorage.removeItem(REFRESH_TOKEN_KEY)
   258	  }
   259	
   260	  /**
   261	   * üîí S√âCURIT√â: Sauvegarde uniquement les infos essentielles utilisateur
   262	   */
   263	  private saveUser(user: User) {
   264	    // Stocker seulement les donn√©es non sensibles
   265	    const minimalUser = {
   266	      id: user.id,
   267	      username: user.username,
   268	      email: user.email,
   269	      role: user.role,
   270	      is_staff: user.is_staff
   271	    }
   272	    sessionStorage.setItem(USER_KEY, JSON.stringify(minimalUser))
   273	
   274	    // Nettoyer l'ancien localStorage
   275	    localStorage.removeItem(USER_KEY)
   276	  }
   277	
   278	  /**
   279	   * R√©cup√®re l'utilisateur actuel depuis sessionStorage
   280	   */
   281	  public getCurrentUser(): User | null {
   282	    const userStr = sessionStorage.getItem(USER_KEY)
   283	    return userStr ? JSON.parse(userStr) : null
   284	  }
   285	
   286	  /**
   287	   * Connexion avec username/password
   288	   */
   289	  public async login(credentials: LoginCredentials): Promise<AuthResponse> {
   290	    try {
   291	      // Le backend Django JWT renvoie directement {access, refresh}
   292	      const response = await this.api.post<{access: string, refresh: string}>('/api/v1/auth/login/', credentials)
   293	
   294	      if (response.data.access && response.data.refresh) {
   295	        const { access, refresh } = response.data
   296	        this.saveTokens(access, refresh)
   297	
   298	        // Cr√©er un utilisateur par d√©faut pour le moment
   299	        const user: User = {
   300	          id: 1,
   301	          username: credentials.username,
   302	          email: 'admin@taxpilot.com',
   303	          first_name: 'Admin',
   304	          last_name: 'TaxPilot',
   305	          is_staff: true,
   306	          is_superuser: true
   307	        }
   308	
   309	        this.saveUser(user)
   310	
   311	        // Formatage pour compatibilit√© avec AuthResponse
   312	        return {
   313	          success: true,
   314	          message: 'Connexion r√©ussie',
   315	          data: {
   316	            access,
   317	            refresh,
   318	            user
   319	          }
   320	        }
   321	      } else {
   322	        throw new Error('R√©ponse invalide du serveur')
   323	      }
   324	    } catch (error) {
   325	      console.error('Login error:', error)
   326	      throw error
   327	    }
   328	  }
   329	
   330	  /**
   331	   * Inscription entreprise (Signup SaaS)
   332	   */
   333	  public async signup(signupData: SignupData): Promise<SignupResponse> {
   334	    try {
   335	      console.log('üìù Signing up new organization...', signupData.name)
   336	
   337	      const response = await this.api.post<SignupResponse>('/api/v1/auth/signup/', signupData)
   338	
   339	      if (response.data.tokens) {
   340	        const { access, refresh } = response.data.tokens
   341	        this.saveTokens(access, refresh)
   342	
   343	        // Sauvegarder l'utilisateur
   344	        if (response.data.user) {
   345	          const user: User = {
   346	            id: response.data.user.id,
   347	            username: response.data.user.email,
   348	            email: response.data.user.email,
   349	            first_name: response.data.user.first_name,
   350	            last_name: response.data.user.last_name,
   351	            is_staff: false,
   352	            is_superuser: false
   353	          }
   354	          this.saveUser(user)
   355	        }
   356	
   357	        // Sauvegarder l'organisation dans sessionStorage
   358	        if (response.data.organization) {
   359	          sessionStorage.setItem('fiscasync_organization', JSON.stringify(response.data.organization))
   360	        }
   361	
   362	        console.log('‚úÖ Signup successful:', response.data.organization?.name)
   363	        return response.data
   364	      } else {
   365	        throw new Error('R√©ponse invalide du serveur')
   366	      }
   367	    } catch (error: any) {
   368	      console.error('‚ùå Signup error:', error)
   369	
   370	      // Extraire les messages d'erreur du backend
   371	      if (error.response?.data?.error) {
   372	        throw new Error(error.response.data.error)
   373	      }
   374	      if (error.response?.data?.details) {
   375	        // Format Django REST errors
   376	        const details = error.response.data.details
   377	        const errorMessages = Object.entries(details)
   378	          .map(([field, messages]: [string, any]) => {
   379	            if (Array.isArray(messages)) {
   380	              return `${field}: ${messages.join(', ')}`
   381	            }
   382	            return `${field}: ${messages}`
   383	          })
   384	          .join('\n')
   385	        throw new Error(errorMessages)
   386	      }
   387	
   388	      throw error
   389	    }
   390	  }
   391	
   392	  /**
   393	   * Rafra√Æchit le token d'acc√®s
   394	   */
   395	  private async refreshToken(): Promise<string> {
   396	    const refreshToken = this.getRefreshToken()
   397	
   398	    if (!refreshToken) {
   399	      throw new Error('No refresh token available')
   400	    }
   401	
   402	    const response = await this.api.post<{ access: string }>('/api/v1/auth/refresh/', {
   403	      refresh: refreshToken,
   404	    })
   405	
   406	    const newAccessToken = response.data.access
   407	    localStorage.setItem(TOKEN_KEY, newAccessToken)
   408	
   409	    return newAccessToken
   410	  }
   411	
   412	  /**
   413	   * D√©connexion
   414	   */
   415	  /**
   416	   * üîí S√âCURIT√â: D√©connexion s√©curis√©e avec nettoyage complet
   417	   */
   418	  public logout() {
   419	    // Nettoyer la m√©moire
   420	    this.accessTokenMemory = null
   421	
   422	    // Nettoyer sessionStorage
   423	    sessionStorage.removeItem(REFRESH_TOKEN_KEY)
   424	    sessionStorage.removeItem(USER_KEY)
   425	    sessionStorage.removeItem('fiscasync_organization')
   426	
   427	    // Nettoyer localStorage (ancien syst√®me)
   428	    localStorage.removeItem(TOKEN_KEY)
   429	    localStorage.removeItem(REFRESH_TOKEN_KEY)
   430	    localStorage.removeItem(USER_KEY)
   431	    localStorage.removeItem('fiscasync_organization')
   432	
   433	    console.log('‚úÖ Logout complet - Tous les tokens supprim√©s')
   434	  }
   435	
   436	  /**
   437	   * V√©rifie si l'utilisateur est connect√©
   438	   */
   439	  public isAuthenticated(): boolean {
   440	    return !!this.getAccessToken()
   441	  }
   442	
   443	  /**
   444	   * Instance Axios pour les requ√™tes
   445	   */
   446	  public get client(): AxiosInstance {
   447	    return this.api
   448	  }
   449	
   450	  // === M√âTHODES HELPER POUR LES REQU√äTES ===
   451	
   452	  /**
   453	   * GET request
   454	   */
   455	  public async get<T>(url: string, params?: any): Promise<T> {
   456	    const response = await this.api.get<T>(url, { params })
   457	    return response.data
   458	  }
   459	
   460	  /**
   461	   * POST request
   462	   */
   463	  public async post<T>(url: string, data?: any): Promise<T> {
   464	    const response = await this.api.post<T>(url, data)
   465	    return response.data
   466	  }
   467	
   468	  /**
   469	   * PUT request
   470	   */
   471	  public async put<T>(url: string, data?: any): Promise<T> {
   472	    const response = await this.api.put<T>(url, data)
   473	    return response.data
   474	  }
   475	
   476	  /**
   477	   * PATCH request
   478	   */
   479	  public async patch<T>(url: string, data?: any): Promise<T> {
   480	    const response = await this.api.patch<T>(url, data)
   481	    return response.data
   482	  }
   483	
   484	  /**
   485	   * DELETE request
   486	   */
   487	  public async delete<T>(url: string): Promise<T> {
   488	    const response = await this.api.delete<T>(url)
   489	    return response.data
   490	  }
   491	
   492	  /**
   493	   * Upload de fichier
   494	   */
   495	  public async upload<T>(url: string, file: File, additionalData?: any): Promise<T> {
   496	    const formData = new FormData()
   497	    formData.append('file', file)
   498	
   499	    if (additionalData) {
   500	      Object.keys(additionalData).forEach(key => {
   501	        formData.append(key, additionalData[key])
   502	      })
   503	    }
   504	
   505	    const response = await this.api.post<T>(url, formData, {
   506	      headers: {
   507	        'Content-Type': 'multipart/form-data',
   508	      },
   509	    })
   510	
   511	    return response.data
   512	  }
   513	}
   514	
   515	// Export d'une instance unique (Singleton)
   516	export const apiClient = new ApiClient()
   517	
   518	// Export pour compatibilit√© avec l'ancien code
   519	export default apiClient.client
================================================================================
FILE: src/services/audit/auditEngine.ts
================================================================================
     1	/**
     2	 * Moteur d'execution d'audit
     3	 * Orchestre l'execution des 108 controles par niveaux
     4	 */
     5	
     6	import {
     7	  NiveauControle,
     8	  ResultatControle,
     9	  ResumeAudit,
    10	  Severite,
    11	  AuditContext,
    12	  AuditProgressCallback,
    13	  RapportCorrection,
    14	  CorrectionItem,
    15	  CompteModifie,
    16	  SessionAudit,
    17	  NIVEAUX_NOMS,
    18	} from '@/types/audit.types'
    19	import { controlRegistry } from './controlRegistry'
    20	
    21	/**
    22	 * Pause non bloquante entre les niveaux pour ne pas figer l'UI
    23	 */
    24	function yieldToUI(): Promise<void> {
    25	  return new Promise((resolve) => {
    26	    if (typeof requestAnimationFrame !== 'undefined') {
    27	      requestAnimationFrame(() => resolve())
    28	    } else {
    29	      setTimeout(resolve, 0)
    30	    }
    31	  })
    32	}
    33	
    34	/**
    35	 * Execute tous les controles d'un niveau donne
    36	 */
    37	export async function runLevel(
    38	  niveau: NiveauControle,
    39	  context: AuditContext,
    40	  callbacks?: Partial<AuditProgressCallback>
    41	): Promise<ResultatControle[]> {
    42	  const controls = controlRegistry.getByLevel(niveau)
    43	  const resultats: ResultatControle[] = []
    44	
    45	  callbacks?.onLevelStart?.(niveau, NIVEAUX_NOMS[niveau])
    46	
    47	  for (let i = 0; i < controls.length; i++) {
    48	    if (callbacks?.isCancelled?.()) break
    49	
    50	    const { definition, execute } = controls[i]
    51	    callbacks?.onProgress?.(niveau, i, controls.length, definition.ref)
    52	
    53	    try {
    54	      const result = execute(context)
    55	      if (Array.isArray(result)) {
    56	        resultats.push(...result)
    57	      } else {
    58	        resultats.push(result)
    59	      }
    60	    } catch (err) {
    61	      resultats.push({
    62	        ref: definition.ref,
    63	        nom: definition.nom,
    64	        niveau: definition.niveau,
    65	        statut: 'ERREUR_EXEC',
    66	        severite: 'INFO',
    67	        message: `Erreur lors de l'execution: ${err instanceof Error ? err.message : String(err)}`,
    68	        timestamp: new Date().toISOString(),
    69	      })
    70	    }
    71	  }
    72	
    73	  callbacks?.onLevelEnd?.(niveau, resultats)
    74	  return resultats
    75	}
    76	
    77	/**
    78	 * Phase 1 : Controles sur la balance (niveaux 0-5 + 8)
    79	 */
    80	export async function executePhase1(
    81	  context: AuditContext,
    82	  callbacks?: Partial<AuditProgressCallback>
    83	): Promise<ResultatControle[]> {
    84	  const niveaux: NiveauControle[] = [0, 1, 2, 3, 4, 5, 8]
    85	  const allResultats: ResultatControle[] = []
    86	
    87	  for (const niveau of niveaux) {
    88	    if (callbacks?.isCancelled?.()) break
    89	
    90	    const resultats = await runLevel(niveau, context, callbacks)
    91	    allResultats.push(...resultats)
    92	
    93	    // Pause entre les niveaux pour laisser l'UI respirer
    94	    await yieldToUI()
    95	
    96	    // Si des bloquants au niveau 0, on peut continuer mais les signaler
    97	    // L'orchestrateur decidera s'il faut arreter
    98	  }
    99	
   100	  return allResultats
   101	}
   102	
   103	/**
   104	 * Phase 3 : Controles sur les etats financiers (niveaux 6-7)
   105	 */
   106	export async function executePhase3(
   107	  context: AuditContext,
   108	  callbacks?: Partial<AuditProgressCallback>
   109	): Promise<ResultatControle[]> {
   110	  const niveaux: NiveauControle[] = [6, 7]
   111	  const allResultats: ResultatControle[] = []
   112	
   113	  for (const niveau of niveaux) {
   114	    if (callbacks?.isCancelled?.()) break
   115	
   116	    const resultats = await runLevel(niveau, context, callbacks)
   117	    allResultats.push(...resultats)
   118	    await yieldToUI()
   119	  }
   120	
   121	  return allResultats
   122	}
   123	
   124	/**
   125	 * Calcule le resume a partir des resultats
   126	 */
   127	export function computeResume(resultats: ResultatControle[]): ResumeAudit {
   128	  const parSeverite: Record<Severite, number> = {
   129	    BLOQUANT: 0,
   130	    MAJEUR: 0,
   131	    MINEUR: 0,
   132	    INFO: 0,
   133	    OK: 0,
   134	  }
   135	
   136	  const parNiveauMap: Record<number, { total: number; ok: number; anomalies: number }> = {}
   137	
   138	  for (const r of resultats) {
   139	    parSeverite[r.severite]++
   140	
   141	    if (!parNiveauMap[r.niveau]) {
   142	      parNiveauMap[r.niveau] = { total: 0, ok: 0, anomalies: 0 }
   143	    }
   144	    parNiveauMap[r.niveau].total++
   145	    if (r.statut === 'OK') {
   146	      parNiveauMap[r.niveau].ok++
   147	    } else if (r.statut === 'ANOMALIE') {
   148	      parNiveauMap[r.niveau].anomalies++
   149	    }
   150	  }
   151	
   152	  const totalControles = resultats.length
   153	  const totalOK = resultats.filter((r) => r.statut === 'OK').length
   154	  const scoreGlobal = totalControles > 0 ? Math.round((totalOK / totalControles) * 100) : 0
   155	
   156	  return {
   157	    totalControles,
   158	    parSeverite,
   159	    parNiveau: parNiveauMap,
   160	    scoreGlobal,
   161	    bloquantsRestants: parSeverite.BLOQUANT,
   162	  }
   163	}
   164	
   165	/**
   166	 * Compare deux sessions et genere un rapport de corrections
   167	 */
   168	export function generateCorrectionReport(
   169	  avant: SessionAudit,
   170	  apres: SessionAudit
   171	): RapportCorrection {
   172	  const corrections: CorrectionItem[] = []
   173	
   174	  // Construire un index des resultats "apres" par ref
   175	  const apresMap = new Map<string, ResultatControle>()
   176	  for (const r of apres.resultats) {
   177	    apresMap.set(r.ref, r)
   178	  }
   179	
   180	  // Comparer chaque resultat "avant"
   181	  for (const rAvant of avant.resultats) {
   182	    const rApres = apresMap.get(rAvant.ref)
   183	    if (!rApres) continue
   184	
   185	    let evolution: CorrectionItem['evolution'] = 'INCHANGE'
   186	    if (rAvant.statut === 'ANOMALIE' && rApres.statut === 'OK') {
   187	      evolution = 'CORRIGE'
   188	    } else if (
   189	      rAvant.statut === 'ANOMALIE' &&
   190	      rApres.statut === 'ANOMALIE' &&
   191	      severityOrder(rApres.severite) < severityOrder(rAvant.severite)
   192	    ) {
   193	      evolution = 'AMELIORE'
   194	    } else if (
   195	      rAvant.statut === 'OK' &&
   196	      rApres.statut === 'ANOMALIE'
   197	    ) {
   198	      evolution = 'DEGRADE'
   199	    }
   200	
   201	    if (evolution !== 'INCHANGE') {
   202	      corrections.push({
   203	        ref: rAvant.ref,
   204	        nom: rAvant.nom,
   205	        statutAvant: rAvant.statut,
   206	        severiteAvant: rAvant.severite,
   207	        statutApres: rApres.statut,
   208	        severiteApres: rApres.severite,
   209	        evolution,
   210	      })
   211	    }
   212	  }
   213	
   214	  // Comparer les balances pour trouver les comptes modifies
   215	  const comptesModifies: CompteModifie[] = []
   216	  // Ceci sera rempli par l'orchestrateur qui a acces aux snapshots
   217	
   218	  return {
   219	    id: `CORR-${Date.now()}`,
   220	    sessionAvantId: avant.id,
   221	    sessionApresId: apres.id,
   222	    dateGeneration: new Date().toISOString(),
   223	    corrections,
   224	    comptesModifies,
   225	    synthese: {
   226	      bloquantsAvant: avant.resume.parSeverite.BLOQUANT,
   227	      bloquantsApres: apres.resume.parSeverite.BLOQUANT,
   228	      majeursAvant: avant.resume.parSeverite.MAJEUR,
   229	      majeursApres: apres.resume.parSeverite.MAJEUR,
   230	      scoreAvant: avant.resume.scoreGlobal,
   231	      scoreApres: apres.resume.scoreGlobal,
   232	    },
   233	  }
   234	}
   235	
   236	function severityOrder(s: Severite): number {
   237	  const order: Record<Severite, number> = {
   238	    BLOQUANT: 4,
   239	    MAJEUR: 3,
   240	    MINEUR: 2,
   241	    INFO: 1,
   242	    OK: 0,
   243	  }
   244	  return order[s]
   245	}

================================================================================
FILE: src/services/audit/auditOrchestrator.ts
================================================================================
     1	/**
     2	 * Orchestrateur d'audit
     3	 * Pont entre l'UI et le moteur d'execution
     4	 */
     5	
     6	import {
     7	  SessionAudit,
     8	  AuditContext,
     9	  AuditProgressCallback,
    10	  RapportCorrection,
    11	} from '@/types/audit.types'
    12	import { BalanceEntry, SYSCOHADA_MAPPING } from '@/services/liasseDataService'
    13	import { PLAN_SYSCOHADA_REVISE } from '@/data/SYSCOHADARevisePlan'
    14	import { controlRegistry } from './controlRegistry'
    15	import { executePhase1, executePhase3, computeResume, generateCorrectionReport } from './auditEngine'
    16	import {
    17	  saveSession,
    18	  getSession,
    19	  saveSnapshot,
    20	  getSnapshot,
    21	  saveArchive,
    22	  getAllArchives,
    23	  saveCorrectionReport,
    24	} from './auditStorage'
    25	
    26	// Imports d'enregistrement des controles
    27	import { registerLevel0Controls } from './controls/level0-structural'
    28	import { registerLevel1Controls } from './controls/level1-fundamental'
    29	import { registerLevel2Controls } from './controls/level2-ohada-conformity'
    30	import { registerLevel3Controls } from './controls/level3-balance-sense'
    31	import { registerLevel4Controls } from './controls/level4-inter-account'
    32	import { registerLevel5Controls } from './controls/level5-year-over-year'
    33	import { registerLevel6Controls } from './controls/level6-financial-statements'
    34	import { registerLevel7Controls } from './controls/level7-fiscal'
    35	import { registerLevel8Controls } from './controls/level8-archive'
    36	
    37	let controlsRegistered = false
    38	
    39	function ensureControlsRegistered(): void {
    40	  if (controlsRegistered) return
    41	  registerLevel0Controls()
    42	  registerLevel1Controls()
    43	  registerLevel2Controls()
    44	  registerLevel3Controls()
    45	  registerLevel4Controls()
    46	  registerLevel5Controls()
    47	  registerLevel6Controls()
    48	  registerLevel7Controls()
    49	  registerLevel8Controls()
    50	  controlsRegistered = true
    51	}
    52	
    53	function generateSessionId(): string {
    54	  return `AUDIT-${Date.now()}-${Math.random().toString(36).substring(2, 8)}`
    55	}
    56	
    57	class AuditOrchestrator {
    58	  /**
    59	   * Phase 1 : Audit de la balance (niveaux 0-5, 8)
    60	   */
    61	  async startPhase1Audit(
    62	    balanceN: BalanceEntry[],
    63	    balanceN1?: BalanceEntry[],
    64	    exercice?: string,
    65	    callbacks?: Partial<AuditProgressCallback>,
    66	    typeLiasse?: import('@/types').TypeLiasse
    67	  ): Promise<SessionAudit> {
    68	    ensureControlsRegistered()
    69	
    70	    const sessionId = generateSessionId()
    71	    const balanceId = `BAL-${Date.now()}`
    72	
    73	    // Creer snapshot
    74	    await saveSnapshot(balanceId, balanceN)
    75	
    76	    // Creer session
    77	    const session: SessionAudit = {
    78	      id: sessionId,
    79	      balanceId,
    80	      exercice: exercice || new Date().getFullYear().toString(),
    81	      phase: 'PHASE_1',
    82	      statut: 'EN_COURS',
    83	      dateDebut: new Date().toISOString(),
    84	      progression: { niveauCourant: 0, controleCourant: 0, totalControles: controlRegistry.activeCount, pourcentage: 0 },
    85	      resultats: [],
    86	      resume: { totalControles: 0, parSeverite: { BLOQUANT: 0, MAJEUR: 0, MINEUR: 0, INFO: 0, OK: 0 }, parNiveau: {}, scoreGlobal: 0, bloquantsRestants: 0 },
    87	    }
    88	
    89	    saveSession(session)
    90	
    91	    // Contexte d'execution
    92	    const context: AuditContext = {
    93	      balanceN,
    94	      balanceN1,
    95	      planComptable: PLAN_SYSCOHADA_REVISE,
    96	      liassesArchivees: getAllArchives(),
    97	      exercice: session.exercice,
    98	      mappingSyscohada: SYSCOHADA_MAPPING,
    99	      typeLiasse: typeLiasse || 'SN',
   100	    }
   101	
   102	    // Wrapping des callbacks pour mettre a jour la progression
   103	    const wrappedCallbacks: Partial<AuditProgressCallback> = {
   104	      onProgress: (niveau, index, total, ref) => {
   105	        session.progression.niveauCourant = niveau
   106	        session.progression.controleCourant = index
   107	        const totalDone = session.resultats.length + index
   108	        session.progression.pourcentage = Math.round((totalDone / Math.max(session.progression.totalControles, 1)) * 100)
   109	        callbacks?.onProgress?.(niveau, index, total, ref)
   110	      },
   111	      onLevelStart: (niveau, nom) => {
   112	        callbacks?.onLevelStart?.(niveau, nom)
   113	      },
   114	      onLevelEnd: (niveau, resultats) => {
   115	        callbacks?.onLevelEnd?.(niveau, resultats)
   116	      },
   117	      isCancelled: () => callbacks?.isCancelled?.() || false,
   118	    }
   119	
   120	    try {
   121	      const resultats = await executePhase1(context, wrappedCallbacks)
   122	      session.resultats = resultats
   123	      session.resume = computeResume(resultats)
   124	      session.statut = 'TERMINEE'
   125	      session.dateFin = new Date().toISOString()
   126	    } catch (err) {
   127	      session.statut = 'ERREUR'
   128	      session.dateFin = new Date().toISOString()
   129	    }
   130	
   131	    saveSession(session)
   132	    callbacks?.onComplete?.(session.resume)
   133	
   134	    return session
   135	  }
   136	
   137	  /**
   138	   * Phase 3 : Controles sur les etats financiers (niveaux 6-7)
   139	   */
   140	  async startPhase3Audit(
   141	    balanceN: BalanceEntry[],
   142	    existingSession?: SessionAudit,
   143	    callbacks?: Partial<AuditProgressCallback>
   144	  ): Promise<SessionAudit> {
   145	    ensureControlsRegistered()
   146	
   147	    const session: SessionAudit = existingSession ? { ...existingSession } : {
   148	      id: generateSessionId(),
   149	      balanceId: `BAL-${Date.now()}`,
   150	      exercice: new Date().getFullYear().toString(),
   151	      phase: 'PHASE_3',
   152	      statut: 'EN_COURS',
   153	      dateDebut: new Date().toISOString(),
   154	      progression: { niveauCourant: 6, controleCourant: 0, totalControles: controlRegistry.activeCount, pourcentage: 0 },
   155	      resultats: [],
   156	      resume: { totalControles: 0, parSeverite: { BLOQUANT: 0, MAJEUR: 0, MINEUR: 0, INFO: 0, OK: 0 }, parNiveau: {}, scoreGlobal: 0, bloquantsRestants: 0 },
   157	    }
   158	
   159	    session.phase = 'PHASE_3'
   160	    session.statut = 'EN_COURS'
   161	
   162	    const context: AuditContext = {
   163	      balanceN,
   164	      planComptable: PLAN_SYSCOHADA_REVISE,
   165	      liassesArchivees: getAllArchives(),
   166	      exercice: session.exercice,
   167	      mappingSyscohada: SYSCOHADA_MAPPING,
   168	    }
   169	
   170	    try {
   171	      const resultats = await executePhase3(context, callbacks)
   172	      // Ajouter aux resultats existants si session existante
   173	      session.resultats = [...session.resultats, ...resultats]
   174	      session.resume = computeResume(session.resultats)
   175	      session.statut = 'TERMINEE'
   176	      session.dateFin = new Date().toISOString()
   177	    } catch (err) {
   178	      session.statut = 'ERREUR'
   179	    }
   180	
   181	    saveSession(session)
   182	    callbacks?.onComplete?.(session.resume)
   183	    return session
   184	  }
   185	
   186	  /**
   187	   * Phase 2 : Reimportation et comparaison
   188	   */
   189	  async reimportAndCompare(
   190	    newBalance: BalanceEntry[],
   191	    oldSessionId: string,
   192	    callbacks?: Partial<AuditProgressCallback>
   193	  ): Promise<{ session: SessionAudit; rapport: RapportCorrection }> {
   194	    const oldSession = getSession(oldSessionId)
   195	    if (!oldSession) throw new Error(`Session ${oldSessionId} introuvable`)
   196	
   197	    // Relancer l'audit avec la nouvelle balance
   198	    const newSession = await this.startPhase1Audit(newBalance, undefined, oldSession.exercice, callbacks)
   199	    newSession.phase = 'PHASE_2'
   200	    saveSession(newSession)
   201	
   202	    // Generer rapport de corrections
   203	    const rapport = generateCorrectionReport(oldSession, newSession)
   204	
   205	    // Comparer les balances pour les comptes modifies
   206	    const oldSnapshot = getSnapshot(oldSession.balanceId)
   207	    if (oldSnapshot) {
   208	      const oldMap = new Map(oldSnapshot.lignes.map((l) => [l.compte, l]))
   209	      for (const newLine of newBalance) {
   210	        const oldLine = oldMap.get(newLine.compte)
   211	        const newSolde = (newLine.solde_debit || 0) - (newLine.solde_credit || 0)
   212	        const oldSolde = oldLine ? ((oldLine.solde_debit || 0) - (oldLine.solde_credit || 0)) : 0
   213	        if (Math.abs(newSolde - oldSolde) > 0.01) {
   214	          rapport.comptesModifies.push({
   215	            compte: newLine.compte,
   216	            libelle: newLine.intitule,
   217	            soldeAvant: oldSolde,
   218	            soldeApres: newSolde,
   219	            ecart: newSolde - oldSolde,
   220	          })
   221	        }
   222	      }
   223	    }
   224	
   225	    saveCorrectionReport(rapport)
   226	    return { session: newSession, rapport }
   227	  }
   228	
   229	  /**
   230	   * Archiver une session
   231	   */
   232	  async archiveSession(sessionId: string): Promise<void> {
   233	    const session = getSession(sessionId)
   234	    if (!session) throw new Error(`Session ${sessionId} introuvable`)
   235	
   236	    const snapshot = getSnapshot(session.balanceId)
   237	    if (!snapshot) throw new Error(`Snapshot non trouve pour la balance ${session.balanceId}`)
   238	
   239	    await saveArchive(session, snapshot)
   240	  }
   241	
   242	  /**
   243	   * Obtenir les balances demo depuis le localStorage
   244	   */
   245	  getDemoBalance(): BalanceEntry[] {
   246	    try {
   247	      const data = localStorage.getItem('fiscasync_audit_demo_balance')
   248	      if (data) return JSON.parse(data)
   249	    } catch {}
   250	    return []
   251	  }
   252	}
   253	
   254	export const auditOrchestrator = new AuditOrchestrator()

================================================================================
FILE: src/services/audit/auditStorage.ts
================================================================================
     1	/**
     2	 * Persistence des sessions et resultats d'audit en localStorage
     3	 */
     4	
     5	import {
     6	  SessionAudit,
     7	  BalanceSnapshot,
     8	  ArchiveAudit,
     9	  RapportCorrection,
    10	} from '@/types/audit.types'
    11	import { BalanceEntry } from '@/services/liasseDataService'
    12	
    13	const PREFIX = 'fiscasync_audit_'
    14	const SESSIONS_KEY = `${PREFIX}sessions`
    15	const SNAPSHOTS_KEY = `${PREFIX}snapshots`
    16	const ARCHIVES_KEY = `${PREFIX}archives`
    17	const REPORTS_KEY = `${PREFIX}correction_reports`
    18	
    19	// --- Helpers ---
    20	
    21	function getCollection<T>(key: string): T[] {
    22	  try {
    23	    const data = localStorage.getItem(key)
    24	    return data ? JSON.parse(data) : []
    25	  } catch {
    26	    return []
    27	  }
    28	}
    29	
    30	function setCollection<T>(key: string, items: T[]): void {
    31	  localStorage.setItem(key, JSON.stringify(items))
    32	}
    33	
    34	// --- SHA-256 hash ---
    35	
    36	export async function computeHash(data: string): Promise<string> {
    37	  const encoder = new TextEncoder()
    38	  const buffer = encoder.encode(data)
    39	  const hashBuffer = await crypto.subtle.digest('SHA-256', buffer)
    40	  const hashArray = Array.from(new Uint8Array(hashBuffer))
    41	  return hashArray.map((b) => b.toString(16).padStart(2, '0')).join('')
    42	}
    43	
    44	// --- Sessions ---
    45	
    46	export function saveSession(session: SessionAudit): void {
    47	  const sessions = getCollection<SessionAudit>(SESSIONS_KEY)
    48	  const index = sessions.findIndex((s) => s.id === session.id)
    49	  if (index >= 0) {
    50	    sessions[index] = session
    51	  } else {
    52	    sessions.unshift(session)
    53	  }
    54	  // Garder max 50 sessions
    55	  setCollection(SESSIONS_KEY, sessions.slice(0, 50))
    56	}
    57	
    58	export function getSession(id: string): SessionAudit | null {
    59	  const sessions = getCollection<SessionAudit>(SESSIONS_KEY)
    60	  return sessions.find((s) => s.id === id) || null
    61	}
    62	
    63	export function getAllSessions(): SessionAudit[] {
    64	  return getCollection<SessionAudit>(SESSIONS_KEY)
    65	}
    66	
    67	export function deleteSession(id: string): void {
    68	  const sessions = getCollection<SessionAudit>(SESSIONS_KEY)
    69	  setCollection(
    70	    SESSIONS_KEY,
    71	    sessions.filter((s) => s.id !== id)
    72	  )
    73	}
    74	
    75	// --- Snapshots ---
    76	
    77	export async function saveSnapshot(
    78	  balanceId: string,
    79	  lignes: BalanceEntry[]
    80	): Promise<BalanceSnapshot> {
    81	  const totalDebit = lignes.reduce((sum, l) => sum + l.debit, 0)
    82	  const totalCredit = lignes.reduce((sum, l) => sum + l.credit, 0)
    83	  const hash = await computeHash(JSON.stringify(lignes))
    84	
    85	  const snapshot: BalanceSnapshot = {
    86	    id: `SNAP-${Date.now()}`,
    87	    balanceId,
    88	    date: new Date().toISOString(),
    89	    lignes,
    90	    totalDebit,
    91	    totalCredit,
    92	    hash,
    93	  }
    94	
    95	  const snapshots = getCollection<BalanceSnapshot>(SNAPSHOTS_KEY)
    96	  snapshots.unshift(snapshot)
    97	  setCollection(SNAPSHOTS_KEY, snapshots.slice(0, 20))
    98	
    99	  return snapshot
   100	}
   101	
   102	export function getSnapshot(id: string): BalanceSnapshot | null {
   103	  const snapshots = getCollection<BalanceSnapshot>(SNAPSHOTS_KEY)
   104	  return snapshots.find((s) => s.id === id) || null
   105	}
   106	
   107	export function getSnapshotByBalance(balanceId: string): BalanceSnapshot | null {
   108	  const snapshots = getCollection<BalanceSnapshot>(SNAPSHOTS_KEY)
   109	  return snapshots.find((s) => s.balanceId === balanceId) || null
   110	}
   111	
   112	// --- Archives ---
   113	
   114	export async function saveArchive(
   115	  session: SessionAudit,
   116	  snapshot: BalanceSnapshot
   117	): Promise<ArchiveAudit> {
   118	  const hash = await computeHash(JSON.stringify({ session, snapshot }))
   119	
   120	  const archive: ArchiveAudit = {
   121	    id: `ARCH-${Date.now()}`,
   122	    exercice: session.exercice,
   123	    dateArchivage: new Date().toISOString(),
   124	    session,
   125	    snapshot,
   126	    hash,
   127	  }
   128	
   129	  const archives = getCollection<ArchiveAudit>(ARCHIVES_KEY)
   130	  // Remplacer si meme exercice
   131	  const existingIdx = archives.findIndex((a) => a.exercice === session.exercice)
   132	  if (existingIdx >= 0) {
   133	    archives[existingIdx] = archive
   134	  } else {
   135	    archives.unshift(archive)
   136	  }
   137	  setCollection(ARCHIVES_KEY, archives)
   138	
   139	  return archive
   140	}
   141	
   142	export function getArchive(exercice: string): ArchiveAudit | null {
   143	  const archives = getCollection<ArchiveAudit>(ARCHIVES_KEY)
   144	  return archives.find((a) => a.exercice === exercice) || null
   145	}
   146	
   147	export function getAllArchives(): ArchiveAudit[] {
   148	  return getCollection<ArchiveAudit>(ARCHIVES_KEY)
   149	}
   150	
   151	// --- Rapports de corrections ---
   152	
   153	export function saveCorrectionReport(report: RapportCorrection): void {
   154	  const reports = getCollection<RapportCorrection>(REPORTS_KEY)
   155	  reports.unshift(report)
   156	  setCollection(REPORTS_KEY, reports.slice(0, 20))
   157	}
   158	
   159	export function getCorrectionReport(id: string): RapportCorrection | null {
   160	  const reports = getCollection<RapportCorrection>(REPORTS_KEY)
   161	  return reports.find((r) => r.id === id) || null
   162	}
   163	
   164	export function getAllCorrectionReports(): RapportCorrection[] {
   165	  return getCollection<RapportCorrection>(REPORTS_KEY)
   166	}

================================================================================
FILE: src/services/audit/controlRegistry.ts
================================================================================
     1	/**
     2	 * Registre central des controles d'audit
     3	 * Enregistre les 108 controles et fournit des methodes d'acces
     4	 */
     5	
     6	import {
     7	  ControleDefinition,
     8	  ControlFunction,
     9	  NiveauControle,
    10	  PhaseAudit,
    11	} from '@/types/audit.types'
    12	
    13	interface RegisteredControl {
    14	  definition: ControleDefinition
    15	  execute: ControlFunction
    16	}
    17	
    18	class ControlRegistry {
    19	  private controls: Map<string, RegisteredControl> = new Map()
    20	
    21	  /**
    22	   * Enregistre un controle avec sa definition et sa fonction d'execution
    23	   */
    24	  register(definition: ControleDefinition, executeFn: ControlFunction): void {
    25	    this.controls.set(definition.ref, { definition, execute: executeFn })
    26	  }
    27	
    28	  /**
    29	   * Retourne un controle par sa reference
    30	   */
    31	  get(ref: string): RegisteredControl | undefined {
    32	    return this.controls.get(ref)
    33	  }
    34	
    35	  /**
    36	   * Retourne tous les controles d'un niveau donne
    37	   */
    38	  getByLevel(niveau: NiveauControle): RegisteredControl[] {
    39	    return Array.from(this.controls.values()).filter(
    40	      (c) => c.definition.niveau === niveau && c.definition.actif
    41	    )
    42	  }
    43	
    44	  /**
    45	   * Retourne les controles d'une phase donnee
    46	   */
    47	  getByPhase(phase: PhaseAudit): RegisteredControl[] {
    48	    return Array.from(this.controls.values()).filter(
    49	      (c) => c.definition.phase === phase && c.definition.actif
    50	    )
    51	  }
    52	
    53	  /**
    54	   * Retourne tous les controles enregistres
    55	   */
    56	  getAll(): RegisteredControl[] {
    57	    return Array.from(this.controls.values())
    58	  }
    59	
    60	  /**
    61	   * Retourne toutes les definitions (incluant inactifs)
    62	   */
    63	  getAllDefinitions(): ControleDefinition[] {
    64	    return Array.from(this.controls.values()).map((c) => c.definition)
    65	  }
    66	
    67	  /**
    68	   * Active ou desactive un controle
    69	   */
    70	  setActive(ref: string, actif: boolean): void {
    71	    const control = this.controls.get(ref)
    72	    if (control) {
    73	      control.definition.actif = actif
    74	    }
    75	  }
    76	
    77	  /**
    78	   * Nombre total de controles enregistres
    79	   */
    80	  get size(): number {
    81	    return this.controls.size
    82	  }
    83	
    84	  /**
    85	   * Nombre de controles actifs
    86	   */
    87	  get activeCount(): number {
    88	    return Array.from(this.controls.values()).filter((c) => c.definition.actif).length
    89	  }
    90	}
    91	
    92	// Singleton
    93	export const controlRegistry = new ControlRegistry()

================================================================================
FILE: src/services/audit/controls/level0-structural.ts
================================================================================
     1	/**
     2	 * Niveau 0 - Controles structurels a l'import (S-001 a S-010)
     3	 * 10 controles BLOQUANTS/MINEURS verifiant l'integrite du fichier balance
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle } from '@/types/audit.types'
     7	import { controlRegistry } from '../controlRegistry'
     8	
     9	const NIVEAU: NiveauControle = 0
    10	
    11	function ok(ref: string, nom: string, message: string): ResultatControle {
    12	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message, timestamp: new Date().toISOString() }
    13	}
    14	
    15	function anomalie(
    16	  ref: string, nom: string, severite: ResultatControle['severite'],
    17	  message: string, details?: ResultatControle['details'],
    18	  suggestion?: string, refRegl?: string
    19	): ResultatControle {
    20	  return {
    21	    ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite, message,
    22	    details, suggestion, referenceReglementaire: refRegl,
    23	    timestamp: new Date().toISOString(),
    24	  }
    25	}
    26	
    27	// S-001: Fichier lisible (balance non vide)
    28	function S001(ctx: AuditContext): ResultatControle {
    29	  const ref = 'S-001', nom = 'Fichier lisible'
    30	  if (!ctx.balanceN || !Array.isArray(ctx.balanceN)) {
    31	    return anomalie(ref, nom, 'BLOQUANT', 'La balance est absente ou illisible')
    32	  }
    33	  if (ctx.balanceN.length === 0) {
    34	    return anomalie(ref, nom, 'BLOQUANT', 'La balance ne contient aucune ligne')
    35	  }
    36	  return ok(ref, nom, `Balance lisible: ${ctx.balanceN.length} lignes`)
    37	}
    38	
    39	// S-002: Colonnes identifiees
    40	function S002(ctx: AuditContext): ResultatControle {
    41	  const ref = 'S-002', nom = 'Colonnes identifiees'
    42	  if (!ctx.balanceN.length) return ok(ref, nom, 'Aucune donnee a verifier')
    43	  const sample = ctx.balanceN[0]
    44	  const hasCompte = 'compte' in sample
    45	  const hasLibelle = 'intitule' in sample
    46	  const hasDebit = 'debit' in sample
    47	  const hasCredit = 'credit' in sample
    48	  const missing: string[] = []
    49	  if (!hasCompte) missing.push('compte')
    50	  if (!hasLibelle) missing.push('intitule')
    51	  if (!hasDebit) missing.push('debit')
    52	  if (!hasCredit) missing.push('credit')
    53	  if (missing.length > 0) {
    54	    return anomalie(ref, nom, 'BLOQUANT', `Colonnes manquantes: ${missing.join(', ')}`)
    55	  }
    56	  return ok(ref, nom, 'Toutes les colonnes requises sont presentes')
    57	}
    58	
    59	// S-003: Numeros de compte valides
    60	function S003(ctx: AuditContext): ResultatControle {
    61	  const ref = 'S-003', nom = 'Numeros de compte valides'
    62	  const total = ctx.balanceN.length
    63	  const invalides: string[] = []
    64	  for (const line of ctx.balanceN) {
    65	    const c = (line.compte || '').toString().trim()
    66	    if (!/^\d{2,12}$/.test(c)) {
    67	      invalides.push(c || '(vide)')
    68	    }
    69	  }
    70	  const pctValide = total > 0 ? ((total - invalides.length) / total) * 100 : 0
    71	  if (pctValide < 80) {
    72	    return anomalie(ref, nom, 'BLOQUANT',
    73	      `Seulement ${pctValide.toFixed(1)}% de comptes valides (seuil: 80%)`,
    74	      { comptes: invalides.slice(0, 20) },
    75	      'Verifier le format des numeros de compte (2 a 12 chiffres)')
    76	  }
    77	  if (invalides.length > 0) {
    78	    return anomalie(ref, nom, 'MINEUR',
    79	      `${invalides.length} compte(s) avec format non standard`,
    80	      { comptes: invalides.slice(0, 10) })
    81	  }
    82	  return ok(ref, nom, `Tous les ${total} comptes ont un format valide`)
    83	}
    84	
    85	// S-004: Montants numeriques
    86	function S004(ctx: AuditContext): ResultatControle {
    87	  const ref = 'S-004', nom = 'Montants numeriques'
    88	  const nonNumeriques: string[] = []
    89	  for (const line of ctx.balanceN) {
    90	    if (typeof line.debit !== 'number' || isNaN(line.debit) ||
    91	        typeof line.credit !== 'number' || isNaN(line.credit)) {
    92	      nonNumeriques.push(line.compte)
    93	    }
    94	  }
    95	  if (nonNumeriques.length > 0) {
    96	    return anomalie(ref, nom, 'BLOQUANT',
    97	      `${nonNumeriques.length} ligne(s) avec montants non numeriques`,
    98	      { comptes: nonNumeriques.slice(0, 10) })
    99	  }
   100	  return ok(ref, nom, 'Tous les montants sont numeriques')
   101	}
   102	
   103	// S-005: Fichier non vide (>=10 comptes)
   104	function S005(ctx: AuditContext): ResultatControle {
   105	  const ref = 'S-005', nom = 'Nombre minimum de lignes'
   106	  if (ctx.balanceN.length < 10) {
   107	    return anomalie(ref, nom, 'BLOQUANT',
   108	      `Seulement ${ctx.balanceN.length} comptes (minimum requis: 10)`,
   109	      undefined,
   110	      'Une balance standard contient au minimum 10 comptes')
   111	  }
   112	  return ok(ref, nom, `${ctx.balanceN.length} comptes dans la balance`)
   113	}
   114	
   115	// S-006: Pas de doublons de comptes
   116	function S006(ctx: AuditContext): ResultatControle {
   117	  const ref = 'S-006', nom = 'Pas de doublons'
   118	  const comptesVus = new Map<string, number>()
   119	  const doublons: string[] = []
   120	  for (const line of ctx.balanceN) {
   121	    const c = line.compte.toString().trim()
   122	    const count = (comptesVus.get(c) || 0) + 1
   123	    comptesVus.set(c, count)
   124	    if (count === 2) doublons.push(c)
   125	  }
   126	  if (doublons.length > 0) {
   127	    return anomalie(ref, nom, 'BLOQUANT',
   128	      `${doublons.length} compte(s) en doublon detecte(s)`,
   129	      { comptes: doublons.slice(0, 10) },
   130	      'Fusionner ou supprimer les doublons avant audit')
   131	  }
   132	  return ok(ref, nom, 'Aucun doublon de compte detecte')
   133	}
   134	
   135	// S-007: Encodage correct (accents)
   136	function S007(ctx: AuditContext): ResultatControle {
   137	  const ref = 'S-007', nom = 'Encodage correct'
   138	  const problemes: string[] = []
   139	  for (const line of ctx.balanceN) {
   140	    const lib = line.intitule || ''
   141	    if (/[√Ø¬ø¬Ω√É¬©√É¬®√É ]|\\u00/.test(lib)) {
   142	      problemes.push(line.compte)
   143	    }
   144	  }
   145	  if (problemes.length > 0) {
   146	    return anomalie(ref, nom, 'MINEUR',
   147	      `${problemes.length} libelle(s) avec encodage suspect`,
   148	      { comptes: problemes.slice(0, 5) },
   149	      'Verifier l\'encodage UTF-8 du fichier source')
   150	  }
   151	  return ok(ref, nom, 'Encodage des libelles correct')
   152	}
   153	
   154	// S-008: Lignes de totaux exclues
   155	function S008(ctx: AuditContext): ResultatControle {
   156	  const ref = 'S-008', nom = 'Lignes de totaux'
   157	  const totaux: string[] = []
   158	  for (const line of ctx.balanceN) {
   159	    const lib = (line.intitule || '').toUpperCase()
   160	    if (/^(TOTAL|SOUS[- ]?TOTAL|S\/?TOTAL)/.test(lib) ||
   161	        /^(CLASSE|SECTION)\s*\d/.test(lib)) {
   162	      totaux.push(`${line.compte}: ${line.intitule}`)
   163	    }
   164	  }
   165	  if (totaux.length > 0) {
   166	    return anomalie(ref, nom, 'MINEUR',
   167	      `${totaux.length} ligne(s) de totaux detectee(s)`,
   168	      { comptes: totaux.slice(0, 5) },
   169	      'Exclure les lignes de totaux pour eviter les doubles comptages')
   170	  }
   171	  return ok(ref, nom, 'Aucune ligne de totaux detectee')
   172	}
   173	
   174	// S-009: Balance N-1 presente
   175	function S009(ctx: AuditContext): ResultatControle {
   176	  const ref = 'S-009', nom = 'Balance N-1 presente'
   177	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) {
   178	    return anomalie(ref, nom, 'MINEUR',
   179	      'Balance N-1 non fournie - les controles comparatifs seront limites',
   180	      undefined,
   181	      'Fournir la balance N-1 pour activer les controles de variation')
   182	  }
   183	  return ok(ref, nom, `Balance N-1 presente: ${ctx.balanceN1.length} lignes`)
   184	}
   185	
   186	// S-010: Coherence entre fichiers N et N-1
   187	function S010(ctx: AuditContext): ResultatControle {
   188	  const ref = 'S-010', nom = 'Coherence N / N-1'
   189	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) {
   190	    return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK',
   191	      message: 'Balance N-1 absente, controle non applicable', timestamp: new Date().toISOString() }
   192	  }
   193	  const comptesN = new Set(ctx.balanceN.map((l) => l.compte.toString().trim()))
   194	  const comptesN1 = new Set(ctx.balanceN1.map((l) => l.compte.toString().trim()))
   195	  const dansNPasDansN1 = [...comptesN].filter((c) => !comptesN1.has(c))
   196	  const dansN1PasDansN = [...comptesN1].filter((c) => !comptesN.has(c))
   197	  const total = comptesN.size + comptesN1.size
   198	  const communs = [...comptesN].filter((c) => comptesN1.has(c)).length
   199	  const tauxCommun = total > 0 ? (communs * 2 / total) * 100 : 0
   200	
   201	  if (tauxCommun < 50) {
   202	    return anomalie(ref, nom, 'MAJEUR',
   203	      `Seulement ${tauxCommun.toFixed(0)}% de comptes communs entre N et N-1`,
   204	      { comptes: [...dansNPasDansN1.slice(0, 5), ...dansN1PasDansN.slice(0, 5)] },
   205	      'Verifier que les fichiers N et N-1 correspondent a la meme entreprise')
   206	  }
   207	  if (dansNPasDansN1.length > 10 || dansN1PasDansN.length > 10) {
   208	    return anomalie(ref, nom, 'MINEUR',
   209	      `${dansNPasDansN1.length} nouveaux comptes en N, ${dansN1PasDansN.length} disparus`,
   210	      { montants: { nouveauxN: dansNPasDansN1.length, disparusN1: dansN1PasDansN.length } })
   211	  }
   212	  return ok(ref, nom, `${tauxCommun.toFixed(0)}% de comptes communs entre N et N-1`)
   213	}
   214	
   215	// --- Enregistrement ---
   216	
   217	export function registerLevel0Controls(): void {
   218	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   219	    ['S-001', 'Fichier lisible', 'Verifie que la balance est lisible et non vide', 'BLOQUANT', S001],
   220	    ['S-002', 'Colonnes identifiees', 'Verifie la presence des colonnes requises', 'BLOQUANT', S002],
   221	    ['S-003', 'Numeros de compte valides', 'Verifie le format des numeros de compte', 'BLOQUANT', S003],
   222	    ['S-004', 'Montants numeriques', 'Verifie que les montants sont numeriques', 'BLOQUANT', S004],
   223	    ['S-005', 'Nombre minimum de lignes', 'Verifie au moins 10 comptes', 'BLOQUANT', S005],
   224	    ['S-006', 'Pas de doublons', 'Verifie l\'absence de comptes en doublon', 'BLOQUANT', S006],
   225	    ['S-007', 'Encodage correct', 'Verifie l\'encodage des caracteres', 'MINEUR', S007],
   226	    ['S-008', 'Lignes de totaux', 'Detecte les lignes de totaux a exclure', 'MINEUR', S008],
   227	    ['S-009', 'Balance N-1 presente', 'Verifie la presence de la balance N-1', 'MINEUR', S009],
   228	    ['S-010', 'Coherence N / N-1', 'Verifie la coherence entre N et N-1', 'MAJEUR', S010],
   229	  ]
   230	
   231	  for (const [ref, nom, desc, sev, fn] of defs) {
   232	    controlRegistry.register(
   233	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_1', actif: true },
   234	      fn
   235	    )
   236	  }
   237	}

================================================================================
FILE: src/services/audit/controls/level1-fundamental.ts
================================================================================
     1	/**
     2	 * Niveau 1 - Controles fondamentaux (F-001 a F-011)
     3	 * 11 controles verifiant les equilibres et coherences de base
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle } from '@/types/audit.types'
     7	import { BalanceEntry } from '@/services/liasseDataService'
     8	import { controlRegistry } from '../controlRegistry'
     9	
    10	const NIVEAU: NiveauControle = 1
    11	const TOLERANCE = 0.01
    12	
    13	function ok(ref: string, nom: string, message: string): ResultatControle {
    14	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message, timestamp: new Date().toISOString() }
    15	}
    16	
    17	function anomalie(
    18	  ref: string, nom: string, severite: ResultatControle['severite'],
    19	  message: string, details?: ResultatControle['details'],
    20	  suggestion?: string, ecritures?: ResultatControle['ecrituresCorrectives'],
    21	  refRegl?: string
    22	): ResultatControle {
    23	  return {
    24	    ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite, message,
    25	    details, suggestion, ecrituresCorrectives: ecritures,
    26	    referenceReglementaire: refRegl, timestamp: new Date().toISOString(),
    27	  }
    28	}
    29	
    30	function na(ref: string, nom: string, message: string): ResultatControle {
    31	  return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK', message, timestamp: new Date().toISOString() }
    32	}
    33	
    34	// Helpers
    35	function sumDebit(balance: BalanceEntry[]): number {
    36	  return balance.reduce((s, l) => s + (l.debit || 0), 0)
    37	}
    38	function sumCredit(balance: BalanceEntry[]): number {
    39	  return balance.reduce((s, l) => s + (l.credit || 0), 0)
    40	}
    41	function solde(line: BalanceEntry): number {
    42	  return (line.solde_debit || 0) - (line.solde_credit || 0)
    43	}
    44	function findByPrefix(balance: BalanceEntry[], prefix: string): BalanceEntry[] {
    45	  return balance.filter((l) => l.compte.toString().startsWith(prefix))
    46	}
    47	// F-001: Equilibre general N
    48	function F001(ctx: AuditContext): ResultatControle {
    49	  const ref = 'F-001', nom = 'Equilibre general N'
    50	  const totalD = sumDebit(ctx.balanceN)
    51	  const totalC = sumCredit(ctx.balanceN)
    52	  const ecart = Math.abs(totalD - totalC)
    53	  if (ecart > TOLERANCE) {
    54	    return anomalie(ref, nom, 'BLOQUANT',
    55	      `Desequilibre de ${ecart.toLocaleString('fr-FR')} FCFA`,
    56	      { ecart, montants: { totalDebit: totalD, totalCredit: totalC } },
    57	      'La somme des debits doit etre egale a la somme des credits',
    58	      [{
    59	        journal: 'OD', date: new Date().toISOString().slice(0, 10),
    60	        lignes: totalD > totalC
    61	          ? [{ sens: 'C' as const, compte: '471000', libelle: 'Compte d\'attente', montant: ecart }]
    62	          : [{ sens: 'D' as const, compte: '471000', libelle: 'Compte d\'attente', montant: ecart }],
    63	        commentaire: 'Ecriture d\'equilibrage provisoire'
    64	      }],
    65	      'Art. 19 Acte Uniforme OHADA relatif au droit comptable')
    66	  }
    67	  return ok(ref, nom, `Balance equilibree (D=${totalD.toLocaleString('fr-FR')}, C=${totalC.toLocaleString('fr-FR')})`)
    68	}
    69	
    70	// F-002: Equilibre general N-1
    71	function F002(ctx: AuditContext): ResultatControle {
    72	  const ref = 'F-002', nom = 'Equilibre general N-1'
    73	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) {
    74	    return na(ref, nom, 'Balance N-1 absente')
    75	  }
    76	  const totalD = sumDebit(ctx.balanceN1)
    77	  const totalC = sumCredit(ctx.balanceN1)
    78	  const ecart = Math.abs(totalD - totalC)
    79	  if (ecart > TOLERANCE) {
    80	    return anomalie(ref, nom, 'BLOQUANT',
    81	      `Desequilibre N-1 de ${ecart.toLocaleString('fr-FR')} FCFA`,
    82	      { ecart, montants: { totalDebitN1: totalD, totalCreditN1: totalC } })
    83	  }
    84	  return ok(ref, nom, `Balance N-1 equilibree`)
    85	}
    86	
    87	// F-003: Resultat coherent
    88	function F003(ctx: AuditContext): ResultatControle {
    89	  const ref = 'F-003', nom = 'Resultat coherent'
    90	  const produits = findByPrefix(ctx.balanceN, '7')
    91	  const charges = findByPrefix(ctx.balanceN, '6')
    92	  const totalProduits = produits.reduce((s, l) => s + (l.credit - l.debit), 0)
    93	  const totalCharges = charges.reduce((s, l) => s + (l.debit - l.credit), 0)
    94	  const resultatCalcule = totalProduits - totalCharges
    95	
    96	  const comptes13 = findByPrefix(ctx.balanceN, '13')
    97	  const resultatComptabilise = comptes13.reduce((s, l) => s + (l.credit - l.debit), 0)
    98	
    99	  const ecart = Math.abs(resultatCalcule - resultatComptabilise)
   100	  if (ecart > 1 && comptes13.length > 0) {
   101	    return anomalie(ref, nom, 'BLOQUANT',
   102	      `Ecart de ${ecart.toLocaleString('fr-FR')} FCFA entre resultat calcule et compte 13x`,
   103	      {
   104	        ecart,
   105	        montants: { resultatCalcule, resultatComptabilise, produits: totalProduits, charges: totalCharges }
   106	      },
   107	      'Le resultat (produits-charges) doit correspondre au solde du compte 13x',
   108	      undefined,
   109	      'Art. 34 Acte Uniforme OHADA')
   110	  }
   111	  if (comptes13.length === 0) {
   112	    return anomalie(ref, nom, 'MINEUR',
   113	      `Resultat calcule: ${resultatCalcule.toLocaleString('fr-FR')} FCFA mais pas de compte 13x`,
   114	      { montants: { resultatCalcule } })
   115	  }
   116	  return ok(ref, nom, `Resultat coherent: ${resultatCalcule.toLocaleString('fr-FR')} FCFA`)
   117	}
   118	
   119	// F-004: Total bilan equilibre
   120	function F004(ctx: AuditContext): ResultatControle {
   121	  const ref = 'F-004', nom = 'Total bilan equilibre'
   122	  // Actif: classes 1(debiteur) + 2 + 3 + 4(debiteur) + 5(debiteur)
   123	  const actifEntries = ctx.balanceN.filter((l) => {
   124	    const cl = parseInt(l.compte.toString().charAt(0))
   125	    return cl >= 1 && cl <= 5
   126	  })
   127	  // Actif = somme des soldes debiteurs
   128	  let totalActif = 0
   129	  let totalPassif = 0
   130	  for (const l of actifEntries) {
   131	    const s = solde(l)
   132	    if (s > 0) totalActif += s
   133	    else totalPassif += Math.abs(s)
   134	  }
   135	  const ecart = Math.abs(totalActif - totalPassif)
   136	  if (ecart > 1) {
   137	    return anomalie(ref, nom, 'BLOQUANT',
   138	      `Desequilibre bilan: Actif=${totalActif.toLocaleString('fr-FR')}, Passif=${totalPassif.toLocaleString('fr-FR')} (ecart: ${ecart.toLocaleString('fr-FR')})`,
   139	      { ecart, montants: { totalActif, totalPassif } },
   140	      'Le total de l\'actif doit etre egal au total du passif',
   141	      undefined,
   142	      'Art. 29 Acte Uniforme OHADA')
   143	  }
   144	  return ok(ref, nom, `Bilan equilibre: ${totalActif.toLocaleString('fr-FR')} FCFA`)
   145	}
   146	
   147	// F-005: Presence classes essentielles
   148	function F005(ctx: AuditContext): ResultatControle {
   149	  const ref = 'F-005', nom = 'Classes essentielles presentes'
   150	  const classesPresentes = new Set<string>()
   151	  for (const l of ctx.balanceN) {
   152	    classesPresentes.add(l.compte.toString().charAt(0))
   153	  }
   154	  const requises = ['1', '2', '4', '5', '6', '7']
   155	  const manquantes = requises.filter((c) => !classesPresentes.has(c))
   156	  if (manquantes.length > 0) {
   157	    return anomalie(ref, nom, 'MAJEUR',
   158	      `Classes manquantes: ${manquantes.join(', ')}`,
   159	      { comptes: manquantes },
   160	      'Une balance complete doit contenir les classes 1, 2, 4, 5, 6 et 7')
   161	  }
   162	  return ok(ref, nom, `Toutes les classes essentielles presentes (${[...classesPresentes].sort().join(', ')})`)
   163	}
   164	
   165	// F-006: Presence compte capital (101x)
   166	function F006(ctx: AuditContext): ResultatControle {
   167	  const ref = 'F-006', nom = 'Compte capital present'
   168	  const capital = findByPrefix(ctx.balanceN, '101')
   169	  if (capital.length === 0) {
   170	    return anomalie(ref, nom, 'MAJEUR',
   171	      'Aucun compte de capital social (101x) trouve',
   172	      undefined,
   173	      'Le capital social est obligatoire pour toute societe')
   174	  }
   175	  const montant = capital.reduce((s, l) => s + (l.credit - l.debit), 0)
   176	  return ok(ref, nom, `Capital social: ${montant.toLocaleString('fr-FR')} FCFA`)
   177	}
   178	
   179	// F-007: Presence compte resultat (13x)
   180	function F007(ctx: AuditContext): ResultatControle {
   181	  const ref = 'F-007', nom = 'Compte resultat present'
   182	  const resultat = findByPrefix(ctx.balanceN, '13')
   183	  if (resultat.length === 0) {
   184	    return anomalie(ref, nom, 'MINEUR',
   185	      'Aucun compte de resultat (13x) trouve',
   186	      undefined,
   187	      'Le resultat de l\'exercice doit apparaitre dans la balance')
   188	  }
   189	  const montant = resultat.reduce((s, l) => s + (l.credit - l.debit), 0)
   190	  return ok(ref, nom, `Resultat: ${montant.toLocaleString('fr-FR')} FCFA`)
   191	}
   192	
   193	// F-008: Report a nouveau coherent
   194	function F008(ctx: AuditContext): ResultatControle {
   195	  const ref = 'F-008', nom = 'Report a nouveau coherent'
   196	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) {
   197	    return na(ref, nom, 'Balance N-1 absente')
   198	  }
   199	  const ranN = findByPrefix(ctx.balanceN, '12')
   200	  const resultatN1 = findByPrefix(ctx.balanceN1, '13')
   201	
   202	  if (ranN.length === 0 && resultatN1.length > 0) {
   203	    return anomalie(ref, nom, 'MAJEUR',
   204	      'Pas de report a nouveau (12x) alors que la balance N-1 a un resultat',
   205	      undefined,
   206	      'Le resultat N-1 doit etre reporte au compte 12x en N')
   207	  }
   208	  if (ranN.length === 0) return na(ref, nom, 'Pas de RAN ni de resultat N-1')
   209	
   210	  const montantRAN = ranN.reduce((s, l) => s + (l.credit - l.debit), 0)
   211	  const montantResultatN1 = resultatN1.reduce((s, l) => s + (l.credit - l.debit), 0)
   212	  const ecart = Math.abs(montantRAN - montantResultatN1)
   213	
   214	  if (ecart > 1) {
   215	    return anomalie(ref, nom, 'MAJEUR',
   216	      `Report a nouveau (${montantRAN.toLocaleString('fr-FR')}) != Resultat N-1 (${montantResultatN1.toLocaleString('fr-FR')})`,
   217	      { ecart, montants: { reportANouveau: montantRAN, resultatN1: montantResultatN1 } },
   218	      'Le report a nouveau doit correspondre au resultat de l\'exercice precedent')
   219	  }
   220	  return ok(ref, nom, `Report a nouveau coherent: ${montantRAN.toLocaleString('fr-FR')} FCFA`)
   221	}
   222	
   223	// F-009: Nombre minimum de comptes
   224	function F009(ctx: AuditContext): ResultatControle {
   225	  const ref = 'F-009', nom = 'Nombre de comptes suffisant'
   226	  const count = ctx.balanceN.length
   227	  if (count < 50) {
   228	    return anomalie(ref, nom, 'MINEUR',
   229	      `Seulement ${count} comptes (une balance complete comporte generalement 50+)`,
   230	      { montants: { nombreComptes: count } },
   231	      'Une balance trop courte peut indiquer un import partiel')
   232	  }
   233	  return ok(ref, nom, `${count} comptes dans la balance`)
   234	}
   235	
   236	// F-010: Comptes a solde nul
   237	function F010(ctx: AuditContext): ResultatControle {
   238	  const ref = 'F-010', nom = 'Comptes a solde nul'
   239	  const nuls = ctx.balanceN.filter((l) =>
   240	    l.debit === 0 && l.credit === 0 &&
   241	    (l.solde_debit || 0) === 0 && (l.solde_credit || 0) === 0
   242	  )
   243	  if (nuls.length > 0) {
   244	    const pct = ((nuls.length / ctx.balanceN.length) * 100).toFixed(1)
   245	    return anomalie(ref, nom, 'INFO',
   246	      `${nuls.length} compte(s) a solde nul (${pct}%)`,
   247	      { comptes: nuls.slice(0, 10).map((l) => l.compte) },
   248	      'Les comptes a solde nul peuvent etre nettoyes')
   249	  }
   250	  return ok(ref, nom, 'Aucun compte a solde nul')
   251	}
   252	
   253	// F-011: Comptes collectifs non detailles
   254	function F011(ctx: AuditContext): ResultatControle {
   255	  const ref = 'F-011', nom = 'Comptes collectifs'
   256	  // Comptes collectifs: 401, 411 (doivent avoir des sous-comptes)
   257	  const collectifs = ['401', '411']
   258	  const problemes: string[] = []
   259	  for (const prefix of collectifs) {
   260	    const exact = ctx.balanceN.filter((l) => l.compte.toString().trim() === prefix)
   261	    const details = ctx.balanceN.filter((l) =>
   262	      l.compte.toString().startsWith(prefix) && l.compte.toString().length > prefix.length
   263	    )
   264	    if (exact.length > 0 && details.length === 0) {
   265	      problemes.push(prefix)
   266	    }
   267	  }
   268	  if (problemes.length > 0) {
   269	    return anomalie(ref, nom, 'MINEUR',
   270	      `Comptes collectifs non detailles: ${problemes.join(', ')}`,
   271	      { comptes: problemes },
   272	      'Les comptes collectifs (401, 411) doivent etre ventiles en sous-comptes')
   273	  }
   274	  return ok(ref, nom, 'Comptes collectifs correctement detailles')
   275	}
   276	
   277	// --- Enregistrement ---
   278	
   279	export function registerLevel1Controls(): void {
   280	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   281	    ['F-001', 'Equilibre general N', 'Verifie que total debits = total credits', 'BLOQUANT', F001],
   282	    ['F-002', 'Equilibre general N-1', 'Verifie l\'equilibre de la balance N-1', 'BLOQUANT', F002],
   283	    ['F-003', 'Resultat coherent', 'Verifie coherence produits-charges vs compte 13x', 'BLOQUANT', F003],
   284	    ['F-004', 'Total bilan equilibre', 'Verifie actif = passif', 'BLOQUANT', F004],
   285	    ['F-005', 'Classes essentielles presentes', 'Verifie la presence des classes 1-7', 'MAJEUR', F005],
   286	    ['F-006', 'Compte capital present', 'Verifie la presence du capital social', 'MAJEUR', F006],
   287	    ['F-007', 'Compte resultat present', 'Verifie la presence du compte de resultat', 'MINEUR', F007],
   288	    ['F-008', 'Report a nouveau coherent', 'Verifie RAN vs resultat N-1', 'MAJEUR', F008],
   289	    ['F-009', 'Nombre de comptes suffisant', 'Verifie au moins 50 comptes', 'MINEUR', F009],
   290	    ['F-010', 'Comptes a solde nul', 'Signale les comptes a solde nul', 'INFO', F010],
   291	    ['F-011', 'Comptes collectifs', 'Verifie le detail des comptes collectifs', 'MINEUR', F011],
   292	  ]
   293	
   294	  for (const [ref, nom, desc, sev, fn] of defs) {
   295	    controlRegistry.register(
   296	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_1', actif: true },
   297	      fn
   298	    )
   299	  }
   300	}

================================================================================
FILE: src/services/audit/controls/level2-ohada-conformity.ts
================================================================================
     1	/**
     2	 * Niveau 2 - Conformite OHADA (C-001 a C-008)
     3	 * 8 controles verifiant la conformite au plan SYSCOHADA Revise
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle } from '@/types/audit.types'
     7	import { PLAN_SYSCOHADA_REVISE, validateSYSCOHADAAccount } from '@/data/SYSCOHADARevisePlan'
     8	import { findClosestAccount } from '@/data/syscohada/plan'
     9	import { controlRegistry } from '../controlRegistry'
    10	
    11	const NIVEAU: NiveauControle = 2
    12	
    13	function ok(ref: string, nom: string, message: string): ResultatControle {
    14	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message, timestamp: new Date().toISOString() }
    15	}
    16	
    17	function anomalie(
    18	  ref: string, nom: string, severite: ResultatControle['severite'],
    19	  message: string, details?: ResultatControle['details'],
    20	  suggestion?: string, refRegl?: string
    21	): ResultatControle {
    22	  return {
    23	    ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite, message,
    24	    details, suggestion, referenceReglementaire: refRegl,
    25	    timestamp: new Date().toISOString(),
    26	  }
    27	}
    28	
    29	/**
    30	 * Algorithme de remapping intelligent: trouve le compte OHADA le plus proche
    31	 * Utilise le service enrichi du referentiel SYSCOHADA
    32	 */
    33	function findClosestOHADA(numero: string): { numero: string; libelle: string; score: number } | null {
    34	  const result = findClosestAccount(numero)
    35	  if (result) {
    36	    return { numero: result.numero, libelle: result.libelle, score: result.score }
    37	  }
    38	  return null
    39	}
    40	
    41	// C-001: Compte existant dans plan OHADA
    42	function C001(ctx: AuditContext): ResultatControle {
    43	  const ref = 'C-001', nom = 'Comptes OHADA valides'
    44	  const nonOHADA: Array<{ compte: string; suggestion?: string }> = []
    45	
    46	  for (const line of ctx.balanceN) {
    47	    const num = line.compte.toString().trim()
    48	    // Verifier par prefixes decroissants
    49	    let found = false
    50	    for (let len = Math.min(num.length, 4); len >= 2; len--) {
    51	      if (validateSYSCOHADAAccount(num.substring(0, len))) {
    52	        found = true
    53	        break
    54	      }
    55	    }
    56	    if (!found) {
    57	      const closest = findClosestOHADA(num)
    58	      nonOHADA.push({
    59	        compte: num,
    60	        suggestion: closest ? `${closest.numero} - ${closest.libelle}` : undefined
    61	      })
    62	    }
    63	  }
    64	
    65	  if (nonOHADA.length > 0) {
    66	    const pct = ((nonOHADA.length / ctx.balanceN.length) * 100).toFixed(1)
    67	    return anomalie(ref, nom, 'MAJEUR',
    68	      `${nonOHADA.length} compte(s) non conforme(s) au plan OHADA (${pct}%)`,
    69	      {
    70	        comptes: nonOHADA.slice(0, 15).map((c) => c.suggestion ? `${c.compte} -> ${c.suggestion}` : c.compte),
    71	        description: 'Comptes non trouves dans le plan SYSCOHADA Revise'
    72	      },
    73	      'Reclasser ces comptes selon le plan SYSCOHADA Revise 2017',
    74	      'Art. 14 Acte Uniforme OHADA')
    75	  }
    76	  return ok(ref, nom, 'Tous les comptes sont conformes au plan OHADA')
    77	}
    78	
    79	// C-002: Classe valide (1-8)
    80	function C002(ctx: AuditContext): ResultatControle {
    81	  const ref = 'C-002', nom = 'Classes valides (1-8)'
    82	  const invalides: string[] = []
    83	  for (const line of ctx.balanceN) {
    84	    const classe = parseInt(line.compte.toString().charAt(0))
    85	    if (isNaN(classe) || classe < 1 || classe > 9) {
    86	      invalides.push(line.compte)
    87	    }
    88	  }
    89	  if (invalides.length > 0) {
    90	    return anomalie(ref, nom, 'BLOQUANT',
    91	      `${invalides.length} compte(s) avec classe invalide`,
    92	      { comptes: invalides.slice(0, 10) },
    93	      'Les comptes doivent commencer par un chiffre de 1 a 9')
    94	  }
    95	  return ok(ref, nom, 'Toutes les classes sont valides')
    96	}
    97	
    98	// C-003: Longueur numero standard
    99	function C003(ctx: AuditContext): ResultatControle {
   100	  const ref = 'C-003', nom = 'Longueur comptes standard'
   101	  const courts: string[] = []
   102	  const longs: string[] = []
   103	  for (const line of ctx.balanceN) {
   104	    const len = line.compte.toString().trim().length
   105	    if (len < 4) courts.push(line.compte)
   106	    if (len > 8) longs.push(line.compte)
   107	  }
   108	  if (courts.length > 0 || longs.length > 0) {
   109	    return anomalie(ref, nom, 'INFO',
   110	      `${courts.length} compte(s) court(s) (<4), ${longs.length} compte(s) long(s) (>8)`,
   111	      { comptes: [...courts.slice(0, 5), ...longs.slice(0, 5)] },
   112	      'La norme SYSCOHADA recommande des comptes de 4 a 8 chiffres')
   113	  }
   114	  return ok(ref, nom, 'Longueurs de comptes conformes')
   115	}
   116	
   117	// C-004: Comptes obsoletes ancien SYSCOA
   118	function C004(ctx: AuditContext): ResultatControle {
   119	  const ref = 'C-004', nom = 'Comptes obsoletes SYSCOA'
   120	  // Comptes qui existaient dans l'ancien SYSCOA mais supprimes dans le revise
   121	  const obsoletes: Record<string, string> = {
   122	    '195': 'Provisions pour impots (remplace par 441x)',
   123	    '196': 'Provisions pour pensions (remplace par 198x)',
   124	    '471': 'Compte d\'attente (remplace par 47x specifiques)',
   125	    '694': 'TAFIRE - supprime dans SYSCOHADA Revise',
   126	  }
   127	  const trouves: string[] = []
   128	  for (const line of ctx.balanceN) {
   129	    const num = line.compte.toString().trim()
   130	    for (const [prefix, desc] of Object.entries(obsoletes)) {
   131	      if (num.startsWith(prefix)) {
   132	        trouves.push(`${num}: ${desc}`)
   133	      }
   134	    }
   135	  }
   136	  if (trouves.length > 0) {
   137	    return anomalie(ref, nom, 'MAJEUR',
   138	      `${trouves.length} compte(s) obsolete(s) de l'ancien SYSCOA`,
   139	      { comptes: trouves },
   140	      'Migrer vers les comptes du SYSCOHADA Revise 2017',
   141	      'SYSCOHADA Revise 2017 - Guide de migration')
   142	  }
   143	  return ok(ref, nom, 'Aucun compte obsolete detecte')
   144	}
   145	
   146	// C-005: Comptes TAFIRE supprimes
   147	function C005(ctx: AuditContext): ResultatControle {
   148	  const ref = 'C-005', nom = 'Comptes TAFIRE supprimes'
   149	  const tafire = ctx.balanceN.filter((l) => {
   150	    const num = l.compte.toString().trim()
   151	    return num.startsWith('694') || num.startsWith('884') || num.startsWith('894')
   152	  })
   153	  if (tafire.length > 0) {
   154	    return anomalie(ref, nom, 'MAJEUR',
   155	      `${tafire.length} compte(s) TAFIRE detecte(s) (supprime dans le revise)`,
   156	      { comptes: tafire.map((l) => l.compte) },
   157	      'Le TAFIRE a ete remplace par le TFT dans le SYSCOHADA Revise',
   158	      'SYSCOHADA Revise 2017')
   159	  }
   160	  return ok(ref, nom, 'Aucun compte TAFIRE obsolete')
   161	}
   162	
   163	// C-006: Mapping vers etats financiers possible
   164	function C006(ctx: AuditContext): ResultatControle {
   165	  const ref = 'C-006', nom = 'Mapping etats financiers'
   166	  const typeLiasse = ctx.typeLiasse || 'SN'
   167	
   168	  // Pour les types sectoriels (BANQUE, ASSURANCE, MICROFINANCE, EBNL),
   169	  // le mapping standard SYSCOHADA ne s'applique pas directement
   170	  if (['BANQUE', 'ASSURANCE', 'MICROFINANCE', 'EBNL'].includes(typeLiasse)) {
   171	    return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK',
   172	      message: `Controle adapte au type ${typeLiasse} - mapping sectoriel utilise`,
   173	      timestamp: new Date().toISOString() }
   174	  }
   175	
   176	  if (!ctx.mappingSyscohada) {
   177	    return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK',
   178	      message: 'Mapping SYSCOHADA non charge', timestamp: new Date().toISOString() }
   179	  }
   180	
   181	  // Collecter tous les prefixes du mapping (SN ou SMT)
   182	  const mappedPrefixes: string[] = []
   183	  for (const section of Object.values(ctx.mappingSyscohada)) {
   184	    for (const poste of Object.values(section as Record<string, any>)) {
   185	      if (poste.comptes) mappedPrefixes.push(...poste.comptes)
   186	      if (poste.amortComptes) mappedPrefixes.push(...poste.amortComptes)
   187	    }
   188	  }
   189	
   190	  const nonMappes: string[] = []
   191	  for (const line of ctx.balanceN) {
   192	    const num = line.compte.toString().trim()
   193	    const classe = parseInt(num.charAt(0))
   194	    // Seules les classes 1-5 (bilan) doivent etre mappees
   195	    if (classe >= 1 && classe <= 5) {
   196	      const mapped = mappedPrefixes.some((prefix) => num.startsWith(prefix))
   197	      if (!mapped) nonMappes.push(num)
   198	    }
   199	  }
   200	
   201	  if (nonMappes.length > 5) {
   202	    return anomalie(ref, nom, 'MAJEUR',
   203	      `${nonMappes.length} compte(s) de bilan non mappe(s) vers les etats financiers (${typeLiasse})`,
   204	      { comptes: nonMappes.slice(0, 15) },
   205	      `Ces comptes ne seront pas repris dans le bilan ${typeLiasse}`)
   206	  }
   207	  if (nonMappes.length > 0) {
   208	    return anomalie(ref, nom, 'MINEUR',
   209	      `${nonMappes.length} compte(s) de bilan non mappe(s) (${typeLiasse})`,
   210	      { comptes: nonMappes })
   211	  }
   212	  return ok(ref, nom, `Tous les comptes de bilan sont mappables (${typeLiasse})`)
   213	}
   214	
   215	// C-007: Utilisation comptes a 2 chiffres
   216	function C007(ctx: AuditContext): ResultatControle {
   217	  const ref = 'C-007', nom = 'Comptes a 2 chiffres'
   218	  const deuxChiffres = ctx.balanceN.filter((l) => l.compte.toString().trim().length === 2)
   219	  if (deuxChiffres.length > 0) {
   220	    return anomalie(ref, nom, 'MINEUR',
   221	      `${deuxChiffres.length} compte(s) a 2 chiffres (niveau insuffisant)`,
   222	      { comptes: deuxChiffres.map((l) => `${l.compte}: ${l.intitule}`) },
   223	      'Les comptes a 2 chiffres sont des comptes synthetiques, utiliser des sous-comptes')
   224	  }
   225	  return ok(ref, nom, 'Aucun compte a 2 chiffres seulement')
   226	}
   227	
   228	// C-008: Comptes speciaux classe 8
   229	function C008(ctx: AuditContext): ResultatControle {
   230	  const ref = 'C-008', nom = 'Comptes speciaux classe 8'
   231	  const classe8 = ctx.balanceN.filter((l) => l.compte.toString().startsWith('8'))
   232	  if (classe8.length > 0) {
   233	    const totalMontant = classe8.reduce((s, l) => s + Math.abs(l.debit - l.credit), 0)
   234	    return anomalie(ref, nom, 'INFO',
   235	      `${classe8.length} compte(s) HAO (classe 8) pour ${totalMontant.toLocaleString('fr-FR')} FCFA`,
   236	      { comptes: classe8.map((l) => `${l.compte}: ${l.intitule}`).slice(0, 10) },
   237	      'Les operations HAO doivent etre justifiees et documentees',
   238	      'Art. 48 Acte Uniforme OHADA')
   239	  }
   240	  return ok(ref, nom, 'Aucun compte HAO (classe 8)')
   241	}
   242	
   243	// C-009: Verification d'utilisation des comptes (obligatoire vs facultatif vs interdit)
   244	function C009(ctx: AuditContext): ResultatControle {
   245	  const ref = 'C-009', nom = 'Utilisation comptes OHADA'
   246	  const interdits: string[] = []
   247	  const planMap = new Map(PLAN_SYSCOHADA_REVISE.map(c => [c.numero, c]))
   248	
   249	  for (const line of ctx.balanceN) {
   250	    const num = line.compte.toString().trim()
   251	    // Chercher correspondance exacte ou par prefixes
   252	    for (let len = Math.min(num.length, 4); len >= 2; len--) {
   253	      const prefix = num.substring(0, len)
   254	      const compte = planMap.get(prefix)
   255	      if (compte && compte.utilisation === 'INTERDIT') {
   256	        interdits.push(`${num} (${compte.libelle} - usage interdit)`)
   257	        break
   258	      }
   259	    }
   260	  }
   261	
   262	  if (interdits.length > 0) {
   263	    return anomalie(ref, nom, 'MAJEUR',
   264	      `${interdits.length} compte(s) utilise(s) malgre usage interdit dans le plan SYSCOHADA`,
   265	      { comptes: interdits.slice(0, 15) },
   266	      'Remplacer ces comptes par les comptes autorises correspondants',
   267	      'Plan SYSCOHADA Revise 2017 - Regles d\'utilisation')
   268	  }
   269	  return ok(ref, nom, 'Aucun compte a usage interdit detecte')
   270	}
   271	
   272	// C-010: Verification sens des comptes (debiteur vs crediteur)
   273	function C010(ctx: AuditContext): ResultatControle {
   274	  const ref = 'C-010', nom = 'Sens comptes OHADA'
   275	  const inversions: string[] = []
   276	  const planMap = new Map(PLAN_SYSCOHADA_REVISE.map(c => [c.numero, c]))
   277	
   278	  for (const line of ctx.balanceN) {
   279	    const num = line.compte.toString().trim()
   280	    const soldeNet = (line.solde_debit || 0) - (line.solde_credit || 0)
   281	    if (Math.abs(soldeNet) < 0.01) continue
   282	
   283	    // Chercher le compte dans le plan
   284	    for (let len = Math.min(num.length, 4); len >= 2; len--) {
   285	      const prefix = num.substring(0, len)
   286	      const compte = planMap.get(prefix)
   287	      if (compte) {
   288	        const sensAttendu = compte.sens === 'DEBITEUR' ? 'positif' : 'negatif'
   289	        const sensReel = soldeNet > 0 ? 'positif' : 'negatif'
   290	        if (sensAttendu !== sensReel) {
   291	          inversions.push(`${num} (${compte.libelle}): solde ${sensReel} au lieu de ${sensAttendu}`)
   292	        }
   293	        break
   294	      }
   295	    }
   296	  }
   297	
   298	  if (inversions.length > 5) {
   299	    return anomalie(ref, nom, 'MINEUR',
   300	      `${inversions.length} compte(s) avec solde inverse par rapport au sens OHADA attendu`,
   301	      { comptes: inversions.slice(0, 15) },
   302	      'Verifier les soldes anormaux - un solde inverse peut indiquer une erreur de comptabilisation',
   303	      'Plan SYSCOHADA Revise 2017 - Sens des comptes')
   304	  }
   305	  if (inversions.length > 0) {
   306	    return anomalie(ref, nom, 'INFO',
   307	      `${inversions.length} compte(s) avec solde inverse (peut etre normal)`,
   308	      { comptes: inversions.slice(0, 10) })
   309	  }
   310	  return ok(ref, nom, 'Sens des comptes conformes aux attentes OHADA')
   311	}
   312	
   313	// --- Enregistrement ---
   314	
   315	export function registerLevel2Controls(): void {
   316	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   317	    ['C-001', 'Comptes OHADA valides', 'Verifie la conformite des comptes au plan SYSCOHADA', 'MAJEUR', C001],
   318	    ['C-002', 'Classes valides (1-8)', 'Verifie que les classes sont valides', 'BLOQUANT', C002],
   319	    ['C-003', 'Longueur comptes standard', 'Verifie la longueur des numeros de compte', 'INFO', C003],
   320	    ['C-004', 'Comptes obsoletes SYSCOA', 'Detecte les comptes de l\'ancien SYSCOA', 'MAJEUR', C004],
   321	    ['C-005', 'Comptes TAFIRE supprimes', 'Detecte les comptes TAFIRE obsoletes', 'MAJEUR', C005],
   322	    ['C-006', 'Mapping etats financiers', 'Verifie le mapping vers les etats financiers', 'MAJEUR', C006],
   323	    ['C-007', 'Comptes a 2 chiffres', 'Detecte les comptes trop synthetiques', 'MINEUR', C007],
   324	    ['C-008', 'Comptes speciaux classe 8', 'Signale les comptes HAO', 'INFO', C008],
   325	    ['C-009', 'Utilisation comptes OHADA', 'Detecte les comptes a usage interdit', 'MAJEUR', C009],
   326	    ['C-010', 'Sens comptes OHADA', 'Verifie le sens des soldes selon le plan', 'MINEUR', C010],
   327	  ]
   328	
   329	  for (const [ref, nom, desc, sev, fn] of defs) {
   330	    controlRegistry.register(
   331	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_1', actif: true },
   332	      fn
   333	    )
   334	  }
   335	}

================================================================================
FILE: src/services/audit/controls/level3-balance-sense.ts
================================================================================
     1	/**
     2	 * Niveau 3 - Sens de solde et montants (SS-001 a SS-010, MA-001 a MA-006)
     3	 * 16 controles verifiant le sens des soldes et les montants aberrants
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle, EcritureComptable } from '@/types/audit.types'
     7	import { BalanceEntry } from '@/services/liasseDataService'
     8	import { controlRegistry } from '../controlRegistry'
     9	
    10	const NIVEAU: NiveauControle = 3
    11	
    12	function ok(ref: string, nom: string, msg: string): ResultatControle {
    13	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    14	}
    15	
    16	function anomalie(
    17	  ref: string, nom: string, sev: ResultatControle['severite'], msg: string,
    18	  det?: ResultatControle['details'], sug?: string,
    19	  ecr?: EcritureComptable[], refR?: string
    20	): ResultatControle {
    21	  return { ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite: sev, message: msg,
    22	    details: det, suggestion: sug, ecrituresCorrectives: ecr,
    23	    referenceReglementaire: refR, timestamp: new Date().toISOString() }
    24	}
    25	
    26	function solde(l: BalanceEntry): number {
    27	  return (l.solde_debit || 0) - (l.solde_credit || 0)
    28	}
    29	
    30	function findByPrefix(bal: BalanceEntry[], prefix: string): BalanceEntry[] {
    31	  return bal.filter((l) => l.compte.toString().startsWith(prefix))
    32	}
    33	
    34	function totalBilan(bal: BalanceEntry[]): number {
    35	  // Total actif uniquement (comptes classes 1-5 √† solde d√©biteur)
    36	  return bal
    37	    .filter((l) => { const cl = parseInt(l.compte.charAt(0)); return cl >= 1 && cl <= 5 })
    38	    .reduce((s, l) => { const sd = solde(l); return s + (sd > 0 ? sd : 0) }, 0)
    39	}
    40	
    41	// --- Controles de sens SS-001 a SS-010 ---
    42	
    43	function checkSensClasse(ctx: AuditContext, ref: string, nom: string, prefix: string, sensAttendu: 'DEBITEUR' | 'CREDITEUR', description: string): ResultatControle {
    44	  const entries = findByPrefix(ctx.balanceN, prefix)
    45	  const inverses: string[] = []
    46	  for (const l of entries) {
    47	    const s = solde(l)
    48	    if (sensAttendu === 'DEBITEUR' && s < -1) {
    49	      inverses.push(`${l.compte} (${l.intitule}): ${s.toLocaleString('fr-FR')}`)
    50	    }
    51	    if (sensAttendu === 'CREDITEUR' && s > 1) {
    52	      inverses.push(`${l.compte} (${l.intitule}): ${s.toLocaleString('fr-FR')}`)
    53	    }
    54	  }
    55	  if (inverses.length > 0) {
    56	    return anomalie(ref, nom, 'MINEUR',
    57	      `${inverses.length} compte(s) ${prefix}x a sens inverse (${description})`,
    58	      { comptes: inverses.slice(0, 10) },
    59	      `Les comptes ${prefix}x sont normalement ${sensAttendu === 'DEBITEUR' ? 'debiteurs' : 'crediteurs'}`)
    60	  }
    61	  return ok(ref, nom, `Tous les comptes ${prefix}x ont un sens normal`)
    62	}
    63	
    64	// SS-001: Immobilisations (classe 2) normalement debitrices
    65	function SS001(ctx: AuditContext): ResultatControle {
    66	  return checkSensClasse(ctx, 'SS-001', 'Sens immobilisations', '2', 'DEBITEUR', 'immobilisations creditrices')
    67	}
    68	
    69	// SS-002: Stocks (classe 3) normalement debiteurs
    70	function SS002(ctx: AuditContext): ResultatControle {
    71	  return checkSensClasse(ctx, 'SS-002', 'Sens stocks', '3', 'DEBITEUR', 'stocks crediteurs')
    72	}
    73	
    74	// SS-003: Charges (classe 6) normalement debitrices
    75	function SS003(ctx: AuditContext): ResultatControle {
    76	  return checkSensClasse(ctx, 'SS-003', 'Sens charges', '6', 'DEBITEUR', 'charges creditrices')
    77	}
    78	
    79	// SS-004: Produits (classe 7) normalement crediteurs
    80	function SS004(ctx: AuditContext): ResultatControle {
    81	  return checkSensClasse(ctx, 'SS-004', 'Sens produits', '7', 'CREDITEUR', 'produits debiteurs')
    82	}
    83	
    84	// SS-005: Clients (411x) normalement debiteurs ‚Üí reclassement si crediteur
    85	function SS005(ctx: AuditContext): ResultatControle {
    86	  const ref = 'SS-005', nom = 'Clients crediteurs'
    87	  const clients = findByPrefix(ctx.balanceN, '411')
    88	  const crediteurs: string[] = []
    89	  let montantReclass = 0
    90	  for (const l of clients) {
    91	    const s = solde(l)
    92	    if (s < -1) {
    93	      crediteurs.push(`${l.compte}: ${s.toLocaleString('fr-FR')}`)
    94	      montantReclass += Math.abs(s)
    95	    }
    96	  }
    97	  if (crediteurs.length > 0) {
    98	    return anomalie(ref, nom, 'MINEUR',
    99	      `${crediteurs.length} client(s) crediteur(s) pour ${montantReclass.toLocaleString('fr-FR')} FCFA`,
   100	      { comptes: crediteurs, montants: { montantReclassement: montantReclass } },
   101	      'Reclasser au passif (avances recues) ou verifier les avoirs non imputes',
   102	      [{
   103	        journal: 'OD', date: new Date().toISOString().slice(0, 10),
   104	        lignes: [
   105	          { sens: 'D' as const, compte: '411000', libelle: 'Clients - reclassement', montant: montantReclass },
   106	          { sens: 'C' as const, compte: '419000', libelle: 'Clients crediteurs (passif)', montant: montantReclass },
   107	        ],
   108	        commentaire: 'Reclassement clients crediteurs au passif'
   109	      }])
   110	  }
   111	  return ok(ref, nom, 'Tous les clients sont debiteurs')
   112	}
   113	
   114	// SS-006: Fournisseurs (401x) normalement crediteurs ‚Üí reclassement si debiteur
   115	function SS006(ctx: AuditContext): ResultatControle {
   116	  const ref = 'SS-006', nom = 'Fournisseurs debiteurs'
   117	  const fournis = findByPrefix(ctx.balanceN, '401')
   118	  const debiteurs: string[] = []
   119	  let montantReclass = 0
   120	  for (const l of fournis) {
   121	    const s = solde(l)
   122	    if (s > 1) {
   123	      debiteurs.push(`${l.compte}: ${s.toLocaleString('fr-FR')}`)
   124	      montantReclass += s
   125	    }
   126	  }
   127	  if (debiteurs.length > 0) {
   128	    return anomalie(ref, nom, 'MINEUR',
   129	      `${debiteurs.length} fournisseur(s) debiteur(s) pour ${montantReclass.toLocaleString('fr-FR')} FCFA`,
   130	      { comptes: debiteurs, montants: { montantReclassement: montantReclass } },
   131	      'Reclasser a l\'actif (avances versees) ou verifier les avoirs',
   132	      [{
   133	        journal: 'OD', date: new Date().toISOString().slice(0, 10),
   134	        lignes: [
   135	          { sens: 'D' as const, compte: '409000', libelle: 'Fournisseurs debiteurs (actif)', montant: montantReclass },
   136	          { sens: 'C' as const, compte: '401000', libelle: 'Fournisseurs - reclassement', montant: montantReclass },
   137	        ],
   138	        commentaire: 'Reclassement fournisseurs debiteurs a l\'actif'
   139	      }])
   140	  }
   141	  return ok(ref, nom, 'Tous les fournisseurs sont crediteurs')
   142	}
   143	
   144	// SS-007: Banques (52x) normalement debitrices ‚Üí reclassement si creditrice
   145	function SS007(ctx: AuditContext): ResultatControle {
   146	  const ref = 'SS-007', nom = 'Banques creditrices'
   147	  const banques = findByPrefix(ctx.balanceN, '52')
   148	  const creditrices: string[] = []
   149	  let montantReclass = 0
   150	  for (const l of banques) {
   151	    const s = solde(l)
   152	    if (s < -1) {
   153	      creditrices.push(`${l.compte}: ${s.toLocaleString('fr-FR')}`)
   154	      montantReclass += Math.abs(s)
   155	    }
   156	  }
   157	  if (creditrices.length > 0) {
   158	    return anomalie(ref, nom, 'MINEUR',
   159	      `${creditrices.length} banque(s) creditrice(s) pour ${montantReclass.toLocaleString('fr-FR')} FCFA (decouvert)`,
   160	      { comptes: creditrices, montants: { montantReclassement: montantReclass } },
   161	      'Reclasser en tresorerie-passif (concours bancaires)')
   162	  }
   163	  return ok(ref, nom, 'Toutes les banques sont debitrices')
   164	}
   165	
   166	// SS-008: Amortissements (28x) normalement crediteurs
   167	function SS008(ctx: AuditContext): ResultatControle {
   168	  return checkSensClasse(ctx, 'SS-008', 'Sens amortissements', '28', 'CREDITEUR', 'amortissements debiteurs')
   169	}
   170	
   171	// SS-009: Provisions (29x/39x/49x) normalement creditrices
   172	function SS009(ctx: AuditContext): ResultatControle {
   173	  const ref = 'SS-009', nom = 'Sens provisions'
   174	  const prefixes = ['29', '39', '49']
   175	  const inverses: string[] = []
   176	  for (const prefix of prefixes) {
   177	    for (const l of findByPrefix(ctx.balanceN, prefix)) {
   178	      if (solde(l) > 1) {
   179	        inverses.push(`${l.compte}: ${solde(l).toLocaleString('fr-FR')}`)
   180	      }
   181	    }
   182	  }
   183	  if (inverses.length > 0) {
   184	    return anomalie(ref, nom, 'MINEUR',
   185	      `${inverses.length} provision(s) a sens inverse`,
   186	      { comptes: inverses.slice(0, 10) })
   187	  }
   188	  return ok(ref, nom, 'Toutes les provisions ont un sens normal')
   189	}
   190	
   191	// SS-010: Capital negatif
   192	function SS010(ctx: AuditContext): ResultatControle {
   193	  const ref = 'SS-010', nom = 'Capital negatif'
   194	  const capital = findByPrefix(ctx.balanceN, '101')
   195	  const montant = capital.reduce((s, l) => s + (l.credit - l.debit), 0)
   196	  if (montant < 0) {
   197	    return anomalie(ref, nom, 'MAJEUR',
   198	      `Capital social negatif: ${montant.toLocaleString('fr-FR')} FCFA`,
   199	      { montants: { capitalSocial: montant } },
   200	      'Un capital negatif est anormal et doit etre corrige')
   201	  }
   202	  return ok(ref, nom, `Capital social positif: ${montant.toLocaleString('fr-FR')} FCFA`)
   203	}
   204	
   205	// --- Controles de montants MA-001 a MA-006 ---
   206	
   207	// MA-001: Montant > 50% total bilan
   208	function MA001(ctx: AuditContext): ResultatControle {
   209	  const ref = 'MA-001', nom = 'Concentration montants'
   210	  const tb = totalBilan(ctx.balanceN)
   211	  if (tb === 0) return ok(ref, nom, 'Bilan nul')
   212	  const concentres: string[] = []
   213	  for (const l of ctx.balanceN) {
   214	    const cl = parseInt(l.compte.charAt(0))
   215	    if (cl >= 1 && cl <= 5 && Math.abs(solde(l)) > tb * 0.5) {
   216	      concentres.push(`${l.compte}: ${Math.abs(solde(l)).toLocaleString('fr-FR')} (${((Math.abs(solde(l)) / tb) * 100).toFixed(1)}%)`)
   217	    }
   218	  }
   219	  if (concentres.length > 0) {
   220	    return anomalie(ref, nom, 'MINEUR',
   221	      `${concentres.length} compte(s) representant plus de 50% du total bilan`,
   222	      { comptes: concentres },
   223	      'Forte concentration - verifier la repartition des postes')
   224	  }
   225	  return ok(ref, nom, 'Pas de concentration excessive')
   226	}
   227	
   228	// MA-002: Centimes suspects
   229	function MA002(ctx: AuditContext): ResultatControle {
   230	  const ref = 'MA-002', nom = 'Centimes suspects'
   231	  const suspects: string[] = []
   232	  for (const l of ctx.balanceN) {
   233	    for (const montant of [l.debit, l.credit]) {
   234	      if (montant > 0) {
   235	        const cents = Math.round((montant % 1) * 100)
   236	        if (cents === 1 || cents === 99) {
   237	          suspects.push(`${l.compte}: ${montant}`)
   238	        }
   239	      }
   240	    }
   241	  }
   242	  if (suspects.length > 3) {
   243	    return anomalie(ref, nom, 'INFO',
   244	      `${suspects.length} montant(s) avec centimes suspects (.01 ou .99)`,
   245	      { comptes: suspects.slice(0, 10) },
   246	      'Montants en .01 ou .99 peuvent indiquer des erreurs d\'arrondi')
   247	  }
   248	  return ok(ref, nom, 'Pas de centimes suspects')
   249	}
   250	
   251	// MA-003: Montant negatif
   252	function MA003(ctx: AuditContext): ResultatControle {
   253	  const ref = 'MA-003', nom = 'Montants negatifs'
   254	  const negatifs: string[] = []
   255	  for (const l of ctx.balanceN) {
   256	    if (l.debit < 0 || l.credit < 0) {
   257	      negatifs.push(`${l.compte}: D=${l.debit}, C=${l.credit}`)
   258	    }
   259	  }
   260	  if (negatifs.length > 0) {
   261	    return anomalie(ref, nom, 'MINEUR',
   262	      `${negatifs.length} ligne(s) avec montants negatifs en debit/credit`,
   263	      { comptes: negatifs.slice(0, 10) },
   264	      'Les montants en debit et credit doivent etre positifs (utiliser le sens oppose)')
   265	  }
   266	  return ok(ref, nom, 'Aucun montant negatif')
   267	}
   268	
   269	// MA-004: Resultat deficitaire > 50% capital
   270	function MA004(ctx: AuditContext): ResultatControle {
   271	  const ref = 'MA-004', nom = 'Deficit vs capital'
   272	  const capital = findByPrefix(ctx.balanceN, '101').reduce((s, l) => s + (l.credit - l.debit), 0)
   273	  const resultat = findByPrefix(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   274	  if (capital > 0 && resultat < 0 && Math.abs(resultat) > capital * 0.5) {
   275	    return anomalie(ref, nom, 'INFO',
   276	      `Deficit (${resultat.toLocaleString('fr-FR')}) depasse 50% du capital (${capital.toLocaleString('fr-FR')})`,
   277	      { montants: { resultat, capital, ratio: ((Math.abs(resultat) / capital) * 100) } },
   278	      'Un deficit important peut signaler une situation de continuite d\'exploitation delicate')
   279	  }
   280	  return ok(ref, nom, 'Deficit dans les limites acceptables')
   281	}
   282	
   283	// MA-005: Capitaux propres negatifs
   284	function MA005(ctx: AuditContext): ResultatControle {
   285	  const ref = 'MA-005', nom = 'Capitaux propres negatifs'
   286	  const classes1 = ctx.balanceN.filter((l) => {
   287	    const num = l.compte.toString()
   288	    return num.startsWith('10') || num.startsWith('11') || num.startsWith('12') || num.startsWith('13') || num.startsWith('14')
   289	  })
   290	  const capitauxPropres = classes1.reduce((s, l) => s + ((l.credit || 0) - (l.debit || 0)), 0)
   291	  if (capitauxPropres < 0) {
   292	    return anomalie(ref, nom, 'MAJEUR',
   293	      `Capitaux propres negatifs: ${capitauxPropres.toLocaleString('fr-FR')} FCFA`,
   294	      { montants: { capitauxPropres } },
   295	      'Situation d\'alerte - obligation legale de regulariser sous 2 ans (Art. 664 AUSCGIE)',
   296	      undefined,
   297	      'Art. 664 AUSCGIE')
   298	  }
   299	  return ok(ref, nom, `Capitaux propres positifs: ${capitauxPropres.toLocaleString('fr-FR')} FCFA`)
   300	}
   301	
   302	// MA-006: Tresorerie nette tres negative
   303	function MA006(ctx: AuditContext): ResultatControle {
   304	  const ref = 'MA-006', nom = 'Tresorerie nette'
   305	  const tresoActif = findByPrefix(ctx.balanceN, '5').reduce((s, l) => s + Math.max(0, solde(l)), 0)
   306	  const tresoPassif = findByPrefix(ctx.balanceN, '5').reduce((s, l) => s + Math.max(0, -solde(l)), 0)
   307	  const tresoNette = tresoActif - tresoPassif
   308	  const tb = totalBilan(ctx.balanceN)
   309	  if (tb > 0 && tresoNette < 0 && Math.abs(tresoNette) > tb * 0.3) {
   310	    return anomalie(ref, nom, 'INFO',
   311	      `Tresorerie nette tres negative: ${tresoNette.toLocaleString('fr-FR')} FCFA (${((Math.abs(tresoNette) / tb) * 100).toFixed(1)}% du bilan)`,
   312	      { montants: { tresoNette, tresoActif, tresoPassif } },
   313	      'Risque de tension de tresorerie importante')
   314	  }
   315	  return ok(ref, nom, `Tresorerie nette: ${tresoNette.toLocaleString('fr-FR')} FCFA`)
   316	}
   317	
   318	// --- Enregistrement ---
   319	
   320	export function registerLevel3Controls(): void {
   321	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   322	    ['SS-001', 'Sens immobilisations', 'Verifie le sens debiteur des immobilisations', 'MINEUR', SS001],
   323	    ['SS-002', 'Sens stocks', 'Verifie le sens debiteur des stocks', 'MINEUR', SS002],
   324	    ['SS-003', 'Sens charges', 'Verifie le sens debiteur des charges', 'MINEUR', SS003],
   325	    ['SS-004', 'Sens produits', 'Verifie le sens crediteur des produits', 'MINEUR', SS004],
   326	    ['SS-005', 'Clients crediteurs', 'Detecte les clients a solde crediteur', 'MINEUR', SS005],
   327	    ['SS-006', 'Fournisseurs debiteurs', 'Detecte les fournisseurs a solde debiteur', 'MINEUR', SS006],
   328	    ['SS-007', 'Banques creditrices', 'Detecte les banques a solde crediteur', 'MINEUR', SS007],
   329	    ['SS-008', 'Sens amortissements', 'Verifie le sens crediteur des amortissements', 'MINEUR', SS008],
   330	    ['SS-009', 'Sens provisions', 'Verifie le sens crediteur des provisions', 'MINEUR', SS009],
   331	    ['SS-010', 'Capital negatif', 'Detecte un capital social negatif', 'MAJEUR', SS010],
   332	    ['MA-001', 'Concentration montants', 'Detecte les comptes > 50% du bilan', 'MINEUR', MA001],
   333	    ['MA-002', 'Centimes suspects', 'Detecte les montants en .01 ou .99', 'INFO', MA002],
   334	    ['MA-003', 'Montants negatifs', 'Detecte les montants negatifs en D/C', 'MINEUR', MA003],
   335	    ['MA-004', 'Deficit vs capital', 'Verifie deficit < 50% capital', 'INFO', MA004],
   336	    ['MA-005', 'Capitaux propres negatifs', 'Detecte des capitaux propres negatifs', 'MAJEUR', MA005],
   337	    ['MA-006', 'Tresorerie nette', 'Verifie la tresorerie nette', 'INFO', MA006],
   338	  ]
   339	
   340	  for (const [ref, nom, desc, sev, fn] of defs) {
   341	    controlRegistry.register(
   342	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_1', actif: true },
   343	      fn
   344	    )
   345	  }
   346	}

================================================================================
FILE: src/services/audit/controls/level4-inter-account.ts
================================================================================
     1	/**
     2	 * Niveau 4 - Controles inter-comptes (IC-001 a IC-019)
     3	 * 19 controles verifiant la coherence entre comptes lies
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle } from '@/types/audit.types'
     7	import { BalanceEntry } from '@/services/liasseDataService'
     8	import { controlRegistry } from '../controlRegistry'
     9	
    10	const NIVEAU: NiveauControle = 4
    11	
    12	function ok(ref: string, nom: string, msg: string): ResultatControle {
    13	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    14	}
    15	
    16	function anomalie(
    17	  ref: string, nom: string, sev: ResultatControle['severite'], msg: string,
    18	  det?: ResultatControle['details'], sug?: string, refR?: string
    19	): ResultatControle {
    20	  return { ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite: sev, message: msg,
    21	    details: det, suggestion: sug, referenceReglementaire: refR,
    22	    timestamp: new Date().toISOString() }
    23	}
    24	
    25	function na(ref: string, nom: string, msg: string): ResultatControle {
    26	  return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    27	}
    28	
    29	function find(bal: BalanceEntry[], prefix: string): BalanceEntry[] {
    30	  return bal.filter((l) => l.compte.toString().startsWith(prefix))
    31	}
    32	function solde(l: BalanceEntry): number { return (l.solde_debit || 0) - (l.solde_credit || 0) }
    33	function absSum(entries: BalanceEntry[]): number { return entries.reduce((s, l) => s + Math.abs(solde(l)), 0) }
    34	
    35	// IC-001: Amortissements <= valeur brute (28x <= 2x)
    36	function IC001(ctx: AuditContext): ResultatControle {
    37	  const ref = 'IC-001', nom = 'Amortissements <= valeur brute'
    38	  // Pour chaque sous-classe 2x, verifier que 28x <= 2x
    39	  const anomalies: string[] = []
    40	  for (let i = 0; i <= 9; i++) {
    41	    const brut = find(ctx.balanceN, `2${i}`).filter((l) => !l.compte.startsWith('28') && !l.compte.startsWith('29'))
    42	    const amort = find(ctx.balanceN, `28${i}`)
    43	    if (brut.length > 0 && amort.length > 0) {
    44	      const valBrut = brut.reduce((s, l) => s + Math.abs(solde(l)), 0)
    45	      const valAmort = amort.reduce((s, l) => s + Math.abs(solde(l)), 0)
    46	      if (valAmort > valBrut + 1) {
    47	        anomalies.push(`Classe 2${i}: Amort(${valAmort.toLocaleString('fr-FR')}) > Brut(${valBrut.toLocaleString('fr-FR')})`)
    48	      }
    49	    }
    50	  }
    51	  if (anomalies.length > 0) {
    52	    return anomalie(ref, nom, 'BLOQUANT',
    53	      `Amortissements depassant la valeur brute`,
    54	      { comptes: anomalies, ecart: anomalies.length },
    55	      'Les amortissements cumules ne peuvent depasser la valeur brute d\'acquisition',
    56	      'Art. 45 Acte Uniforme OHADA')
    57	  }
    58	  return ok(ref, nom, 'Amortissements coherents avec les valeurs brutes')
    59	}
    60	
    61	// IC-002: Immobilisation sans amortissement
    62	function IC002(ctx: AuditContext): ResultatControle {
    63	  const ref = 'IC-002', nom = 'Immobilisation sans amortissement'
    64	  const amortissables = ['21', '23', '24', '245']
    65	  const sansAmort: string[] = []
    66	  for (const prefix of amortissables) {
    67	    const immob = find(ctx.balanceN, prefix).filter((l) => !l.compte.startsWith('28') && !l.compte.startsWith('29') && solde(l) > 0)
    68	    if (immob.length > 0) {
    69	      const amortPrefix = '28' + prefix.substring(1)
    70	      const amort = find(ctx.balanceN, amortPrefix)
    71	      if (amort.length === 0) {
    72	        sansAmort.push(`${prefix}x (${immob.length} comptes, pas d'amortissement ${amortPrefix}x)`)
    73	      }
    74	    }
    75	  }
    76	  if (sansAmort.length > 0) {
    77	    return anomalie(ref, nom, 'MINEUR',
    78	      `Immobilisations sans amortissement correspondant`,
    79	      { comptes: sansAmort },
    80	      'Verifier que les dotations aux amortissements sont bien comptabilisees')
    81	  }
    82	  return ok(ref, nom, 'Toutes les immobilisations ont des amortissements')
    83	}
    84	
    85	// IC-003: Amortissement sans immobilisation
    86	function IC003(ctx: AuditContext): ResultatControle {
    87	  const ref = 'IC-003', nom = 'Amortissement sans immobilisation'
    88	  const orphelins: string[] = []
    89	  const amort28 = find(ctx.balanceN, '28')
    90	  for (const a of amort28) {
    91	    const immobPrefix = '2' + a.compte.substring(2)
    92	    const immob = ctx.balanceN.find((l) => l.compte.startsWith(immobPrefix.substring(0, 3)) && !l.compte.startsWith('28') && !l.compte.startsWith('29'))
    93	    if (!immob && Math.abs(solde(a)) > 0) {
    94	      orphelins.push(`${a.compte}: ${Math.abs(solde(a)).toLocaleString('fr-FR')}`)
    95	    }
    96	  }
    97	  if (orphelins.length > 0) {
    98	    return anomalie(ref, nom, 'MAJEUR',
    99	      `${orphelins.length} amortissement(s) sans immobilisation correspondante`,
   100	      { comptes: orphelins.slice(0, 10) },
   101	      'Amortissements orphelins a regulariser')
   102	  }
   103	  return ok(ref, nom, 'Tous les amortissements ont une immobilisation')
   104	}
   105	
   106	// IC-004: Dotation coherente avec variation amortissements
   107	function IC004(ctx: AuditContext): ResultatControle {
   108	  const ref = 'IC-004', nom = 'Dotation vs variation amortissements'
   109	  const dot681 = absSum(find(ctx.balanceN, '681'))
   110	  const dot682 = absSum(find(ctx.balanceN, '682'))
   111	  const totalDotations = dot681 + dot682
   112	  if (totalDotations === 0 && absSum(find(ctx.balanceN, '28')) > 0) {
   113	    return anomalie(ref, nom, 'MINEUR',
   114	      'Amortissements au bilan sans dotation au resultat (681/682)',
   115	      { montants: { dotations: 0, amortissementsBilan: absSum(find(ctx.balanceN, '28')) } },
   116	      'Verifier que les dotations aux amortissements sont comptabilisees')
   117	  }
   118	  return ok(ref, nom, `Dotations amortissements: ${totalDotations.toLocaleString('fr-FR')} FCFA`)
   119	}
   120	
   121	// IC-005: Depreciation <= valeur brute (29x/39x/49x)
   122	function IC005(ctx: AuditContext): ResultatControle {
   123	  const ref = 'IC-005', nom = 'Depreciations <= valeur brute'
   124	  const checks = [
   125	    { deprec: '29', brut: '2', label: 'Immobilisations' },
   126	    { deprec: '39', brut: '3', label: 'Stocks' },
   127	    { deprec: '49', brut: '4', label: 'Tiers' },
   128	  ]
   129	  const problemes: string[] = []
   130	  for (const { deprec, brut, label } of checks) {
   131	    const valBrut = find(ctx.balanceN, brut).filter((l) => !l.compte.startsWith('28') && !l.compte.startsWith('29') && !l.compte.startsWith('39') && !l.compte.startsWith('49')).reduce((s, l) => s + Math.abs(solde(l)), 0)
   132	    const valDeprec = find(ctx.balanceN, deprec).reduce((s, l) => s + Math.abs(solde(l)), 0)
   133	    if (valDeprec > valBrut + 1 && valBrut > 0) {
   134	      problemes.push(`${label}: Deprec(${valDeprec.toLocaleString('fr-FR')}) > Brut(${valBrut.toLocaleString('fr-FR')})`)
   135	    }
   136	  }
   137	  if (problemes.length > 0) {
   138	    return anomalie(ref, nom, 'BLOQUANT',
   139	      'Depreciations depassant la valeur brute',
   140	      { comptes: problemes })
   141	  }
   142	  return ok(ref, nom, 'Depreciations coherentes')
   143	}
   144	
   145	// IC-006: Dotation provisions coherente
   146	function IC006(ctx: AuditContext): ResultatControle {
   147	  const ref = 'IC-006', nom = 'Dotation provisions coherente'
   148	  const dot691 = absSum(find(ctx.balanceN, '691'))
   149	  const dot697 = absSum(find(ctx.balanceN, '697'))
   150	  const prov = absSum(find(ctx.balanceN, '19'))
   151	  if ((dot691 + dot697) === 0 && prov > 0) {
   152	    return anomalie(ref, nom, 'MINEUR',
   153	      `Provisions au bilan (${prov.toLocaleString('fr-FR')}) sans dotation (691/697)`,
   154	      { montants: { provisions: prov, dotations: 0 } })
   155	  }
   156	  return ok(ref, nom, 'Dotations provisions coherentes')
   157	}
   158	
   159	// IC-007: Provision > 10% total bilan
   160	function IC007(ctx: AuditContext): ResultatControle {
   161	  const ref = 'IC-007', nom = 'Provisions elevees'
   162	  const prov = absSum(find(ctx.balanceN, '19'))
   163	  const tb = ctx.balanceN.filter((l) => { const cl = parseInt(l.compte.charAt(0)); return cl >= 1 && cl <= 5 }).reduce((s, l) => s + Math.abs(solde(l)), 0) / 2
   164	  if (tb > 0 && prov > tb * 0.10) {
   165	    return anomalie(ref, nom, 'INFO',
   166	      `Provisions (${prov.toLocaleString('fr-FR')}) > 10% du bilan (${tb.toLocaleString('fr-FR')})`,
   167	      { montants: { provisions: prov, totalBilan: tb, ratio: (prov / tb * 100) } })
   168	  }
   169	  return ok(ref, nom, 'Provisions dans les limites')
   170	}
   171	
   172	// IC-008: Variation stocks coherente
   173	function IC008(ctx: AuditContext): ResultatControle {
   174	  const ref = 'IC-008', nom = 'Variation stocks coherente'
   175	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) return na(ref, nom, 'Balance N-1 absente')
   176	  const stocksN = absSum(find(ctx.balanceN, '3'))
   177	  const stocksN1 = absSum(find(ctx.balanceN1, '3'))
   178	  const variationBilan = stocksN - stocksN1
   179	  const var603 = find(ctx.balanceN, '603').reduce((s, l) => s + (l.debit - l.credit), 0)
   180	  const ecart = Math.abs(variationBilan + var603) // 603 est en sens inverse
   181	  if (ecart > Math.max(Math.abs(variationBilan) * 0.1, 10000)) {
   182	    return anomalie(ref, nom, 'MAJEUR',
   183	      `Variation stocks bilan (${variationBilan.toLocaleString('fr-FR')}) incoherente avec compte 603 (${var603.toLocaleString('fr-FR')})`,
   184	      { ecart, montants: { variationBilan, variation603: var603 } },
   185	      'La variation de stocks au bilan doit correspondre au compte 603 du resultat')
   186	  }
   187	  return ok(ref, nom, 'Variation stocks coherente')
   188	}
   189	
   190	// IC-009: Charges personnel vs dettes sociales
   191	function IC009(ctx: AuditContext): ResultatControle {
   192	  const ref = 'IC-009', nom = 'Personnel vs dettes sociales'
   193	  const chargesPerso = absSum(find(ctx.balanceN, '66'))
   194	  const dettesSociales = absSum(find(ctx.balanceN, '42'))
   195	  if (chargesPerso > 0 && dettesSociales === 0) {
   196	    return anomalie(ref, nom, 'INFO',
   197	      `Charges de personnel (${chargesPerso.toLocaleString('fr-FR')}) sans dettes sociales (42x)`,
   198	      { montants: { chargesPersonnel: chargesPerso } },
   199	      'En general, des charges de personnel impliquent des dettes sociales')
   200	  }
   201	  return ok(ref, nom, 'Coherence charges personnel / dettes sociales')
   202	}
   203	
   204	// IC-010: CA non nul mais pas de creances
   205	function IC010(ctx: AuditContext): ResultatControle {
   206	  const ref = 'IC-010', nom = 'CA vs creances clients'
   207	  const ca = absSum(find(ctx.balanceN, '70'))
   208	  const creances = absSum(find(ctx.balanceN, '411'))
   209	  if (ca > 0 && creances === 0) {
   210	    return anomalie(ref, nom, 'INFO',
   211	      `CA de ${ca.toLocaleString('fr-FR')} FCFA sans creances clients (411x)`,
   212	      { montants: { chiffreAffaires: ca } },
   213	      'Un CA significatif implique generalement des creances clients en cours')
   214	  }
   215	  return ok(ref, nom, 'CA et creances clients coherents')
   216	}
   217	
   218	// IC-011: Achats sans dettes fournisseurs
   219	function IC011(ctx: AuditContext): ResultatControle {
   220	  const ref = 'IC-011', nom = 'Achats vs dettes fournisseurs'
   221	  const achats = absSum([...find(ctx.balanceN, '601'), ...find(ctx.balanceN, '602')])
   222	  const fournisseurs = absSum(find(ctx.balanceN, '401'))
   223	  if (achats > 0 && fournisseurs === 0) {
   224	    return anomalie(ref, nom, 'INFO',
   225	      `Achats de ${achats.toLocaleString('fr-FR')} FCFA sans dettes fournisseurs (401x)`,
   226	      { montants: { achats } })
   227	  }
   228	  return ok(ref, nom, 'Achats et dettes fournisseurs coherents')
   229	}
   230	
   231	// IC-012: Interets vs emprunts
   232	function IC012(ctx: AuditContext): ResultatControle {
   233	  const ref = 'IC-012', nom = 'Interets vs emprunts'
   234	  const interets = absSum(find(ctx.balanceN, '67'))
   235	  const emprunts = absSum(find(ctx.balanceN, '16'))
   236	  if (interets > 0 && emprunts === 0) {
   237	    return anomalie(ref, nom, 'INFO',
   238	      `Charges financieres (${interets.toLocaleString('fr-FR')}) sans emprunts (16x)`,
   239	      { montants: { chargesFinancieres: interets } })
   240	  }
   241	  return ok(ref, nom, 'Interets et emprunts coherents')
   242	}
   243	
   244	// IC-013: Dotations amortissements vs immobilisations
   245	function IC013(ctx: AuditContext): ResultatControle {
   246	  const ref = 'IC-013', nom = 'Dotations vs immobilisations'
   247	  const dotations = absSum([...find(ctx.balanceN, '681'), ...find(ctx.balanceN, '682')])
   248	  const immob = find(ctx.balanceN, '2').filter((l) => !l.compte.startsWith('28') && !l.compte.startsWith('29')).reduce((s, l) => s + Math.max(0, solde(l)), 0)
   249	  if (immob > 0 && dotations === 0) {
   250	    return anomalie(ref, nom, 'MINEUR',
   251	      `Immobilisations (${immob.toLocaleString('fr-FR')}) sans dotations (681/682)`,
   252	      { montants: { immobilisations: immob, dotations: 0 } })
   253	  }
   254	  if (immob > 0 && dotations > immob * 0.5) {
   255	    return anomalie(ref, nom, 'INFO',
   256	      `Dotations (${dotations.toLocaleString('fr-FR')}) > 50% des immobilisations (${immob.toLocaleString('fr-FR')})`,
   257	      { montants: { immobilisations: immob, dotations } })
   258	  }
   259	  return ok(ref, nom, 'Dotations et immobilisations coherentes')
   260	}
   261	
   262	// IC-014: Impot vs resultat beneficiaire
   263	function IC014(ctx: AuditContext): ResultatControle {
   264	  const ref = 'IC-014', nom = 'Impot vs resultat'
   265	  const resultat = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   266	  const impot = absSum(find(ctx.balanceN, '89'))
   267	  if (resultat > 0 && impot === 0) {
   268	    return anomalie(ref, nom, 'MINEUR',
   269	      `Resultat beneficiaire (${resultat.toLocaleString('fr-FR')}) sans impot (89x)`,
   270	      { montants: { resultat } },
   271	      'Un resultat beneficiaire doit normalement donner lieu a un impot')
   272	  }
   273	  return ok(ref, nom, 'Coherence resultat / impot')
   274	}
   275	
   276	// IC-015: TVA collectee vs CA
   277	function IC015(ctx: AuditContext): ResultatControle {
   278	  const ref = 'IC-015', nom = 'TVA collectee vs CA'
   279	  const ca = absSum(find(ctx.balanceN, '70'))
   280	  const tvaCollectee = absSum(find(ctx.balanceN, '443'))
   281	  if (ca > 0 && tvaCollectee === 0) {
   282	    return anomalie(ref, nom, 'MINEUR',
   283	      `CA de ${ca.toLocaleString('fr-FR')} sans TVA collectee (443x)`,
   284	      { montants: { ca, tvaCollectee: 0 } },
   285	      'Verifier le regime de TVA')
   286	  }
   287	  if (ca > 0 && tvaCollectee > 0) {
   288	    const ratio = (tvaCollectee / ca) * 100
   289	    if (ratio > 25 || ratio < 10) {
   290	      return anomalie(ref, nom, 'INFO',
   291	        `Ratio TVA/CA atypique: ${ratio.toFixed(1)}%`,
   292	        { montants: { ca, tvaCollectee, ratioPct: ratio } })
   293	    }
   294	  }
   295	  return ok(ref, nom, 'TVA collectee coherente avec le CA')
   296	}
   297	
   298	// IC-016: TVA deductible vs achats
   299	function IC016(ctx: AuditContext): ResultatControle {
   300	  const ref = 'IC-016', nom = 'TVA deductible vs achats'
   301	  const achats = absSum([...find(ctx.balanceN, '60'), ...find(ctx.balanceN, '61'), ...find(ctx.balanceN, '62')])
   302	  const tvaDed = absSum(find(ctx.balanceN, '445'))
   303	  if (achats > 0 && tvaDed === 0) {
   304	    return anomalie(ref, nom, 'INFO',
   305	      `Achats/services (${achats.toLocaleString('fr-FR')}) sans TVA deductible (445x)`,
   306	      { montants: { achats, tvaDeductible: 0 } })
   307	  }
   308	  return ok(ref, nom, 'TVA deductible coherente')
   309	}
   310	
   311	// IC-017: Effets a recevoir vs clients
   312	function IC017(ctx: AuditContext): ResultatControle {
   313	  const ref = 'IC-017', nom = 'Effets a recevoir vs clients'
   314	  const effets = absSum(find(ctx.balanceN, '412'))
   315	  const clients = absSum(find(ctx.balanceN, '411'))
   316	  if (effets > 0 && clients === 0) {
   317	    return anomalie(ref, nom, 'INFO',
   318	      `Effets a recevoir (${effets.toLocaleString('fr-FR')}) sans clients (411x)`,
   319	      { montants: { effetsRecevoir: effets } })
   320	  }
   321	  return ok(ref, nom, 'Effets et clients coherents')
   322	}
   323	
   324	// IC-018: Effets a payer vs fournisseurs
   325	function IC018(ctx: AuditContext): ResultatControle {
   326	  const ref = 'IC-018', nom = 'Effets a payer vs fournisseurs'
   327	  const effets = absSum(find(ctx.balanceN, '402'))
   328	  const fournisseurs = absSum(find(ctx.balanceN, '401'))
   329	  if (effets > 0 && fournisseurs === 0) {
   330	    return anomalie(ref, nom, 'INFO',
   331	      `Effets a payer (${effets.toLocaleString('fr-FR')}) sans fournisseurs (401x)`,
   332	      { montants: { effetsPayer: effets } })
   333	  }
   334	  return ok(ref, nom, 'Effets et fournisseurs coherents')
   335	}
   336	
   337	// IC-019: Subventions bilan vs produits
   338	function IC019(ctx: AuditContext): ResultatControle {
   339	  const ref = 'IC-019', nom = 'Subventions bilan vs produits'
   340	  const subvBilan = absSum(find(ctx.balanceN, '14'))
   341	  const subvProduit = absSum(find(ctx.balanceN, '71'))
   342	  if (subvBilan > 0 && subvProduit === 0) {
   343	    return anomalie(ref, nom, 'INFO',
   344	      `Subventions au bilan (${subvBilan.toLocaleString('fr-FR')}) sans reprise au resultat (71x)`,
   345	      { montants: { subventionsBilan: subvBilan } },
   346	      'Les subventions d\'investissement doivent etre reprises au resultat')
   347	  }
   348	  return ok(ref, nom, 'Subventions bilan et produits coherents')
   349	}
   350	
   351	// --- Enregistrement ---
   352	
   353	export function registerLevel4Controls(): void {
   354	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   355	    ['IC-001', 'Amortissements <= valeur brute', 'Verifie 28x <= 2x', 'BLOQUANT', IC001],
   356	    ['IC-002', 'Immobilisation sans amortissement', 'Detecte immo sans amort', 'MINEUR', IC002],
   357	    ['IC-003', 'Amortissement sans immobilisation', 'Detecte amort orphelins', 'MAJEUR', IC003],
   358	    ['IC-004', 'Dotation vs variation amortissements', 'Coherence dotation/variation', 'MINEUR', IC004],
   359	    ['IC-005', 'Depreciations <= valeur brute', 'Verifie 29x/39x/49x <= brut', 'BLOQUANT', IC005],
   360	    ['IC-006', 'Dotation provisions coherente', 'Coherence dot. prov.', 'MINEUR', IC006],
   361	    ['IC-007', 'Provisions elevees', 'Signale prov > 10% bilan', 'INFO', IC007],
   362	    ['IC-008', 'Variation stocks coherente', 'Coherence stocks bilan vs 603', 'MAJEUR', IC008],
   363	    ['IC-009', 'Personnel vs dettes sociales', 'Charges 66x vs dettes 42x', 'INFO', IC009],
   364	    ['IC-010', 'CA vs creances clients', 'CA sans creances', 'INFO', IC010],
   365	    ['IC-011', 'Achats vs dettes fournisseurs', 'Achats sans fournisseurs', 'INFO', IC011],
   366	    ['IC-012', 'Interets vs emprunts', 'Charges fin. sans emprunts', 'INFO', IC012],
   367	    ['IC-013', 'Dotations vs immobilisations', 'Coherence dot/immo', 'MINEUR', IC013],
   368	    ['IC-014', 'Impot vs resultat', 'Resultat beneficiaire sans impot', 'MINEUR', IC014],
   369	    ['IC-015', 'TVA collectee vs CA', 'Coherence TVA/CA', 'MINEUR', IC015],
   370	    ['IC-016', 'TVA deductible vs achats', 'Coherence TVA ded./achats', 'INFO', IC016],
   371	    ['IC-017', 'Effets a recevoir vs clients', 'Coherence effets/clients', 'INFO', IC017],
   372	    ['IC-018', 'Effets a payer vs fournisseurs', 'Coherence effets/fournisseurs', 'INFO', IC018],
   373	    ['IC-019', 'Subventions bilan vs produits', 'Coherence subv. bilan/resultat', 'INFO', IC019],
   374	  ]
   375	
   376	  for (const [ref, nom, desc, sev, fn] of defs) {
   377	    controlRegistry.register(
   378	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_1', actif: true },
   379	      fn
   380	    )
   381	  }
   382	}

================================================================================
FILE: src/services/audit/controls/level5-year-over-year.ts
================================================================================
     1	/**
     2	 * Niveau 5 - Controles N/N-1 (NN-001 a NN-008)
     3	 * 8 controles comparatifs inter-exercices
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle } from '@/types/audit.types'
     7	import { BalanceEntry } from '@/services/liasseDataService'
     8	import { controlRegistry } from '../controlRegistry'
     9	
    10	const NIVEAU: NiveauControle = 5
    11	
    12	function ok(ref: string, nom: string, msg: string): ResultatControle {
    13	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    14	}
    15	function anomalie(ref: string, nom: string, sev: ResultatControle['severite'], msg: string, det?: ResultatControle['details'], sug?: string): ResultatControle {
    16	  return { ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite: sev, message: msg, details: det, suggestion: sug, timestamp: new Date().toISOString() }
    17	}
    18	function na(ref: string, nom: string, msg: string): ResultatControle {
    19	  return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    20	}
    21	
    22	function find(bal: BalanceEntry[], prefix: string): BalanceEntry[] {
    23	  return bal.filter((l) => l.compte.toString().startsWith(prefix))
    24	}
    25	function solde(l: BalanceEntry): number { return (l.solde_debit || 0) - (l.solde_credit || 0) }
    26	function absSum(entries: BalanceEntry[]): number { return entries.reduce((s, l) => s + Math.abs(solde(l)), 0) }
    27	
    28	function needsN1(ref: string, nom: string, ctx: AuditContext): ResultatControle | null {
    29	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) return na(ref, nom, 'Balance N-1 absente')
    30	  return null
    31	}
    32	
    33	// NN-001: Report a nouveau = resultat N-1
    34	function NN001(ctx: AuditContext): ResultatControle {
    35	  const ref = 'NN-001', nom = 'RAN = Resultat N-1'
    36	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
    37	  const ran = find(ctx.balanceN, '12').reduce((s, l) => s + (l.credit - l.debit), 0)
    38	  const resultatN1 = find(ctx.balanceN1!, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
    39	  const ecart = Math.abs(ran - resultatN1)
    40	  if (ecart > 1) {
    41	    return anomalie(ref, nom, 'MAJEUR',
    42	      `RAN (${ran.toLocaleString('fr-FR')}) != Resultat N-1 (${resultatN1.toLocaleString('fr-FR')})`,
    43	      { ecart, montants: { ran, resultatN1 } },
    44	      'Le report a nouveau doit etre egal au resultat de l\'exercice precedent')
    45	  }
    46	  return ok(ref, nom, 'Report a nouveau correct')
    47	}
    48	
    49	// NN-002: Soldes ouverture N = soldes cloture N-1
    50	function NN002(ctx: AuditContext): ResultatControle {
    51	  const ref = 'NN-002', nom = 'Ouverture N = Cloture N-1'
    52	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
    53	
    54	  // Pour les comptes de bilan (classes 1-5), le solde d'ouverture N doit etre le solde de cloture N-1
    55	  const mapN1 = new Map<string, number>()
    56	  for (const l of ctx.balanceN1!) {
    57	    const cl = parseInt(l.compte.charAt(0))
    58	    if (cl >= 1 && cl <= 5) mapN1.set(l.compte, solde(l))
    59	  }
    60	
    61	  // Controle simplifie: verifier que le total bilan est coherent
    62	  const totalBilanN = ctx.balanceN.filter((l) => { const cl = parseInt(l.compte.charAt(0)); return cl >= 1 && cl <= 5 }).reduce((s, l) => s + Math.abs(solde(l)), 0)
    63	  const totalBilanN1 = ctx.balanceN1!.filter((l) => { const cl = parseInt(l.compte.charAt(0)); return cl >= 1 && cl <= 5 }).reduce((s, l) => s + Math.abs(solde(l)), 0)
    64	  const variation = Math.abs(totalBilanN - totalBilanN1) / Math.max(totalBilanN1, 1) * 100
    65	
    66	  if (variation > 100) {
    67	    return anomalie(ref, nom, 'BLOQUANT',
    68	      `Variation totale du bilan de ${variation.toFixed(0)}% entre N-1 et N - possibles erreurs de report`,
    69	      { montants: { totalBilanN, totalBilanN1, variationPct: variation } })
    70	  }
    71	  return ok(ref, nom, 'Soldes d\'ouverture coherents')
    72	}
    73	
    74	// NN-003: Permanence des methodes
    75	function NN003(ctx: AuditContext): ResultatControle {
    76	  const ref = 'NN-003', nom = 'Permanence des methodes'
    77	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
    78	
    79	  // Verifier que la structure des comptes est similaire (memes prefixes utilises)
    80	  const prefixesN = new Set(ctx.balanceN.map((l) => l.compte.toString().substring(0, 3)))
    81	  const prefixesN1 = new Set(ctx.balanceN1!.map((l) => l.compte.toString().substring(0, 3)))
    82	  const nouveaux = [...prefixesN].filter((p) => !prefixesN1.has(p))
    83	  const supprimes = [...prefixesN1].filter((p) => !prefixesN.has(p))
    84	
    85	  if (nouveaux.length > 10 || supprimes.length > 10) {
    86	    return anomalie(ref, nom, 'MINEUR',
    87	      `Changements importants de structure: ${nouveaux.length} nouveaux prefixes, ${supprimes.length} supprimes`,
    88	      { comptes: [...nouveaux.slice(0, 5).map((p) => `+${p}`), ...supprimes.slice(0, 5).map((p) => `-${p}`)] },
    89	      'Verifier le respect du principe de permanence des methodes')
    90	  }
    91	  return ok(ref, nom, 'Structure comptable stable entre N et N-1')
    92	}
    93	
    94	// NN-004: Capital inchange sauf operation
    95	function NN004(ctx: AuditContext): ResultatControle {
    96	  const ref = 'NN-004', nom = 'Capital inchange'
    97	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
    98	  const capitalN = find(ctx.balanceN, '101').reduce((s, l) => s + (l.credit - l.debit), 0)
    99	  const capitalN1 = find(ctx.balanceN1!, '101').reduce((s, l) => s + (l.credit - l.debit), 0)
   100	  if (Math.abs(capitalN - capitalN1) > 1) {
   101	    return anomalie(ref, nom, 'INFO',
   102	      `Capital modifie: ${capitalN1.toLocaleString('fr-FR')} -> ${capitalN.toLocaleString('fr-FR')} FCFA`,
   103	      { montants: { capitalN, capitalN1 } },
   104	      'Verifier qu\'une operation sur le capital justifie cette variation')
   105	  }
   106	  return ok(ref, nom, `Capital stable: ${capitalN.toLocaleString('fr-FR')} FCFA`)
   107	}
   108	
   109	// NN-005: Variations anormales par poste (>50%)
   110	function NN005(ctx: AuditContext): ResultatControle {
   111	  const ref = 'NN-005', nom = 'Variations anormales'
   112	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
   113	
   114	  const postes = ['2', '3', '40', '41', '5', '6', '7']
   115	  const variations: string[] = []
   116	  for (const p of postes) {
   117	    const n = absSum(find(ctx.balanceN, p))
   118	    const n1 = absSum(find(ctx.balanceN1!, p))
   119	    if (n1 > 1000) {
   120	      const pct = ((n - n1) / n1) * 100
   121	      if (Math.abs(pct) > 50) {
   122	        variations.push(`${p}x: ${pct > 0 ? '+' : ''}${pct.toFixed(0)}% (${n1.toLocaleString('fr-FR')} -> ${n.toLocaleString('fr-FR')})`)
   123	      }
   124	    }
   125	  }
   126	  if (variations.length > 0) {
   127	    return anomalie(ref, nom, 'MINEUR',
   128	      `${variations.length} poste(s) avec variation > 50%`,
   129	      { comptes: variations },
   130	      'Justifier les variations significatives entre exercices')
   131	  }
   132	  return ok(ref, nom, 'Pas de variation anormale detectee')
   133	}
   134	
   135	// NN-006: Variation total bilan (>30%)
   136	function NN006(ctx: AuditContext): ResultatControle {
   137	  const ref = 'NN-006', nom = 'Variation total bilan'
   138	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
   139	  const tbN = ctx.balanceN.filter((l) => { const cl = parseInt(l.compte.charAt(0)); return cl >= 1 && cl <= 5 }).reduce((s, l) => s + Math.max(0, solde(l)), 0)
   140	  const tbN1 = ctx.balanceN1!.filter((l) => { const cl = parseInt(l.compte.charAt(0)); return cl >= 1 && cl <= 5 }).reduce((s, l) => s + Math.max(0, solde(l)), 0)
   141	  if (tbN1 > 0) {
   142	    const pct = ((tbN - tbN1) / tbN1) * 100
   143	    if (Math.abs(pct) > 30) {
   144	      return anomalie(ref, nom, 'INFO',
   145	        `Total bilan varie de ${pct > 0 ? '+' : ''}${pct.toFixed(1)}%`,
   146	        { montants: { totalBilanN: tbN, totalBilanN1: tbN1, variationPct: pct } })
   147	    }
   148	  }
   149	  return ok(ref, nom, 'Variation du total bilan dans les limites')
   150	}
   151	
   152	// NN-007: Comptes de gestion a zero en N vs N-1
   153	function NN007(ctx: AuditContext): ResultatControle {
   154	  const ref = 'NN-007', nom = 'Comptes gestion disparus'
   155	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
   156	  const gestionN1 = ctx.balanceN1!.filter((l) => {
   157	    const cl = parseInt(l.compte.charAt(0))
   158	    return (cl === 6 || cl === 7) && Math.abs(solde(l)) > 1000
   159	  })
   160	  const comptesNMap = new Map(ctx.balanceN.map((l) => [l.compte, l]))
   161	  const disparus: string[] = []
   162	  for (const l of gestionN1) {
   163	    const nLine = comptesNMap.get(l.compte)
   164	    if (!nLine || (nLine.debit === 0 && nLine.credit === 0)) {
   165	      disparus.push(`${l.compte} (${l.intitule}): ${Math.abs(solde(l)).toLocaleString('fr-FR')} en N-1`)
   166	    }
   167	  }
   168	  if (disparus.length > 0) {
   169	    return anomalie(ref, nom, 'MINEUR',
   170	      `${disparus.length} compte(s) de gestion significatif(s) en N-1 absent(s) ou a zero en N`,
   171	      { comptes: disparus.slice(0, 10) })
   172	  }
   173	  return ok(ref, nom, 'Continuite des comptes de gestion')
   174	}
   175	
   176	// NN-008: Coherence immobilisations
   177	function NN008(ctx: AuditContext): ResultatControle {
   178	  const ref = 'NN-008', nom = 'Coherence immobilisations N/N-1'
   179	  const skip = needsN1(ref, nom, ctx); if (skip) return skip
   180	
   181	  const immobBrutN = find(ctx.balanceN, '2').filter((l) => !l.compte.startsWith('28') && !l.compte.startsWith('29')).reduce((s, l) => s + Math.max(0, solde(l)), 0)
   182	  const immobBrutN1 = find(ctx.balanceN1!, '2').filter((l) => !l.compte.startsWith('28') && !l.compte.startsWith('29')).reduce((s, l) => s + Math.max(0, solde(l)), 0)
   183	
   184	  const variation = immobBrutN - immobBrutN1
   185	  // Acquisitions (debit 2x en N) - Cessions (credit 2x en N)
   186	  // Approximation: si la variation est negative mais pas de cession au resultat
   187	  if (variation < -1000) {
   188	    const cessions = absSum([...find(ctx.balanceN, '81'), ...find(ctx.balanceN, '654')])
   189	    if (cessions === 0) {
   190	      return anomalie(ref, nom, 'MINEUR',
   191	        `Diminution immobilisations (${variation.toLocaleString('fr-FR')}) sans cession comptabilisee`,
   192	        { montants: { immobN: immobBrutN, immobN1: immobBrutN1, variation } },
   193	        'Verifier les mouvements d\'immobilisations')
   194	    }
   195	  }
   196	  return ok(ref, nom, 'Immobilisations coherentes entre exercices')
   197	}
   198	
   199	// --- Enregistrement ---
   200	
   201	export function registerLevel5Controls(): void {
   202	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   203	    ['NN-001', 'RAN = Resultat N-1', 'Verifie le report a nouveau', 'MAJEUR', NN001],
   204	    ['NN-002', 'Ouverture N = Cloture N-1', 'Verifie la continuite des soldes', 'BLOQUANT', NN002],
   205	    ['NN-003', 'Permanence des methodes', 'Verifie la stabilite de la structure', 'MINEUR', NN003],
   206	    ['NN-004', 'Capital inchange', 'Signale les variations de capital', 'INFO', NN004],
   207	    ['NN-005', 'Variations anormales', 'Detecte les variations > 50% par poste', 'MINEUR', NN005],
   208	    ['NN-006', 'Variation total bilan', 'Detecte variation > 30% du bilan', 'INFO', NN006],
   209	    ['NN-007', 'Comptes gestion disparus', 'Detecte les comptes de gestion absents en N', 'MINEUR', NN007],
   210	    ['NN-008', 'Coherence immobilisations N/N-1', 'Verifie les mouvements d\'immobilisations', 'MINEUR', NN008],
   211	  ]
   212	
   213	  for (const [ref, nom, desc, sev, fn] of defs) {
   214	    controlRegistry.register(
   215	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_1', actif: true },
   216	      fn
   217	    )
   218	  }
   219	}

================================================================================
FILE: src/services/audit/controls/level6-financial-statements.ts
================================================================================
     1	/**
     2	 * Niveau 6 - Controles etats financiers (EF-001 a EF-019)
     3	 * 19 controles verifiant la coherence des etats financiers SYSCOHADA
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle } from '@/types/audit.types'
     7	import { BalanceEntry, SYSCOHADA_MAPPING } from '@/services/liasseDataService'
     8	import { controlRegistry } from '../controlRegistry'
     9	
    10	const NIVEAU: NiveauControle = 6
    11	
    12	function ok(ref: string, nom: string, msg: string): ResultatControle {
    13	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    14	}
    15	function anomalie(ref: string, nom: string, sev: ResultatControle['severite'], msg: string, det?: ResultatControle['details'], sug?: string, refR?: string): ResultatControle {
    16	  return { ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite: sev, message: msg, details: det, suggestion: sug, referenceReglementaire: refR, timestamp: new Date().toISOString() }
    17	}
    18	
    19	function find(bal: BalanceEntry[], prefix: string): BalanceEntry[] {
    20	  return bal.filter((l) => l.compte.toString().startsWith(prefix))
    21	}
    22	function solde(l: BalanceEntry): number { return (l.solde_debit || 0) - (l.solde_credit || 0) }
    23	
    24	function sumForPrefixes(bal: BalanceEntry[], prefixes: string[]): number {
    25	  let total = 0
    26	  for (const l of bal) {
    27	    for (const p of prefixes) {
    28	      if (l.compte.toString().startsWith(p)) {
    29	        total += Math.abs(solde(l))
    30	        break
    31	      }
    32	    }
    33	  }
    34	  return total
    35	}
    36	
    37	function sumSoldeForPrefixes(bal: BalanceEntry[], prefixes: string[]): number {
    38	  let total = 0
    39	  for (const l of bal) {
    40	    for (const p of prefixes) {
    41	      if (l.compte.toString().startsWith(p)) {
    42	        total += solde(l)
    43	        break
    44	      }
    45	    }
    46	  }
    47	  return total
    48	}
    49	
    50	// Helper: calcule actif et passif a partir du mapping
    51	function calcBilanFromMapping(bal: BalanceEntry[]): { actif: number; passif: number } {
    52	  let actif = 0, passif = 0
    53	  const mapping = SYSCOHADA_MAPPING
    54	
    55	  for (const [, poste] of Object.entries(mapping.actif)) {
    56	    const brut = sumForPrefixes(bal, poste.comptes)
    57	    const amort = sumForPrefixes(bal, poste.amortComptes || [])
    58	    actif += brut - amort
    59	  }
    60	  for (const [, poste] of Object.entries(mapping.passif)) {
    61	    passif += sumForPrefixes(bal, poste.comptes)
    62	  }
    63	  return { actif: Math.abs(actif), passif: Math.abs(passif) }
    64	}
    65	
    66	// EF-001: Bilan equilibre
    67	function EF001(ctx: AuditContext): ResultatControle {
    68	  const ref = 'EF-001', nom = 'Bilan equilibre'
    69	  const typeLiasse = ctx.typeLiasse || 'SN'
    70	
    71	  // Pour les types sectoriels, certains controles EF sont adaptes
    72	  if (['BANQUE', 'ASSURANCE', 'MICROFINANCE', 'EBNL'].includes(typeLiasse)) {
    73	    // Verification simplifiee par classes comptables
    74	    const totalActifClasses = sumForPrefixes(ctx.balanceN, ['1', '2', '3', '4', '5'])
    75	    return ok(ref, nom, `Controle adapte au type ${typeLiasse} - balance totale: ${Math.abs(totalActifClasses).toLocaleString('fr-FR')} FCFA`)
    76	  }
    77	
    78	  const { actif, passif } = calcBilanFromMapping(ctx.balanceN)
    79	  const ecart = Math.abs(actif - passif)
    80	  if (ecart > 1) {
    81	    return anomalie(ref, nom, 'BLOQUANT',
    82	      `Bilan desequilibre: Actif=${actif.toLocaleString('fr-FR')}, Passif=${passif.toLocaleString('fr-FR')} (ecart: ${ecart.toLocaleString('fr-FR')})`,
    83	      { ecart, montants: { actif, passif } }, undefined,
    84	      'Art. 29 Acte Uniforme OHADA')
    85	  }
    86	  return ok(ref, nom, `Bilan equilibre: ${actif.toLocaleString('fr-FR')} FCFA`)
    87	}
    88	
    89	// EF-002: Sous-totaux actif
    90	function EF002(ctx: AuditContext): ResultatControle {
    91	  const ref = 'EF-002', nom = 'Sous-totaux actif'
    92	  const immobPrefixes = ['20', '21', '22', '23', '24', '25', '26', '27']
    93	  const circPrefixes = ['3', '40', '41', '42', '43', '44', '45', '46', '47']
    94	  const totalImmob = sumForPrefixes(ctx.balanceN, immobPrefixes) - sumForPrefixes(ctx.balanceN, ['28', '29'])
    95	  const totalCirc = sumForPrefixes(ctx.balanceN, circPrefixes) - sumForPrefixes(ctx.balanceN, ['39', '49'])
    96	
    97	  if (totalImmob < 0) {
    98	    return anomalie(ref, nom, 'BLOQUANT', `Sous-total actif immobilise negatif: ${totalImmob.toLocaleString('fr-FR')}`,
    99	      { montants: { actifImmobilise: totalImmob } })
   100	  }
   101	  return ok(ref, nom, `Sous-totaux actif coherents (Immo: ${totalImmob.toLocaleString('fr-FR')}, Circ: ${totalCirc.toLocaleString('fr-FR')})`)
   102	}
   103	
   104	// EF-003: Sous-totaux passif
   105	function EF003(ctx: AuditContext): ResultatControle {
   106	  const ref = 'EF-003', nom = 'Sous-totaux passif'
   107	  const cp = sumForPrefixes(ctx.balanceN, ['10', '11', '12', '13', '14'])
   108	  const dettesF = sumForPrefixes(ctx.balanceN, ['16', '17', '18'])
   109	  const dettesC = sumForPrefixes(ctx.balanceN, ['40', '41', '42', '43', '44', '45', '46', '47', '48', '49'])
   110	  return ok(ref, nom, `Sous-totaux passif (CP: ${Math.abs(cp).toLocaleString('fr-FR')}, Dettes: ${Math.abs(dettesF + dettesC).toLocaleString('fr-FR')})`)
   111	}
   112	
   113	// EF-004: Total bilan coherent avec balance
   114	function EF004(ctx: AuditContext): ResultatControle {
   115	  const ref = 'EF-004', nom = 'Bilan vs balance'
   116	  const { actif } = calcBilanFromMapping(ctx.balanceN)
   117	  const totalBilanBalance = ctx.balanceN.filter((l) => { const cl = parseInt(l.compte.charAt(0)); return cl >= 1 && cl <= 5 }).reduce((s, l) => s + Math.max(0, solde(l)), 0)
   118	  const ecart = Math.abs(actif - totalBilanBalance)
   119	  if (ecart > totalBilanBalance * 0.05 && ecart > 10000) {
   120	    return anomalie(ref, nom, 'BLOQUANT',
   121	      `Ecart significatif entre bilan mapping et bilan balance: ${ecart.toLocaleString('fr-FR')}`,
   122	      { ecart, montants: { bilanMapping: actif, bilanBalance: totalBilanBalance } })
   123	  }
   124	  return ok(ref, nom, 'Bilan et balance coherents')
   125	}
   126	
   127	// EF-005: Resultat CdR = Resultat bilan
   128	function EF005(ctx: AuditContext): ResultatControle {
   129	  const ref = 'EF-005', nom = 'Resultat CdR = Resultat bilan'
   130	  const produits = find(ctx.balanceN, '7').reduce((s, l) => s + (l.credit - l.debit), 0)
   131	  const charges = find(ctx.balanceN, '6').reduce((s, l) => s + (l.debit - l.credit), 0)
   132	  const resultatCdR = produits - charges
   133	  const resultatBilan = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   134	  const ecart = Math.abs(resultatCdR - resultatBilan)
   135	  if (ecart > 1 && find(ctx.balanceN, '13').length > 0) {
   136	    return anomalie(ref, nom, 'BLOQUANT',
   137	      `Resultat CdR (${resultatCdR.toLocaleString('fr-FR')}) != Resultat bilan (${resultatBilan.toLocaleString('fr-FR')})`,
   138	      { ecart, montants: { resultatCdR, resultatBilan } })
   139	  }
   140	  return ok(ref, nom, `Resultat coherent: ${resultatCdR.toLocaleString('fr-FR')} FCFA`)
   141	}
   142	
   143	// EF-006: SIG coherents (Marge brute)
   144	function EF006(ctx: AuditContext): ResultatControle {
   145	  const ref = 'EF-006', nom = 'SIG - Marge brute'
   146	  const ventesMses = sumForPrefixes(ctx.balanceN, ['701']).valueOf()
   147	  const achatsMses = sumForPrefixes(ctx.balanceN, ['601']).valueOf()
   148	  const varStocksMses = sumSoldeForPrefixes(ctx.balanceN, ['6031'])
   149	  const margeBrute = ventesMses - achatsMses - varStocksMses
   150	  if (ventesMses > 0 && margeBrute < 0) {
   151	    return anomalie(ref, nom, 'MINEUR',
   152	      `Marge brute negative: ${margeBrute.toLocaleString('fr-FR')} FCFA`,
   153	      { montants: { ventes: ventesMses, achats: achatsMses, margeBrute } },
   154	      'Une marge brute negative indique que le cout des marchandises depasse les ventes')
   155	  }
   156	  return ok(ref, nom, `Marge brute: ${margeBrute.toLocaleString('fr-FR')} FCFA`)
   157	}
   158	
   159	// EF-007: SIG - Valeur ajoutee
   160	function EF007(ctx: AuditContext): ResultatControle {
   161	  const ref = 'EF-007', nom = 'SIG - Valeur ajoutee'
   162	  const ca = sumForPrefixes(ctx.balanceN, ['70', '71', '72', '73'])
   163	  const consomm = sumForPrefixes(ctx.balanceN, ['60', '61', '62', '63'])
   164	  const va = ca - consomm
   165	  if (ca > 0 && va < 0) {
   166	    return anomalie(ref, nom, 'MAJEUR',
   167	      `Valeur ajoutee negative: ${va.toLocaleString('fr-FR')} FCFA`,
   168	      { montants: { production: ca, consommations: consomm, valeurAjoutee: va } },
   169	      'Situation critique: les consommations depassent la production')
   170	  }
   171	  return ok(ref, nom, `Valeur ajoutee: ${va.toLocaleString('fr-FR')} FCFA`)
   172	}
   173	
   174	// EF-008: RAO cascade
   175	function EF008(ctx: AuditContext): ResultatControle {
   176	  const ref = 'EF-008', nom = 'Cascade resultat'
   177	  const rao = find(ctx.balanceN, '7').reduce((s, l) => s + (l.credit - l.debit), 0)
   178	    - find(ctx.balanceN, '6').reduce((s, l) => s + (l.debit - l.credit), 0)
   179	  const hao = find(ctx.balanceN, '8').reduce((s, l) => s + (l.credit - l.debit), 0)
   180	  const impot = sumForPrefixes(ctx.balanceN, ['89'])
   181	  const resultatNet = rao + hao - impot
   182	  const resultat13 = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   183	  const ecart = Math.abs(resultatNet - resultat13)
   184	  if (ecart > 1 && find(ctx.balanceN, '13').length > 0) {
   185	    return anomalie(ref, nom, 'BLOQUANT',
   186	      `Cascade: RAO(${rao.toLocaleString('fr-FR')}) + HAO(${hao.toLocaleString('fr-FR')}) - IS(${impot.toLocaleString('fr-FR')}) = ${resultatNet.toLocaleString('fr-FR')} != 13x(${resultat13.toLocaleString('fr-FR')})`,
   187	      { ecart })
   188	  }
   189	  return ok(ref, nom, 'Cascade du resultat coherente')
   190	}
   191	
   192	// EF-009: CAF additive = CAF soustractive
   193	function EF009(ctx: AuditContext): ResultatControle {
   194	  const ref = 'EF-009', nom = 'CAF coherente'
   195	  // CAF additive: Resultat + Dotations - Reprises - Plus-values + Moins-values
   196	  const resultat = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   197	  const dotations = sumForPrefixes(ctx.balanceN, ['681', '682', '691', '697', '687'])
   198	  const reprises = sumForPrefixes(ctx.balanceN, ['791', '797', '787', '798'])
   199	  const cafAdd = resultat + dotations - reprises
   200	
   201	  // CAF soustractive: EBE + autres produits - autres charges + produits fin - charges fin + HAO
   202	  // Simplification
   203	  return ok(ref, nom, `CAF estimee: ${cafAdd.toLocaleString('fr-FR')} FCFA`)
   204	}
   205	
   206	// EF-010 a EF-012: TFT coherent
   207	function EF010(ctx: AuditContext): ResultatControle {
   208	  const ref = 'EF-010', nom = 'TFT - Tresorerie cloture'
   209	  const tresoActif = find(ctx.balanceN, '5').reduce((s, l) => s + Math.max(0, solde(l)), 0)
   210	  const tresoPassif = find(ctx.balanceN, '5').reduce((s, l) => s + Math.max(0, -solde(l)), 0)
   211	  const tresoNette = tresoActif - tresoPassif
   212	  return ok(ref, nom, `Tresorerie nette: ${tresoNette.toLocaleString('fr-FR')} FCFA`)
   213	}
   214	
   215	function EF011(_ctx: AuditContext): ResultatControle {
   216	  const ref = 'EF-011', nom = 'TFT - Flux exploitation'
   217	  return ok(ref, nom, 'Controle TFT flux exploitation')
   218	}
   219	
   220	function EF012(ctx: AuditContext): ResultatControle {
   221	  const ref = 'EF-012', nom = 'TFT - Variation tresorerie'
   222	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) {
   223	    return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK', message: 'N-1 absente', timestamp: new Date().toISOString() }
   224	  }
   225	  const tresoN = find(ctx.balanceN, '5').reduce((s, l) => s + solde(l), 0)
   226	  const tresoN1 = find(ctx.balanceN1, '5').reduce((s, l) => s + solde(l), 0)
   227	  const variation = tresoN - tresoN1
   228	  return ok(ref, nom, `Variation tresorerie: ${variation.toLocaleString('fr-FR')} FCFA`)
   229	}
   230	
   231	// EF-013: Variation capitaux propres
   232	function EF013(ctx: AuditContext): ResultatControle {
   233	  const ref = 'EF-013', nom = 'Variation capitaux propres'
   234	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) {
   235	    return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK', message: 'N-1 absente', timestamp: new Date().toISOString() }
   236	  }
   237	  const cpN = sumForPrefixes(ctx.balanceN, ['10', '11', '12', '13', '14'])
   238	  const cpN1 = sumForPrefixes(ctx.balanceN1, ['10', '11', '12', '13', '14'])
   239	  const variation = cpN - cpN1
   240	  const resultatN = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   241	  const ecart = Math.abs(variation - resultatN)
   242	  if (ecart > Math.abs(resultatN) * 0.2 && ecart > 10000) {
   243	    return anomalie(ref, nom, 'MINEUR',
   244	      `Variation CP (${variation.toLocaleString('fr-FR')}) significativement differente du resultat (${resultatN.toLocaleString('fr-FR')})`,
   245	      { montants: { variationCP: variation, resultat: resultatN } })
   246	  }
   247	  return ok(ref, nom, 'Variation capitaux propres coherente')
   248	}
   249	
   250	// EF-014 a EF-018: Notes annexes vs etats principaux
   251	function EF014(ctx: AuditContext): ResultatControle {
   252	  const ref = 'EF-014', nom = 'Note 3A - Immobilisations brutes'
   253	  const immobBrut = find(ctx.balanceN, '2').filter((l) => !l.compte.startsWith('28') && !l.compte.startsWith('29')).reduce((s, l) => s + Math.max(0, solde(l)), 0)
   254	  return ok(ref, nom, `Immobilisations brutes: ${immobBrut.toLocaleString('fr-FR')} FCFA`)
   255	}
   256	
   257	function EF015(ctx: AuditContext): ResultatControle {
   258	  const ref = 'EF-015', nom = 'Note 3B - Amortissements'
   259	  const amort = find(ctx.balanceN, '28').reduce((s, l) => s + Math.abs(solde(l)), 0)
   260	  return ok(ref, nom, `Amortissements cumules: ${amort.toLocaleString('fr-FR')} FCFA`)
   261	}
   262	
   263	function EF016(ctx: AuditContext): ResultatControle {
   264	  const ref = 'EF-016', nom = 'Note 3H - Creances'
   265	  const creances = sumForPrefixes(ctx.balanceN, ['41', '42', '43', '44', '45', '46', '47'])
   266	  return ok(ref, nom, `Total creances: ${creances.toLocaleString('fr-FR')} FCFA`)
   267	}
   268	
   269	function EF017(ctx: AuditContext): ResultatControle {
   270	  const ref = 'EF-017', nom = 'Note 3I - Dettes'
   271	  const dettes = sumForPrefixes(ctx.balanceN, ['16', '40', '42', '43', '44'])
   272	  return ok(ref, nom, `Total dettes: ${dettes.toLocaleString('fr-FR')} FCFA`)
   273	}
   274	
   275	function EF018(ctx: AuditContext): ResultatControle {
   276	  const ref = 'EF-018', nom = 'Note 3J - Provisions'
   277	  const provisions = sumForPrefixes(ctx.balanceN, ['19', '29', '39', '49'])
   278	  return ok(ref, nom, `Total provisions: ${provisions.toLocaleString('fr-FR')} FCFA`)
   279	}
   280	
   281	// EF-019: Effectifs non vide si charges personnel
   282	function EF019(ctx: AuditContext): ResultatControle {
   283	  const ref = 'EF-019', nom = 'Effectifs vs charges personnel'
   284	  const chargesPerso = sumForPrefixes(ctx.balanceN, ['66'])
   285	  if (chargesPerso > 0) {
   286	    return anomalie(ref, nom, 'MINEUR',
   287	      `Charges de personnel (${chargesPerso.toLocaleString('fr-FR')}) - verifier que les effectifs sont renseignes en annexe`,
   288	      { montants: { chargesPersonnel: chargesPerso } },
   289	      'L\'annexe doit mentionner les effectifs si des charges de personnel existent')
   290	  }
   291	  return ok(ref, nom, 'Pas de charges de personnel')
   292	}
   293	
   294	// --- Enregistrement ---
   295	
   296	export function registerLevel6Controls(): void {
   297	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   298	    ['EF-001', 'Bilan equilibre', 'Verifie l\'equilibre du bilan via mapping', 'BLOQUANT', EF001],
   299	    ['EF-002', 'Sous-totaux actif', 'Verifie les sous-totaux de l\'actif', 'BLOQUANT', EF002],
   300	    ['EF-003', 'Sous-totaux passif', 'Verifie les sous-totaux du passif', 'BLOQUANT', EF003],
   301	    ['EF-004', 'Bilan vs balance', 'Coherence bilan mapping vs balance', 'BLOQUANT', EF004],
   302	    ['EF-005', 'Resultat CdR = Resultat bilan', 'Coherence resultat CdR et bilan', 'BLOQUANT', EF005],
   303	    ['EF-006', 'SIG - Marge brute', 'Verifie la marge brute', 'MINEUR', EF006],
   304	    ['EF-007', 'SIG - Valeur ajoutee', 'Verifie la valeur ajoutee', 'MAJEUR', EF007],
   305	    ['EF-008', 'Cascade resultat', 'RAO + HAO - IS = Resultat net', 'BLOQUANT', EF008],
   306	    ['EF-009', 'CAF coherente', 'CAF additive vs soustractive', 'MINEUR', EF009],
   307	    ['EF-010', 'TFT - Tresorerie cloture', 'Tresorerie nette en fin d\'exercice', 'BLOQUANT', EF010],
   308	    ['EF-011', 'TFT - Flux exploitation', 'Flux de tresorerie d\'exploitation', 'MAJEUR', EF011],
   309	    ['EF-012', 'TFT - Variation tresorerie', 'Variation de tresorerie N vs N-1', 'MAJEUR', EF012],
   310	    ['EF-013', 'Variation capitaux propres', 'Coherence variation CP vs resultat', 'MINEUR', EF013],
   311	    ['EF-014', 'Note 3A - Immobilisations brutes', 'Coherence note 3A', 'BLOQUANT', EF014],
   312	    ['EF-015', 'Note 3B - Amortissements', 'Coherence note 3B', 'MAJEUR', EF015],
   313	    ['EF-016', 'Note 3H - Creances', 'Coherence note 3H', 'MAJEUR', EF016],
   314	    ['EF-017', 'Note 3I - Dettes', 'Coherence note 3I', 'BLOQUANT', EF017],
   315	    ['EF-018', 'Note 3J - Provisions', 'Coherence note 3J', 'MAJEUR', EF018],
   316	    ['EF-019', 'Effectifs vs charges personnel', 'Effectifs renseignes si charges 66x', 'MINEUR', EF019],
   317	  ]
   318	
   319	  for (const [ref, nom, desc, sev, fn] of defs) {
   320	    controlRegistry.register(
   321	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_3', actif: true },
   322	      fn
   323	    )
   324	  }
   325	}

================================================================================
FILE: src/services/audit/controls/level7-fiscal.ts
================================================================================
     1	/**
     2	 * Niveau 7 - Controles fiscaux (FI-001 a FI-010)
     3	 * 10 controles verifiant la conformite fiscale
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle } from '@/types/audit.types'
     7	import { BalanceEntry } from '@/services/liasseDataService'
     8	import { controlRegistry } from '../controlRegistry'
     9	
    10	const NIVEAU: NiveauControle = 7
    11	
    12	function ok(ref: string, nom: string, msg: string): ResultatControle {
    13	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    14	}
    15	function anomalie(ref: string, nom: string, sev: ResultatControle['severite'], msg: string, det?: ResultatControle['details'], sug?: string, refR?: string): ResultatControle {
    16	  return { ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite: sev, message: msg, details: det, suggestion: sug, referenceReglementaire: refR, timestamp: new Date().toISOString() }
    17	}
    18	
    19	function find(bal: BalanceEntry[], prefix: string): BalanceEntry[] {
    20	  return bal.filter((l) => l.compte.toString().startsWith(prefix))
    21	}
    22	function solde(l: BalanceEntry): number { return (l.solde_debit || 0) - (l.solde_credit || 0) }
    23	function absSum(entries: BalanceEntry[]): number { return entries.reduce((s, l) => s + Math.abs(solde(l)), 0) }
    24	// FI-001: Resultat fiscal >= 0 ou deficit justifie
    25	function FI001(ctx: AuditContext): ResultatControle {
    26	  const ref = 'FI-001', nom = 'Resultat fiscal'
    27	  const resultat = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
    28	  if (resultat < 0) {
    29	    return anomalie(ref, nom, 'INFO',
    30	      `Resultat deficitaire: ${resultat.toLocaleString('fr-FR')} FCFA`,
    31	      { montants: { resultatNet: resultat } },
    32	      'Un resultat deficitaire doit etre justifie et peut etre reporte sur les exercices suivants',
    33	      'Art. 7 CGI - Report deficitaire')
    34	  }
    35	  return ok(ref, nom, `Resultat: ${resultat.toLocaleString('fr-FR')} FCFA`)
    36	}
    37	
    38	// FI-002: Reintegrations amortissements vehicules (plafond)
    39	function FI002(ctx: AuditContext): ResultatControle {
    40	  const ref = 'FI-002', nom = 'Amort. vehicules tourisme'
    41	  // Amortissement des vehicules de tourisme (245x) - plafond OHADA
    42	  const valeurVehicules = absSum(find(ctx.balanceN, '245'))
    43	  // Plafond: amortissement sur base max de 25 000 000 FCFA par vehicule
    44	  if (valeurVehicules > 25000000) {
    45	    return anomalie(ref, nom, 'MINEUR',
    46	      `Vehicules de tourisme: ${valeurVehicules.toLocaleString('fr-FR')} FCFA (plafond fiscal: 25 000 000)`,
    47	      { montants: { valeurVehicules, plafond: 25000000 } },
    48	      'Reintegrer la fraction d\'amortissement excedant la base de 25 M FCFA',
    49	      'Art. 8-1 CGI CEMAC')
    50	  }
    51	  return ok(ref, nom, 'Vehicules de tourisme dans les limites')
    52	}
    53	
    54	// FI-003: Charges somptuaires
    55	function FI003(ctx: AuditContext): ResultatControle {
    56	  const ref = 'FI-003', nom = 'Charges somptuaires'
    57	  // Charges non deductibles typiques: 627x (receptions, cadeaux), 628x
    58	  const receptions = absSum(find(ctx.balanceN, '627'))
    59	  const ca = absSum(find(ctx.balanceN, '70'))
    60	  if (ca > 0 && receptions > ca * 0.01) {
    61	    return anomalie(ref, nom, 'MINEUR',
    62	      `Receptions et cadeaux (${receptions.toLocaleString('fr-FR')}) > 1% du CA (${ca.toLocaleString('fr-FR')})`,
    63	      { montants: { receptions, ca, ratioPct: (receptions / ca * 100) } },
    64	      'Les charges somptuaires au-dela des seuils sont a reintegrer fiscalement')
    65	  }
    66	  return ok(ref, nom, 'Charges somptuaires dans les limites')
    67	}
    68	
    69	// FI-004: Amendes et penalites (non deductibles)
    70	function FI004(ctx: AuditContext): ResultatControle {
    71	  const ref = 'FI-004', nom = 'Amendes et penalites'
    72	  const amendes = absSum([...find(ctx.balanceN, '6471'), ...find(ctx.balanceN, '6478')])
    73	  if (amendes > 0) {
    74	    return anomalie(ref, nom, 'MINEUR',
    75	      `Amendes et penalites: ${amendes.toLocaleString('fr-FR')} FCFA (non deductibles)`,
    76	      { montants: { amendes } },
    77	      'Les amendes et penalites fiscales ne sont pas deductibles du resultat fiscal',
    78	      'Art. 8-d CGI')
    79	  }
    80	  return ok(ref, nom, 'Aucune amende ou penalite comptabilisee')
    81	}
    82	
    83	// FI-005: Dons et liberalites (plafond)
    84	function FI005(ctx: AuditContext): ResultatControle {
    85	  const ref = 'FI-005', nom = 'Dons et liberalites'
    86	  const dons = absSum(find(ctx.balanceN, '6234'))
    87	  const ca = absSum(find(ctx.balanceN, '70'))
    88	  const plafond = ca * 0.001 // 1 pour mille
    89	  if (dons > plafond && plafond > 0) {
    90	    return anomalie(ref, nom, 'MINEUR',
    91	      `Dons (${dons.toLocaleString('fr-FR')}) > plafond 1‚Ä∞ du CA (${plafond.toLocaleString('fr-FR')})`,
    92	      { montants: { dons, plafond, ca } },
    93	      'Les dons au-dela du plafond sont a reintegrer au resultat fiscal',
    94	      'Art. 8-e CGI')
    95	  }
    96	  return ok(ref, nom, 'Dons dans les limites du plafond')
    97	}
    98	
    99	// FI-006: Provisions non deductibles
   100	function FI006(ctx: AuditContext): ResultatControle {
   101	  const ref = 'FI-006', nom = 'Provisions non deductibles'
   102	  const provisions = absSum([...find(ctx.balanceN, '691'), ...find(ctx.balanceN, '697')])
   103	  if (provisions > 0) {
   104	    return anomalie(ref, nom, 'MINEUR',
   105	      `Dotations aux provisions: ${provisions.toLocaleString('fr-FR')} FCFA - verifier la deductibilite`,
   106	      { montants: { dotationsProvisions: provisions } },
   107	      'Certaines provisions ne sont pas deductibles fiscalement (provisions pour propre assurance, etc.)')
   108	  }
   109	  return ok(ref, nom, 'Pas de dotation aux provisions')
   110	}
   111	
   112	// FI-007: IS calcule vs IS comptabilise
   113	function FI007(ctx: AuditContext): ResultatControle {
   114	  const ref = 'FI-007', nom = 'IS calcule vs comptabilise'
   115	  const resultat = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   116	  const isComptabilise = absSum(find(ctx.balanceN, '89'))
   117	
   118	  if (resultat > 0) {
   119	    // Taux IS approximatif: 30% (standard CEMAC)
   120	    const isEstime = resultat * 0.30
   121	    if (isComptabilise > 0) {
   122	      const ecart = Math.abs(isEstime - isComptabilise)
   123	      if (ecart > isEstime * 0.3) {
   124	        return anomalie(ref, nom, 'MAJEUR',
   125	          `IS comptabilise (${isComptabilise.toLocaleString('fr-FR')}) significativement different de l'estime (${isEstime.toLocaleString('fr-FR')} @ 30%)`,
   126	          { montants: { isComptabilise, isEstime, resultat, ecart } },
   127	          'Verifier le calcul de l\'IS et les reintegrations/deductions')
   128	      }
   129	    } else {
   130	      return anomalie(ref, nom, 'MAJEUR',
   131	        `Resultat beneficiaire (${resultat.toLocaleString('fr-FR')}) sans IS comptabilise (89x)`,
   132	        { montants: { resultat } },
   133	        'Comptabiliser l\'impot sur les societes')
   134	    }
   135	  }
   136	  return ok(ref, nom, 'IS coherent avec le resultat')
   137	}
   138	
   139	// FI-008: Minimum forfaitaire (IMF)
   140	function FI008(ctx: AuditContext): ResultatControle {
   141	  const ref = 'FI-008', nom = 'Minimum forfaitaire (IMF)'
   142	  const ca = absSum(find(ctx.balanceN, '70'))
   143	  const isComptabilise = absSum(find(ctx.balanceN, '89'))
   144	  if (ca > 0) {
   145	    // IMF = 1% du CA avec minimum 500 000 FCFA
   146	    const imf = Math.max(ca * 0.01, 500000)
   147	    if (isComptabilise > 0 && isComptabilise < imf) {
   148	      return anomalie(ref, nom, 'MINEUR',
   149	        `IS (${isComptabilise.toLocaleString('fr-FR')}) < IMF (${imf.toLocaleString('fr-FR')}) = 1% du CA`,
   150	        { montants: { isComptabilise, imf, ca } },
   151	        'Verifier que le minimum forfaitaire est respecte')
   152	    }
   153	  }
   154	  return ok(ref, nom, 'IMF respecte')
   155	}
   156	
   157	// FI-009: TVA a reverser coherente
   158	function FI009(ctx: AuditContext): ResultatControle {
   159	  const ref = 'FI-009', nom = 'TVA a reverser'
   160	  const tvaCollectee = absSum(find(ctx.balanceN, '443'))
   161	  const tvaDeductible = absSum(find(ctx.balanceN, '445'))
   162	  const tvaDue = absSum(find(ctx.balanceN, '444'))
   163	  if (tvaCollectee > 0 && tvaDeductible > 0) {
   164	    const soldeTheorique = tvaCollectee - tvaDeductible
   165	    if (soldeTheorique > 0 && tvaDue === 0) {
   166	      return anomalie(ref, nom, 'MINEUR',
   167	        `TVA due theorique (${soldeTheorique.toLocaleString('fr-FR')}) non comptabilisee (444x)`,
   168	        { montants: { tvaCollectee, tvaDeductible, soldeTheorique } })
   169	    }
   170	  }
   171	  return ok(ref, nom, 'TVA a reverser coherente')
   172	}
   173	
   174	// FI-010: Charges personnel vs CNPS/NSIF
   175	function FI010(ctx: AuditContext): ResultatControle {
   176	  const ref = 'FI-010', nom = 'Charges personnel vs cotisations'
   177	  const chargesPerso = absSum(find(ctx.balanceN, '66'))
   178	  const cotisations = absSum([...find(ctx.balanceN, '664'), ...find(ctx.balanceN, '6413')])
   179	  if (chargesPerso > 0 && cotisations === 0) {
   180	    return anomalie(ref, nom, 'INFO',
   181	      `Charges de personnel (${chargesPerso.toLocaleString('fr-FR')}) sans cotisations sociales (664x/6413x)`,
   182	      { montants: { chargesPersonnel: chargesPerso } },
   183	      'Verifier les declarations CNPS/NSIF')
   184	  }
   185	  if (chargesPerso > 0 && cotisations > 0) {
   186	    const ratio = (cotisations / chargesPerso) * 100
   187	    if (ratio < 10) {
   188	      return anomalie(ref, nom, 'INFO',
   189	        `Ratio cotisations/salaires faible: ${ratio.toFixed(1)}%`,
   190	        { montants: { chargesPersonnel: chargesPerso, cotisations, ratioPct: ratio } })
   191	    }
   192	  }
   193	  return ok(ref, nom, 'Coherence charges personnel / cotisations')
   194	}
   195	
   196	// --- Enregistrement ---
   197	
   198	export function registerLevel7Controls(): void {
   199	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   200	    ['FI-001', 'Resultat fiscal', 'Verifie le resultat fiscal', 'INFO', FI001],
   201	    ['FI-002', 'Amort. vehicules tourisme', 'Plafond amortissement vehicules', 'MINEUR', FI002],
   202	    ['FI-003', 'Charges somptuaires', 'Detecte les charges somptuaires', 'MINEUR', FI003],
   203	    ['FI-004', 'Amendes et penalites', 'Signale les charges non deductibles', 'MINEUR', FI004],
   204	    ['FI-005', 'Dons et liberalites', 'Plafond de deductibilite des dons', 'MINEUR', FI005],
   205	    ['FI-006', 'Provisions non deductibles', 'Verifie la deductibilite des provisions', 'MINEUR', FI006],
   206	    ['FI-007', 'IS calcule vs comptabilise', 'Coherence de l\'impot sur les societes', 'MAJEUR', FI007],
   207	    ['FI-008', 'Minimum forfaitaire (IMF)', 'IS >= 1% du CA', 'MINEUR', FI008],
   208	    ['FI-009', 'TVA a reverser', 'Coherence TVA collectee/deductible/due', 'MINEUR', FI009],
   209	    ['FI-010', 'Charges personnel vs cotisations', 'Coherence salaires/cotisations', 'INFO', FI010],
   210	  ]
   211	
   212	  for (const [ref, nom, desc, sev, fn] of defs) {
   213	    controlRegistry.register(
   214	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_3', actif: true },
   215	      fn
   216	    )
   217	  }
   218	}

================================================================================
FILE: src/services/audit/controls/level8-archive.ts
================================================================================
     1	/**
     2	 * Niveau 8 - Controles archives multi-exercices (AR-001 a AR-007)
     3	 * 7 controles verifiant la continuite et coherence sur plusieurs exercices
     4	 */
     5	
     6	import { AuditContext, ResultatControle, NiveauControle, ArchiveAudit } from '@/types/audit.types'
     7	import { BalanceEntry } from '@/services/liasseDataService'
     8	import { controlRegistry } from '../controlRegistry'
     9	
    10	const NIVEAU: NiveauControle = 8
    11	
    12	function ok(ref: string, nom: string, msg: string): ResultatControle {
    13	  return { ref, nom, niveau: NIVEAU, statut: 'OK', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    14	}
    15	function anomalie(ref: string, nom: string, sev: ResultatControle['severite'], msg: string, det?: ResultatControle['details'], sug?: string): ResultatControle {
    16	  return { ref, nom, niveau: NIVEAU, statut: 'ANOMALIE', severite: sev, message: msg, details: det, suggestion: sug, timestamp: new Date().toISOString() }
    17	}
    18	function na(ref: string, nom: string, msg: string): ResultatControle {
    19	  return { ref, nom, niveau: NIVEAU, statut: 'NON_APPLICABLE', severite: 'OK', message: msg, timestamp: new Date().toISOString() }
    20	}
    21	
    22	function find(bal: BalanceEntry[], prefix: string): BalanceEntry[] {
    23	  return bal.filter((l) => l.compte.toString().startsWith(prefix))
    24	}
    25	function getArchives(ctx: AuditContext): ArchiveAudit[] {
    26	  return ctx.liassesArchivees || []
    27	}
    28	
    29	function needsArchives(ref: string, nom: string, ctx: AuditContext): ResultatControle | null {
    30	  if (!ctx.liassesArchivees || ctx.liassesArchivees.length === 0) {
    31	    return na(ref, nom, 'Aucune archive disponible')
    32	  }
    33	  return null
    34	}
    35	
    36	// AR-001: Balance N-1 = liasse N-1 archivee
    37	function AR001(ctx: AuditContext): ResultatControle {
    38	  const ref = 'AR-001', nom = 'Balance N-1 = Archive N-1'
    39	  const skip = needsArchives(ref, nom, ctx); if (skip) return skip
    40	  if (!ctx.balanceN1 || ctx.balanceN1.length === 0) {
    41	    return na(ref, nom, 'Balance N-1 absente')
    42	  }
    43	
    44	  const exerciceN1 = ctx.exercice ? String(parseInt(ctx.exercice) - 1) : undefined
    45	  if (!exerciceN1) return na(ref, nom, 'Exercice non defini')
    46	
    47	  const archiveN1 = ctx.liassesArchivees!.find((a) => a.exercice === exerciceN1)
    48	  if (!archiveN1) return na(ref, nom, `Pas d'archive pour l'exercice ${exerciceN1}`)
    49	
    50	  // Comparer les totaux
    51	  const totalN1D = ctx.balanceN1.reduce((s, l) => s + l.debit, 0)
    52	  const totalN1C = ctx.balanceN1.reduce((s, l) => s + l.credit, 0)
    53	  const totalArchD = archiveN1.snapshot.totalDebit
    54	  const totalArchC = archiveN1.snapshot.totalCredit
    55	
    56	  const ecartD = Math.abs(totalN1D - totalArchD)
    57	  const ecartC = Math.abs(totalN1C - totalArchC)
    58	
    59	  if (ecartD > 1 || ecartC > 1) {
    60	    return anomalie(ref, nom, 'BLOQUANT',
    61	      `Balance N-1 differente de l'archive: ecarts D=${ecartD.toLocaleString('fr-FR')}, C=${ecartC.toLocaleString('fr-FR')}`,
    62	      { montants: { totalN1Debit: totalN1D, archiveDebit: totalArchD, totalN1Credit: totalN1C, archiveCredit: totalArchC } },
    63	      'La balance N-1 doit correspondre exactement a l\'archive')
    64	  }
    65	  return ok(ref, nom, 'Balance N-1 conforme a l\'archive')
    66	}
    67	
    68	// AR-002: Continuite du capital
    69	function AR002(ctx: AuditContext): ResultatControle {
    70	  const ref = 'AR-002', nom = 'Continuite du capital'
    71	  const skip = needsArchives(ref, nom, ctx); if (skip) return skip
    72	
    73	  const capitalN = find(ctx.balanceN, '101').reduce((s, l) => s + (l.credit - l.debit), 0)
    74	  const archives = getArchives(ctx).sort((a, b) => a.exercice.localeCompare(b.exercice))
    75	  const variations: string[] = []
    76	
    77	  for (const arch of archives) {
    78	    const capArch = find(arch.snapshot.lignes, '101').reduce((s, l) => s + (l.credit - l.debit), 0)
    79	    if (Math.abs(capArch - capitalN) > 1) {
    80	      variations.push(`${arch.exercice}: ${capArch.toLocaleString('fr-FR')} -> N: ${capitalN.toLocaleString('fr-FR')}`)
    81	    }
    82	  }
    83	
    84	  if (variations.length > 0) {
    85	    return anomalie(ref, nom, 'MINEUR',
    86	      `Variation(s) de capital detectee(s) sur les archives`,
    87	      { comptes: variations },
    88	      'Chaque variation de capital doit etre justifiee par une operation formelle')
    89	  }
    90	  return ok(ref, nom, 'Capital stable sur les exercices archives')
    91	}
    92	
    93	// AR-003: Tendance des resultats (5 exercices)
    94	function AR003(ctx: AuditContext): ResultatControle {
    95	  const ref = 'AR-003', nom = 'Tendance des resultats'
    96	  const skip = needsArchives(ref, nom, ctx); if (skip) return skip
    97	
    98	  const archives = getArchives(ctx).sort((a, b) => a.exercice.localeCompare(b.exercice))
    99	  const resultats: Array<{ exercice: string; resultat: number }> = []
   100	
   101	  for (const arch of archives) {
   102	    const res = find(arch.snapshot.lignes, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   103	    resultats.push({ exercice: arch.exercice, resultat: res })
   104	  }
   105	
   106	  const resN = find(ctx.balanceN, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   107	  resultats.push({ exercice: ctx.exercice || 'N', resultat: resN })
   108	
   109	  if (resultats.length >= 3) {
   110	    const derniers = resultats.slice(-3)
   111	    const tousDeficitaires = derniers.every((r) => r.resultat < 0)
   112	    if (tousDeficitaires) {
   113	      return anomalie(ref, nom, 'INFO',
   114	        `Deficits consecutifs sur ${derniers.length} exercices`,
   115	        { comptes: derniers.map((r) => `${r.exercice}: ${r.resultat.toLocaleString('fr-FR')}`) },
   116	        'Situation de deficits consecutifs a surveiller')
   117	    }
   118	  }
   119	  return ok(ref, nom, `Tendance analysee sur ${resultats.length} exercice(s)`)
   120	}
   121	
   122	// AR-004: Rupture de serie
   123	function AR004(ctx: AuditContext): ResultatControle {
   124	  const ref = 'AR-004', nom = 'Rupture de serie'
   125	  const skip = needsArchives(ref, nom, ctx); if (skip) return skip
   126	
   127	  const archives = getArchives(ctx).sort((a, b) => a.exercice.localeCompare(b.exercice))
   128	  if (archives.length < 2) return na(ref, nom, 'Moins de 2 archives')
   129	
   130	  const exercices = archives.map((a) => parseInt(a.exercice)).filter((e) => !isNaN(e))
   131	  const ruptures: string[] = []
   132	  for (let i = 1; i < exercices.length; i++) {
   133	    if (exercices[i] - exercices[i - 1] > 1) {
   134	      ruptures.push(`Gap entre ${exercices[i - 1]} et ${exercices[i]}`)
   135	    }
   136	  }
   137	
   138	  if (ruptures.length > 0) {
   139	    return anomalie(ref, nom, 'MINEUR',
   140	      `Rupture(s) dans la serie des exercices archives`,
   141	      { comptes: ruptures },
   142	      'Archiver les exercices manquants pour assurer la continuite')
   143	  }
   144	  return ok(ref, nom, 'Serie d\'exercices continue')
   145	}
   146	
   147	// AR-005: Coherence reports a nouveau successifs
   148	function AR005(ctx: AuditContext): ResultatControle {
   149	  const ref = 'AR-005', nom = 'Reports a nouveau successifs'
   150	  const skip = needsArchives(ref, nom, ctx); if (skip) return skip
   151	
   152	  const archives = getArchives(ctx).sort((a, b) => a.exercice.localeCompare(b.exercice))
   153	  const incoherences: string[] = []
   154	
   155	  for (let i = 1; i < archives.length; i++) {
   156	    const resultatPrev = find(archives[i - 1].snapshot.lignes, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   157	    const ran = find(archives[i].snapshot.lignes, '12').reduce((s, l) => s + (l.credit - l.debit), 0)
   158	    const ecart = Math.abs(ran - resultatPrev)
   159	    if (ecart > 1) {
   160	      incoherences.push(`${archives[i].exercice}: RAN(${ran.toLocaleString('fr-FR')}) != Res ${archives[i - 1].exercice}(${resultatPrev.toLocaleString('fr-FR')})`)
   161	    }
   162	  }
   163	
   164	  if (incoherences.length > 0) {
   165	    return anomalie(ref, nom, 'MAJEUR',
   166	      `${incoherences.length} incoherence(s) de report a nouveau`,
   167	      { comptes: incoherences },
   168	      'Le report a nouveau de chaque exercice doit correspondre au resultat de l\'exercice precedent')
   169	  }
   170	  return ok(ref, nom, 'Reports a nouveau coherents')
   171	}
   172	
   173	// AR-006: Methodes comptables stables
   174	function AR006(ctx: AuditContext): ResultatControle {
   175	  const ref = 'AR-006', nom = 'Methodes comptables stables'
   176	  const skip = needsArchives(ref, nom, ctx); if (skip) return skip
   177	
   178	  const archives = getArchives(ctx)
   179	  if (archives.length < 2) return na(ref, nom, 'Moins de 2 archives')
   180	
   181	  // Verifier que la structure des comptes est stable
   182	  const prefixesN = new Set(ctx.balanceN.map((l) => l.compte.substring(0, 2)))
   183	  const lastArch = archives[archives.length - 1]
   184	  const prefixesArch = new Set(lastArch.snapshot.lignes.map((l) => l.compte.substring(0, 2)))
   185	
   186	  const nouveaux = [...prefixesN].filter((p) => !prefixesArch.has(p))
   187	  const supprimes = [...prefixesArch].filter((p) => !prefixesN.has(p))
   188	
   189	  if (nouveaux.length > 5 || supprimes.length > 5) {
   190	    return anomalie(ref, nom, 'INFO',
   191	      `Changements de structure: +${nouveaux.length} prefixes, -${supprimes.length} prefixes`,
   192	      { comptes: [...nouveaux.map((p) => `+${p}`), ...supprimes.map((p) => `-${p}`)] })
   193	  }
   194	  return ok(ref, nom, 'Methodes comptables stables')
   195	}
   196	
   197	// AR-007: Coherence ajustements retrospectifs
   198	function AR007(ctx: AuditContext): ResultatControle {
   199	  const ref = 'AR-007', nom = 'Ajustements retrospectifs'
   200	  const skip = needsArchives(ref, nom, ctx); if (skip) return skip
   201	
   202	  // Verifier si le RAN contient des ajustements (difference entre RAN et resultat N-1 > 0)
   203	  const ranN = find(ctx.balanceN, '12').reduce((s, l) => s + (l.credit - l.debit), 0)
   204	  const archives = getArchives(ctx).sort((a, b) => a.exercice.localeCompare(b.exercice))
   205	  const lastArch = archives[archives.length - 1]
   206	  if (!lastArch) return na(ref, nom, 'Pas d\'archive precedente')
   207	
   208	  const resultatArch = find(lastArch.snapshot.lignes, '13').reduce((s, l) => s + (l.credit - l.debit), 0)
   209	  const ecart = ranN - resultatArch
   210	
   211	  if (Math.abs(ecart) > 1) {
   212	    return anomalie(ref, nom, 'MAJEUR',
   213	      `Ajustement retrospectif detecte: ${ecart.toLocaleString('fr-FR')} FCFA (RAN - Resultat archive)`,
   214	      { montants: { ranN, resultatArchive: resultatArch, ajustement: ecart } },
   215	      'Les ajustements retrospectifs doivent etre documentes et justifies (IAS 8)')
   216	  }
   217	  return ok(ref, nom, 'Pas d\'ajustement retrospectif')
   218	}
   219	
   220	// --- Enregistrement ---
   221	
   222	export function registerLevel8Controls(): void {
   223	  const defs: Array<[string, string, string, ResultatControle['severite'], (ctx: AuditContext) => ResultatControle]> = [
   224	    ['AR-001', 'Balance N-1 = Archive N-1', 'Coherence balance N-1 vs archive', 'BLOQUANT', AR001],
   225	    ['AR-002', 'Continuite du capital', 'Stabilite du capital sur les exercices', 'MINEUR', AR002],
   226	    ['AR-003', 'Tendance des resultats', 'Analyse tendance multi-exercices', 'INFO', AR003],
   227	    ['AR-004', 'Rupture de serie', 'Detecte les exercices manquants', 'MINEUR', AR004],
   228	    ['AR-005', 'Reports a nouveau successifs', 'Coherence des RAN successifs', 'MAJEUR', AR005],
   229	    ['AR-006', 'Methodes comptables stables', 'Permanence des methodes', 'INFO', AR006],
   230	    ['AR-007', 'Ajustements retrospectifs', 'Detecte les ajustements IAS 8', 'MAJEUR', AR007],
   231	  ]
   232	
   233	  for (const [ref, nom, desc, sev, fn] of defs) {
   234	    controlRegistry.register(
   235	      { ref, niveau: NIVEAU, nom, description: desc, severiteDefaut: sev, phase: 'PHASE_1', actif: true },
   236	      fn
   237	    )
   238	  }
   239	}

================================================================================
FILE: src/services/audit/index.ts
================================================================================
     1	/**
     2	 * Module d'audit - Barrel exports
     3	 */
     4	
     5	// Registre
     6	export { controlRegistry } from './controlRegistry'
     7	
     8	// Moteur
     9	export { executePhase1, executePhase3, runLevel, computeResume, generateCorrectionReport } from './auditEngine'
    10	
    11	// Storage
    12	export * from './auditStorage'
    13	
    14	// Enregistrement des controles
    15	export { registerLevel0Controls } from './controls/level0-structural'
    16	export { registerLevel1Controls } from './controls/level1-fundamental'
    17	export { registerLevel2Controls } from './controls/level2-ohada-conformity'
    18	export { registerLevel3Controls } from './controls/level3-balance-sense'
    19	export { registerLevel4Controls } from './controls/level4-inter-account'
    20	export { registerLevel5Controls } from './controls/level5-year-over-year'
    21	export { registerLevel6Controls } from './controls/level6-financial-statements'
    22	export { registerLevel7Controls } from './controls/level7-fiscal'
    23	export { registerLevel8Controls } from './controls/level8-archive'
    24	
    25	// Orchestrateur
    26	export { auditOrchestrator } from './auditOrchestrator'
    27	
    28	// Services
    29	export { reclassementService } from './reclassementService'
    30	export { reportGenerator } from './reportGenerator'

================================================================================
FILE: src/services/audit/reclassementService.ts
================================================================================
     1	/**
     2	 * Service de reclassement automatique
     3	 * Detecte et genere les ecritures de reclassement pour les etats financiers
     4	 */
     5	
     6	import { BalanceEntry } from '@/services/liasseDataService'
     7	import type { EcritureComptable } from '@/types/audit.types'
     8	
     9	export interface Inversion {
    10	  type: 'CLIENT_CREDITEUR' | 'FOURNISSEUR_DEBITEUR' | 'BANQUE_CREDITRICE'
    11	  compte: string
    12	  intitule: string
    13	  montant: number
    14	  compteReclassement: string
    15	  libelleReclassement: string
    16	}
    17	
    18	class ReclassementService {
    19	  /**
    20	   * Detecte toutes les inversions de sens dans la balance
    21	   */
    22	  detecterInversions(balance: BalanceEntry[]): Inversion[] {
    23	    const inversions: Inversion[] = []
    24	
    25	    for (const l of balance) {
    26	      const solde = (l.solde_debit || 0) - (l.solde_credit || 0)
    27	      const num = l.compte.toString()
    28	
    29	      // Clients crediteurs (411x avec solde crediteur)
    30	      if (num.startsWith('411') && solde < -1) {
    31	        inversions.push({
    32	          type: 'CLIENT_CREDITEUR',
    33	          compte: num,
    34	          intitule: l.intitule,
    35	          montant: Math.abs(solde),
    36	          compteReclassement: '419',
    37	          libelleReclassement: 'Clients crediteurs - reclassement passif',
    38	        })
    39	      }
    40	
    41	      // Fournisseurs debiteurs (401x avec solde debiteur)
    42	      if (num.startsWith('401') && solde > 1) {
    43	        inversions.push({
    44	          type: 'FOURNISSEUR_DEBITEUR',
    45	          compte: num,
    46	          intitule: l.intitule,
    47	          montant: solde,
    48	          compteReclassement: '409',
    49	          libelleReclassement: 'Fournisseurs debiteurs - reclassement actif',
    50	        })
    51	      }
    52	
    53	      // Banques creditrices (52x avec solde crediteur)
    54	      if (num.startsWith('52') && solde < -1) {
    55	        inversions.push({
    56	          type: 'BANQUE_CREDITRICE',
    57	          compte: num,
    58	          intitule: l.intitule,
    59	          montant: Math.abs(solde),
    60	          compteReclassement: '52_PASSIF',
    61	          libelleReclassement: 'Tresorerie-passif (concours bancaires)',
    62	        })
    63	      }
    64	    }
    65	
    66	    return inversions
    67	  }
    68	
    69	  /**
    70	   * Genere les ecritures de reclassement pour les inversions detectees
    71	   */
    72	  genererReclassements(inversions: Inversion[]): EcritureComptable[] {
    73	    return inversions.map((inv) => ({
    74	      journal: 'OD',
    75	      date: new Date().toISOString().slice(0, 10),
    76	      lignes: [
    77	        {
    78	          sens: 'D' as const,
    79	          compte: inv.compte,
    80	          libelle: `Reclassement ${inv.intitule}`,
    81	          montant: inv.montant,
    82	        },
    83	        {
    84	          sens: 'C' as const,
    85	          compte: inv.compteReclassement,
    86	          libelle: inv.libelleReclassement,
    87	          montant: inv.montant,
    88	        },
    89	      ],
    90	      commentaire: `Reclassement ${inv.type}: ${inv.compte} (${inv.intitule}) -> ${inv.compteReclassement}`,
    91	    }))
    92	  }
    93	
    94	  /**
    95	   * Calcule le resume des reclassements
    96	   */
    97	  getResume(inversions: Inversion[]): {
    98	    clientsCrediteurs: { count: number; montant: number }
    99	    fournisseursDebiteurs: { count: number; montant: number }
   100	    banquesCreditrices: { count: number; montant: number }
   101	    total: number
   102	  } {
   103	    const clientsCrediteurs = inversions.filter((i) => i.type === 'CLIENT_CREDITEUR')
   104	    const fournisseursDebiteurs = inversions.filter((i) => i.type === 'FOURNISSEUR_DEBITEUR')
   105	    const banquesCreditrices = inversions.filter((i) => i.type === 'BANQUE_CREDITRICE')
   106	
   107	    return {
   108	      clientsCrediteurs: {
   109	        count: clientsCrediteurs.length,
   110	        montant: clientsCrediteurs.reduce((s, i) => s + i.montant, 0),
   111	      },
   112	      fournisseursDebiteurs: {
   113	        count: fournisseursDebiteurs.length,
   114	        montant: fournisseursDebiteurs.reduce((s, i) => s + i.montant, 0),
   115	      },
   116	      banquesCreditrices: {
   117	        count: banquesCreditrices.length,
   118	        montant: banquesCreditrices.reduce((s, i) => s + i.montant, 0),
   119	      },
   120	      total: inversions.reduce((s, i) => s + i.montant, 0),
   121	    }
   122	  }
   123	}
   124	
   125	export const reclassementService = new ReclassementService()

================================================================================
FILE: src/services/audit/reportGenerator.ts
================================================================================
     1	/**
     2	 * Generateur de rapports d'audit exportables (HTML et CSV)
     3	 */
     4	
     5	import type { SessionAudit, ResultatControle, Severite } from '@/types/audit.types'
     6	import { NIVEAUX_NOMS } from '@/types/audit.types'
     7	
     8	class ReportGenerator {
     9	  /**
    10	   * Genere un rapport HTML complet
    11	   */
    12	  generateHTML(session: SessionAudit, resultats: ResultatControle[]): string {
    13	    const resume = session.resume
    14	    const date = new Date(session.dateDebut).toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' })
    15	
    16	    const severiteColor = (sev: Severite) => {
    17	      const colors: Record<Severite, string> = {
    18	        BLOQUANT: '#dc2626', MAJEUR: '#d97706', MINEUR: '#fbbf24', INFO: '#0ea5e9', OK: '#16a34a'
    19	      }
    20	      return colors[sev]
    21	    }
    22	
    23	    // Grouper par niveau
    24	    const parNiveau: Record<number, ResultatControle[]> = {}
    25	    for (const r of resultats) {
    26	      if (!parNiveau[r.niveau]) parNiveau[r.niveau] = []
    27	      parNiveau[r.niveau].push(r)
    28	    }
    29	
    30	    const niveauxHTML = Object.entries(parNiveau)
    31	      .sort(([a], [b]) => parseInt(a) - parseInt(b))
    32	      .map(([niveau, items]) => {
    33	        const n = parseInt(niveau)
    34	        const okCount = items.filter((r) => r.statut === 'OK').length
    35	        const anomCount = items.filter((r) => r.statut === 'ANOMALIE').length
    36	        const rows = items.map((r) => `
    37	          <tr>
    38	            <td style="font-family:monospace;font-weight:bold;padding:6px 8px">${r.ref}</td>
    39	            <td style="padding:6px 8px">${r.nom}</td>
    40	            <td style="padding:6px 8px;text-align:center">
    41	              <span style="background:${severiteColor(r.severite)}20;color:${severiteColor(r.severite)};padding:2px 8px;border-radius:4px;font-size:12px;font-weight:bold">${r.severite}</span>
    42	            </td>
    43	            <td style="padding:6px 8px">${r.message}</td>
    44	            <td style="padding:6px 8px;color:#666">${r.suggestion || '-'}</td>
    45	          </tr>
    46	        `).join('')
    47	
    48	        return `
    49	          <h3 style="margin-top:24px;color:#1a237e">Niveau ${n} - ${NIVEAUX_NOMS[n as keyof typeof NIVEAUX_NOMS] || ''}</h3>
    50	          <p style="color:#666">${okCount} OK, ${anomCount} anomalies sur ${items.length} controles</p>
    51	          <table style="width:100%;border-collapse:collapse;margin-bottom:16px">
    52	            <thead>
    53	              <tr style="background:#f5f5f5">
    54	                <th style="text-align:left;padding:8px;border-bottom:2px solid #e5e5e5">Ref</th>
    55	                <th style="text-align:left;padding:8px;border-bottom:2px solid #e5e5e5">Controle</th>
    56	                <th style="text-align:center;padding:8px;border-bottom:2px solid #e5e5e5">Severite</th>
    57	                <th style="text-align:left;padding:8px;border-bottom:2px solid #e5e5e5">Resultat</th>
    58	                <th style="text-align:left;padding:8px;border-bottom:2px solid #e5e5e5">Suggestion</th>
    59	              </tr>
    60	            </thead>
    61	            <tbody>
    62	              ${rows}
    63	            </tbody>
    64	          </table>
    65	        `
    66	      })
    67	      .join('')
    68	
    69	    return `<!DOCTYPE html>
    70	<html lang="fr">
    71	<head>
    72	  <meta charset="UTF-8">
    73	  <title>Rapport d'Audit - TaxPilot</title>
    74	  <style>
    75	    body { font-family: 'Segoe UI', Tahoma, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; color: #333; }
    76	    h1 { color: #1a237e; border-bottom: 3px solid #1a237e; padding-bottom: 12px; }
    77	    h2 { color: #283593; margin-top: 32px; }
    78	    .summary-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; margin: 20px 0; }
    79	    .summary-card { text-align: center; padding: 16px; border-radius: 8px; }
    80	    table { font-size: 13px; }
    81	    tr:nth-child(even) { background: #fafafa; }
    82	    td, th { border-bottom: 1px solid #eee; }
    83	    @media print { body { max-width: none; } }
    84	  </style>
    85	</head>
    86	<body>
    87	  <h1>Rapport d'Audit de Balance</h1>
    88	  <p><strong>Exercice:</strong> ${session.exercice} | <strong>Date:</strong> ${date} | <strong>Phase:</strong> ${session.phase} | <strong>ID:</strong> ${session.id}</p>
    89	
    90	  <h2>Synthese</h2>
    91	  <div class="summary-grid">
    92	    <div class="summary-card" style="background:#fef2f2">
    93	      <div style="font-size:28px;font-weight:bold;color:#dc2626">${resume.parSeverite.BLOQUANT}</div>
    94	      <div>Bloquants</div>
    95	    </div>
    96	    <div class="summary-card" style="background:#fffbeb">
    97	      <div style="font-size:28px;font-weight:bold;color:#d97706">${resume.parSeverite.MAJEUR}</div>
    98	      <div>Majeurs</div>
    99	    </div>
   100	    <div class="summary-card" style="background:#fefce8">
   101	      <div style="font-size:28px;font-weight:bold;color:#fbbf24">${resume.parSeverite.MINEUR}</div>
   102	      <div>Mineurs</div>
   103	    </div>
   104	    <div class="summary-card" style="background:#eff6ff">
   105	      <div style="font-size:28px;font-weight:bold;color:#0ea5e9">${resume.parSeverite.INFO}</div>
   106	      <div>Info</div>
   107	    </div>
   108	    <div class="summary-card" style="background:#f0fdf4">
   109	      <div style="font-size:28px;font-weight:bold;color:#16a34a">${resume.scoreGlobal}%</div>
   110	      <div>Score</div>
   111	    </div>
   112	  </div>
   113	
   114	  <p><strong>Total:</strong> ${resume.totalControles} controles executes | <strong>OK:</strong> ${resume.parSeverite.OK} | <strong>Anomalies:</strong> ${resume.totalControles - resume.parSeverite.OK}</p>
   115	
   116	  <h2>Detail par niveau</h2>
   117	  ${niveauxHTML}
   118	
   119	  <hr style="margin-top:40px">
   120	  <p style="color:#999;font-size:12px;text-align:center">
   121	    Rapport genere par TaxPilot - Moteur d'audit 108 points SYSCOHADA Revise
   122	    <br>Date de generation: ${new Date().toLocaleString('fr-FR')}
   123	  </p>
   124	</body>
   125	</html>`
   126	  }
   127	
   128	  /**
   129	   * Genere un export CSV
   130	   */
   131	  generateCSV(resultats: ResultatControle[]): string {
   132	    const headers = ['Ref', 'Nom', 'Niveau', 'Statut', 'Severite', 'Message', 'Suggestion', 'Comptes', 'Reference'].join(';')
   133	    const rows = resultats.map((r) =>
   134	      [
   135	        r.ref,
   136	        `"${r.nom}"`,
   137	        r.niveau,
   138	        r.statut,
   139	        r.severite,
   140	        `"${r.message.replace(/"/g, '""')}"`,
   141	        `"${(r.suggestion || '').replace(/"/g, '""')}"`,
   142	        `"${(r.details?.comptes || []).join(', ')}"`,
   143	        `"${r.referenceReglementaire || ''}"`,
   144	      ].join(';')
   145	    )
   146	    return [headers, ...rows].join('\n')
   147	  }
   148	
   149	  /**
   150	   * Declenche le telechargement
   151	   */
   152	  downloadReport(format: 'html' | 'csv', session: SessionAudit, resultats: ResultatControle[]): void {
   153	    let content: string
   154	    let mimeType: string
   155	    let extension: string
   156	
   157	    if (format === 'html') {
   158	      content = this.generateHTML(session, resultats)
   159	      mimeType = 'text/html'
   160	      extension = 'html'
   161	    } else {
   162	      content = this.generateCSV(resultats)
   163	      mimeType = 'text/csv'
   164	      extension = 'csv'
   165	    }
   166	
   167	    const blob = new Blob([content], { type: `${mimeType};charset=utf-8` })
   168	    const url = URL.createObjectURL(blob)
   169	    const a = document.createElement('a')
   170	    a.href = url
   171	    a.download = `rapport-audit-${session.exercice}-${session.id}.${extension}`
   172	    document.body.appendChild(a)
   173	    a.click()
   174	    document.body.removeChild(a)
   175	    URL.revokeObjectURL(url)
   176	  }
   177	}
   178	
   179	export const reportGenerator = new ReportGenerator()

================================================================================
FILE: src/services/auditService.ts
================================================================================
     1	/**
     2	 * Service pour l'audit et le contr√¥le des liasses fiscales
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface AuditSession {
     9	  id: string
    10	  entreprise: string
    11	  entreprise_detail?: {
    12	    raison_sociale: string
    13	    numero_contribuable: string
    14	  }
    15	  exercice: string
    16	  liasse: string
    17	  type_audit: 'COHERENCE' | 'CONFORMITE' | 'FISCAL' | 'COMPLET'
    18	  niveau: 'RAPIDE' | 'STANDARD' | 'APPROFONDI'
    19	  statut: 'EN_ATTENTE' | 'EN_COURS' | 'TERMINE' | 'ERREUR'
    20	  progression: number
    21	  auditeur?: string
    22	  date_debut: string
    23	  date_fin?: string
    24	  resultats: {
    25	    score_global: number
    26	    nb_anomalies: number
    27	    nb_warnings: number
    28	    nb_erreurs: number
    29	    conformite_pourcentage: number
    30	  }
    31	  created_at: string
    32	  updated_at: string
    33	}
    34	
    35	export interface AuditAnomalie {
    36	  id: string
    37	  audit_session: string
    38	  type: 'ERREUR' | 'WARNING' | 'INFO'
    39	  categorie: 'COHERENCE' | 'CALCUL' | 'REGLEMENTATION' | 'FORMAT'
    40	  code_regle: string
    41	  titre: string
    42	  description: string
    43	  localisation: {
    44	    etat: string
    45	    ligne?: string
    46	    cellule?: string
    47	    compte?: string
    48	  }
    49	  valeur_attendue?: any
    50	  valeur_trouvee?: any
    51	  impact_fiscal?: number
    52	  suggestion?: string
    53	  statut: 'NOUVELLE' | 'EN_COURS' | 'RESOLUE' | 'IGNOREE'
    54	  priorite: 'FAIBLE' | 'MOYENNE' | 'HAUTE' | 'CRITIQUE'
    55	  created_at: string
    56	}
    57	
    58	export interface AuditRequest {
    59	  entreprise_id: string
    60	  exercice_id: string
    61	  liasse_id: string
    62	  type_audit: 'COHERENCE' | 'CONFORMITE' | 'FISCAL' | 'COMPLET'
    63	  niveau: 'RAPIDE' | 'STANDARD' | 'APPROFONDI'
    64	  options?: {
    65	    controles_personnalises: string[]
    66	    seuil_materialite?: number
    67	    inclure_recommandations: boolean
    68	  }
    69	}
    70	
    71	export interface ControlRule {
    72	  id: string
    73	  code: string
    74	  nom: string
    75	  description: string
    76	  categorie: string
    77	  type_controle: 'AUTOMATIQUE' | 'MANUEL' | 'MIXTE'
    78	  formule?: string
    79	  seuil_alerte?: number
    80	  obligatoire: boolean
    81	  applicable_types: string[]
    82	  created_at: string
    83	}
    84	
    85	class AuditService {
    86	  private baseUrl = '/api/v1/audit'
    87	
    88	  // Sessions d'audit - CONNEXION R√âELLE AU BACKEND
    89	  async startAudit(request: AuditRequest): Promise<AuditSession> {
    90	    console.log('üì§ Starting audit session in backend...', request)
    91	    return apiClient.post(`${this.baseUrl}/sessions/`, request)
    92	  }
    93	
    94	  async getAuditSessions(params?: {
    95	    entreprise?: string
    96	    exercice?: string
    97	    type_audit?: string
    98	    statut?: string
    99	    page?: number
   100	    page_size?: number
   101	  }) {
   102	    console.log('üîÑ Fetching audit sessions from backend...', params)
   103	    return apiClient.get(`${this.baseUrl}/sessions/`, params)
   104	  }
   105	
   106	  async getAuditSession(id: string): Promise<AuditSession> {
   107	    console.log(`üîÑ Fetching audit session ${id} from backend...`)
   108	    return apiClient.get(`${this.baseUrl}/sessions/${id}/`)
   109	  }
   110	
   111	  async getAuditStatus(id: string): Promise<AuditSession> {
   112	    console.log(`üîÑ Getting audit status ${id} from backend...`)
   113	    return apiClient.get(`${this.baseUrl}/sessions/${id}/status/`)
   114	  }
   115	
   116	  async cancelAudit(id: string): Promise<void> {
   117	    console.log(`üõë Cancelling audit ${id} on backend...`)
   118	    return apiClient.post(`${this.baseUrl}/sessions/${id}/cancel/`)
   119	  }
   120	
   121	  // Anomalies et r√©sultats - CONNEXION R√âELLE AU BACKEND
   122	  async getAuditAnomalies(sessionId: string, params?: {
   123	    type?: string
   124	    categorie?: string
   125	    statut?: string
   126	    priorite?: string
   127	    page?: number
   128	    page_size?: number
   129	  }) {
   130	    console.log(`üîÑ Fetching anomalies for audit ${sessionId}...`, params)
   131	    return apiClient.get(`${this.baseUrl}/sessions/${sessionId}/anomalies/`, params)
   132	  }
   133	
   134	  async getAnomalie(id: string): Promise<AuditAnomalie> {
   135	    console.log(`üîÑ Fetching anomalie ${id} from backend...`)
   136	    return apiClient.get(`${this.baseUrl}/anomalies/${id}/`)
   137	  }
   138	
   139	  async updateAnomalieStatus(id: string, statut: string, commentaire?: string) {
   140	    console.log(`üì§ Updating anomalie ${id} status to ${statut}...`)
   141	    return apiClient.patch(`${this.baseUrl}/anomalies/${id}/`, {
   142	      statut,
   143	      commentaire
   144	    })
   145	  }
   146	
   147	  async resolveAnomalie(id: string, resolution: {
   148	    action: string
   149	    commentaire: string
   150	    nouvelle_valeur?: any
   151	  }) {
   152	    console.log(`‚úÖ Resolving anomalie ${id}...`)
   153	    return apiClient.post(`${this.baseUrl}/anomalies/${id}/resolve/`, resolution)
   154	  }
   155	
   156	  // R√®gles de contr√¥le - CONNEXION R√âELLE AU BACKEND
   157	  async getControlRules(params?: {
   158	    categorie?: string
   159	    type_controle?: string
   160	    applicable_type?: string
   161	    page?: number
   162	  }) {
   163	    console.log('üîÑ Fetching control rules from backend...', params)
   164	    return apiClient.get(`${this.baseUrl}/rules/`, params)
   165	  }
   166	
   167	  async getControlRule(id: string): Promise<ControlRule> {
   168	    console.log(`üîÑ Fetching control rule ${id} from backend...`)
   169	    return apiClient.get(`${this.baseUrl}/rules/${id}/`)
   170	  }
   171	
   172	  async createControlRule(rule: Partial<ControlRule>): Promise<ControlRule> {
   173	    console.log('üì§ Creating control rule in backend...', rule)
   174	    return apiClient.post(`${this.baseUrl}/rules/`, rule)
   175	  }
   176	
   177	  async updateControlRule(id: string, rule: Partial<ControlRule>): Promise<ControlRule> {
   178	    console.log(`üì§ Updating control rule ${id} in backend...`)
   179	    return apiClient.patch(`${this.baseUrl}/rules/${id}/`, rule)
   180	  }
   181	
   182	  async deleteControlRule(id: string): Promise<void> {
   183	    console.log(`üóëÔ∏è Deleting control rule ${id} from backend...`)
   184	    return apiClient.delete(`${this.baseUrl}/rules/${id}/`)
   185	  }
   186	
   187	  // Tests et validations - CONNEXION R√âELLE AU BACKEND
   188	  async testControlRule(ruleId: string, testData: any) {
   189	    console.log(`üß™ Testing control rule ${ruleId} on backend...`)
   190	    return apiClient.post(`${this.baseUrl}/rules/${ruleId}/test/`, testData)
   191	  }
   192	
   193	  async validateLiasse(liasseId: string, ruleIds?: string[]) {
   194	    console.log(`üîç Validating liasse ${liasseId} with custom rules...`)
   195	    return apiClient.post(`${this.baseUrl}/validate/`, {
   196	      liasse_id: liasseId,
   197	      rule_ids: ruleIds
   198	    })
   199	  }
   200	
   201	  // Rapports d'audit - CONNEXION R√âELLE AU BACKEND
   202	  async generateAuditReport(sessionId: string, options?: {
   203	    format: 'PDF' | 'EXCEL' | 'XML'
   204	    inclure_annexes: boolean
   205	    niveau_detail: 'RESUME' | 'DETAILLE' | 'COMPLET'
   206	  }) {
   207	    console.log(`üìÑ Generating audit report for session ${sessionId}...`)
   208	    return apiClient.post(`${this.baseUrl}/sessions/${sessionId}/report/`, options)
   209	  }
   210	
   211	  async downloadAuditReport(sessionId: string, format: 'PDF' | 'EXCEL'): Promise<Blob> {
   212	    console.log(`üì• Downloading audit report ${sessionId} as ${format}...`)
   213	    const response = await apiClient.client.get(`${this.baseUrl}/sessions/${sessionId}/download/`, {
   214	      params: { format },
   215	      responseType: 'blob'
   216	    })
   217	    return response.data
   218	  }
   219	
   220	  // Statistiques et m√©triques - CONNEXION R√âELLE AU BACKEND
   221	  async getAuditStats(params?: {
   222	    entreprise?: string
   223	    period?: string
   224	    type_audit?: string
   225	  }) {
   226	    console.log('üìä Getting audit stats from backend...', params)
   227	    return apiClient.get(`${this.baseUrl}/stats/`, params)
   228	  }
   229	
   230	  async getAuditTrends(params?: {
   231	    entreprise?: string
   232	    period_start?: string
   233	    period_end?: string
   234	  }) {
   235	    console.log('üìà Getting audit trends from backend...', params)
   236	    return apiClient.get(`${this.baseUrl}/trends/`, params)
   237	  }
   238	
   239	  // IA et recommandations - CONNEXION R√âELLE AU BACKEND
   240	  async getAIRecommendations(sessionId: string) {
   241	    console.log(`ü§ñ Getting AI recommendations for audit ${sessionId}...`)
   242	    return apiClient.get(`${this.baseUrl}/sessions/${sessionId}/ai-recommendations/`)
   243	  }
   244	
   245	  async analyzeWithAI(data: {
   246	    liasse_id: string
   247	    focus_areas?: string[]
   248	    analysis_level: 'BASIC' | 'ADVANCED' | 'EXPERT'
   249	  }) {
   250	    console.log('ü§ñ Starting AI analysis on backend...', data)
   251	    return apiClient.post(`${this.baseUrl}/ai-analyze/`, data)
   252	  }
   253	
   254	  // Historique et comparaisons - CONNEXION R√âELLE AU BACKEND
   255	  async getAuditHistory(entrepriseId: string, exerciceId?: string) {
   256	    console.log(`üîÑ Getting audit history for entreprise ${entrepriseId}...`)
   257	    return apiClient.get(`${this.baseUrl}/history/`, {
   258	      entreprise: entrepriseId,
   259	      exercice: exerciceId
   260	    })
   261	  }
   262	
   263	  async compareAudits(audit1Id: string, audit2Id: string) {
   264	    console.log(`üìä Comparing audits ${audit1Id} and ${audit2Id}...`)
   265	    return apiClient.get(`${this.baseUrl}/compare/`, {
   266	      audit1: audit1Id,
   267	      audit2: audit2Id
   268	    })
   269	  }
   270	}
   271	
   272	export const auditService = new AuditService()
   273	export default auditService
================================================================================
FILE: src/services/authService.ts
================================================================================
     1	/**
     2	 * Service d'authentification pour TaxPilot
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient, type AuthResponse, type User, type LoginCredentials, type SignupData, type SignupResponse } from './apiClient'
     7	
     8	// Exports des types depuis apiClient pour compatibilit√©
     9	export type { User, LoginCredentials, AuthResponse, SignupData, SignupResponse }
    10	
    11	class AuthService {
    12	  // Authentification - CONNEXION R√âELLE AU BACKEND
    13	  async login(credentials: LoginCredentials): Promise<AuthResponse> {
    14	    try {
    15	      console.log('üîê Logging in to backend...', credentials.username)
    16	      const response = await apiClient.login(credentials)
    17	      console.log('‚úÖ Login successful:', response.success)
    18	      return response
    19	    } catch (error) {
    20	      console.error('‚ùå Login failed:', error)
    21	      throw error
    22	    }
    23	  }
    24	
    25	  async signup(signupData: SignupData): Promise<SignupResponse> {
    26	    try {
    27	      console.log('üìù Signing up new organization...', signupData.name)
    28	      const response = await apiClient.signup(signupData)
    29	      console.log('‚úÖ Signup successful:', response.organization.name)
    30	      return response
    31	    } catch (error) {
    32	      console.error('‚ùå Signup failed:', error)
    33	      throw error
    34	    }
    35	  }
    36	
    37	  async logout(): Promise<void> {
    38	    try {
    39	      console.log('üö™ Logging out...')
    40	      // TODO: Appeler l'endpoint de logout c√¥t√© serveur si n√©cessaire
    41	      apiClient.logout()
    42	      console.log('‚úÖ Logout successful')
    43	    } catch (error) {
    44	      console.error('‚ùå Logout error:', error)
    45	      // Forcer la d√©connexion locale m√™me si l'API √©choue
    46	      apiClient.logout()
    47	    }
    48	  }
    49	
    50	  async refreshToken(): Promise<string | null> {
    51	    console.log('üîÑ Refreshing token...')
    52	    try {
    53	      // Le refreshToken est g√©r√© automatiquement par apiClient
    54	      const token = apiClient.getAccessToken()
    55	      console.log('‚úÖ Token refresh handled automatically')
    56	      return token
    57	    } catch (error) {
    58	      console.error('‚ùå Token refresh failed:', error)
    59	      return null
    60	    }
    61	  }
    62	
    63	  // √âtat de l'authentification - CONNEXION R√âELLE AU BACKEND
    64	  isAuthenticated(): boolean {
    65	    return apiClient.isAuthenticated()
    66	  }
    67	
    68	  getCurrentUser(): User | null {
    69	    return apiClient.getCurrentUser()
    70	  }
    71	
    72	  // V√©rification de permissions
    73	  hasPermission(_permission: string): boolean {
    74	    const user = this.getCurrentUser()
    75	    if (!user) return false
    76	
    77	    // Super admin a tous les droits
    78	    if (user.is_superuser) return true
    79	
    80	    // TODO: Impl√©menter la logique de permissions granulaires
    81	    // V√©rifier les permissions sp√©cifiques dans user.permissions
    82	
    83	    return false
    84	  }
    85	
    86	  canAccessEntreprise(_entrepriseId: string): boolean {
    87	    const user = this.getCurrentUser()
    88	    if (!user) return false
    89	
    90	    // Super admin peut acc√©der √† toutes les entreprises
    91	    if (user.is_superuser) return true
    92	
    93	    // TODO: V√©rifier les droits d'acc√®s par entreprise
    94	    // return user.entreprise_accesses?.includes(entrepriseId)
    95	
    96	    return true // Temporaire pour le d√©veloppement
    97	  }
    98	
    99	  isStaff(): boolean {
   100	    const user = this.getCurrentUser()
   101	    return user?.is_staff || false
   102	  }
   103	
   104	  isSuperUser(): boolean {
   105	    const user = this.getCurrentUser()
   106	    return user?.is_superuser || false
   107	  }
   108	
   109	  // Profil utilisateur
   110	  getFullName(): string {
   111	    const user = this.getCurrentUser()
   112	    if (!user) return ''
   113	    
   114	    const fullName = `${user.first_name || ''} ${user.last_name || ''}`.trim()
   115	    return fullName || user.username
   116	  }
   117	
   118	  getInitials(): string {
   119	    const user = this.getCurrentUser()
   120	    if (!user) return '??'
   121	
   122	    if (user.first_name && user.last_name) {
   123	      return `${user.first_name[0]}${user.last_name[0]}`.toUpperCase()
   124	    }
   125	
   126	    return user.username.substring(0, 2).toUpperCase()
   127	  }
   128	
   129	  // Utilitaires - CONNEXION R√âELLE AU BACKEND
   130	  async checkHealth(): Promise<boolean> {
   131	    try {
   132	      console.log('üè• Checking backend health...')
   133	      await apiClient.get('/api/v1/core/health/')
   134	      console.log('‚úÖ Backend is healthy')
   135	      return true
   136	    } catch (error) {
   137	      console.error('‚ùå Backend health check failed:', error)
   138	      return false
   139	    }
   140	  }
   141	
   142	  // Nouvelles m√©thodes pour l'API backend
   143	  async getCurrentUserFromAPI(): Promise<User | null> {
   144	    try {
   145	      console.log('üë§ Fetching current user from backend...')
   146	      const response = await apiClient.get<{ success: boolean; data: User }>('/api/v1/core/auth/me/')
   147	      if (response.success) {
   148	        console.log('‚úÖ User fetched from backend:', response.data.username)
   149	        return response.data
   150	      }
   151	      return null
   152	    } catch (error) {
   153	      console.error('‚ùå Failed to fetch user from backend:', error)
   154	      return null
   155	    }
   156	  }
   157	
   158	  async updateProfile(updates: Partial<User>): Promise<User | null> {
   159	    try {
   160	      console.log('üë§ Updating user profile...', updates)
   161	      const response = await apiClient.patch<{ success: boolean; data: User }>('/api/v1/core/auth/me/', updates)
   162	      if (response.success) {
   163	        console.log('‚úÖ Profile updated successfully')
   164	        return response.data
   165	      }
   166	      return null
   167	    } catch (error) {
   168	      console.error('‚ùå Failed to update profile:', error)
   169	      throw error
   170	    }
   171	  }
   172	}
   173	
   174	export const authService = new AuthService()
   175	export default authService
================================================================================
FILE: src/services/backupService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des sauvegardes via l'API
     3	 */
     4	
     5	import { apiClient } from './apiClient'
     6	
     7	export interface BackupConfiguration {
     8	  id?: number
     9	  entreprise: number
    10	  nom_configuration: string
    11	  type_sauvegarde: 'COMPLETE' | 'INCREMENTAL' | 'DIFFERENTIAL'
    12	  frequence: 'MANUAL' | 'DAILY' | 'WEEKLY' | 'MONTHLY'
    13	  type_stockage: 'LOCAL' | 'AWS_S3' | 'GOOGLE_CLOUD' | 'AZURE' | 'DROPBOX'
    14	  chemin_stockage: string
    15	  stockage_cloud_config: Record<string, any>
    16	  chiffrement_active: boolean
    17	  type_chiffrement: string
    18	  mot_de_passe_requis: boolean
    19	  heure_execution: string
    20	  jour_semaine?: number
    21	  jour_mois?: number
    22	  retention_jours: number
    23	  max_sauvegardes: number
    24	  modules_inclus: string[]
    25	  inclure_fichiers: boolean
    26	  inclure_logs: boolean
    27	  est_active: boolean
    28	  derniere_execution?: string
    29	  prochaine_execution?: string
    30	  created_at?: string
    31	  updated_at?: string
    32	}
    33	
    34	export interface BackupHistory {
    35	  id?: number
    36	  configuration: number
    37	  configuration_nom: string
    38	  date_debut: string
    39	  date_fin?: string
    40	  statut: 'PENDING' | 'RUNNING' | 'SUCCESS' | 'FAILED' | 'CANCELLED'
    41	  taille_donnees: number
    42	  taille_compresse: number
    43	  taille_formatee: string
    44	  taille_compresse_formatee: string
    45	  fichier_backup: string
    46	  checksum: string
    47	  version_application: string
    48	  nombre_fichiers: number
    49	  nombre_tables: number
    50	  message_statut: string
    51	  logs_execution: string
    52	  erreurs: string[]
    53	  validation_effectuee: boolean
    54	  validation_reussie: boolean
    55	  date_validation?: string
    56	  duree_execution?: string
    57	  created_at?: string
    58	  updated_at?: string
    59	}
    60	
    61	export interface RestoreOperation {
    62	  id?: number
    63	  entreprise: number
    64	  backup_source: number
    65	  backup_source_nom: string
    66	  backup_source_date: string
    67	  utilisateur?: number
    68	  utilisateur_nom: string
    69	  type_restauration: 'COMPLETE' | 'SELECTIVE' | 'POINT_IN_TIME'
    70	  modules_a_restaurer: string[]
    71	  restaurer_fichiers: boolean
    72	  ecraser_donnees: boolean
    73	  date_demande: string
    74	  date_debut?: string
    75	  date_fin?: string
    76	  statut: 'PENDING' | 'RUNNING' | 'SUCCESS' | 'FAILED' | 'CANCELLED'
    77	  elements_restaures: number
    78	  elements_echec: number
    79	  message_statut: string
    80	  logs_restauration: string
    81	  validation_pre_restauration: boolean
    82	  validation_post_restauration: boolean
    83	  created_at?: string
    84	  updated_at?: string
    85	}
    86	
    87	export interface BackupStats {
    88	  total_configurations: number
    89	  configurations_actives: number
    90	  derniere_sauvegarde?: {
    91	    date: string
    92	    statut: string
    93	    taille: string
    94	  }
    95	  taille_totale_sauvegardes: number
    96	  nombre_sauvegardes_reussies: number
    97	  nombre_sauvegardes_echec: number
    98	}
    99	
   100	export interface StorageType {
   101	  code: string
   102	  label: string
   103	  description: string
   104	}
   105	
   106	class BackupService {
   107	  private configUrl = '/api/v1/parametrage/backup-configs'
   108	  private historyUrl = '/api/v1/parametrage/backup-history'
   109	  private restoreUrl = '/api/v1/parametrage/restore-operations'
   110	
   111	  // === CONFIGURATIONS DE SAUVEGARDE ===
   112	
   113	  // R√©cup√©rer toutes les configurations d'une entreprise
   114	  async getBackupConfigs(entrepriseId: number): Promise<BackupConfiguration[]> {
   115	    try {
   116	      const data = await apiClient.get<{ results?: BackupConfiguration[] } | BackupConfiguration[]>(`${this.configUrl}/?entreprise=${entrepriseId}`)
   117	      return Array.isArray(data) ? data : (data.results || [])
   118	    } catch (error) {
   119	      console.error('Erreur lors de la r√©cup√©ration des configurations:', error)
   120	      throw error
   121	    }
   122	  }
   123	
   124	  // Cr√©er une nouvelle configuration
   125	  async createBackupConfig(config: Omit<BackupConfiguration, 'id' | 'created_at' | 'updated_at'>): Promise<BackupConfiguration> {
   126	    try {
   127	      const data = await apiClient.post<BackupConfiguration>(this.configUrl + '/', config)
   128	      return data
   129	    } catch (error) {
   130	      console.error('Erreur lors de la cr√©ation de la configuration:', error)
   131	      throw error
   132	    }
   133	  }
   134	
   135	  // Mettre √† jour une configuration
   136	  async updateBackupConfig(id: number, config: Partial<BackupConfiguration>): Promise<BackupConfiguration> {
   137	    try {
   138	      const data = await apiClient.patch<BackupConfiguration>(`${this.configUrl}/${id}/`, config)
   139	      return data
   140	    } catch (error) {
   141	      console.error('Erreur lors de la mise √† jour de la configuration:', error)
   142	      throw error
   143	    }
   144	  }
   145	
   146	  // Supprimer une configuration
   147	  async deleteBackupConfig(id: number): Promise<void> {
   148	    try {
   149	      await apiClient.delete(`${this.configUrl}/${id}/`)
   150	    } catch (error) {
   151	      console.error('Erreur lors de la suppression de la configuration:', error)
   152	      throw error
   153	    }
   154	  }
   155	
   156	  // Ex√©cuter une sauvegarde manuellement
   157	  async executeBackup(configId: number): Promise<{ message: string; backup_id: number; statut: string }> {
   158	    try {
   159	      const data = await apiClient.post<{ message: string; backup_id: number; statut: string }>(`${this.configUrl}/${configId}/execute_backup/`)
   160	      return data
   161	    } catch (error) {
   162	      console.error('Erreur lors de l\'ex√©cution de la sauvegarde:', error)
   163	      throw error
   164	    }
   165	  }
   166	
   167	  // R√©cup√©rer les types de stockage disponibles
   168	  async getStorageTypes(): Promise<StorageType[]> {
   169	    try {
   170	      const data = await apiClient.get<StorageType[]>(`${this.configUrl}/storage_types/`)
   171	      return data
   172	    } catch (error) {
   173	      console.error('Erreur lors de la r√©cup√©ration des types de stockage:', error)
   174	      throw error
   175	    }
   176	  }
   177	
   178	  // R√©cup√©rer les statistiques de sauvegarde
   179	  async getBackupStats(entrepriseId: number): Promise<BackupStats> {
   180	    try {
   181	      const data = await apiClient.get<BackupStats>(`${this.configUrl}/backup_stats/?entreprise=${entrepriseId}`)
   182	      return data
   183	    } catch (error) {
   184	      console.error('Erreur lors de la r√©cup√©ration des statistiques:', error)
   185	      throw error
   186	    }
   187	  }
   188	
   189	  // === HISTORIQUE DES SAUVEGARDES ===
   190	
   191	  // R√©cup√©rer l'historique des sauvegardes
   192	  async getBackupHistory(entrepriseId: number, configId?: number): Promise<BackupHistory[]> {
   193	    try {
   194	      let url = `${this.historyUrl}/?entreprise=${entrepriseId}`
   195	      if (configId) {
   196	        url += `&configuration=${configId}`
   197	      }
   198	      const data = await apiClient.get<{ results?: BackupHistory[] } | BackupHistory[]>(url)
   199	      return Array.isArray(data) ? data : (data.results || [])
   200	    } catch (error) {
   201	      console.error('Erreur lors de la r√©cup√©ration de l\'historique:', error)
   202	      throw error
   203	    }
   204	  }
   205	
   206	  // R√©cup√©rer l'historique r√©cent
   207	  async getRecentBackups(entrepriseId: number, limit: number = 10): Promise<BackupHistory[]> {
   208	    try {
   209	      const data = await apiClient.get<BackupHistory[]>(`${this.historyUrl}/recent/?entreprise=${entrepriseId}&limit=${limit}`)
   210	      return data
   211	    } catch (error) {
   212	      console.error('Erreur lors de la r√©cup√©ration de l\'historique r√©cent:', error)
   213	      throw error
   214	    }
   215	  }
   216	
   217	  // === OP√âRATIONS DE RESTAURATION ===
   218	
   219	  // R√©cup√©rer les op√©rations de restauration
   220	  async getRestoreOperations(entrepriseId: number): Promise<RestoreOperation[]> {
   221	    try {
   222	      const data = await apiClient.get<{ results?: RestoreOperation[] } | RestoreOperation[]>(`${this.restoreUrl}/?entreprise=${entrepriseId}`)
   223	      return Array.isArray(data) ? data : (data.results || [])
   224	    } catch (error) {
   225	      console.error('Erreur lors de la r√©cup√©ration des restaurations:', error)
   226	      throw error
   227	    }
   228	  }
   229	
   230	  // Cr√©er une demande de restauration
   231	  async createRestoreOperation(restore: Omit<RestoreOperation, 'id' | 'date_demande' | 'created_at' | 'updated_at'>): Promise<RestoreOperation> {
   232	    try {
   233	      const data = await apiClient.post<RestoreOperation>(this.restoreUrl + '/', restore)
   234	      return data
   235	    } catch (error) {
   236	      console.error('Erreur lors de la cr√©ation de la restauration:', error)
   237	      throw error
   238	    }
   239	  }
   240	
   241	  // D√©marrer une restauration
   242	  async startRestore(restoreId: number): Promise<RestoreOperation> {
   243	    try {
   244	      const data = await apiClient.post<RestoreOperation>(`${this.restoreUrl}/${restoreId}/start_restore/`)
   245	      return data
   246	    } catch (error) {
   247	      console.error('Erreur lors du d√©marrage de la restauration:', error)
   248	      throw error
   249	    }
   250	  }
   251	
   252	  // Annuler une restauration
   253	  async cancelRestore(restoreId: number): Promise<RestoreOperation> {
   254	    try {
   255	      const data = await apiClient.post<RestoreOperation>(`${this.restoreUrl}/${restoreId}/cancel_restore/`)
   256	      return data
   257	    } catch (error) {
   258	      console.error('Erreur lors de l\'annulation de la restauration:', error)
   259	      throw error
   260	    }
   261	  }
   262	
   263	  // === UTILITAIRES ===
   264	
   265	  // Obtenir les types de sauvegarde
   266	  getBackupTypes() {
   267	    return [
   268	      { value: 'COMPLETE', label: 'Sauvegarde Compl√®te' },
   269	      { value: 'INCREMENTAL', label: 'Sauvegarde Incr√©mentale' },
   270	      { value: 'DIFFERENTIAL', label: 'Sauvegarde Diff√©rentielle' },
   271	    ]
   272	  }
   273	
   274	  // Obtenir les fr√©quences
   275	  getFrequencies() {
   276	    return [
   277	      { value: 'MANUAL', label: 'Manuel' },
   278	      { value: 'DAILY', label: 'Quotidien' },
   279	      { value: 'WEEKLY', label: 'Hebdomadaire' },
   280	      { value: 'MONTHLY', label: 'Mensuel' },
   281	    ]
   282	  }
   283	
   284	  // Obtenir les modules TaxPilot
   285	  getModules() {
   286	    return [
   287	      { value: 'BALANCE', label: 'Balance' },
   288	      { value: 'AUDIT', label: 'Audit' },
   289	      { value: 'GENERATION', label: 'G√©n√©ration' },
   290	      { value: 'TEMPLATES', label: 'Templates' },
   291	      { value: 'REPORTING', label: 'Reporting' },
   292	      { value: 'TAX', label: 'Fiscal' },
   293	      { value: 'CONSOLIDATION', label: 'Consolidation' },
   294	      { value: 'PARAMETRAGE', label: 'Param√©trage' },
   295	    ]
   296	  }
   297	
   298	  // Obtenir les types de restauration
   299	  getRestoreTypes() {
   300	    return [
   301	      { value: 'COMPLETE', label: 'Restauration Compl√®te' },
   302	      { value: 'SELECTIVE', label: 'Restauration S√©lective' },
   303	      { value: 'POINT_IN_TIME', label: 'Restauration √† un Point dans le Temps' },
   304	    ]
   305	  }
   306	
   307	  // Formater la taille en octets
   308	  formatSize(bytes: number): string {
   309	    if (bytes === 0) return '0 B'
   310	    const sizes = ['B', 'KB', 'MB', 'GB', 'TB']
   311	    const i = Math.floor(Math.log(bytes) / Math.log(1024))
   312	    return `${(bytes / Math.pow(1024, i)).toFixed(2)} ${sizes[i]}`
   313	  }
   314	
   315	  // Valider la configuration de sauvegarde
   316	  validateBackupConfig(config: Partial<BackupConfiguration>): string[] {
   317	    const errors: string[] = []
   318	
   319	    if (!config.nom_configuration || config.nom_configuration.trim().length < 3) {
   320	      errors.push('Le nom de configuration doit contenir au moins 3 caract√®res')
   321	    }
   322	
   323	    if (config.frequence === 'WEEKLY' && !config.jour_semaine) {
   324	      errors.push('Le jour de la semaine est obligatoire pour une fr√©quence hebdomadaire')
   325	    }
   326	
   327	    if (config.frequence === 'MONTHLY' && !config.jour_mois) {
   328	      errors.push('Le jour du mois est obligatoire pour une fr√©quence mensuelle')
   329	    }
   330	
   331	    if (config.retention_jours && (config.retention_jours < 1 || config.retention_jours > 365)) {
   332	      errors.push('La r√©tention doit √™tre entre 1 et 365 jours')
   333	    }
   334	
   335	    if (config.max_sauvegardes && (config.max_sauvegardes < 1 || config.max_sauvegardes > 100)) {
   336	      errors.push('Le nombre maximum de sauvegardes doit √™tre entre 1 et 100')
   337	    }
   338	
   339	    return errors
   340	  }
   341	}
   342	
   343	export const backupService = new BackupService()
================================================================================
FILE: src/services/balanceService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des balances comptables
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface Balance {
     9	  id: string
    10	  nom: string
    11	  entreprise: string
    12	  entreprise_detail?: {
    13	    raison_sociale: string
    14	    numero_contribuable: string
    15	  }
    16	  exercice: string
    17	  exercice_detail?: {
    18	    nom: string
    19	    date_debut: string
    20	    date_fin: string
    21	  }
    22	  date_balance: string
    23	  type_balance: 'GENERALE' | 'AUXILIAIRE' | 'ANALYTIQUE' | 'AGED'
    24	  statut: 'BROUILLON' | 'VALIDEE' | 'CLOTUREE'
    25	  total_debit: number
    26	  total_credit: number
    27	  nb_lignes: number
    28	  fichier_source?: string
    29	  format_import?: string
    30	  date_import?: string
    31	  commentaires?: string
    32	  statistiques?: {
    33	    nb_comptes_actifs: number
    34	    nb_comptes_mouvementes: number
    35	    equilibre: boolean
    36	    ecart_equilibrage: number
    37	  }
    38	  created_at: string
    39	  updated_at: string
    40	}
    41	
    42	export interface LigneBalance {
    43	  id: string
    44	  compte: string
    45	  compte_detail?: {
    46	    numero_compte: string
    47	    libelle: string
    48	    type_compte: string
    49	  }
    50	  libelle_compte?: string
    51	  mouvement_debit: number
    52	  mouvement_credit: number
    53	  solde_debiteur: number
    54	  solde_crediteur: number
    55	  a_nouveau_debiteur: number
    56	  a_nouveau_crediteur: number
    57	  ordre_tri: number
    58	}
    59	
    60	export interface ImportBalance {
    61	  id: string
    62	  entreprise: string
    63	  exercice: string
    64	  fichier: string
    65	  format_fichier: 'XLSX' | 'CSV' | 'XML' | 'JSON'
    66	  statut: 'EN_ATTENTE' | 'EN_COURS' | 'REUSSI' | 'ERREUR' | 'ANNULE'
    67	  nb_lignes_fichier: number
    68	  nb_lignes_importees: number
    69	  nb_erreurs: number
    70	  erreurs: Array<{
    71	    ligne: number
    72	    colonne: string
    73	    message: string
    74	    type: string
    75	    valeur: string
    76	  }>
    77	  balance_generee?: string
    78	  created_at: string
    79	}
    80	
    81	class BalanceService {
    82	  private baseUrl = '/api/v1/balance'
    83	
    84	  // Gestion des balances - CONNEXION R√âELLE AU BACKEND
    85	  async getBalances(params?: {
    86	    entreprise?: string
    87	    exercice?: string
    88	    type_balance?: string
    89	    statut?: string
    90	    page?: number
    91	    page_size?: number
    92	    ordering?: string
    93	  }) {
    94	    console.log('üîÑ Fetching balances from backend...', params)
    95	    return apiClient.get(`${this.baseUrl}/balances/`, params)
    96	  }
    97	
    98	  async getBalance(id: string): Promise<Balance> {
    99	    console.log(`üîÑ Fetching balance ${id} from backend...`)
   100	    return apiClient.get(`${this.baseUrl}/balances/${id}/`)
   101	  }
   102	
   103	  async createBalance(data: Partial<Balance>): Promise<Balance> {
   104	    console.log('üì§ Creating balance in backend...', data)
   105	    return apiClient.post(`${this.baseUrl}/balances/`, data)
   106	  }
   107	
   108	  async updateBalance(id: string, data: Partial<Balance>): Promise<Balance> {
   109	    console.log(`üì§ Updating balance ${id} in backend...`, data)
   110	    return apiClient.patch(`${this.baseUrl}/balances/${id}/`, data)
   111	  }
   112	
   113	  async deleteBalance(id: string): Promise<void> {
   114	    console.log(`üóëÔ∏è Deleting balance ${id} from backend...`)
   115	    return apiClient.delete(`${this.baseUrl}/balances/${id}/`)
   116	  }
   117	
   118	  // Lignes de balance - CONNEXION R√âELLE AU BACKEND
   119	  async getLignesBalance(balanceId: string, params?: {
   120	    compte?: string
   121	    page?: number
   122	    page_size?: number
   123	  }) {
   124	    console.log(`üîÑ Fetching balance lines for ${balanceId}...`, params)
   125	    return apiClient.get(`${this.baseUrl}/balances/${balanceId}/lignes/`, params)
   126	  }
   127	
   128	  async updateLigneBalance(balanceId: string, ligneId: string, data: Partial<LigneBalance>) {
   129	    console.log(`üì§ Updating balance line ${ligneId}...`, data)
   130	    return apiClient.patch(`${this.baseUrl}/balances/${balanceId}/lignes/${ligneId}/`, data)
   131	  }
   132	
   133	  // Import de balances
   134	  async importBalance(
   135	    entrepriseId: string,
   136	    exerciceId: string,
   137	    file: File,
   138	    params?: {
   139	      format?: string
   140	      mapping?: any
   141	      options?: any
   142	    }
   143	  ): Promise<ImportBalance> {
   144	    const formData = new FormData()
   145	    formData.append('fichier', file)
   146	    formData.append('entreprise', entrepriseId)
   147	    formData.append('exercice', exerciceId)
   148	    
   149	    if (params?.format) {
   150	      formData.append('format_fichier', params.format)
   151	    }
   152	    if (params?.mapping) {
   153	      formData.append('mapping', JSON.stringify(params.mapping))
   154	    }
   155	    if (params?.options) {
   156	      formData.append('options', JSON.stringify(params.options))
   157	    }
   158	
   159	    console.log('üì§ Importing balance file to backend...', { entrepriseId, exerciceId, file: file.name })
   160	    return apiClient.post(`${this.baseUrl}/imports/`, formData)
   161	  }
   162	
   163	  async getImportStatus(importId: string): Promise<ImportBalance> {
   164	    console.log(`üîÑ Getting import status ${importId} from backend...`)
   165	    return apiClient.get(`${this.baseUrl}/imports/${importId}/`)
   166	  }
   167	
   168	  async getImportHistory(params?: {
   169	    entreprise?: string
   170	    exercice?: string
   171	    statut?: string
   172	    page?: number
   173	  }) {
   174	    console.log('üîÑ Getting import history from backend...', params)
   175	    return apiClient.get(`${this.baseUrl}/imports/`, params)
   176	  }
   177	
   178	  // Validation et contr√¥les - CONNEXION R√âELLE AU BACKEND
   179	  async validateBalance(balanceId: string) {
   180	    console.log(`üîç Validating balance ${balanceId} on backend...`)
   181	    return apiClient.post(`${this.baseUrl}/balances/${balanceId}/valider/`)
   182	  }
   183	
   184	  async getValidationErrors(balanceId: string) {
   185	    console.log(`üîç Getting validation errors for ${balanceId}...`)
   186	    return apiClient.get(`${this.baseUrl}/balances/${balanceId}/validation-errors/`)
   187	  }
   188	
   189	  async getValidationHistory(params?: {
   190	    balance?: string
   191	    start_date?: string
   192	    end_date?: string
   193	    page?: number
   194	    page_size?: number
   195	  }) {
   196	    console.log('üìã Fetching validation history from backend...', params)
   197	    return apiClient.get(`${this.baseUrl}/validations/`, params)
   198	  }
   199	
   200	  // Export - CONNEXION R√âELLE AU BACKEND
   201	  async exportBalance(balanceId: string, format: 'XLSX' | 'CSV' | 'PDF') {
   202	    console.log(`üì• Exporting balance ${balanceId} as ${format}...`)
   203	    return apiClient.get(`${this.baseUrl}/export-balance/`, {
   204	      balance_id: balanceId,
   205	      format
   206	    })
   207	  }
   208	
   209	  async exportBalanceAdvanced(
   210	    balanceId: string,
   211	    format: 'XLSX' | 'CSV' | 'PDF',
   212	    options?: {
   213	      includeLignes?: boolean
   214	      includeStatistiques?: boolean
   215	      includeGraphiques?: boolean
   216	    }
   217	  ): Promise<Blob> {
   218	    console.log(`üì• Exporting balance ${balanceId} with advanced options...`, options)
   219	
   220	    const params = {
   221	      balance_id: balanceId,
   222	      format,
   223	      ...options,
   224	    }
   225	
   226	    const response = await apiClient.client.get(
   227	      `${this.baseUrl}/export-balance/`,
   228	      {
   229	        params,
   230	        responseType: 'blob'
   231	      }
   232	    )
   233	
   234	    // T√©l√©charger automatiquement le fichier
   235	    const url = window.URL.createObjectURL(response.data)
   236	    const link = document.createElement('a')
   237	    link.href = url
   238	    link.download = `balance_${balanceId}.${format.toLowerCase()}`
   239	    link.click()
   240	    window.URL.revokeObjectURL(url)
   241	
   242	    return response.data
   243	  }
   244	
   245	  // Mapping intelligent (IA) - CONNEXION R√âELLE AU BACKEND
   246	  async intelligentMapping(balanceId: string) {
   247	    console.log(`ü§ñ Starting intelligent mapping for balance ${balanceId}...`)
   248	    return apiClient.post(`${this.baseUrl}/mapping-intelligent/`, {
   249	      balance_id: balanceId
   250	    })
   251	  }
   252	
   253	  // Comparaison - CONNEXION R√âELLE AU BACKEND
   254	  async compareBalances(balance1Id: string, balance2Id: string) {
   255	    console.log(`üìä Comparing balances ${balance1Id} and ${balance2Id}...`)
   256	    return apiClient.get(`${this.baseUrl}/balances/compare/`, {
   257	      balance1: balance1Id,
   258	      balance2: balance2Id
   259	    })
   260	  }
   261	
   262	  // Statistiques - CONNEXION R√âELLE AU BACKEND
   263	  async getBalanceStats(balanceId: string) {
   264	    console.log(`üìä Getting stats for balance ${balanceId}...`)
   265	    return apiClient.get(`${this.baseUrl}/balances/${balanceId}/stats/`)
   266	  }
   267	
   268	  // ===== PLANS COMPTABLES D'ENTREPRISE =====
   269	
   270	  async getPlansComptables(entrepriseId: number): Promise<any[]> {
   271	    console.log(`üîÑ Fetching plans comptables for entreprise ${entrepriseId}...`)
   272	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/plans-comptables`, { entreprise: entrepriseId })
   273	    return data.results || []
   274	  }
   275	
   276	  async getPlanComptable(id: number): Promise<any> {
   277	    return apiClient.get(`${this.baseUrl}/plans-comptables/${id}/`)
   278	  }
   279	
   280	  async createPlanComptable(data: any): Promise<any> {
   281	    console.log('üì§ Creating plan comptable...', data)
   282	    return apiClient.post(`${this.baseUrl}/plans-comptables`, data)
   283	  }
   284	
   285	  // ===== COMPTES D'ENTREPRISE =====
   286	
   287	  async getComptes(planComptableId?: number): Promise<any[]> {
   288	    const params = planComptableId ? { plan_comptable: planComptableId } : undefined
   289	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/comptes`, params)
   290	    return data.results || []
   291	  }
   292	
   293	  async getCompte(id: number): Promise<any> {
   294	    return apiClient.get(`${this.baseUrl}/comptes/${id}/`)
   295	  }
   296	
   297	  async createCompte(data: any): Promise<any> {
   298	    console.log('üì§ Creating compte...', data)
   299	    return apiClient.post(`${this.baseUrl}/comptes`, data)
   300	  }
   301	
   302	  async updateCompte(id: number, data: any): Promise<any> {
   303	    return apiClient.patch(`${this.baseUrl}/comptes/${id}/`, data)
   304	  }
   305	
   306	  // ===== MAPPINGS =====
   307	
   308	  async getMappings(filters?: { compte_local?: number; compte_reference?: number }): Promise<any[]> {
   309	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/mappings`, filters)
   310	    return data.results || []
   311	  }
   312	
   313	  async createMapping(data: { compte_local: number; compte_reference: number }): Promise<any> {
   314	    console.log('üì§ Creating mapping...', data)
   315	    return apiClient.post(`${this.baseUrl}/mappings`, data)
   316	  }
   317	
   318	  async deleteMapping(id: number): Promise<void> {
   319	    return apiClient.delete(`${this.baseUrl}/mappings/${id}/`)
   320	  }
   321	}
   322	
   323	export const balanceService = new BalanceService()
   324	export default balanceService
================================================================================
FILE: src/services/coherenceService.ts
================================================================================
     1	/**
     2	 * Service de contr√¥le de coh√©rence comptable SYSCOHADA
     3	 * V√©rifie la coh√©rence entre √©tats de synth√®se et notes annexes
     4	 */
     5	
     6	export interface ControleCoherence {
     7	  id: string
     8	  type: 'BILAN_NOTES' | 'TFT_IMMOBILISATIONS' | 'RESULTAT_NOTES'
     9	  description: string
    10	  statut: 'CONFORME' | 'ECART' | 'ERREUR'
    11	  ecart?: number
    12	  valeurEtat: number
    13	  valeurNote: number
    14	  seuil: number
    15	  details: string
    16	  recommandation?: string
    17	}
    18	
    19	export interface ResultatValidation {
    20	  nombreControles: number
    21	  controlesConformes: number
    22	  controlesEcart: number
    23	  controlesErreur: number
    24	  scoreCoherence: number
    25	  controles: ControleCoherence[]
    26	}
    27	
    28	class CoherenceService {
    29	  
    30	  /**
    31	   * ALGORITHME 1: Contr√¥le coh√©rence Bilan vs Notes Annexes
    32	   */
    33	  async verifierCoherenceBilanNotes(
    34	    bilanActif: any, 
    35	    bilanPassif: any, 
    36	    notesAnnexes: any
    37	  ): Promise<ControleCoherence[]> {
    38	    const controles: ControleCoherence[] = []
    39	
    40	    // 1. Coh√©rence Immobilisations corporelles (Bilan vs Note sur immobilisations)
    41	    const immoCorporellesBilan = bilanActif.immobilisationsCorporelles || 0
    42	    const immoCorporellesNote = notesAnnexes.tableauImmobilisations?.totalNetCorporelles || 0
    43	    
    44	    controles.push({
    45	      id: 'IMMO_CORP_001',
    46	      type: 'BILAN_NOTES',
    47	      description: 'Coh√©rence Immobilisations corporelles : Bilan vs Note',
    48	      statut: this.evaluerEcart(immoCorporellesBilan, immoCorporellesNote, 1000),
    49	      ecart: Math.abs(immoCorporellesBilan - immoCorporellesNote),
    50	      valeurEtat: immoCorporellesBilan,
    51	      valeurNote: immoCorporellesNote,
    52	      seuil: 1000,
    53	      details: `Bilan: ${this.formatMontant(immoCorporellesBilan)} vs Note: ${this.formatMontant(immoCorporellesNote)}`,
    54	      recommandation: 'V√©rifier les amortissements et r√©√©valuations dans le tableau des immobilisations'
    55	    })
    56	
    57	    // 2. Coh√©rence Immobilisations incorporelles
    58	    const immoIncorporellesBilan = bilanActif.immobilisationsIncorporelles || 0
    59	    const immoIncorporellesNote = notesAnnexes.tableauImmobilisations?.totalNetIncorporelles || 0
    60	    
    61	    controles.push({
    62	      id: 'IMMO_INCORP_001',
    63	      type: 'BILAN_NOTES',
    64	      description: 'Coh√©rence Immobilisations incorporelles : Bilan vs Note',
    65	      statut: this.evaluerEcart(immoIncorporellesBilan, immoIncorporellesNote, 500),
    66	      ecart: Math.abs(immoIncorporellesBilan - immoIncorporellesNote),
    67	      valeurEtat: immoIncorporellesBilan,
    68	      valeurNote: immoIncorporellesNote,
    69	      seuil: 500,
    70	      details: `Bilan: ${this.formatMontant(immoIncorporellesBilan)} vs Note: ${this.formatMontant(immoIncorporellesNote)}`
    71	    })
    72	
    73	    // 3. Coh√©rence Dettes financi√®res (Bilan vs Note sur dettes)
    74	    const dettesFinancieresBilan = bilanPassif.dettesFinancieres || 0
    75	    const dettesFinancieresNote = notesAnnexes.dettesSurEtablissementCredit?.totalDettes || 0
    76	    
    77	    controles.push({
    78	      id: 'DETTES_FIN_001',
    79	      type: 'BILAN_NOTES',
    80	      description: 'Coh√©rence Dettes financi√®res : Bilan vs Note',
    81	      statut: this.evaluerEcart(dettesFinancieresBilan, dettesFinancieresNote, 2000),
    82	      ecart: Math.abs(dettesFinancieresBilan - dettesFinancieresNote),
    83	      valeurEtat: dettesFinancieresBilan,
    84	      valeurNote: dettesFinancieresNote,
    85	      seuil: 2000,
    86	      details: `Bilan: ${this.formatMontant(dettesFinancieresBilan)} vs Note: ${this.formatMontant(dettesFinancieresNote)}`
    87	    })
    88	
    89	    // 4. Coh√©rence Provisions (Bilan vs Note sur provisions)
    90	    const provisionsBilan = bilanPassif.provisions || 0
    91	    const provisionsNote = notesAnnexes.tableauProvisions?.totalProvisions || 0
    92	    
    93	    controles.push({
    94	      id: 'PROVISIONS_001',
    95	      type: 'BILAN_NOTES',
    96	      description: 'Coh√©rence Provisions : Bilan vs Note',
    97	      statut: this.evaluerEcart(provisionsBilan, provisionsNote, 1500),
    98	      ecart: Math.abs(provisionsBilan - provisionsNote),
    99	      valeurEtat: provisionsBilan,
   100	      valeurNote: provisionsNote,
   101	      seuil: 1500,
   102	      details: `Bilan: ${this.formatMontant(provisionsBilan)} vs Note: ${this.formatMontant(provisionsNote)}`
   103	    })
   104	
   105	    // 5. Coh√©rence Stocks (Bilan vs Note sur stocks)
   106	    const stocksBilan = bilanActif.stocks || 0
   107	    const stocksNote = notesAnnexes.mouvementStocks?.valeurFinale || 0
   108	    
   109	    controles.push({
   110	      id: 'STOCKS_001',
   111	      type: 'BILAN_NOTES',
   112	      description: 'Coh√©rence Stocks : Bilan vs Note',
   113	      statut: this.evaluerEcart(stocksBilan, stocksNote, 1000),
   114	      ecart: Math.abs(stocksBilan - stocksNote),
   115	      valeurEtat: stocksBilan,
   116	      valeurNote: stocksNote,
   117	      seuil: 1000,
   118	      details: `Bilan: ${this.formatMontant(stocksBilan)} vs Note: ${this.formatMontant(stocksNote)}`
   119	    })
   120	
   121	    return controles
   122	  }
   123	
   124	  /**
   125	   * ALGORITHME 2: Contr√¥le coh√©rence TFT vs Tableau des Immobilisations
   126	   */
   127	  async verifierCoherenceTFTImmobilisations(
   128	    tft: any, 
   129	    tableauImmobilisations: any
   130	  ): Promise<ControleCoherence[]> {
   131	    const controles: ControleCoherence[] = []
   132	
   133	    // 1. Coh√©rence Acquisitions d'immobilisations
   134	    const acquisitionsTFT = Math.abs(tft.fluxInvestissement.acquisitionsImmobilisations || 0)
   135	    const acquisitionsTableau = tableauImmobilisations.mouvements?.augmentations || 0
   136	    
   137	    controles.push({
   138	      id: 'TFT_IMMO_ACQ_001',
   139	      type: 'TFT_IMMOBILISATIONS',
   140	      description: 'Coh√©rence Acquisitions : TFT vs Tableau Immobilisations',
   141	      statut: this.evaluerEcart(acquisitionsTFT, acquisitionsTableau, 5000),
   142	      ecart: Math.abs(acquisitionsTFT - acquisitionsTableau),
   143	      valeurEtat: acquisitionsTFT,
   144	      valeurNote: acquisitionsTableau,
   145	      seuil: 5000,
   146	      details: `TFT: ${this.formatMontant(acquisitionsTFT)} vs Tableau: ${this.formatMontant(acquisitionsTableau)}`,
   147	      recommandation: 'V√©rifier que toutes les acquisitions sont comptabilis√©es dans les deux √©tats'
   148	    })
   149	
   150	    // 2. Coh√©rence Cessions d'immobilisations
   151	    const cessionsTFT = tft.fluxInvestissement.cessionImmobilisations || 0
   152	    const cessionsTableau = tableauImmobilisations.mouvements?.diminutions || 0
   153	    
   154	    controles.push({
   155	      id: 'TFT_IMMO_CESS_001',
   156	      type: 'TFT_IMMOBILISATIONS', 
   157	      description: 'Coh√©rence Cessions : TFT vs Tableau Immobilisations',
   158	      statut: this.evaluerEcart(cessionsTFT, cessionsTableau, 3000),
   159	      ecart: Math.abs(cessionsTFT - cessionsTableau),
   160	      valeurEtat: cessionsTFT,
   161	      valeurNote: cessionsTableau,
   162	      seuil: 3000,
   163	      details: `TFT: ${this.formatMontant(cessionsTFT)} vs Tableau: ${this.formatMontant(cessionsTableau)}`
   164	    })
   165	
   166	    // 3. Coh√©rence Dotations aux amortissements
   167	    const dotationsAmortTFT = tft.fluxExploitation.dotationsAmortissements || 0
   168	    const dotationsAmortTableau = tableauImmobilisations.amortissements?.dotationsExercice || 0
   169	    
   170	    controles.push({
   171	      id: 'TFT_AMORT_001',
   172	      type: 'TFT_IMMOBILISATIONS',
   173	      description: 'Coh√©rence Dotations amortissements : TFT vs Tableau',
   174	      statut: this.evaluerEcart(dotationsAmortTFT, dotationsAmortTableau, 2000),
   175	      ecart: Math.abs(dotationsAmortTFT - dotationsAmortTableau),
   176	      valeurEtat: dotationsAmortTFT,
   177	      valeurNote: dotationsAmortTableau,
   178	      seuil: 2000,
   179	      details: `TFT: ${this.formatMontant(dotationsAmortTFT)} vs Tableau: ${this.formatMontant(dotationsAmortTableau)}`
   180	    })
   181	
   182	    // 4. Contr√¥le variation nette des immobilisations
   183	    const variationNetteTFT = acquisitionsTFT - cessionsTFT - dotationsAmortTFT
   184	    const variationNetteTableau = (acquisitionsTableau - cessionsTableau) - dotationsAmortTableau
   185	    
   186	    controles.push({
   187	      id: 'TFT_VAR_NET_001',
   188	      type: 'TFT_IMMOBILISATIONS',
   189	      description: 'Coh√©rence Variation nette immobilisations : TFT vs Tableau',
   190	      statut: this.evaluerEcart(variationNetteTFT, variationNetteTableau, 1000),
   191	      ecart: Math.abs(variationNetteTFT - variationNetteTableau),
   192	      valeurEtat: variationNetteTFT,
   193	      valeurNote: variationNetteTableau,
   194	      seuil: 1000,
   195	      details: `Variation TFT: ${this.formatMontant(variationNetteTFT)} vs Variation Tableau: ${this.formatMontant(variationNetteTableau)}`,
   196	      recommandation: 'V√©rifier la coh√©rence globale des flux d\'investissement'
   197	    })
   198	
   199	    // 5. Contr√¥le sp√©cifique subventions d'investissement
   200	    const subventionsTFT = tft.fluxInvestissement.subventionsRecues || 0
   201	    const subventionsTableau = tableauImmobilisations.subventions?.recuesExercice || 0
   202	    
   203	    if (subventionsTFT > 0 || subventionsTableau > 0) {
   204	      controles.push({
   205	        id: 'TFT_SUBV_001',
   206	        type: 'TFT_IMMOBILISATIONS',
   207	        description: 'Coh√©rence Subventions d\'investissement : TFT vs Tableau',
   208	        statut: this.evaluerEcart(subventionsTFT, subventionsTableau, 1000),
   209	        ecart: Math.abs(subventionsTFT - subventionsTableau),
   210	        valeurEtat: subventionsTFT,
   211	        valeurNote: subventionsTableau,
   212	        seuil: 1000,
   213	        details: `TFT: ${this.formatMontant(subventionsTFT)} vs Tableau: ${this.formatMontant(subventionsTableau)}`
   214	      })
   215	    }
   216	
   217	    return controles
   218	  }
   219	
   220	  /**
   221	   * ALGORITHME 3: Contr√¥le coh√©rence Compte de R√©sultat vs Notes
   222	   */
   223	  async verifierCoherenceResultatNotes(
   224	    compteResultat: any,
   225	    notesAnnexes: any
   226	  ): Promise<ControleCoherence[]> {
   227	    const controles: ControleCoherence[] = []
   228	
   229	    // 1. Coh√©rence Chiffre d'affaires (Compte r√©sultat vs Note 17)
   230	    const caResultat = compteResultat.chiffreAffaires || 0
   231	    const caNote17 = notesAnnexes.chiffreAffaires?.totalCA || 0
   232	    
   233	    controles.push({
   234	      id: 'CA_NOTE17_001',
   235	      type: 'RESULTAT_NOTES',
   236	      description: 'Coh√©rence Chiffre d\'affaires : R√©sultat vs Note 17',
   237	      statut: this.evaluerEcart(caResultat, caNote17, 10000),
   238	      ecart: Math.abs(caResultat - caNote17),
   239	      valeurEtat: caResultat,
   240	      valeurNote: caNote17,
   241	      seuil: 10000,
   242	      details: `R√©sultat: ${this.formatMontant(caResultat)} vs Note 17: ${this.formatMontant(caNote17)}`,
   243	      recommandation: 'V√©rifier la ventilation du CA par nature d\'activit√© dans la Note 17'
   244	    })
   245	
   246	    // 2. Coh√©rence Dotations aux amortissements
   247	    const dotationsResultat = compteResultat.dotationsAmortissements || 0
   248	    const dotationsNote = notesAnnexes.tableauAmortissements?.dotationsExercice || 0
   249	    
   250	    controles.push({
   251	      id: 'DOT_AMORT_001',
   252	      type: 'RESULTAT_NOTES',
   253	      description: 'Coh√©rence Dotations amortissements : R√©sultat vs Note',
   254	      statut: this.evaluerEcart(dotationsResultat, dotationsNote, 5000),
   255	      ecart: Math.abs(dotationsResultat - dotationsNote),
   256	      valeurEtat: dotationsResultat,
   257	      valeurNote: dotationsNote,
   258	      seuil: 5000,
   259	      details: `R√©sultat: ${this.formatMontant(dotationsResultat)} vs Note: ${this.formatMontant(dotationsNote)}`
   260	    })
   261	
   262	    // 3. Coh√©rence Dotations aux provisions
   263	    const dotationsProvisions = compteResultat.dotationsProvisions || 0
   264	    const provisionsNote = notesAnnexes.tableauProvisions?.dotationsExercice || 0
   265	    
   266	    controles.push({
   267	      id: 'DOT_PROV_001',
   268	      type: 'RESULTAT_NOTES',
   269	      description: 'Coh√©rence Dotations provisions : R√©sultat vs Note',
   270	      statut: this.evaluerEcart(dotationsProvisions, provisionsNote, 2000),
   271	      ecart: Math.abs(dotationsProvisions - provisionsNote),
   272	      valeurEtat: dotationsProvisions,
   273	      valeurNote: provisionsNote,
   274	      seuil: 2000,
   275	      details: `R√©sultat: ${this.formatMontant(dotationsProvisions)} vs Note: ${this.formatMontant(provisionsNote)}`
   276	    })
   277	
   278	    return controles
   279	  }
   280	
   281	  /**
   282	   * ALGORITHME 4: Validation crois√©e math√©matique du TFT
   283	   */
   284	  async verifierCoherenceMathematiqueTFT(tft: any): Promise<ControleCoherence[]> {
   285	    const controles: ControleCoherence[] = []
   286	
   287	    // Calculs de v√©rification
   288	    const fluxExploitation = tft.fluxExploitation.total || 0
   289	    const fluxInvestissement = tft.fluxInvestissement.total || 0
   290	    const fluxFinancement = tft.fluxFinancement.total || 0
   291	    const variationTresorerie = tft.variationTresorerie || 0
   292	    
   293	    const calculVariation = fluxExploitation + fluxInvestissement + fluxFinancement
   294	    
   295	    // Contr√¥le √©quilibre math√©matique du TFT
   296	    controles.push({
   297	      id: 'TFT_EQUIL_001',
   298	      type: 'TFT_IMMOBILISATIONS',
   299	      description: '√âquilibre math√©matique TFT : Flux = Variation tr√©sorerie',
   300	      statut: this.evaluerEcart(calculVariation, variationTresorerie, 100),
   301	      ecart: Math.abs(calculVariation - variationTresorerie),
   302	      valeurEtat: calculVariation,
   303	      valeurNote: variationTresorerie,
   304	      seuil: 100,
   305	      details: `Somme flux: ${this.formatMontant(calculVariation)} vs Variation: ${this.formatMontant(variationTresorerie)}`,
   306	      recommandation: 'L\'√©quilibre math√©matique du TFT doit √™tre parfait (√©cart = 0)'
   307	    })
   308	
   309	    return controles
   310	  }
   311	
   312	  /**
   313	   * M√âTHODE PRINCIPALE: Lancer tous les contr√¥les de coh√©rence
   314	   */
   315	  async lancerControlesCoherence(donneesLiasse: any): Promise<ResultatValidation> {
   316	    const todControles: ControleCoherence[] = []
   317	
   318	    try {
   319	      // 1. Contr√¥les Bilan vs Notes
   320	      const controlesBilan = await this.verifierCoherenceBilanNotes(
   321	        donneesLiasse.bilanActif,
   322	        donneesLiasse.bilanPassif, 
   323	        donneesLiasse.notesAnnexes
   324	      )
   325	      todControles.push(...controlesBilan)
   326	
   327	      // 2. Contr√¥les TFT vs Immobilisations
   328	      const controlesTFT = await this.verifierCoherenceTFTImmobilisations(
   329	        donneesLiasse.tft,
   330	        donneesLiasse.notesAnnexes.tableauImmobilisations
   331	      )
   332	      todControles.push(...controlesTFT)
   333	
   334	      // 3. Contr√¥les Compte de R√©sultat vs Notes
   335	      const controlesResultat = await this.verifierCoherenceResultatNotes(
   336	        donneesLiasse.compteResultat,
   337	        donneesLiasse.notesAnnexes
   338	      )
   339	      todControles.push(...controlesResultat)
   340	
   341	      // 4. Contr√¥les math√©matiques TFT
   342	      const controlesMath = await this.verifierCoherenceMathematiqueTFT(donneesLiasse.tft)
   343	      todControles.push(...controlesMath)
   344	
   345	      // Calcul des statistiques
   346	      const nombreControles = todControles.length
   347	      const controlesConformes = todControles.filter(c => c.statut === 'CONFORME').length
   348	      const controlesEcart = todControles.filter(c => c.statut === 'ECART').length
   349	      const controlesErreur = todControles.filter(c => c.statut === 'ERREUR').length
   350	      
   351	      const scoreCoherence = Math.round((controlesConformes / nombreControles) * 100)
   352	
   353	      return {
   354	        nombreControles,
   355	        controlesConformes,
   356	        controlesEcart,
   357	        controlesErreur,
   358	        scoreCoherence,
   359	        controles: todControles
   360	      }
   361	
   362	    } catch (error) {
   363	      console.error('Erreur lors des contr√¥les de coh√©rence:', error)
   364	      return {
   365	        nombreControles: 0,
   366	        controlesConformes: 0,
   367	        controlesEcart: 0,
   368	        controlesErreur: 1,
   369	        scoreCoherence: 0,
   370	        controles: [{
   371	          id: 'ERROR_001',
   372	          type: 'BILAN_NOTES',
   373	          description: 'Erreur lors de l\'ex√©cution des contr√¥les',
   374	          statut: 'ERREUR',
   375	          valeurEtat: 0,
   376	          valeurNote: 0,
   377	          seuil: 0,
   378	          details: error instanceof Error ? error.message : 'Erreur inconnue'
   379	        }]
   380	      }
   381	    }
   382	  }
   383	
   384	  /**
   385	   * UTILITAIRES DE VALIDATION
   386	   */
   387	  private evaluerEcart(valeur1: number, valeur2: number, seuil: number): 'CONFORME' | 'ECART' | 'ERREUR' {
   388	    const ecart = Math.abs(valeur1 - valeur2)
   389	    
   390	    if (ecart === 0) return 'CONFORME'
   391	    if (ecart <= seuil) return 'ECART'
   392	    return 'ERREUR'
   393	  }
   394	
   395	  private formatMontant(montant: number): string {
   396	    return new Intl.NumberFormat('fr-FR', {
   397	      style: 'currency',
   398	      currency: 'XOF',
   399	      minimumFractionDigits: 0,
   400	    }).format(montant)
   401	  }
   402	
   403	  /**
   404	   * ALGORITHME AVANC√â: D√©tection automatique d'incoh√©rences suspectes
   405	   */
   406	  async detecterIncoherencesSuspectes(donneesLiasse: any): Promise<ControleCoherence[]> {
   407	    const controles: ControleCoherence[] = []
   408	
   409	    // D√©tection de ratios anormaux qui indiquent des incoh√©rences
   410	    const totalActif = donneesLiasse.bilanActif.totalActif || 1
   411	    const totalPassif = donneesLiasse.bilanPassif.totalPassif || 1
   412	    
   413	    // 1. √âquilibre fondamental du bilan
   414	    controles.push({
   415	      id: 'BILAN_EQUIL_001',
   416	      type: 'BILAN_NOTES',
   417	      description: '√âquilibre Actif = Passif',
   418	      statut: this.evaluerEcart(totalActif, totalPassif, 10),
   419	      ecart: Math.abs(totalActif - totalPassif),
   420	      valeurEtat: totalActif,
   421	      valeurNote: totalPassif,
   422	      seuil: 10,
   423	      details: `Actif: ${this.formatMontant(totalActif)} vs Passif: ${this.formatMontant(totalPassif)}`,
   424	      recommandation: 'L\'√©quilibre du bilan doit √™tre parfait (Actif = Passif)'
   425	    })
   426	
   427	    // 2. Coh√©rence CA vs cr√©ances clients
   428	    const chiffreAffaires = donneesLiasse.compteResultat.chiffreAffaires || 0
   429	    const creancesClients = donneesLiasse.bilanActif.creancesClients || 0
   430	    const ratioCA = creancesClients / (chiffreAffaires / 12) // Rotation en mois
   431	
   432	    if (ratioCA > 6) { // Plus de 6 mois de CA en cr√©ances = suspect
   433	      controles.push({
   434	        id: 'RATIO_CA_001',
   435	        type: 'BILAN_NOTES',
   436	        description: 'Ratio cr√©ances/CA anormalement √©lev√©',
   437	        statut: 'ECART',
   438	        ecart: ratioCA - 6,
   439	        valeurEtat: ratioCA,
   440	        valeurNote: 6,
   441	        seuil: 6,
   442	        details: `Ratio: ${ratioCA.toFixed(1)} mois vs Normal: <6 mois`,
   443	        recommandation: 'V√©rifier la provision pour cr√©ances douteuses'
   444	      })
   445	    }
   446	
   447	    return controles
   448	  }
   449	
   450	  /**
   451	   * Export des r√©sultats pour audit
   452	   */
   453	  async exporterRapportCoherence(resultats: ResultatValidation): Promise<string> {
   454	    let rapport = `# RAPPORT DE CONTR√îLE DE COH√âRENCE SYSCOHADA\n\n`
   455	    rapport += `**Date**: ${new Date().toLocaleDateString('fr-FR')}\n`
   456	    rapport += `**Score global**: ${resultats.scoreCoherence}%\n\n`
   457	    
   458	    rapport += `## STATISTIQUES\n`
   459	    rapport += `- Contr√¥les effectu√©s: ${resultats.nombreControles}\n`
   460	    rapport += `- Conformes: ${resultats.controlesConformes}\n`
   461	    rapport += `- √âcarts: ${resultats.controlesEcart}\n`
   462	    rapport += `- Erreurs: ${resultats.controlesErreur}\n\n`
   463	    
   464	    rapport += `## D√âTAIL DES CONTR√îLES\n\n`
   465	    
   466	    for (const controle of resultats.controles) {
   467	      const emoji = controle.statut === 'CONFORME' ? '‚úÖ' : controle.statut === 'ECART' ? '‚ö†Ô∏è' : '‚ùå'
   468	      rapport += `### ${emoji} ${controle.description}\n`
   469	      rapport += `**Statut**: ${controle.statut}\n`
   470	      rapport += `**D√©tails**: ${controle.details}\n`
   471	      if (controle.ecart && controle.ecart > 0) {
   472	        rapport += `**√âcart**: ${this.formatMontant(controle.ecart)}\n`
   473	      }
   474	      if (controle.recommandation) {
   475	        rapport += `**Recommandation**: ${controle.recommandation}\n`
   476	      }
   477	      rapport += `\n---\n\n`
   478	    }
   479	
   480	    return rapport
   481	  }
   482	}
   483	
   484	export const coherenceService = new CoherenceService()
   485	export default coherenceService
================================================================================
FILE: src/services/coreService.ts
================================================================================
     1	/**
     2	 * Service pour les fonctionnalit√©s core (param√®tres syst√®me, pays, devises, etc.)
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	// ===== PARAMETRES SYSTEME =====
     9	
    10	export interface ParametreSysteme {
    11	  id: number
    12	  cle: string
    13	  valeur: any
    14	  type_valeur: 'STRING' | 'INTEGER' | 'FLOAT' | 'BOOLEAN' | 'JSON'
    15	  description: string
    16	  categorie: string
    17	  modifiable: boolean
    18	  created_at: string
    19	  updated_at: string
    20	}
    21	
    22	// ===== PAYS =====
    23	
    24	export interface Pays {
    25	  id: number
    26	  code_iso: string
    27	  nom: string
    28	  nom_officiel: string
    29	  capitale: string
    30	  continent: string
    31	  fuseau_horaire: string
    32	  indicatif_telephonique: string
    33	  monnaie_principale: number
    34	  is_actif: boolean
    35	  created_at: string
    36	  updated_at: string
    37	}
    38	
    39	// ===== DEVISES =====
    40	
    41	export interface DeviseMonnaie {
    42	  id: number
    43	  code: string
    44	  nom: string
    45	  symbole: string
    46	  pays: number
    47	  taux_change_euro?: number
    48	  is_principale: boolean
    49	  is_active: boolean
    50	  created_at: string
    51	  updated_at: string
    52	}
    53	
    54	// ===== TAUX DE CHANGE =====
    55	
    56	export interface TauxChange {
    57	  id: number
    58	  devise_source: number
    59	  devise_cible: number
    60	  taux: number
    61	  date_application: string
    62	  source_info: string
    63	  is_actif: boolean
    64	  created_at: string
    65	  updated_at: string
    66	}
    67	
    68	// ===== AUDIT TRAIL =====
    69	
    70	export interface AuditTrailEntry {
    71	  id: number
    72	  user: number
    73	  user_detail?: {
    74	    email: string
    75	    first_name: string
    76	    last_name: string
    77	  }
    78	  action: 'CREATE' | 'UPDATE' | 'DELETE' | 'VIEW' | 'EXPORT'
    79	  model: string
    80	  object_id: string
    81	  object_repr: string
    82	  changes: Record<string, any>
    83	  ip_address: string
    84	  user_agent: string
    85	  timestamp: string
    86	  correlation_id?: string
    87	}
    88	
    89	// ===== NOTIFICATIONS =====
    90	
    91	export interface Notification {
    92	  id: number
    93	  user: number
    94	  type: 'INFO' | 'WARNING' | 'ERROR' | 'SUCCESS'
    95	  titre: string
    96	  message: string
    97	  lien?: string
    98	  est_lue: boolean
    99	  date_lecture?: string
   100	  created_at: string
   101	}
   102	
   103	class CoreService {
   104	  private baseUrl = '/api/v1/core'
   105	
   106	  // ===== PARAMETRES SYSTEME =====
   107	
   108	  async getParametres(categorie?: string): Promise<ParametreSysteme[]> {
   109	    const params = categorie ? { categorie } : undefined
   110	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/parametres-systeme`, params)
   111	    return data.results || []
   112	  }
   113	
   114	  async getParametre(id: number): Promise<ParametreSysteme> {
   115	    return apiClient.get(`${this.baseUrl}/parametres-systeme/${id}/`)
   116	  }
   117	
   118	  async updateParametre(id: number, valeur: any): Promise<ParametreSysteme> {
   119	    return apiClient.patch(`${this.baseUrl}/parametres-systeme/${id}/`, { valeur })
   120	  }
   121	
   122	  // ===== PAYS =====
   123	
   124	  async getPays(): Promise<Pays[]> {
   125	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/pays`, { page_size: 1000 })
   126	    return data.results || []
   127	  }
   128	
   129	  async getPaysById(id: number): Promise<Pays> {
   130	    return apiClient.get(`${this.baseUrl}/pays/${id}/`)
   131	  }
   132	
   133	  async getPaysActifs(): Promise<Pays[]> {
   134	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/pays`, { is_actif: true, page_size: 1000 })
   135	    return data.results || []
   136	  }
   137	
   138	  // ===== DEVISES =====
   139	
   140	  async getDevises(): Promise<DeviseMonnaie[]> {
   141	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/devises`, { page_size: 1000 })
   142	    return data.results || []
   143	  }
   144	
   145	  async getDeviseById(id: number): Promise<DeviseMonnaie> {
   146	    return apiClient.get(`${this.baseUrl}/devises/${id}/`)
   147	  }
   148	
   149	  async getDevisesActives(): Promise<DeviseMonnaie[]> {
   150	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/devises`, { is_active: true, page_size: 1000 })
   151	    return data.results || []
   152	  }
   153	
   154	  async getDevisePrincipale(): Promise<DeviseMonnaie | null> {
   155	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/devises`, { is_principale: true })
   156	    const devises = data.results || []
   157	    return devises.length > 0 ? devises[0] : null
   158	  }
   159	
   160	  // ===== TAUX DE CHANGE =====
   161	
   162	  async getTauxChange(filters?: {
   163	    devise_source?: number
   164	    devise_cible?: number
   165	    date_application?: string
   166	  }): Promise<TauxChange[]> {
   167	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/taux-change`, filters)
   168	    return data.results || []
   169	  }
   170	
   171	  async getTauxChangeById(id: number): Promise<TauxChange> {
   172	    return apiClient.get(`${this.baseUrl}/taux-change/${id}/`)
   173	  }
   174	
   175	  async createTauxChange(data: {
   176	    devise_source: number
   177	    devise_cible: number
   178	    taux: number
   179	    date_application: string
   180	    source_info?: string
   181	  }): Promise<TauxChange> {
   182	    return apiClient.post(`${this.baseUrl}/taux-change`, data)
   183	  }
   184	
   185	  async getTauxActuel(deviseSourceId: number, deviseCibleId: number): Promise<number | null> {
   186	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/taux-change`, {
   187	      devise_source: deviseSourceId,
   188	      devise_cible: deviseCibleId,
   189	      is_actif: true,
   190	      ordering: '-date_application'
   191	    })
   192	    const taux = data.results || []
   193	    return taux.length > 0 ? taux[0].taux : null
   194	  }
   195	
   196	  // ===== AUDIT TRAIL =====
   197	
   198	  async getAuditTrail(filters?: {
   199	    user?: number
   200	    action?: string
   201	    model?: string
   202	    date_min?: string
   203	    date_max?: string
   204	    page?: number
   205	    page_size?: number
   206	  }): Promise<{ count: number; results: AuditTrailEntry[] }> {
   207	    return apiClient.get(`${this.baseUrl}/audit-trail`, filters)
   208	  }
   209	
   210	  async getAuditTrailById(id: number): Promise<AuditTrailEntry> {
   211	    return apiClient.get(`${this.baseUrl}/audit-trail/${id}/`)
   212	  }
   213	
   214	  async getAuditTrailForObject(model: string, objectId: string): Promise<AuditTrailEntry[]> {
   215	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/audit-trail`, {
   216	      model,
   217	      object_id: objectId,
   218	      page_size: 1000
   219	    })
   220	    return data.results || []
   221	  }
   222	
   223	  // ===== NOTIFICATIONS =====
   224	
   225	  async getNotifications(filters?: {
   226	    est_lue?: boolean
   227	    type?: string
   228	    page?: number
   229	    page_size?: number
   230	  }): Promise<{ count: number; results: Notification[] }> {
   231	    return apiClient.get(`${this.baseUrl}/notifications`, filters)
   232	  }
   233	
   234	  async getNotificationById(id: number): Promise<Notification> {
   235	    return apiClient.get(`${this.baseUrl}/notifications/${id}/`)
   236	  }
   237	
   238	  async marquerCommeLue(id: number): Promise<Notification> {
   239	    return apiClient.patch(`${this.baseUrl}/notifications/${id}/`, {
   240	      est_lue: true,
   241	      date_lecture: new Date().toISOString()
   242	    })
   243	  }
   244	
   245	  async marquerToutesCommeLues(): Promise<void> {
   246	    return apiClient.post(`${this.baseUrl}/notifications/mark_all_read/`)
   247	  }
   248	
   249	  async getNotificationsNonLues(): Promise<Notification[]> {
   250	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/notifications`, {
   251	      est_lue: false,
   252	      page_size: 100
   253	    })
   254	    return data.results || []
   255	  }
   256	
   257	  async deleteNotification(id: number): Promise<void> {
   258	    return apiClient.delete(`${this.baseUrl}/notifications/${id}/`)
   259	  }
   260	
   261	  // ===== HELPERS =====
   262	
   263	  getActionLabel(action: AuditTrailEntry['action']): string {
   264	    const labels = {
   265	      'CREATE': 'Cr√©ation',
   266	      'UPDATE': 'Modification',
   267	      'DELETE': 'Suppression',
   268	      'VIEW': 'Consultation',
   269	      'EXPORT': 'Export'
   270	    }
   271	    return labels[action] || action
   272	  }
   273	
   274	  getNotificationTypeColor(type: Notification['type']): string {
   275	    const colors = {
   276	      'INFO': '#3b82f6',
   277	      'WARNING': '#f59e0b',
   278	      'ERROR': '#ef4444',
   279	      'SUCCESS': '#22c55e'
   280	    }
   281	    return colors[type] || '#a3a3a3'
   282	  }
   283	
   284	  formatMontantDevise(montant: number, devise: DeviseMonnaie): string {
   285	    return `${montant.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ${devise.symbole}`
   286	  }
   287	
   288	  async convertirMontant(montant: number, deviseSourceId: number, deviseCibleId: number): Promise<number | null> {
   289	    const taux = await this.getTauxActuel(deviseSourceId, deviseCibleId)
   290	    return taux ? montant * taux : null
   291	  }
   292	}
   293	
   294	export default new CoreService()

================================================================================
FILE: src/services/documentationJuridiqueService.ts
================================================================================
     1	/**
     2	 * Service de gestion de la documentation juridique
     3	 * Lois de Finances, √âvolutions SYSCOHADA, Synth√®ses SYSCOHADA
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	// === Interfaces ===
     9	
    10	export interface DocumentJuridique {
    11	  id: string
    12	  titre: string
    13	  pays: string
    14	  annee: number
    15	  thematique: string
    16	  format: 'PDF' | 'Word' | 'Excel'
    17	  dateImport: string
    18	  tailleFichier: string
    19	  description?: string
    20	  contenuExtrait?: string
    21	}
    22	
    23	export interface EvolutionSyscohada {
    24	  id: string
    25	  titre: string
    26	  type: 'Norme' | 'Circulaire' | 'Modification plan'
    27	  dateEffet: string
    28	  pays: string
    29	  statut: 'En vigueur' | 'En attente' | 'Abrog√©'
    30	  description?: string
    31	  contenuExtrait?: string
    32	  dateImport: string
    33	  format: 'PDF' | 'Word' | 'Excel'
    34	  tailleFichier: string
    35	}
    36	
    37	export interface SyntheseSyscohada {
    38	  id: string
    39	  titre: string
    40	  categorie: 'Principes comptables' | 'R√®gles de comptabilisation' | 'Traitements sp√©cifiques' | 'R√©f√©rentiel SYSCOHADA' | '√âtats financiers' | 'Erreurs fr√©quentes'
    41	  resume: string
    42	  documentSource: string
    43	  documentSourceId: string
    44	  dateGeneration: string
    45	  genereParIA: boolean
    46	}
    47	
    48	export interface RegleValidation {
    49	  id: string
    50	  code: string
    51	  libelle: string
    52	  categorie: 'Principes fondamentaux' | 'Pr√©sentation √©tats financiers' | '√âvaluation & comptabilisation' | 'Amortissements & provisions' | 'Op√©rations sp√©cifiques' | 'Contr√¥les de coh√©rence' | 'Obligations fiscales'
    53	  severite: 'BLOQUANT' | 'MAJEUR' | 'MINEUR' | 'INFO'
    54	  articleReference: string
    55	  description: string
    56	  controleAssocie?: string
    57	  actif: boolean
    58	}
    59	
    60	export interface DocumentFilters {
    61	  pays?: string
    62	  annee?: number
    63	  thematique?: string
    64	  type?: string
    65	  categorie?: string
    66	  recherche?: string
    67	  page?: number
    68	  pageSize?: number
    69	}
    70	
    71	export interface PaginatedResponse<T> {
    72	  results: T[]
    73	  count: number
    74	  page: number
    75	  pageSize: number
    76	}
    77	
    78	export interface DocumentPreview {
    79	  id: string
    80	  titre: string
    81	  contenuExtrait: string
    82	  format: string
    83	}
    84	
    85	// === Service ===
    86	
    87	class DocumentationJuridiqueService {
    88	  private baseUrl = '/api/v1/parametrage/documentation-juridique'
    89	
    90	  // --- Lois de Finances ---
    91	
    92	  async getLoisFinances(filters?: DocumentFilters): Promise<PaginatedResponse<DocumentJuridique>> {
    93	    console.log('üîÑ Fetching lois de finances...', filters)
    94	    return apiClient.get(`${this.baseUrl}/lois-finances/`, filters)
    95	  }
    96	
    97	  async uploadLoiFinance(file: File, metadata: Partial<DocumentJuridique>): Promise<DocumentJuridique> {
    98	    console.log('üì§ Uploading loi de finance...', metadata)
    99	    const formData = new FormData()
   100	    formData.append('file', file)
   101	    Object.entries(metadata).forEach(([key, value]) => {
   102	      if (value !== undefined) formData.append(key, String(value))
   103	    })
   104	    return apiClient.post(`${this.baseUrl}/lois-finances/`, formData)
   105	  }
   106	
   107	  async deleteLoiFinance(id: string): Promise<void> {
   108	    console.log('üóëÔ∏è Deleting loi de finance...', id)
   109	    return apiClient.delete(`${this.baseUrl}/lois-finances/${id}/`)
   110	  }
   111	
   112	  // --- √âvolutions SYSCOHADA ---
   113	
   114	  async getEvolutionsSyscohada(filters?: DocumentFilters): Promise<PaginatedResponse<EvolutionSyscohada>> {
   115	    console.log('üîÑ Fetching √©volutions SYSCOHADA...', filters)
   116	    return apiClient.get(`${this.baseUrl}/evolutions-syscohada/`, filters)
   117	  }
   118	
   119	  async uploadEvolutionSyscohada(file: File, metadata: Partial<EvolutionSyscohada>): Promise<EvolutionSyscohada> {
   120	    console.log('üì§ Uploading √©volution SYSCOHADA...', metadata)
   121	    const formData = new FormData()
   122	    formData.append('file', file)
   123	    Object.entries(metadata).forEach(([key, value]) => {
   124	      if (value !== undefined) formData.append(key, String(value))
   125	    })
   126	    return apiClient.post(`${this.baseUrl}/evolutions-syscohada/`, formData)
   127	  }
   128	
   129	  async deleteEvolutionSyscohada(id: string): Promise<void> {
   130	    console.log('üóëÔ∏è Deleting √©volution SYSCOHADA...', id)
   131	    return apiClient.delete(`${this.baseUrl}/evolutions-syscohada/${id}/`)
   132	  }
   133	
   134	  // --- Synth√®ses SYSCOHADA ---
   135	
   136	  async getSynthesesSyscohada(filters?: DocumentFilters): Promise<PaginatedResponse<SyntheseSyscohada>> {
   137	    console.log('üîÑ Fetching synth√®ses SYSCOHADA...', filters)
   138	    return apiClient.get(`${this.baseUrl}/syntheses-syscohada/`, filters)
   139	  }
   140	
   141	  async genererSynthese(documentId: string): Promise<SyntheseSyscohada> {
   142	    console.log('ü§ñ Generating synth√®se for document...', documentId)
   143	    return apiClient.post(`${this.baseUrl}/syntheses-syscohada/generer/`, { documentId })
   144	  }
   145	
   146	  // --- R√®gles de validation ---
   147	
   148	  async getReglesValidation(filters?: DocumentFilters): Promise<PaginatedResponse<RegleValidation>> {
   149	    console.log('üîÑ Fetching r√®gles de validation SYSCOHADA...', filters)
   150	    return apiClient.get(`${this.baseUrl}/regles-validation/`, filters)
   151	  }
   152	
   153	  async toggleRegle(id: string, actif: boolean): Promise<RegleValidation> {
   154	    console.log('üîÑ Toggle r√®gle...', id, actif)
   155	    return apiClient.patch(`${this.baseUrl}/regles-validation/${id}/`, { actif })
   156	  }
   157	
   158	  // --- Commun ---
   159	
   160	  async downloadDocument(id: string): Promise<Blob> {
   161	    console.log('üì• Downloading document...', id)
   162	    return apiClient.get(`${this.baseUrl}/documents/${id}/download/`, {}, { responseType: 'blob' })
   163	  }
   164	
   165	  async getDocumentPreview(id: string): Promise<DocumentPreview> {
   166	    console.log('üëÅÔ∏è Fetching document preview...', id)
   167	    return apiClient.get(`${this.baseUrl}/documents/${id}/preview/`)
   168	  }
   169	}
   170	
   171	export const documentationJuridiqueService = new DocumentationJuridiqueService()
   172	export default documentationJuridiqueService

================================================================================
FILE: src/services/ecritureService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des √©critures comptables
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface LigneEcriture {
     9	  id?: number
    10	  numero_compte: string
    11	  libelle_compte?: string
    12	  libelle: string
    13	  debit: number
    14	  credit: number
    15	  piece_justificative?: string
    16	  lettrage?: string
    17	  analytique?: string
    18	}
    19	
    20	export interface EcritureComptable {
    21	  id: number
    22	  entreprise: number
    23	  journal: number
    24	  journal_detail?: {
    25	    code: string
    26	    libelle: string
    27	    type_journal: string
    28	  }
    29	  exercice: number
    30	  numero_piece: string
    31	  date_ecriture: string
    32	  date_saisie: string
    33	  libelle: string
    34	  reference_externe?: string
    35	  montant_total: number
    36	  lignes: LigneEcriture[]
    37	  est_equilibree: boolean
    38	  est_validee: boolean
    39	  est_lettree: boolean
    40	  created_at: string
    41	  updated_at: string
    42	}
    43	
    44	export interface CreateEcriture {
    45	  entreprise: number
    46	  journal: number
    47	  exercice: number
    48	  numero_piece?: string
    49	  date_ecriture: string
    50	  libelle: string
    51	  reference_externe?: string
    52	  lignes: Omit<LigneEcriture, 'id'>[]
    53	}
    54	
    55	export interface EcritureFilters {
    56	  entreprise?: number
    57	  journal?: number
    58	  exercice?: number
    59	  date_ecriture_min?: string
    60	  date_ecriture_max?: string
    61	  est_validee?: boolean
    62	  est_lettree?: boolean
    63	  search?: string
    64	  page?: number
    65	  page_size?: number
    66	}
    67	
    68	class EcritureService {
    69	  private baseUrl = '/api/v1/accounting/ecritures'
    70	
    71	  async list(filters?: EcritureFilters): Promise<{ count: number; results: EcritureComptable[] }> {
    72	    console.log('üîÑ Fetching √©critures from backend...', filters)
    73	    return apiClient.get(this.baseUrl, filters)
    74	  }
    75	
    76	  async getById(id: number): Promise<EcritureComptable> {
    77	    return apiClient.get(`${this.baseUrl}/${id}/`)
    78	  }
    79	
    80	  async create(data: CreateEcriture): Promise<EcritureComptable> {
    81	    console.log('üì§ Creating √©criture...', data)
    82	    return apiClient.post(this.baseUrl, data)
    83	  }
    84	
    85	  async update(id: number, data: Partial<CreateEcriture>): Promise<EcritureComptable> {
    86	    return apiClient.patch(`${this.baseUrl}/${id}/`, data)
    87	  }
    88	
    89	  async delete(id: number): Promise<void> {
    90	    return apiClient.delete(`${this.baseUrl}/${id}/`)
    91	  }
    92	
    93	  async valider(id: number): Promise<EcritureComptable> {
    94	    console.log(`‚úÖ Validating √©criture ${id}...`)
    95	    return apiClient.post(`${this.baseUrl}/${id}/valider/`)
    96	  }
    97	
    98	  async annulerValidation(id: number): Promise<EcritureComptable> {
    99	    console.log(`üîì Canceling validation for √©criture ${id}...`)
   100	    return apiClient.post(`${this.baseUrl}/${id}/annuler_validation/`)
   101	  }
   102	
   103	  validateEquilibre(lignes: LigneEcriture[]): { equilibree: boolean; ecart: number } {
   104	    const totalDebit = lignes.reduce((sum, l) => sum + l.debit, 0)
   105	    const totalCredit = lignes.reduce((sum, l) => sum + l.credit, 0)
   106	    const ecart = Math.abs(totalDebit - totalCredit)
   107	    return { equilibree: ecart < 0.01, ecart }
   108	  }
   109	}
   110	
   111	export default new EcritureService()

================================================================================
FILE: src/services/entrepriseService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des entreprises
     3	 */
     4	
     5	import { apiClient } from './apiClient'
     6	
     7	export interface Entreprise {
     8	  id: string
     9	  raison_sociale: string
    10	  forme_juridique: string
    11	  numero_contribuable: string
    12	  rccm?: string
    13	  ifu?: string
    14	  adresse_ligne1: string
    15	  adresse_ligne2?: string
    16	  ville: string
    17	  code_postal?: string
    18	  pays: string
    19	  pays_detail?: {
    20	    nom: string
    21	    code_iso: string
    22	  }
    23	  telephone?: string
    24	  email: string
    25	  site_web?: string
    26	  nom_dirigeant: string
    27	  fonction_dirigeant: string
    28	  email_dirigeant?: string
    29	  regime_imposition: string
    30	  centre_impots: string
    31	  secteur_activite: string
    32	  chiffre_affaires_annuel: number
    33	  devise_principale: string
    34	  devise_principale_detail?: {
    35	    code_iso: string
    36	    nom: string
    37	    symbole: string
    38	  }
    39	  precision_montants: number
    40	  logo?: string
    41	  couleur_principale: string
    42	  couleur_secondaire: string
    43	  is_groupe: boolean
    44	  entreprise_mere?: string
    45	  date_souscription: string
    46	  date_fin_abonnement?: string
    47	  statut_abonnement: 'ACTIF' | 'SUSPENDU' | 'EXPIRE'
    48	  type_abonnement: 'STARTER' | 'PME' | 'ENTREPRISE'
    49	  type_liasse_detecte?: TypeLiasse
    50	  created_at: string
    51	  updated_at: string
    52	}
    53	
    54	export interface TypeLiasse {
    55	  id: string
    56	  code: string
    57	  libelle: string
    58	  description: string
    59	  norme_applicable: 'SYSCOHADA' | 'IFRS' | 'NATIONAL' | 'SECTORIEL'
    60	  seuil_ca_min?: number
    61	  seuil_ca_max?: number
    62	  secteur_applicable?: string
    63	  pays_applicable?: string
    64	  est_officiel: boolean
    65	  templates_requis: string[]
    66	}
    67	
    68	export interface EntrepriseStats {
    69	  nb_exercices: number
    70	  exercice_actuel?: any
    71	  nb_balances_importees: number
    72	  nb_liasses_generees: number
    73	  derniere_connexion?: string
    74	  nb_utilisateurs_actifs: number
    75	  taille_donnees_mb: number
    76	}
    77	
    78	export interface DashboardStats {
    79	  total_entreprises: number
    80	  entreprises_actives: number
    81	  groupes: number
    82	  filiales: number
    83	  par_secteur: Array<{ secteur_activite: string; count: number }>
    84	  par_forme_juridique: Array<{ forme_juridique: string; count: number }>
    85	  nouveaux_ce_mois: number
    86	}
    87	
    88	class EntrepriseService {
    89	  private baseUrl = '/api/v1/parametrage/entreprises'
    90	
    91	  // CRUD Operations
    92	  async getEntreprises(params?: {
    93	    page?: number
    94	    page_size?: number
    95	    search?: string
    96	    forme_juridique?: string
    97	    secteur_activite?: string
    98	    pays?: string
    99	  }): Promise<{ results: Entreprise[]; count: number; next?: string; previous?: string }> {
   100	    console.log('üîÑ Fetching entreprises from backend...', params)
   101	    return apiClient.get(this.baseUrl + '/', params)
   102	  }
   103	
   104	  async getEntreprise(id: string): Promise<Entreprise> {
   105	    console.log(`üîÑ Fetching entreprise ${id} from backend...`)
   106	    return apiClient.get(`${this.baseUrl}/${id}/`)
   107	  }
   108	
   109	  async createEntreprise(data: Partial<Entreprise>): Promise<Entreprise> {
   110	    console.log('üì§ Creating entreprise in backend...', data)
   111	    return apiClient.post(this.baseUrl + '/', data)
   112	  }
   113	
   114	  async updateEntreprise(id: string, data: Partial<Entreprise>): Promise<Entreprise> {
   115	    console.log(`üì§ Updating entreprise ${id} in backend...`, data)
   116	    return apiClient.patch(`${this.baseUrl}/${id}/`, data)
   117	  }
   118	
   119	  async deleteEntreprise(id: string): Promise<void> {
   120	    console.log(`üóëÔ∏è Deleting entreprise ${id} from backend...`)
   121	    return apiClient.delete(`${this.baseUrl}/${id}/`)
   122	  }
   123	
   124	  // Actions sp√©cifiques
   125	  async getConfiguration(id: string) {
   126	    return apiClient.get(`${this.baseUrl}/${id}/configuration/`)
   127	  }
   128	
   129	  async updateConfiguration(id: string, config: any) {
   130	    return apiClient.patch(`${this.baseUrl}/${id}/configuration/`, config)
   131	  }
   132	
   133	  async getStats(id: string): Promise<EntrepriseStats> {
   134	    return apiClient.get(`${this.baseUrl}/${id}/stats/`)
   135	  }
   136	
   137	  async detectLiasseType(id: string) {
   138	    return apiClient.post(`${this.baseUrl}/${id}/detect_liasse_type/`)
   139	  }
   140	
   141	  async searchAdvanced(params: {
   142	    ca_min?: number
   143	    ca_max?: number
   144	    ville?: string
   145	    membre_groupe?: boolean
   146	  }): Promise<Entreprise[]> {
   147	    return apiClient.get(`${this.baseUrl}/search_advanced/`, params)
   148	  }
   149	
   150	  async getDashboardStats(): Promise<DashboardStats> {
   151	    return apiClient.get(`${this.baseUrl}/dashboard_stats/`)
   152	  }
   153	
   154	  // Types de liasse
   155	  async getTypesLiasse(params?: {
   156	    ca?: number
   157	    secteur?: string
   158	    pays?: string
   159	  }): Promise<TypeLiasse[]> {
   160	    const baseUrl = '/api/v1/parametrage/types-liasse'
   161	    if (params && Object.keys(params).length > 0) {
   162	      return apiClient.get(`${baseUrl}/by_criteria/`, params)
   163	    }
   164	    return apiClient.get(`${baseUrl}/`)
   165	  }
   166	
   167	  async getTypesLiasseSyscohada(): Promise<TypeLiasse[]> {
   168	    return apiClient.get('/api/v1/parametrage/types-liasse/officiel_syscohada/')
   169	  }
   170	}
   171	
   172	export const entrepriseService = new EntrepriseService()
   173	export default entrepriseService
================================================================================
FILE: src/services/exerciceService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des exercices comptables
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface ExerciceComptable {
     9	  id: number
    10	  entreprise: number
    11	  entreprise_detail?: {
    12	    id: number
    13	    raison_sociale: string
    14	    numero_contribuable: string
    15	  }
    16	  nom: string
    17	  date_debut: string
    18	  date_fin: string
    19	  statut: 'OUVERT' | 'CLOTURE' | 'ARCHIVE'
    20	  est_exercice_actuel: boolean
    21	  created_at: string
    22	  updated_at: string
    23	  created_by?: string
    24	  updated_by?: string
    25	}
    26	
    27	export interface CreateExerciceComptable {
    28	  entreprise: number
    29	  nom: string
    30	  date_debut: string
    31	  date_fin: string
    32	  statut?: 'OUVERT' | 'CLOTURE' | 'ARCHIVE'
    33	  est_exercice_actuel?: boolean
    34	}
    35	
    36	export interface ExerciceFilters {
    37	  entreprise?: number
    38	  statut?: 'OUVERT' | 'CLOTURE' | 'ARCHIVE'
    39	  est_exercice_actuel?: boolean
    40	  page?: number
    41	  page_size?: number
    42	  ordering?: string
    43	}
    44	
    45	class ExerciceService {
    46	  private baseUrl = '/api/v1/parametrage/exercices'
    47	
    48	  /**
    49	   * R√©cup√©rer la liste des exercices comptables
    50	   */
    51	  async list(filters?: ExerciceFilters): Promise<{
    52	    count: number
    53	    next: string | null
    54	    previous: string | null
    55	    results: ExerciceComptable[]
    56	  }> {
    57	    console.log('üîÑ Fetching exercices from backend...', filters)
    58	    return apiClient.get(this.baseUrl, filters)
    59	  }
    60	
    61	  /**
    62	   * R√©cup√©rer tous les exercices (sans pagination)
    63	   */
    64	  async getAll(filters?: Omit<ExerciceFilters, 'page' | 'page_size'>): Promise<ExerciceComptable[]> {
    65	    console.log('üîÑ Fetching all exercices from backend...', filters)
    66	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, { ...filters, page_size: 1000 })
    67	    return data.results || []
    68	  }
    69	
    70	  /**
    71	   * R√©cup√©rer un exercice comptable par ID
    72	   */
    73	  async getById(id: number): Promise<ExerciceComptable> {
    74	    console.log(`üîÑ Fetching exercice ${id} from backend...`)
    75	    return apiClient.get(`${this.baseUrl}/${id}/`)
    76	  }
    77	
    78	  /**
    79	   * Cr√©er un nouvel exercice comptable
    80	   */
    81	  async create(data: CreateExerciceComptable): Promise<ExerciceComptable> {
    82	    console.log('üì§ Creating exercice in backend...', data)
    83	    return apiClient.post(this.baseUrl, data)
    84	  }
    85	
    86	  /**
    87	   * Mettre √† jour un exercice comptable
    88	   */
    89	  async update(id: number, data: Partial<CreateExerciceComptable>): Promise<ExerciceComptable> {
    90	    console.log(`üì§ Updating exercice ${id} in backend...`, data)
    91	    return apiClient.patch(`${this.baseUrl}/${id}/`, data)
    92	  }
    93	
    94	  /**
    95	   * Supprimer un exercice comptable
    96	   */
    97	  async delete(id: number): Promise<void> {
    98	    console.log(`üóëÔ∏è Deleting exercice ${id} from backend...`)
    99	    return apiClient.delete(`${this.baseUrl}/${id}/`)
   100	  }
   101	
   102	  /**
   103	   * R√©cup√©rer les exercices actuels
   104	   */
   105	  async getCurrent(entrepriseId?: number): Promise<ExerciceComptable[]> {
   106	    console.log('üîÑ Fetching current exercices from backend...', { entrepriseId })
   107	    const params = entrepriseId ? { entreprise: entrepriseId } : undefined
   108	    return apiClient.get(`${this.baseUrl}/current/`, params)
   109	  }
   110	
   111	  /**
   112	   * R√©cup√©rer l'exercice actuel d'une entreprise
   113	   */
   114	  async getCurrentForEntreprise(entrepriseId: number): Promise<ExerciceComptable | null> {
   115	    console.log(`üîÑ Fetching current exercice for entreprise ${entrepriseId}...`)
   116	    const exercices = await this.getCurrent(entrepriseId)
   117	    return exercices.length > 0 ? exercices[0] : null
   118	  }
   119	
   120	  /**
   121	   * Cl√¥turer un exercice comptable
   122	   */
   123	  async cloturer(id: number): Promise<ExerciceComptable> {
   124	    console.log(`üîí Closing exercice ${id} in backend...`)
   125	    return apiClient.post(`${this.baseUrl}/${id}/cloturer/`)
   126	  }
   127	
   128	  /**
   129	   * Rouvrir un exercice comptable cl√¥tur√©
   130	   */
   131	  async rouvrir(id: number): Promise<ExerciceComptable> {
   132	    console.log(`üîì Reopening exercice ${id} in backend...`)
   133	    return apiClient.post(`${this.baseUrl}/${id}/rouvrir/`)
   134	  }
   135	
   136	  /**
   137	   * R√©cup√©rer les exercices d'une entreprise
   138	   */
   139	  async getByEntreprise(entrepriseId: number, includeArchived = false): Promise<ExerciceComptable[]> {
   140	    console.log(`üîÑ Fetching exercices for entreprise ${entrepriseId}...`)
   141	    const filters: ExerciceFilters = {
   142	      entreprise: entrepriseId,
   143	      page_size: 1000
   144	    }
   145	
   146	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, filters)
   147	    let exercices = data.results || []
   148	
   149	    // Filtrer les archiv√©s si demand√©
   150	    if (!includeArchived) {
   151	      exercices = exercices.filter((ex: ExerciceComptable) => ex.statut !== 'ARCHIVE')
   152	    }
   153	
   154	    return exercices
   155	  }
   156	
   157	  /**
   158	   * R√©cup√©rer les exercices ouverts d'une entreprise
   159	   */
   160	  async getOuvertsForEntreprise(entrepriseId: number): Promise<ExerciceComptable[]> {
   161	    console.log(`üîÑ Fetching open exercices for entreprise ${entrepriseId}...`)
   162	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, {
   163	      entreprise: entrepriseId,
   164	      statut: 'OUVERT',
   165	      page_size: 1000
   166	    })
   167	    return data.results || []
   168	  }
   169	
   170	  /**
   171	   * D√©finir un exercice comme exercice actuel
   172	   */
   173	  async setAsCurrentExercice(id: number): Promise<ExerciceComptable> {
   174	    console.log(`‚≠ê Setting exercice ${id} as current...`)
   175	    return apiClient.patch(`${this.baseUrl}/${id}/`, {
   176	      est_exercice_actuel: true
   177	    })
   178	  }
   179	
   180	  /**
   181	   * Valider qu'un exercice peut √™tre cl√¥tur√©
   182	   */
   183	  async validateClotureEligibility(id: number): Promise<{
   184	    can_close: boolean
   185	    errors: string[]
   186	    warnings: string[]
   187	  }> {
   188	    console.log(`üîç Validating cloture eligibility for exercice ${id}...`)
   189	    try {
   190	      const exercice = await this.getById(id)
   191	
   192	      const errors: string[] = []
   193	      const warnings: string[] = []
   194	
   195	      // V√©rifications de base
   196	      if (exercice.statut !== 'OUVERT') {
   197	        errors.push('Seuls les exercices ouverts peuvent √™tre cl√¥tur√©s')
   198	      }
   199	
   200	      const today = new Date()
   201	      const dateFin = new Date(exercice.date_fin)
   202	
   203	      if (dateFin > today) {
   204	        warnings.push('La date de fin de l\'exercice n\'est pas encore atteinte')
   205	      }
   206	
   207	      return {
   208	        can_close: errors.length === 0,
   209	        errors,
   210	        warnings
   211	      }
   212	    } catch (error) {
   213	      console.error('Error validating cloture:', error)
   214	      return {
   215	        can_close: false,
   216	        errors: ['Erreur lors de la validation'],
   217	        warnings: []
   218	      }
   219	    }
   220	  }
   221	
   222	  /**
   223	   * R√©cup√©rer les statistiques d'un exercice
   224	   */
   225	  async getExerciceStats(id: number): Promise<{
   226	    nb_ecritures?: number
   227	    nb_documents?: number
   228	    is_balanced?: boolean
   229	    solde_debit?: number
   230	    solde_credit?: number
   231	  }> {
   232	    console.log(`üìä Fetching stats for exercice ${id}...`)
   233	    // Cette m√©thode n√©cessiterait un endpoint backend sp√©cifique
   234	    // Pour l'instant, retourner un objet vide
   235	    return {}
   236	  }
   237	}
   238	
   239	export default new ExerciceService()

================================================================================
FILE: src/services/generationService.ts
================================================================================
     1	/**
     2	 * Service pour la g√©n√©ration de liasses fiscales
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface LiasseGeneration {
     9	  id: string
    10	  entreprise: string
    11	  entreprise_detail?: {
    12	    raison_sociale: string
    13	    numero_contribuable: string
    14	  }
    15	  exercice: string
    16	  exercice_detail?: {
    17	    nom: string
    18	    date_debut: string
    19	    date_fin: string
    20	  }
    21	  type_liasse: 'SYSCOHADA' | 'IFRS' | 'PME' | 'TPE' | 'SN' | 'SMT' | 'BANQUE' | 'ASSURANCE' | 'MICROFINANCE' | 'EBNL'
    22	  statut: 'EN_PREPARATION' | 'EN_COURS' | 'TERMINEE' | 'ERREUR'
    23	  progression: number
    24	  balance_source: string
    25	  templates_utilises: string[]
    26	  etats_generes: {
    27	    bilan_actif: boolean
    28	    bilan_passif: boolean
    29	    compte_resultat: boolean
    30	    tableau_flux: boolean
    31	    notes_annexes: boolean
    32	  }
    33	  fichier_pdf?: string
    34	  fichier_excel?: string
    35	  date_generation: string
    36	  erreurs?: Array<{
    37	    code: string
    38	    message: string
    39	    severite: 'WARNING' | 'ERROR'
    40	  }>
    41	  created_at: string
    42	  updated_at: string
    43	}
    44	
    45	export interface GenerationRequest {
    46	  entreprise_id: string
    47	  exercice_id: string
    48	  type_liasse: 'SYSCOHADA' | 'IFRS' | 'PME' | 'TPE' | 'SN' | 'SMT' | 'BANQUE' | 'ASSURANCE' | 'MICROFINANCE' | 'EBNL'
    49	  balance_id: string
    50	  options?: {
    51	    inclure_notes: boolean
    52	    format_export: 'PDF' | 'EXCEL' | 'BOTH'
    53	    validation_auto: boolean
    54	  }
    55	}
    56	
    57	export interface ExportOptions {
    58	  format: 'PDF' | 'EXCEL' | 'XML' | 'JSON'
    59	  template?: string
    60	  options?: {
    61	    inclure_annexes: boolean
    62	    watermark: boolean
    63	    compression: boolean
    64	  }
    65	}
    66	
    67	class GenerationService {
    68	  private baseUrl = '/api/v1/generation'
    69	
    70	  // G√©n√©ration de liasses - CONNEXION R√âELLE AU BACKEND
    71	  async generateLiasse(request: GenerationRequest): Promise<LiasseGeneration> {
    72	    console.log('üì§ Starting liasse generation in backend...', request)
    73	    return apiClient.post(`${this.baseUrl}/liasses/`, request)
    74	  }
    75	
    76	  async getLiasseGenerations(params?: {
    77	    entreprise?: string
    78	    exercice?: string
    79	    type_liasse?: string
    80	    statut?: string
    81	    page?: number
    82	    page_size?: number
    83	  }) {
    84	    console.log('üîÑ Fetching liasse generations from backend...', params)
    85	    return apiClient.get(`${this.baseUrl}/liasses/`, params)
    86	  }
    87	
    88	  async getLiasseGeneration(id: string): Promise<LiasseGeneration> {
    89	    console.log(`üîÑ Fetching liasse generation ${id} from backend...`)
    90	    return apiClient.get(`${this.baseUrl}/liasses/${id}/`)
    91	  }
    92	
    93	  async getGenerationStatus(id: string): Promise<LiasseGeneration> {
    94	    console.log(`üîÑ Getting generation status ${id} from backend...`)
    95	    return apiClient.get(`${this.baseUrl}/liasses/${id}/status/`)
    96	  }
    97	
    98	  async cancelGeneration(id: string): Promise<void> {
    99	    console.log(`üõë Cancelling generation ${id} on backend...`)
   100	    return apiClient.post(`${this.baseUrl}/liasses/${id}/cancel/`)
   101	  }
   102	
   103	  // Export et t√©l√©chargement - CONNEXION R√âELLE AU BACKEND
   104	  async exportLiasse(id: string, options: ExportOptions) {
   105	    console.log(`üì• Exporting liasse ${id} as ${options.format}...`)
   106	    return apiClient.get(`${this.baseUrl}/liasses/${id}/export/`, options)
   107	  }
   108	
   109	  async downloadLiasse(id: string, format: 'PDF' | 'EXCEL'): Promise<Blob> {
   110	    console.log(`üì• Downloading liasse ${id} as ${format}...`)
   111	    const response = await apiClient.client.get(`${this.baseUrl}/liasses/${id}/download/`, {
   112	      params: { format },
   113	      responseType: 'blob'
   114	    })
   115	    return response.data
   116	  }
   117	
   118	  // Templates et mod√®les - CONNEXION R√âELLE AU BACKEND
   119	  async getAvailableTemplates(type_liasse?: string) {
   120	    console.log('üîÑ Fetching available templates from backend...', type_liasse)
   121	    return apiClient.get(`${this.baseUrl}/templates/`, { type_liasse })
   122	  }
   123	
   124	  async getTemplate(id: string) {
   125	    console.log(`üîÑ Fetching template ${id} from backend...`)
   126	    return apiClient.get(`${this.baseUrl}/templates/${id}/`)
   127	  }
   128	
   129	  // Validation et contr√¥les - CONNEXION R√âELLE AU BACKEND
   130	  async validateLiasse(id: string) {
   131	    console.log(`üîç Validating liasse ${id} on backend...`)
   132	    return apiClient.post(`${this.baseUrl}/liasses/${id}/validate/`)
   133	  }
   134	
   135	  async getValidationErrors(id: string) {
   136	    console.log(`üîç Getting validation errors for liasse ${id}...`)
   137	    return apiClient.get(`${this.baseUrl}/liasses/${id}/validation-errors/`)
   138	  }
   139	
   140	  // Statistiques - CONNEXION R√âELLE AU BACKEND
   141	  async getGenerationStats(params?: {
   142	    entreprise?: string
   143	    period?: string
   144	  }) {
   145	    console.log('üìä Getting generation stats from backend...', params)
   146	    return apiClient.get(`${this.baseUrl}/stats/`, params)
   147	  }
   148	
   149	  // Historique et versions - CONNEXION R√âELLE AU BACKEND
   150	  async getLiasseHistory(entreprise_id: string, exercice_id: string) {
   151	    console.log(`üîÑ Getting liasse history for entreprise ${entreprise_id}, exercice ${exercice_id}...`)
   152	    return apiClient.get(`${this.baseUrl}/history/`, {
   153	      entreprise: entreprise_id,
   154	      exercice: exercice_id
   155	    })
   156	  }
   157	
   158	  async compareLiasses(liasse1_id: string, liasse2_id: string) {
   159	    console.log(`üìä Comparing liasses ${liasse1_id} and ${liasse2_id}...`)
   160	    return apiClient.get(`${this.baseUrl}/compare/`, {
   161	      liasse1: liasse1_id,
   162	      liasse2: liasse2_id
   163	    })
   164	  }
   165	
   166	  // Preview et aper√ßu - CONNEXION R√âELLE AU BACKEND
   167	  async previewLiasse(request: GenerationRequest) {
   168	    console.log('üëÅÔ∏è Generating liasse preview on backend...', request)
   169	    return apiClient.post(`${this.baseUrl}/preview/`, request)
   170	  }
   171	
   172	  // Batch operations - CONNEXION R√âELLE AU BACKEND
   173	  async batchGenerate(requests: GenerationRequest[]) {
   174	    console.log('üì§ Starting batch generation on backend...', requests.length, 'liasses')
   175	    return apiClient.post(`${this.baseUrl}/batch/`, { requests })
   176	  }
   177	
   178	  async getBatchStatus(batch_id: string) {
   179	    console.log(`üîÑ Getting batch status ${batch_id} from backend...`)
   180	    return apiClient.get(`${this.baseUrl}/batch/${batch_id}/`)
   181	  }
   182	
   183	  // Validation approfondie - CONNEXION R√âELLE AU BACKEND
   184	  async checkPrerequisites(liasseId: string) {
   185	    console.log(`üîç Checking prerequisites for liasse ${liasseId}...`)
   186	    return apiClient.get(`${this.baseUrl}/liasses/${liasseId}/check-prerequisites/`)
   187	  }
   188	
   189	  async validateComplete(liasseId: string) {
   190	    console.log(`üîç Performing complete validation for liasse ${liasseId}...`)
   191	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/validate_complete/`)
   192	  }
   193	
   194	  async getValidationReport(liasseId: string) {
   195	    console.log(`üìã Getting validation report for liasse ${liasseId}...`)
   196	    return apiClient.get(`${this.baseUrl}/liasses/${liasseId}/validation-report/`)
   197	  }
   198	
   199	  // Workflow statuts - CONNEXION R√âELLE AU BACKEND
   200	  async getTransitions(liasseId: string) {
   201	    console.log(`üîÑ Getting available transitions for liasse ${liasseId}...`)
   202	    return apiClient.get(`${this.baseUrl}/liasses/${liasseId}/get_transitions/`)
   203	  }
   204	
   205	  async transition(liasseId: string, action: string) {
   206	    console.log(`üîÑ Performing transition '${action}' on liasse ${liasseId}...`)
   207	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/transition/`, { action })
   208	  }
   209	
   210	  async verrouiller(liasseId: string) {
   211	    console.log(`üîí Locking liasse ${liasseId}...`)
   212	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/verrouiller/`)
   213	  }
   214	
   215	  async finaliser(liasseId: string) {
   216	    console.log(`‚úÖ Finalizing liasse ${liasseId}...`)
   217	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/finaliser/`)
   218	  }
   219	
   220	  async invalider(liasseId: string) {
   221	    console.log(`‚ùå Invalidating liasse ${liasseId}...`)
   222	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/invalider_liasse/`)
   223	  }
   224	
   225	  async archiver(liasseId: string) {
   226	    console.log(`üì¶ Archiving liasse ${liasseId}...`)
   227	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/archiver_liasse/`)
   228	  }
   229	
   230	  async remettreEnBrouillon(liasseId: string) {
   231	    console.log(`üîÑ Resetting liasse ${liasseId} to draft...`)
   232	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/remettre_brouillon/`)
   233	  }
   234	
   235	  async declarer(liasseId: string) {
   236	    console.log(`üì§ Declaring liasse ${liasseId} to DGI...`)
   237	    return apiClient.post(`${this.baseUrl}/liasses/${liasseId}/declarer_liasse/`)
   238	  }
   239	
   240	  // Export batch avanc√© - CONNEXION R√âELLE AU BACKEND
   241	  async exportBatch(liasseIds: string[], format: 'PDF' | 'EXCEL') {
   242	    console.log(`üì§ Starting batch export for ${liasseIds.length} liasses...`)
   243	    return apiClient.post(`${this.baseUrl}/liasses/export_batch/`, {
   244	      liasse_ids: liasseIds,
   245	      format,
   246	    })
   247	  }
   248	
   249	  async getBatchExportStatus(batchId: string) {
   250	    console.log(`üîÑ Getting batch export status ${batchId}...`)
   251	    return apiClient.get(`${this.baseUrl}/liasses/export_batch/${batchId}/status/`)
   252	  }
   253	
   254	  async downloadBatch(batchId: string): Promise<Blob> {
   255	    console.log(`üì• Downloading batch export ${batchId}...`)
   256	    const response = await apiClient.client.get(
   257	      `${this.baseUrl}/liasses/download_batch/`,
   258	      {
   259	        params: { batch_id: batchId },
   260	        responseType: 'blob'
   261	      }
   262	    )
   263	    return response.data
   264	  }
   265	}
   266	
   267	export const generationService = new GenerationService()
   268	export default generationService
================================================================================
FILE: src/services/index.ts
================================================================================
     1	/**
     2	 * Export centralis√© de tous les services
     3	 * Facilite l'import dans les composants
     4	 */
     5	
     6	export { apiClient } from './apiClient'
     7	export { default as authService } from './authService'
     8	export { default as balanceService } from './balanceService'
     9	export { default as entrepriseService } from './entrepriseService'
    10	export { default as generationService } from './generationService'
    11	export { default as auditService } from './auditService'
    12	export { default as reportingService } from './reportingService'
    13	export { default as accountingService } from './accountingService'
    14	export { default as templatesService } from './templatesService'
    15	export { default as taxService } from './taxService'
    16	
    17	// Types exports
    18	export type { Balance, LigneBalance } from './balanceService'
    19	export type { Entreprise, TypeLiasse, EntrepriseStats } from './entrepriseService'
    20	export type { LiasseGeneration, GenerationRequest } from './generationService'
    21	export type { AuditSession, AuditAnomalie, AuditRequest } from './auditService'
    22	export type { Report, ReportTemplate, DashboardStats } from './reportingService'
    23	export type { Template, TemplateVariable, GenerationRequest as TemplateGenerationRequest } from './templatesService'
    24	export type { Impot, DeclarationFiscale, CalculFiscal } from './taxService'
    25	export type { CompteComptable, PlanComptable, EcritureComptable } from './accountingService'
================================================================================
FILE: src/services/journalService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des journaux comptables
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface Journal {
     9	  id: number
    10	  entreprise: number
    11	  entreprise_detail?: {
    12	    raison_sociale: string
    13	  }
    14	  code: string
    15	  libelle: string
    16	  type_journal: 'VENTE' | 'ACHAT' | 'BANQUE' | 'CAISSE' | 'OD' | 'REPORT'
    17	  is_actif: boolean
    18	  sequence_actuelle: number
    19	  prefixe_numero: string
    20	  comptes_autorises: string[]
    21	  created_at: string
    22	  updated_at: string
    23	}
    24	
    25	export interface CreateJournal {
    26	  entreprise: number
    27	  code: string
    28	  libelle: string
    29	  type_journal: 'VENTE' | 'ACHAT' | 'BANQUE' | 'CAISSE' | 'OD' | 'REPORT'
    30	  is_actif?: boolean
    31	  prefixe_numero?: string
    32	  comptes_autorises?: string[]
    33	}
    34	
    35	export interface JournalFilters {
    36	  entreprise?: number
    37	  type_journal?: 'VENTE' | 'ACHAT' | 'BANQUE' | 'CAISSE' | 'OD' | 'REPORT'
    38	  is_actif?: boolean
    39	  search?: string
    40	  page?: number
    41	  page_size?: number
    42	}
    43	
    44	class JournalService {
    45	  private baseUrl = '/api/v1/accounting/journaux'
    46	
    47	  async list(filters?: JournalFilters): Promise<{ count: number; results: Journal[] }> {
    48	    console.log('üîÑ Fetching journaux from backend...', filters)
    49	    return apiClient.get(this.baseUrl, filters)
    50	  }
    51	
    52	  async getAll(filters?: Omit<JournalFilters, 'page' | 'page_size'>): Promise<Journal[]> {
    53	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, { ...filters, page_size: 1000 })
    54	    return data.results || []
    55	  }
    56	
    57	  async getById(id: number): Promise<Journal> {
    58	    return apiClient.get(`${this.baseUrl}/${id}/`)
    59	  }
    60	
    61	  async create(data: CreateJournal): Promise<Journal> {
    62	    console.log('üì§ Creating journal...', data)
    63	    return apiClient.post(this.baseUrl, data)
    64	  }
    65	
    66	  async update(id: number, data: Partial<CreateJournal>): Promise<Journal> {
    67	    return apiClient.patch(`${this.baseUrl}/${id}/`, data)
    68	  }
    69	
    70	  async delete(id: number): Promise<void> {
    71	    return apiClient.delete(`${this.baseUrl}/${id}/`)
    72	  }
    73	
    74	  async getByEntreprise(entrepriseId: number): Promise<Journal[]> {
    75	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, { entreprise: entrepriseId, page_size: 1000 })
    76	    return data.results || []
    77	  }
    78	
    79	  async getActifs(entrepriseId: number): Promise<Journal[]> {
    80	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, {
    81	      entreprise: entrepriseId,
    82	      is_actif: true,
    83	      page_size: 1000
    84	    })
    85	    return data.results || []
    86	  }
    87	
    88	  getTypeJournalLabel(type: Journal['type_journal']): string {
    89	    const labels = {
    90	      'VENTE': 'Journal des Ventes',
    91	      'ACHAT': 'Journal des Achats',
    92	      'BANQUE': 'Journal de Banque',
    93	      'CAISSE': 'Journal de Caisse',
    94	      'OD': 'Op√©rations Diverses',
    95	      'REPORT': '√Ä-nouveaux / Reports'
    96	    }
    97	    return labels[type] || type
    98	  }
    99	}
   100	
   101	export default new JournalService()

================================================================================
FILE: src/services/liasseAssuranceMapping.ts
================================================================================
     1	/**
     2	 * Mapping ASSURANCE - Plan CIMA (Conference Interafricaine des Marches d'Assurances)
     3	 * Structure specifique pour les compagnies d'assurance
     4	 * Etats modeles CIMA : C1, C9, C10a, C10b
     5	 */
     6	
     7	import type { MappingEntry } from './liasseSMTMapping'
     8	
     9	export const ASSURANCE_MAPPING = {
    10	  // BILAN ACTIF ASSURANCE
    11	  actif: {
    12	    // Placements
    13	    AA_1: { comptes: ['21', '22'], amortComptes: ['281', '282'] } as MappingEntry, // Immeubles
    14	    AA_2: { comptes: ['23', '24'], amortComptes: ['283', '284'] } as MappingEntry, // Actions et parts sociales
    15	    AA_3: { comptes: ['25'], amortComptes: [] } as MappingEntry, // Obligations et bons
    16	    AA_4: { comptes: ['26', '27'], amortComptes: [] } as MappingEntry, // Prets et effets assimiles
    17	    AA_5: { comptes: ['28'], amortComptes: [] } as MappingEntry, // Depots en banque et CCP
    18	    AA_6: { comptes: ['29'], amortComptes: [] } as MappingEntry, // Autres placements
    19	
    20	    // Part des reassureurs dans les provisions techniques
    21	    AA_7: { comptes: ['30', '31'], amortComptes: [] } as MappingEntry, // Part reassureurs - provisions pour primes non acquises
    22	    AA_8: { comptes: ['32', '33'], amortComptes: [] } as MappingEntry, // Part reassureurs - provisions sinistres
    23	    AA_9: { comptes: ['34'], amortComptes: [] } as MappingEntry, // Part reassureurs - provisions mathematiques
    24	    AA_10: { comptes: ['35', '36'], amortComptes: [] } as MappingEntry, // Part reassureurs - autres provisions
    25	
    26	    // Creances
    27	    AA_11: { comptes: ['40', '41'], amortComptes: ['49'] } as MappingEntry, // Creances nees d'operations d'assurance
    28	    AA_12: { comptes: ['42', '43'], amortComptes: [] } as MappingEntry, // Creances nees d'operations de reassurance
    29	    AA_13: { comptes: ['44', '45', '46'], amortComptes: [] } as MappingEntry, // Autres creances
    30	    AA_14: { comptes: ['47'], amortComptes: [] } as MappingEntry, // Personnel et comptes rattaches
    31	
    32	    // Autres actifs
    33	    AA_15: { comptes: ['48'], amortComptes: [] } as MappingEntry, // Comptes de regularisation actif
    34	    AA_16: { comptes: ['50', '51', '52', '53', '57'], amortComptes: [] } as MappingEntry, // Tresorerie
    35	  },
    36	
    37	  // BILAN PASSIF ASSURANCE
    38	  passif: {
    39	    // Capitaux propres
    40	    AP_1: { comptes: ['10'] } as MappingEntry, // Capital ou fonds d'etablissement
    41	    AP_2: { comptes: ['11'] } as MappingEntry, // Reserves
    42	    AP_3: { comptes: ['12'] } as MappingEntry, // Report a nouveau
    43	    AP_4: { comptes: ['13'] } as MappingEntry, // Resultat de l'exercice
    44	
    45	    // Provisions techniques
    46	    AP_5: { comptes: ['30', '31'] } as MappingEntry, // Provision pour primes non acquises
    47	    AP_6: { comptes: ['32', '33'] } as MappingEntry, // Provision pour sinistres a payer
    48	    AP_7: { comptes: ['34'] } as MappingEntry, // Provision mathematique (vie)
    49	    AP_8: { comptes: ['35'] } as MappingEntry, // Provision pour participation benefices
    50	    AP_9: { comptes: ['36', '37'] } as MappingEntry, // Provision d'egalisation et autres
    51	
    52	    // Dettes
    53	    AP_10: { comptes: ['40', '41'] } as MappingEntry, // Dettes d'operations d'assurance
    54	    AP_11: { comptes: ['42', '43'] } as MappingEntry, // Dettes d'operations de reassurance
    55	    AP_12: { comptes: ['44', '45', '46'] } as MappingEntry, // Autres dettes
    56	    AP_13: { comptes: ['48'] } as MappingEntry, // Comptes de regularisation passif
    57	  },
    58	
    59	  // COMPTE TECHNIQUE - CHARGES
    60	  chargesTechniques: {
    61	    CT_1: { comptes: ['60'] } as MappingEntry, // Prestations et frais payes (sinistres)
    62	    CT_2: { comptes: ['61'] } as MappingEntry, // Charges des placements
    63	    CT_3: { comptes: ['62'] } as MappingEntry, // Charges de reassurance cedee
    64	    CT_4: { comptes: ['63'] } as MappingEntry, // Dotations provisions techniques
    65	    CT_5: { comptes: ['64'] } as MappingEntry, // Frais d'acquisition
    66	    CT_6: { comptes: ['65'] } as MappingEntry, // Frais d'administration
    67	    CT_7: { comptes: ['66'] } as MappingEntry, // Autres charges techniques
    68	  },
    69	
    70	  // COMPTE TECHNIQUE - PRODUITS
    71	  produitsTechniques: {
    72	    PT_1: { comptes: ['70'] } as MappingEntry, // Primes emises
    73	    PT_2: { comptes: ['71'] } as MappingEntry, // Variation provisions primes non acquises
    74	    PT_3: { comptes: ['72'] } as MappingEntry, // Primes acquises
    75	    PT_4: { comptes: ['73'] } as MappingEntry, // Produits des placements
    76	    PT_5: { comptes: ['74'] } as MappingEntry, // Ajustement ACAV (vie)
    77	    PT_6: { comptes: ['75'] } as MappingEntry, // Produits de reassurance cedee
    78	    PT_7: { comptes: ['76', '77'] } as MappingEntry, // Autres produits techniques
    79	  },
    80	
    81	  // COMPTE NON-TECHNIQUE
    82	  chargesNonTechniques: {
    83	    CNT_1: { comptes: ['67'] } as MappingEntry, // Charges non techniques courantes
    84	    CNT_2: { comptes: ['68'] } as MappingEntry, // Dotations amortissements et provisions
    85	    CNT_3: { comptes: ['69'] } as MappingEntry, // Charges exceptionnelles et impot
    86	  },
    87	
    88	  produitsNonTechniques: {
    89	    PNT_1: { comptes: ['78'] } as MappingEntry, // Produits non techniques courants
    90	    PNT_2: { comptes: ['79'] } as MappingEntry, // Reprises et produits exceptionnels
    91	  },
    92	}
    93	
    94	export const ASSURANCE_LIBELLES = {
    95	  actif: {
    96	    AA_1: 'Immeubles',
    97	    AA_2: 'Actions et parts sociales',
    98	    AA_3: 'Obligations et bons',
    99	    AA_4: 'Prets et effets assimiles',
   100	    AA_5: 'Depots en banque et CCP',
   101	    AA_6: 'Autres placements',
   102	    AA_7: 'Part reassureurs - Primes non acquises',
   103	    AA_8: 'Part reassureurs - Sinistres',
   104	    AA_9: 'Part reassureurs - Provisions mathematiques',
   105	    AA_10: 'Part reassureurs - Autres provisions',
   106	    AA_11: 'Creances d\'operations d\'assurance',
   107	    AA_12: 'Creances d\'operations de reassurance',
   108	    AA_13: 'Autres creances',
   109	    AA_14: 'Personnel et comptes rattaches',
   110	    AA_15: 'Comptes de regularisation actif',
   111	    AA_16: 'Tresorerie',
   112	  },
   113	  passif: {
   114	    AP_1: 'Capital ou fonds d\'etablissement',
   115	    AP_2: 'Reserves',
   116	    AP_3: 'Report a nouveau',
   117	    AP_4: 'Resultat de l\'exercice',
   118	    AP_5: 'Provision pour primes non acquises',
   119	    AP_6: 'Provision pour sinistres a payer',
   120	    AP_7: 'Provision mathematique (vie)',
   121	    AP_8: 'Provision participation benefices',
   122	    AP_9: 'Provision d\'egalisation et autres',
   123	    AP_10: 'Dettes d\'operations d\'assurance',
   124	    AP_11: 'Dettes d\'operations de reassurance',
   125	    AP_12: 'Autres dettes',
   126	    AP_13: 'Comptes de regularisation passif',
   127	  },
   128	  chargesTechniques: {
   129	    CT_1: 'Sinistres payes',
   130	    CT_2: 'Charges des placements',
   131	    CT_3: 'Charges de reassurance cedee',
   132	    CT_4: 'Dotations provisions techniques',
   133	    CT_5: 'Frais d\'acquisition',
   134	    CT_6: 'Frais d\'administration',
   135	    CT_7: 'Autres charges techniques',
   136	  },
   137	  produitsTechniques: {
   138	    PT_1: 'Primes emises',
   139	    PT_2: 'Variation provisions primes',
   140	    PT_3: 'Primes acquises',
   141	    PT_4: 'Produits des placements',
   142	    PT_5: 'Ajustement ACAV (vie)',
   143	    PT_6: 'Produits de reassurance cedee',
   144	    PT_7: 'Autres produits techniques',
   145	  },
   146	}

================================================================================
FILE: src/services/liasseBanqueMapping.ts
================================================================================
     1	/**
     2	 * Mapping BANQUE - Plan PCEC (COBAC) / PCB (BCEAO)
     3	 * Structure des classes bancaires differente du SYSCOHADA standard
     4	 * Classe 1: Operations de tresorerie et interbancaires
     5	 * Classe 2: Operations avec la clientele
     6	 * Classe 3: Operations sur titres et diverses
     7	 * Classe 4: Valeurs immobilisees
     8	 * Classe 5: Capitaux permanents
     9	 * Classe 6: Charges
    10	 * Classe 7: Produits
    11	 */
    12	
    13	import type { MappingEntry } from './liasseSMTMapping'
    14	
    15	export const BANQUE_MAPPING = {
    16	  // BILAN ACTIF BANCAIRE
    17	  actif: {
    18	    // Classe 1 - Tresorerie et interbancaires
    19	    BA_1: { comptes: ['10'], amortComptes: [] } as MappingEntry, // Caisse et banques centrales
    20	    BA_2: { comptes: ['11', '12'], amortComptes: [] } as MappingEntry, // Effets publics et assimiles
    21	    BA_3: { comptes: ['13', '14', '15'], amortComptes: [] } as MappingEntry, // Creances sur etablissements de credit
    22	    BA_4: { comptes: ['16', '17', '18', '19'], amortComptes: [] } as MappingEntry, // Prets et avances interbancaires
    23	
    24	    // Classe 2 - Operations clientele
    25	    BA_5: { comptes: ['20', '21', '22'], amortComptes: ['29'] } as MappingEntry, // Credits a la clientele
    26	    BA_6: { comptes: ['23', '24'], amortComptes: [] } as MappingEntry, // Comptes ordinaires debiteurs
    27	    BA_7: { comptes: ['25', '26'], amortComptes: [] } as MappingEntry, // Affacturage et operations de credit-bail
    28	    BA_8: { comptes: ['27', '28'], amortComptes: [] } as MappingEntry, // Creances impayees et douteuses
    29	
    30	    // Classe 3 - Operations sur titres
    31	    BA_9: { comptes: ['30', '31', '32'], amortComptes: [] } as MappingEntry, // Titres de transaction
    32	    BA_10: { comptes: ['33', '34'], amortComptes: [] } as MappingEntry, // Titres de placement
    33	    BA_11: { comptes: ['35', '36'], amortComptes: [] } as MappingEntry, // Titres d'investissement
    34	    BA_12: { comptes: ['37', '38', '39'], amortComptes: [] } as MappingEntry, // Operations diverses sur titres
    35	
    36	    // Classe 4 - Valeurs immobilisees
    37	    BA_13: { comptes: ['40', '41'], amortComptes: ['48'] } as MappingEntry, // Immobilisations incorporelles
    38	    BA_14: { comptes: ['42', '43', '44'], amortComptes: ['48'] } as MappingEntry, // Immobilisations corporelles
    39	    BA_15: { comptes: ['45', '46'], amortComptes: [] } as MappingEntry, // Immobilisations financieres
    40	    BA_16: { comptes: ['47'], amortComptes: [] } as MappingEntry, // Actionnaires ou associes
    41	  },
    42	
    43	  // BILAN PASSIF BANCAIRE
    44	  passif: {
    45	    // Classe 1 - Tresorerie passif
    46	    BP_1: { comptes: ['10'] } as MappingEntry, // Banques centrales (crediteur)
    47	    BP_2: { comptes: ['13', '14', '15'] } as MappingEntry, // Dettes envers etablissements de credit
    48	    BP_3: { comptes: ['16', '17'] } as MappingEntry, // Emprunts interbancaires
    49	
    50	    // Classe 2 - Depots clientele
    51	    BP_4: { comptes: ['20', '21'] } as MappingEntry, // Comptes d'epargne
    52	    BP_5: { comptes: ['22', '23', '24'] } as MappingEntry, // Depots a vue
    53	    BP_6: { comptes: ['25', '26'] } as MappingEntry, // Depots a terme
    54	    BP_7: { comptes: ['27', '28'] } as MappingEntry, // Autres depots et comptes crediteurs
    55	
    56	    // Classe 3 - Titres emis
    57	    BP_8: { comptes: ['30', '31'] } as MappingEntry, // Titres de creances negociables emis
    58	    BP_9: { comptes: ['32', '33'] } as MappingEntry, // Obligations emises
    59	    BP_10: { comptes: ['37', '38', '39'] } as MappingEntry, // Autres dettes sur titres
    60	
    61	    // Classe 5 - Capitaux permanents
    62	    BP_11: { comptes: ['50', '51'] } as MappingEntry, // Capital
    63	    BP_12: { comptes: ['52', '53'] } as MappingEntry, // Reserves et primes
    64	    BP_13: { comptes: ['54'] } as MappingEntry, // Report a nouveau
    65	    BP_14: { comptes: ['55'] } as MappingEntry, // Resultat de l'exercice
    66	    BP_15: { comptes: ['56', '57'] } as MappingEntry, // Provisions pour risques
    67	    BP_16: { comptes: ['58', '59'] } as MappingEntry, // Fonds pour risques bancaires generaux
    68	  },
    69	
    70	  // COMPTE D'EXPLOITATION BANCAIRE - CHARGES
    71	  charges: {
    72	    CB_1: { comptes: ['60'] } as MappingEntry, // Charges sur operations de tresorerie
    73	    CB_2: { comptes: ['61'] } as MappingEntry, // Charges sur operations avec clientele
    74	    CB_3: { comptes: ['62'] } as MappingEntry, // Charges sur operations sur titres
    75	    CB_4: { comptes: ['63'] } as MappingEntry, // Charges sur operations de change
    76	    CB_5: { comptes: ['64'] } as MappingEntry, // Charges sur operations de hors-bilan
    77	    CB_6: { comptes: ['65'] } as MappingEntry, // Charges sur prestations de services financiers
    78	    CB_7: { comptes: ['66'] } as MappingEntry, // Charges generales d'exploitation
    79	    CB_8: { comptes: ['67'] } as MappingEntry, // Frais de personnel
    80	    CB_9: { comptes: ['68'] } as MappingEntry, // Dotations amortissements et provisions
    81	    CB_10: { comptes: ['69'] } as MappingEntry, // Charges exceptionnelles et impot
    82	  },
    83	
    84	  // COMPTE D'EXPLOITATION BANCAIRE - PRODUITS
    85	  produits: {
    86	    PB_1: { comptes: ['70'] } as MappingEntry, // Produits sur operations de tresorerie
    87	    PB_2: { comptes: ['71'] } as MappingEntry, // Produits sur operations avec clientele
    88	    PB_3: { comptes: ['72'] } as MappingEntry, // Produits sur operations sur titres
    89	    PB_4: { comptes: ['73'] } as MappingEntry, // Produits sur operations de change
    90	    PB_5: { comptes: ['74'] } as MappingEntry, // Produits sur operations de hors-bilan
    91	    PB_6: { comptes: ['75'] } as MappingEntry, // Produits sur prestations de services financiers
    92	    PB_7: { comptes: ['76'] } as MappingEntry, // Autres produits d'exploitation bancaire
    93	    PB_8: { comptes: ['77'] } as MappingEntry, // Produits accessoires
    94	    PB_9: { comptes: ['78'] } as MappingEntry, // Reprises de provisions
    95	    PB_10: { comptes: ['79'] } as MappingEntry, // Produits exceptionnels
    96	  },
    97	
    98	  // HORS-BILAN
    99	  horsBilan: {
   100	    HB_1: { comptes: ['90'] } as MappingEntry, // Engagements de financement donnes
   101	    HB_2: { comptes: ['91'] } as MappingEntry, // Engagements de financement recus
   102	    HB_3: { comptes: ['92'] } as MappingEntry, // Engagements de garantie donnes
   103	    HB_4: { comptes: ['93'] } as MappingEntry, // Engagements de garantie recus
   104	    HB_5: { comptes: ['94', '95'] } as MappingEntry, // Engagements sur titres
   105	    HB_6: { comptes: ['96', '97'] } as MappingEntry, // Operations en devises
   106	    HB_7: { comptes: ['98', '99'] } as MappingEntry, // Autres engagements
   107	  },
   108	}
   109	
   110	export const BANQUE_LIBELLES = {
   111	  actif: {
   112	    BA_1: 'Caisse et banques centrales',
   113	    BA_2: 'Effets publics et assimiles',
   114	    BA_3: 'Creances sur etablissements de credit',
   115	    BA_4: 'Prets et avances interbancaires',
   116	    BA_5: 'Credits a la clientele',
   117	    BA_6: 'Comptes ordinaires debiteurs',
   118	    BA_7: 'Affacturage et credit-bail',
   119	    BA_8: 'Creances impayees et douteuses',
   120	    BA_9: 'Titres de transaction',
   121	    BA_10: 'Titres de placement',
   122	    BA_11: 'Titres d\'investissement',
   123	    BA_12: 'Operations diverses sur titres',
   124	    BA_13: 'Immobilisations incorporelles',
   125	    BA_14: 'Immobilisations corporelles',
   126	    BA_15: 'Immobilisations financieres',
   127	    BA_16: 'Actionnaires ou associes',
   128	  },
   129	  passif: {
   130	    BP_1: 'Banques centrales (crediteur)',
   131	    BP_2: 'Dettes envers etablissements de credit',
   132	    BP_3: 'Emprunts interbancaires',
   133	    BP_4: 'Comptes d\'epargne',
   134	    BP_5: 'Depots a vue',
   135	    BP_6: 'Depots a terme',
   136	    BP_7: 'Autres depots et comptes crediteurs',
   137	    BP_8: 'Titres de creances negociables emis',
   138	    BP_9: 'Obligations emises',
   139	    BP_10: 'Autres dettes sur titres',
   140	    BP_11: 'Capital',
   141	    BP_12: 'Reserves et primes',
   142	    BP_13: 'Report a nouveau',
   143	    BP_14: 'Resultat de l\'exercice',
   144	    BP_15: 'Provisions pour risques',
   145	    BP_16: 'Fonds pour risques bancaires generaux',
   146	  },
   147	  charges: {
   148	    CB_1: 'Charges sur operations de tresorerie',
   149	    CB_2: 'Charges sur operations avec clientele',
   150	    CB_3: 'Charges sur operations sur titres',
   151	    CB_4: 'Charges sur operations de change',
   152	    CB_5: 'Charges sur operations de hors-bilan',
   153	    CB_6: 'Charges sur prestations financieres',
   154	    CB_7: 'Charges generales d\'exploitation',
   155	    CB_8: 'Frais de personnel',
   156	    CB_9: 'Dotations amortissements et provisions',
   157	    CB_10: 'Charges exceptionnelles et impot',
   158	  },
   159	  produits: {
   160	    PB_1: 'Produits sur operations de tresorerie',
   161	    PB_2: 'Produits sur operations avec clientele',
   162	    PB_3: 'Produits sur operations sur titres',
   163	    PB_4: 'Produits sur operations de change',
   164	    PB_5: 'Produits sur operations de hors-bilan',
   165	    PB_6: 'Produits sur prestations financieres',
   166	    PB_7: 'Autres produits d\'exploitation bancaire',
   167	    PB_8: 'Produits accessoires',
   168	    PB_9: 'Reprises de provisions',
   169	    PB_10: 'Produits exceptionnels',
   170	  },
   171	}

================================================================================
FILE: src/services/liasseDataService.ts
================================================================================
     1	/**
     2	 * Service de gestion des donn√©es de la Liasse Fiscale
     3	 * Mapping automatique entre la balance valid√©e et les √©tats financiers
     4	 * Supporte SN (Systeme Normal) et SMT (Systeme Minimal de Tresorerie)
     5	 */
     6	
     7	import { SMT_MAPPING, SMT_LIBELLES } from './liasseSMTMapping'
     8	import type { TypeLiasse } from '../types'
     9	
    10	export interface BalanceEntry {
    11	  compte: string
    12	  intitule: string
    13	  debit: number
    14	  credit: number
    15	  solde_debit: number
    16	  solde_credit: number
    17	}
    18	
    19	export interface LiasseData {
    20	  exercice: string
    21	  entreprise: any
    22	  balance: BalanceEntry[]
    23	  etats: {
    24	    actif: any
    25	    passif: any
    26	    resultat: any
    27	    tft: any
    28	  }
    29	  notes: any[]
    30	}
    31	
    32	/**
    33	 * Classe de mapping SYSCOHADA
    34	 * D√©finit la correspondance entre les comptes de la balance et les postes du bilan
    35	 *
    36	 * R√àGLE FONDAMENTALE:
    37	 * - Actif & Charges: solde normal = D√âBITEUR (solde_debit - solde_credit > 0)
    38	 * - Passif & Produits: solde normal = CR√âDITEUR (solde_credit - solde_debit > 0)
    39	 * - Amort/Provisions (28x, 29x, 39x, 49x, 59x): solde normal = CR√âDITEUR
    40	 * - Comptes r√©ciproques (42x, 48x, 52x): ventil√©s selon sens du solde
    41	 */
    42	export const SYSCOHADA_MAPPING = {
    43	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ACTIF IMMOBILIS√â ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    44	  actif: {
    45	    // Charges immobilis√©es
    46	    AQ: { comptes: ['201'], amortComptes: ['2801', '2901'] },
    47	    AR: { comptes: ['202'], amortComptes: ['2802', '2902'] },
    48	    AS: { comptes: ['206'], amortComptes: ['2806', '2906'] },
    49	
    50	    // Immobilisations incorporelles
    51	    AD: { comptes: ['211', '212'], amortComptes: ['2811', '2812', '2911', '2912'] },
    52	    AE: { comptes: ['213', '214', '215'], amortComptes: ['2813', '2814', '2815', '2913', '2914', '2915'] },
    53	    AF: { comptes: ['216', '217'], amortComptes: ['2816', '2817', '2916', '2917'] },
    54	    AG: { comptes: ['218', '219'], amortComptes: ['2818', '2819', '2918', '2919'] },
    55	
    56	    // Immobilisations corporelles
    57	    AJ: { comptes: ['22'], amortComptes: ['282', '292'] },
    58	    AK: { comptes: ['231', '232', '233', '234'], amortComptes: ['2831', '2832', '2833', '2834', '2931', '2932', '2933', '2934'] },
    59	    AL: { comptes: ['235', '237', '238'], amortComptes: ['2835', '2837', '2838', '2935', '2937', '2938'] },
    60	    AM: { comptes: ['241', '242', '243', '244'], amortComptes: ['2841', '2842', '2843', '2844', '2941', '2942', '2943', '2944'] },
    61	    AN: { comptes: ['245'], amortComptes: ['2845', '2945'] },
    62	
    63	    // Avances et acomptes
    64	    AP: { comptes: ['251', '252'], amortComptes: [] },
    65	
    66	    // Immobilisations financi√®res
    67	    AT: { comptes: ['26'], amortComptes: ['296'] },
    68	    AU: { comptes: ['271', '272', '273', '274', '275', '276', '277'], amortComptes: ['297'] },
    69	
    70	    // ACTIF CIRCULANT
    71	    BA: { comptes: ['485', '486', '487', '488'], amortComptes: ['498'] },
    72	
    73	    // Stocks
    74	    BC: { comptes: ['31'], amortComptes: ['391'] },
    75	    BD: { comptes: ['32'], amortComptes: ['392'] },
    76	    BE: { comptes: ['33'], amortComptes: ['393'] },
    77	    BF: { comptes: ['34', '35'], amortComptes: ['394', '395'] },
    78	    BG: { comptes: ['36', '37', '38'], amortComptes: ['396', '397', '398'] },
    79	
    80	    // Cr√©ances
    81	    BI: { comptes: ['409'], amortComptes: ['490'] },
    82	    BJ: { comptes: ['411', '412', '413', '414', '415', '416', '418'], amortComptes: ['491'] },
    83	    BK: { comptes: ['43', '44', '45', '46', '47'], amortComptes: ['492', '493', '494', '495', '496', '497'] },
    84	
    85	    // TR√âSORERIE ACTIF
    86	    BQ: { comptes: ['50'], amortComptes: ['590'] },
    87	    BR: { comptes: ['51'], amortComptes: ['591'] },
    88	    BS: { comptes: ['52', '53', '54', '55', '56', '57', '58'], amortComptes: ['592', '593', '594'] },
    89	
    90	    // √âcart de conversion actif
    91	    BU: { comptes: ['478'], amortComptes: [] }
    92	  },
    93	
    94	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ PASSIF ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    95	  passif: {
    96	    // Capitaux propres
    97	    CA: { comptes: ['101', '102', '103'] },
    98	    CB: { comptes: ['109'] },
    99	    CC: { comptes: ['104', '105'] },
   100	    CD: { comptes: ['106'] },
   101	    CE: { comptes: ['111', '112'] },
   102	    CF: { comptes: ['113', '118'] },
   103	    CG: { comptes: ['12'] },
   104	    CH: { comptes: ['13'] },
   105	    CI: { comptes: ['14'] },
   106	    CJ: { comptes: ['15'] },
   107	
   108	    // Dettes financi√®res et ressources assimil√©es
   109	    DA: { comptes: ['161'] },
   110	    DB: { comptes: ['162', '163', '164'] },
   111	    DC: { comptes: ['165', '166', '168'] },
   112	    DD: { comptes: ['17'] },
   113	    DE: { comptes: ['181', '182', '183', '184', '185', '186'] },
   114	    DF: { comptes: ['19'] },
   115	
   116	    // Passif circulant
   117	    DH: { comptes: ['481', '482', '483', '484'] },
   118	    DI: { comptes: ['419'] },
   119	    DJ: { comptes: ['401', '402', '403', '404', '405', '408'] },
   120	    DK: { comptes: ['431', '432', '433', '434', '435', '436', '437', '438', '439', '441', '442', '443', '444', '445', '446', '447', '448', '449'] },
   121	    DL: { comptes: ['421', '422', '423', '424', '425', '426', '427', '428'] },
   122	    DM: { comptes: ['499'] },
   123	
   124	    // Tr√©sorerie passif
   125	    DQ: { comptes: ['52', '561', '564'] },
   126	    DR: { comptes: ['565'] },
   127	
   128	    // √âcart de conversion passif
   129	    DT: { comptes: ['479'] }
   130	  },
   131	
   132	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CHARGES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   133	  charges: {
   134	    RA: { comptes: ['601'] },
   135	    RB: { comptes: ['6031'] },
   136	    RC: { comptes: ['602'] },
   137	    RD: { comptes: ['6032'] },
   138	    RE: { comptes: ['604', '605', '608'] },
   139	    RF: { comptes: ['6033'] },
   140	    RG: { comptes: ['61'] },
   141	    RH: { comptes: ['62', '63'] },
   142	    RI: { comptes: ['64'] },
   143	    RJ: { comptes: ['65'] },
   144	    RK: { comptes: ['66'] },
   145	    RL: { comptes: ['681'] },
   146	    RM: { comptes: ['691'] },
   147	
   148	    // Activit√© financi√®re
   149	    RN: { comptes: ['671', '672', '673', '674', '675'] },
   150	    RO: { comptes: ['676'] },
   151	    RP: { comptes: ['679', '697'] },
   152	
   153	    // HAO
   154	    RQ: { comptes: ['81'] },
   155	    RR: { comptes: ['83', '85'] },
   156	
   157	    // Imp√¥t
   158	    RS: { comptes: ['89'] }
   159	  },
   160	
   161	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ PRODUITS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   162	  produits: {
   163	    TA: { comptes: ['701'] },
   164	    TB: { comptes: ['702', '703', '704', '705'] },
   165	    TC: { comptes: ['706'] },
   166	    TD: { comptes: ['73'] },
   167	    TE: { comptes: ['72'] },
   168	    TF: { comptes: ['707'] },
   169	    TG: { comptes: ['71'] },
   170	    TH: { comptes: ['75'] },
   171	    TI: { comptes: ['791', '798', '799'] },
   172	
   173	    // Activit√© financi√®re
   174	    TJ: { comptes: ['771', '772', '773', '774', '775'] },
   175	    TK: { comptes: ['776'] },
   176	    TL: { comptes: ['787', '797'] },
   177	    TM: { comptes: ['781', '782'] },
   178	
   179	    // HAO
   180	    TN: { comptes: ['82'] },
   181	    TO: { comptes: ['84', '86', '88'] }
   182	  }
   183	}
   184	
   185	/**
   186	 * Service principal de la liasse fiscale
   187	 */
   188	export class LiasseDataService {
   189	  private balance: BalanceEntry[] = []
   190	  private mappingCache: Map<string, number> = new Map()
   191	
   192	  /**
   193	   * Charge la balance valid√©e
   194	   */
   195	  loadBalance(balance: BalanceEntry[]) {
   196	    this.balance = balance
   197	    this.buildMappingCache()
   198	  }
   199	
   200	  /**
   201	   * Construit un cache : compte ‚Üí solde sign√© (d√©bit positif, cr√©dit n√©gatif)
   202	   */
   203	  private buildMappingCache() {
   204	    this.mappingCache.clear()
   205	    this.balance.forEach(entry => {
   206	      const compte = entry.compte.replace(/\s/g, '')
   207	      this.mappingCache.set(compte, entry.solde_debit - entry.solde_credit)
   208	    })
   209	  }
   210	
   211	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ M√©thodes de calcul sign√©es ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   212	
   213	  /**
   214	   * Somme les soldes des comptes correspondants (conserve le signe).
   215	   * Pour un compte avec solde_debit > solde_credit ‚Üí valeur positive.
   216	   * Pour un compte avec solde_credit > solde_debit ‚Üí valeur n√©gative.
   217	   */
   218	  private sumSoldes(comptes: string[]): number {
   219	    let total = 0
   220	    comptes.forEach(prefix => {
   221	      this.mappingCache.forEach((value, key) => {
   222	        if (key === prefix || key.startsWith(prefix)) {
   223	          total += value
   224	        }
   225	      })
   226	    })
   227	    return total
   228	  }
   229	
   230	  /**
   231	   * Pour l'ACTIF: prend seulement les soldes d√©biteurs (positifs)
   232	   * Les immobilisations sont normalement d√©bitrices.
   233	   */
   234	  private calculateActifBrut(comptes: string[]): number {
   235	    let total = 0
   236	    comptes.forEach(prefix => {
   237	      this.mappingCache.forEach((value, key) => {
   238	        if (key === prefix || key.startsWith(prefix)) {
   239	          // Actif: on prend le solde d√©biteur (positif)
   240	          if (value > 0) total += value
   241	        }
   242	      })
   243	    })
   244	    return total
   245	  }
   246	
   247	  /**
   248	   * Pour les AMORT/PROVISIONS (28x, 29x, 39x, 49x, 59x):
   249	   * Solde normalement cr√©diteur ‚Üí valeur n√©gative dans le cache ‚Üí on prend |value|
   250	   */
   251	  private calculateAmortProv(amortComptes: string[]): number {
   252	    let total = 0
   253	    amortComptes.forEach(prefix => {
   254	      this.mappingCache.forEach((value, key) => {
   255	        if (key === prefix || key.startsWith(prefix)) {
   256	          // Amort: solde normalement cr√©diteur, donc valeur < 0 dans le cache
   257	          total += Math.abs(value)
   258	        }
   259	      })
   260	    })
   261	    return total
   262	  }
   263	
   264	  /**
   265	   * Pour le PASSIF: prend la valeur absolue des soldes cr√©diteurs (n√©gatifs dans le cache)
   266	   */
   267	  private calculatePassif(comptes: string[]): number {
   268	    let total = 0
   269	    comptes.forEach(prefix => {
   270	      this.mappingCache.forEach((value, key) => {
   271	        if (key === prefix || key.startsWith(prefix)) {
   272	          // Passif: solde normalement cr√©diteur ‚Üí valeur < 0, on prend |value|
   273	          if (value < 0) total += Math.abs(value)
   274	        }
   275	      })
   276	    })
   277	    return total
   278	  }
   279	
   280	  /**
   281	   * Pour les CHARGES: prend les soldes d√©biteurs
   282	   */
   283	  private calculateCharges(comptes: string[]): number {
   284	    let total = 0
   285	    comptes.forEach(prefix => {
   286	      this.mappingCache.forEach((value, key) => {
   287	        if (key === prefix || key.startsWith(prefix)) {
   288	          // Charges normalement d√©bitrices
   289	          if (value > 0) total += value
   290	        }
   291	      })
   292	    })
   293	    return total
   294	  }
   295	
   296	  /**
   297	   * Pour les PRODUITS: prend les soldes cr√©diteurs (valeur absolue)
   298	   */
   299	  private calculateProduits(comptes: string[]): number {
   300	    let total = 0
   301	    comptes.forEach(prefix => {
   302	      this.mappingCache.forEach((value, key) => {
   303	        if (key === prefix || key.startsWith(prefix)) {
   304	          // Produits normalement cr√©diteurs
   305	          if (value < 0) total += Math.abs(value)
   306	        }
   307	      })
   308	    })
   309	    return total
   310	  }
   311	
   312	  /**
   313	   * Pour les VARIATIONS DE STOCKS (peuvent √™tre + ou -):
   314	   * Renvoie le solde sign√© (positif = d√©stockage = charge, n√©gatif = stockage)
   315	   */
   316	  private calculateVariation(comptes: string[]): number {
   317	    return this.sumSoldes(comptes)
   318	  }
   319	
   320	  /**
   321	   * Pour les comptes r√©ciproques (42x, 48x, 52x) c√¥t√© ACTIF:
   322	   * Ne prend que les soldes d√©biteurs individuels
   323	   */
   324	  private calculateActifReciprocal(comptes: string[]): number {
   325	    let total = 0
   326	    comptes.forEach(prefix => {
   327	      this.mappingCache.forEach((value, key) => {
   328	        if (key === prefix || key.startsWith(prefix)) {
   329	          if (value > 0) total += value
   330	        }
   331	      })
   332	    })
   333	    return total
   334	  }
   335	
   336	  /**
   337	   * Pour les comptes r√©ciproques c√¥t√© PASSIF:
   338	   * Ne prend que les soldes cr√©diteurs individuels
   339	   */
   340	  private calculatePassifReciprocal(comptes: string[]): number {
   341	    let total = 0
   342	    comptes.forEach(prefix => {
   343	      this.mappingCache.forEach((value, key) => {
   344	        if (key === prefix || key.startsWith(prefix)) {
   345	          if (value < 0) total += Math.abs(value)
   346	        }
   347	      })
   348	    })
   349	    return total
   350	  }
   351	
   352	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ G√©n√©ration Bilan Actif ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   353	
   354	  generateBilanActif(typeLiasse: TypeLiasse = 'SN'): any {
   355	    if (typeLiasse === 'SMT') return this.generateBilanActifSMT()
   356	
   357	    const rows: any[] = []
   358	
   359	    Object.entries(SYSCOHADA_MAPPING.actif).forEach(([ref, mapping]) => {
   360	      const brut = this.calculateActifBrut(mapping.comptes)
   361	      const amortProv = this.calculateAmortProv(mapping.amortComptes || [])
   362	      const net = brut - amortProv
   363	
   364	      rows.push({ ref, brut, amortProv, net, net_n1: 0 })
   365	    })
   366	
   367	    return rows
   368	  }
   369	
   370	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ G√©n√©ration Bilan Passif ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   371	
   372	  generateBilanPassif(typeLiasse: TypeLiasse = 'SN'): any {
   373	    if (typeLiasse === 'SMT') return this.generateBilanPassifSMT()
   374	
   375	    const rows: any[] = []
   376	
   377	    // Comptes r√©ciproques pour le passif (42x c√¥t√© cr√©diteur, 48x c√¥t√© cr√©diteur, 52x c√¥t√© cr√©diteur)
   378	    const reciprocalRefs = ['DH', 'DL', 'DQ', 'DR']
   379	
   380	    Object.entries(SYSCOHADA_MAPPING.passif).forEach(([ref, mapping]) => {
   381	      const montant = reciprocalRefs.includes(ref)
   382	        ? this.calculatePassifReciprocal(mapping.comptes)
   383	        : this.calculatePassif(mapping.comptes)
   384	
   385	      rows.push({ ref, montant, montant_n1: 0 })
   386	    })
   387	
   388	    return rows
   389	  }
   390	
   391	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ G√©n√©ration Compte de R√©sultat ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   392	
   393	  generateCompteResultat(typeLiasse: TypeLiasse = 'SN'): any {
   394	    if (typeLiasse === 'SMT') return this.generateCompteResultatSMT()
   395	
   396	    const charges: any[] = []
   397	    const produits: any[] = []
   398	
   399	    // Refs de variation de stocks (signe conserv√©)
   400	    const variationRefs = ['RB', 'RD', 'RF']
   401	
   402	    Object.entries(SYSCOHADA_MAPPING.charges).forEach(([ref, mapping]) => {
   403	      const montant = variationRefs.includes(ref)
   404	        ? this.calculateVariation(mapping.comptes)
   405	        : this.calculateCharges(mapping.comptes)
   406	      charges.push({ ref, montant, montant_n1: 0 })
   407	    })
   408	
   409	    // TD (Production stock√©e, compte 73) est une variation classe 7 : signe invers√©
   410	    const produitVariationRefs = ['TD']
   411	
   412	    Object.entries(SYSCOHADA_MAPPING.produits).forEach(([ref, mapping]) => {
   413	      const montant = produitVariationRefs.includes(ref)
   414	        ? -this.sumSoldes(mapping.comptes)  // Classe 7 variation: cr√©dit=positif, d√©bit=n√©gatif
   415	        : this.calculateProduits(mapping.comptes)
   416	      produits.push({ ref, montant, montant_n1: 0 })
   417	    })
   418	
   419	    return { charges, produits }
   420	  }
   421	
   422	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SMT Generation Methods ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   423	
   424	  private generateBilanActifSMT(): any {
   425	    const rows: any[] = []
   426	    Object.entries(SMT_MAPPING.actif).forEach(([ref, mapping]) => {
   427	      const brut = this.calculateActifBrut(mapping.comptes)
   428	      const amortProv = this.calculateAmortProv(mapping.amortComptes || [])
   429	      const net = brut - amortProv
   430	      rows.push({
   431	        ref,
   432	        libelle: SMT_LIBELLES.actif[ref as keyof typeof SMT_LIBELLES.actif],
   433	        brut, amortProv, net, net_n1: 0,
   434	      })
   435	    })
   436	    return rows
   437	  }
   438	
   439	  private generateBilanPassifSMT(): any {
   440	    const rows: any[] = []
   441	    Object.entries(SMT_MAPPING.passif).forEach(([ref, mapping]) => {
   442	      const montant = this.calculatePassif(mapping.comptes)
   443	      rows.push({
   444	        ref,
   445	        libelle: SMT_LIBELLES.passif[ref as keyof typeof SMT_LIBELLES.passif],
   446	        montant, montant_n1: 0,
   447	      })
   448	    })
   449	    return rows
   450	  }
   451	
   452	  private generateCompteResultatSMT(): any {
   453	    const charges: any[] = []
   454	    const produits: any[] = []
   455	
   456	    // CH_3 = variations de stocks (603): conserve le signe (d√©bit=d√©stockage, cr√©dit=stockage)
   457	    const chargeVariationRefs = ['CH_3']
   458	
   459	    Object.entries(SMT_MAPPING.charges).forEach(([ref, mapping]) => {
   460	      const montant = chargeVariationRefs.includes(ref)
   461	        ? this.calculateVariation(mapping.comptes)
   462	        : this.calculateCharges(mapping.comptes)
   463	      charges.push({
   464	        ref,
   465	        libelle: SMT_LIBELLES.charges[ref as keyof typeof SMT_LIBELLES.charges],
   466	        montant, montant_n1: 0,
   467	      })
   468	    })
   469	
   470	    // PR_3 = production stock√©e (73) + immobilis√©e (72)
   471	    // Compte 73 est une variation classe 7: cr√©dit=positif, d√©bit=n√©gatif ‚Üí -sumSoldes
   472	    // Compte 72 est un produit normal ‚Üí calculateProduits
   473	    Object.entries(SMT_MAPPING.produits).forEach(([ref, mapping]) => {
   474	      let montant: number
   475	      if (ref === 'PR_3') {
   476	        // S√©parer 72 (produit normal) et 73 (variation)
   477	        const prodImmo = this.calculateProduits(['72'])
   478	        const prodStockee = -this.sumSoldes(['73'])
   479	        montant = prodImmo + prodStockee
   480	      } else {
   481	        montant = this.calculateProduits(mapping.comptes)
   482	      }
   483	      produits.push({
   484	        ref,
   485	        libelle: SMT_LIBELLES.produits[ref as keyof typeof SMT_LIBELLES.produits],
   486	        montant, montant_n1: 0,
   487	      })
   488	    })
   489	
   490	    return { charges, produits }
   491	  }
   492	
   493	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Validation de coh√©rence ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   494	
   495	  validateCoherence(): { isValid: boolean; errors: string[] } {
   496	    const errors: string[] = []
   497	
   498	    const totalActif = this.calculateTotalActif()
   499	    const totalPassif = this.calculateTotalPassif()
   500	
   501	    if (Math.abs(totalActif - totalPassif) > 0.01) {
   502	      errors.push(`Le bilan n'est pas √©quilibr√©: Actif=${totalActif}, Passif=${totalPassif}`)
   503	    }
   504	
   505	    const resultatBilan = this.getResultatFromBilan()
   506	    const resultatCompte = this.getResultatFromCompteResultat()
   507	
   508	    if (Math.abs(resultatBilan - resultatCompte) > 0.01) {
   509	      errors.push(`Incoh√©rence du r√©sultat: Bilan=${resultatBilan}, Compte=${resultatCompte}`)
   510	    }
   511	
   512	    return { isValid: errors.length === 0, errors }
   513	  }
   514	
   515	  private calculateTotalActif(): number {
   516	    const actifData = this.generateBilanActif()
   517	    return actifData.reduce((sum: number, row: any) => sum + row.net, 0)
   518	  }
   519	
   520	  private calculateTotalPassif(): number {
   521	    const passifData = this.generateBilanPassif()
   522	    return passifData.reduce((sum: number, row: any) => sum + row.montant, 0)
   523	  }
   524	
   525	  private getResultatFromBilan(): number {
   526	    return this.calculatePassif(SYSCOHADA_MAPPING.passif.CH.comptes)
   527	  }
   528	
   529	  private getResultatFromCompteResultat(): number {
   530	    const { charges, produits } = this.generateCompteResultat()
   531	    const totalCharges = charges.reduce((sum: number, row: any) => sum + row.montant, 0)
   532	    const totalProduits = produits.reduce((sum: number, row: any) => sum + row.montant, 0)
   533	    return totalProduits - totalCharges
   534	  }
   535	
   536	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ G√©n√©ration SIG (Soldes Interm√©diaires de Gestion) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   537	
   538	  generateSIG(): any[] {
   539	    // ‚îÄ‚îÄ Marge Commerciale ‚îÄ‚îÄ
   540	    const T1 = this.calculateProduits(['701'])
   541	    const T2 = this.calculateCharges(['601'])
   542	    const T3 = this.calculateVariation(['6031'])
   543	    const SIG1 = T1 - T2 - T3
   544	
   545	    // ‚îÄ‚îÄ Production de l'Exercice ‚îÄ‚îÄ
   546	    const T4 = this.calculateProduits(['702', '703', '704', '705', '706', '707'])
   547	    const T5 = -this.sumSoldes(['73']) // Classe 7 variation: cr√©dit‚Üípositif
   548	    const T6 = this.calculateProduits(['72'])
   549	    const SIG2 = T4 + T5 + T6
   550	
   551	    // ‚îÄ‚îÄ Valeur Ajout√©e ‚îÄ‚îÄ
   552	    const T7 = this.calculateCharges(['602'])
   553	    const T8 = this.calculateVariation(['6032', '6033'])
   554	    const T9 = this.calculateCharges(['604', '605', '608', '61', '62', '63'])
   555	    const SIG3 = SIG1 + SIG2 - T7 - T8 - T9
   556	
   557	    // ‚îÄ‚îÄ EBE ‚îÄ‚îÄ
   558	    const T10 = this.calculateProduits(['71'])
   559	    const T11 = this.calculateCharges(['64'])
   560	    const T12 = this.calculateCharges(['66'])
   561	    const SIG4 = SIG3 + T10 - T11 - T12
   562	
   563	    // ‚îÄ‚îÄ R√©sultat d'Exploitation ‚îÄ‚îÄ
   564	    const T13 = this.calculateProduits(['791', '798', '799'])
   565	    const T14 = this.calculateProduits(['781', '782'])
   566	    const T15 = this.calculateProduits(['75'])
   567	    const T16 = this.calculateCharges(['681', '691'])
   568	    const T17 = this.calculateCharges(['65'])
   569	    const SIG5 = SIG4 + T13 + T14 + T15 - T16 - T17
   570	
   571	    // ‚îÄ‚îÄ R√©sultat Financier ‚îÄ‚îÄ
   572	    const T18 = this.calculateProduits(['77'])
   573	    const T19 = this.calculateProduits(['787', '797'])
   574	    const T20 = this.calculateCharges(['67'])
   575	    const T21 = this.calculateCharges(['687', '697'])
   576	    const SIG6 = T18 + T19 - T20 - T21
   577	
   578	    // ‚îÄ‚îÄ RAO ‚îÄ‚îÄ
   579	    const SIG7 = SIG5 + SIG6
   580	
   581	    // ‚îÄ‚îÄ R√©sultat HAO ‚îÄ‚îÄ
   582	    const T22 = this.calculateProduits(['82'])
   583	    const T23 = this.calculateProduits(['84', '86', '88'])
   584	    const T24 = this.calculateCharges(['81'])
   585	    const T25 = this.calculateCharges(['83', '85'])
   586	    const SIG8 = T22 + T23 - T24 - T25
   587	
   588	    // ‚îÄ‚îÄ R√©sultat Net ‚îÄ‚îÄ
   589	    const T26 = this.calculateCharges(['87'])
   590	    const T27 = this.calculateCharges(['89'])
   591	    const SIG9 = SIG7 + SIG8 - T26 - T27
   592	
   593	    return [
   594	      { ref: 'T1', label: 'Ventes de marchandises', type: 'line', montant: T1, montant_n1: 0 },
   595	      { ref: 'T2', label: 'Achats de marchandises', type: 'line', montant: T2, montant_n1: 0, negative: true },
   596	      { ref: 'T3', label: 'Variation stocks marchandises', type: 'line', montant: T3, montant_n1: 0, negative: true },
   597	      { ref: 'SIG1', label: 'MARGE COMMERCIALE', type: 'sig', montant: SIG1, montant_n1: 0 },
   598	
   599	      { ref: 'T4', label: 'Production vendue', type: 'line', montant: T4, montant_n1: 0 },
   600	      { ref: 'T5', label: 'Production stock√©e (ou d√©stockage)', type: 'line', montant: T5, montant_n1: 0 },
   601	      { ref: 'T6', label: 'Production immobilis√©e', type: 'line', montant: T6, montant_n1: 0 },
   602	      { ref: 'SIG2', label: 'PRODUCTION DE L\'EXERCICE', type: 'sig', montant: SIG2, montant_n1: 0 },
   603	
   604	      { ref: 'T7', label: 'Achats de mati√®res premi√®res', type: 'line', montant: T7, montant_n1: 0, negative: true },
   605	      { ref: 'T8', label: 'Variation stocks mati√®res premi√®res', type: 'line', montant: T8, montant_n1: 0, negative: true },
   606	      { ref: 'T9', label: 'Autres achats et charges externes', type: 'line', montant: T9, montant_n1: 0, negative: true },
   607	      { ref: 'SIG3', label: 'VALEUR AJOUT√âE', type: 'sig', montant: SIG3, montant_n1: 0 },
   608	
   609	      { ref: 'T10', label: 'Subventions d\'exploitation', type: 'line', montant: T10, montant_n1: 0 },
   610	      { ref: 'T11', label: 'Imp√¥ts et taxes', type: 'line', montant: T11, montant_n1: 0, negative: true },
   611	      { ref: 'T12', label: 'Charges de personnel', type: 'line', montant: T12, montant_n1: 0, negative: true },
   612	      { ref: 'SIG4', label: 'EXC√âDENT BRUT D\'EXPLOITATION (EBE)', type: 'sig', montant: SIG4, montant_n1: 0 },
   613	
   614	      { ref: 'T13', label: 'Reprises d\'amortissements et provisions', type: 'line', montant: T13, montant_n1: 0 },
   615	      { ref: 'T14', label: 'Transferts de charges d\'exploitation', type: 'line', montant: T14, montant_n1: 0 },
   616	      { ref: 'T15', label: 'Autres produits', type: 'line', montant: T15, montant_n1: 0 },
   617	      { ref: 'T16', label: 'Dotations aux amortissements et provisions', type: 'line', montant: T16, montant_n1: 0, negative: true },
   618	      { ref: 'T17', label: 'Autres charges', type: 'line', montant: T17, montant_n1: 0, negative: true },
   619	      { ref: 'SIG5', label: 'R√âSULTAT D\'EXPLOITATION', type: 'sig', montant: SIG5, montant_n1: 0 },
   620	
   621	      { ref: 'T18', label: 'Produits financiers', type: 'line', montant: T18, montant_n1: 0 },
   622	      { ref: 'T19', label: 'Reprises de provisions financi√®res', type: 'line', montant: T19, montant_n1: 0 },
   623	      { ref: 'T20', label: 'Charges financi√®res', type: 'line', montant: T20, montant_n1: 0, negative: true },
   624	      { ref: 'T21', label: 'Dotations aux provisions financi√®res', type: 'line', montant: T21, montant_n1: 0, negative: true },
   625	      { ref: 'SIG6', label: 'R√âSULTAT FINANCIER', type: 'sig', montant: SIG6, montant_n1: 0 },
   626	
   627	      { ref: 'SIG7', label: 'R√âSULTAT DES ACTIVIT√âS ORDINAIRES (RAO)', type: 'sig', montant: SIG7, montant_n1: 0 },
   628	
   629	      { ref: 'T22', label: 'Produits des cessions d\'immobilisations', type: 'line', montant: T22, montant_n1: 0 },
   630	      { ref: 'T23', label: 'Autres produits HAO', type: 'line', montant: T23, montant_n1: 0 },
   631	      { ref: 'T24', label: 'Valeurs comptables des cessions', type: 'line', montant: T24, montant_n1: 0, negative: true },
   632	      { ref: 'T25', label: 'Autres charges HAO', type: 'line', montant: T25, montant_n1: 0, negative: true },
   633	      { ref: 'SIG8', label: 'R√âSULTAT HAO', type: 'sig', montant: SIG8, montant_n1: 0 },
   634	
   635	      { ref: 'T26', label: 'Participation des travailleurs', type: 'line', montant: T26, montant_n1: 0, negative: true },
   636	      { ref: 'T27', label: 'Imp√¥ts sur le r√©sultat', type: 'line', montant: T27, montant_n1: 0, negative: true },
   637	      { ref: 'SIG9', label: 'R√âSULTAT NET', type: 'grandtotal', montant: SIG9, montant_n1: 0 },
   638	    ]
   639	  }
   640	
   641	  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ G√©n√©ration TFT (Tableau des Flux de Tr√©sorerie) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   642	
   643	  generateTFT(): any {
   644	    // FA = R√©sultat net depuis CdR
   645	    const FA = this.getResultatFromCompteResultat()
   646	
   647	    // FB = Dotations aux amortissements et provisions (charges non d√©caiss√©es)
   648	    const FB = this.calculateCharges(['681', '687', '691', '697'])
   649	
   650	    // FC = Reprises (produits non encaiss√©s)
   651	    const FC = this.calculateProduits(['791', '797', '798', '799', '787'])
   652	
   653	    // FD = Plus/moins-values de cession (produit non encaiss√© √† √©liminer)
   654	    const produitsCessions = this.calculateProduits(['82'])
   655	    const VNCCessions = this.calculateCharges(['81'])
   656	    const FD = produitsCessions - VNCCessions
   657	
   658	    // FE = CAFG (Capacit√© d'Autofinancement Globale)
   659	    const FE = FA + FB - FC - FD
   660	
   661	    // FF = Variation du BFR (n√©cessite N-1, mis √† 0 si absent)
   662	    const FF = 0
   663	
   664	    // FG = Flux de tr√©sorerie op√©rationnels
   665	    const FG = FE + FF
   666	
   667	    // Investissement (n√©cessite N-1 pour FH et FJ)
   668	    const FH = 0  // Acquisitions immo (delta N vs N-1)
   669	    const FI = produitsCessions  // Cessions = encaissements
   670	    const FJ = 0  // Variation immo financi√®res (delta N vs N-1)
   671	    const FK = -FH + FI - FJ
   672	
   673	    // Financement (n√©cessite N-1)
   674	    const FL = 0  // Augmentation capital
   675	    const FM = 0  // Emprunts nouveaux
   676	    const FN = 0  // Remboursement emprunts
   677	    const FO = 0  // Dividendes vers√©s
   678	    const FP = FL + FM - FN - FO
   679	
   680	    // Synth√®se
   681	    const FQ = FG + FK + FP
   682	
   683	    // Tr√©sorerie fin d'exercice (calculable depuis la balance courante)
   684	    const tresoActif = this.calculateActifBrut(['50', '51', '52', '53', '54', '55', '56', '57', '58'])
   685	    const tresoPassif = this.calculatePassifReciprocal(['52', '561', '564', '565'])
   686	    const FS = tresoActif - tresoPassif
   687	    const FR = 0  // Tr√©sorerie d√©but (n√©cessite N-1)
   688	    const FT = FS - FR - FQ  // Contr√¥le : devrait √™tre 0
   689	
   690	    return {
   691	      FA, FB, FC, FD, FE, FF, FG,
   692	      FH, FI, FJ, FK,
   693	      FL, FM, FN, FO, FP,
   694	      FQ, FR, FS, FT,
   695	      tresoActif, tresoPassif,
   696	      hasN1: false
   697	    }
   698	  }
   699	}
   700	
   701	// Instance singleton du service
   702	export const liasseDataService = new LiasseDataService()

================================================================================
FILE: src/services/liasseEBNLMapping.ts
================================================================================
     1	/**
     2	 * Mapping EBNL/ASBL - SYCEBNL (Systeme Comptable des EBNL, effectif 2024)
     3	 * Entites a But Non Lucratif / Associations Sans But Lucratif
     4	 * Base SYSCOHADA avec adaptations specifiques :
     5	 * - Fonds associatifs (au lieu de Capital)
     6	 * - Subventions recues, Contributions, Cotisations
     7	 * - Classes 1-8 identiques SYSCOHADA avec terminologie adaptee
     8	 * Deux sous-systemes : SN-EBNL et SMT-EBNL
     9	 */
    10	
    11	import type { MappingEntry } from './liasseSMTMapping'
    12	
    13	export const EBNL_MAPPING = {
    14	  // BILAN ACTIF EBNL (meme structure que SYSCOHADA avec adaptations)
    15	  actif: {
    16	    // Immobilisations incorporelles
    17	    EA_1: { comptes: ['21'], amortComptes: ['281', '291'] } as MappingEntry, // Logiciels, brevets
    18	    EA_2: { comptes: ['22'], amortComptes: ['282', '292'] } as MappingEntry, // Terrains
    19	    EA_3: { comptes: ['23'], amortComptes: ['283', '293'] } as MappingEntry, // Batiments
    20	    EA_4: { comptes: ['24'], amortComptes: ['284', '294'] } as MappingEntry, // Materiel et equipements
    21	    EA_5: { comptes: ['25'], amortComptes: [] } as MappingEntry, // Avances et acomptes
    22	    EA_6: { comptes: ['26', '27'], amortComptes: ['296', '297'] } as MappingEntry, // Immobilisations financieres
    23	
    24	    // Actif circulant
    25	    EA_7: { comptes: ['31', '32', '33', '34', '35', '36', '37', '38'], amortComptes: ['39'] } as MappingEntry, // Stocks
    26	    EA_8: { comptes: ['41'], amortComptes: ['491'] } as MappingEntry, // Creances (donateurs, bailleurs, adherents)
    27	    EA_9: { comptes: ['42', '43', '44', '45', '46', '47', '48'], amortComptes: ['492', '493', '494', '495', '496', '497'] } as MappingEntry, // Autres creances
    28	
    29	    // Tresorerie
    30	    EA_10: { comptes: ['50', '51', '52', '53', '54', '55', '56', '57', '58'], amortComptes: ['590', '591', '592', '593', '594'] } as MappingEntry, // Tresorerie actif
    31	  },
    32	
    33	  // BILAN PASSIF EBNL
    34	  passif: {
    35	    // Fonds associatifs (equivalent capitaux propres)
    36	    EP_1: { comptes: ['101', '102', '103'] } as MappingEntry, // Fonds associatifs sans droit de reprise
    37	    EP_2: { comptes: ['104', '105'] } as MappingEntry, // Fonds associatifs avec droit de reprise
    38	    EP_3: { comptes: ['106'] } as MappingEntry, // Ecarts de reevaluation
    39	    EP_4: { comptes: ['11'] } as MappingEntry, // Reserves (reserves statutaires, autres)
    40	    EP_5: { comptes: ['12'] } as MappingEntry, // Report a nouveau
    41	    EP_6: { comptes: ['13'] } as MappingEntry, // Resultat de l'exercice (excedent/deficit)
    42	    EP_7: { comptes: ['14'] } as MappingEntry, // Subventions d'investissement
    43	    EP_8: { comptes: ['15'] } as MappingEntry, // Provisions reglementees et fonds dedies
    44	
    45	    // Dettes
    46	    EP_9: { comptes: ['16', '17'] } as MappingEntry, // Emprunts et dettes financieres
    47	    EP_10: { comptes: ['40'] } as MappingEntry, // Fournisseurs
    48	    EP_11: { comptes: ['42', '43', '44'] } as MappingEntry, // Dettes fiscales et sociales
    49	    EP_12: { comptes: ['45', '46', '47', '48'] } as MappingEntry, // Autres dettes
    50	    EP_13: { comptes: ['52'] } as MappingEntry, // Tresorerie passif
    51	  },
    52	
    53	  // COMPTE DE RESULTAT EBNL - CHARGES
    54	  charges: {
    55	    EC_1: { comptes: ['60'] } as MappingEntry, // Achats de biens et services
    56	    EC_2: { comptes: ['61'] } as MappingEntry, // Transports
    57	    EC_3: { comptes: ['62', '63'] } as MappingEntry, // Services exterieurs
    58	    EC_4: { comptes: ['64'] } as MappingEntry, // Impots et taxes
    59	    EC_5: { comptes: ['65'] } as MappingEntry, // Autres charges de gestion
    60	    EC_6: { comptes: ['66'] } as MappingEntry, // Charges de personnel (salaries, benevoles indemnises)
    61	    EC_7: { comptes: ['67'] } as MappingEntry, // Charges financieres
    62	    EC_8: { comptes: ['68', '69'] } as MappingEntry, // Dotations amortissements et provisions
    63	    EC_9: { comptes: ['81', '83', '85'] } as MappingEntry, // Charges HAO
    64	    EC_10: { comptes: ['89'] } as MappingEntry, // Impot sur resultat (si applicable)
    65	  },
    66	
    67	  // COMPTE DE RESULTAT EBNL - PRODUITS (specifique EBNL)
    68	  produits: {
    69	    EP_PR_1: { comptes: ['701', '702', '703'] } as MappingEntry, // Cotisations des membres
    70	    EP_PR_2: { comptes: ['704', '705', '706'] } as MappingEntry, // Dons et liberalites
    71	    EP_PR_3: { comptes: ['71'] } as MappingEntry, // Subventions d'exploitation
    72	    EP_PR_4: { comptes: ['72', '73'] } as MappingEntry, // Production de l'entite (services rendus)
    73	    EP_PR_5: { comptes: ['75'] } as MappingEntry, // Autres produits de gestion
    74	    EP_PR_6: { comptes: ['76', '77'] } as MappingEntry, // Produits financiers
    75	    EP_PR_7: { comptes: ['78'] } as MappingEntry, // Transferts de charges
    76	    EP_PR_8: { comptes: ['791', '797', '798'] } as MappingEntry, // Reprises de provisions
    77	    EP_PR_9: { comptes: ['82', '84', '86', '88'] } as MappingEntry, // Produits HAO
    78	  },
    79	}
    80	
    81	export const EBNL_LIBELLES = {
    82	  actif: {
    83	    EA_1: 'Immobilisations incorporelles',
    84	    EA_2: 'Terrains',
    85	    EA_3: 'Batiments et constructions',
    86	    EA_4: 'Materiel et equipements',
    87	    EA_5: 'Avances et acomptes',
    88	    EA_6: 'Immobilisations financieres',
    89	    EA_7: 'Stocks',
    90	    EA_8: 'Creances (donateurs, bailleurs, adherents)',
    91	    EA_9: 'Autres creances',
    92	    EA_10: 'Tresorerie actif',
    93	  },
    94	  passif: {
    95	    EP_1: 'Fonds associatifs sans droit de reprise',
    96	    EP_2: 'Fonds associatifs avec droit de reprise',
    97	    EP_3: 'Ecarts de reevaluation',
    98	    EP_4: 'Reserves',
    99	    EP_5: 'Report a nouveau',
   100	    EP_6: 'Resultat de l\'exercice (excedent/deficit)',
   101	    EP_7: 'Subventions d\'investissement',
   102	    EP_8: 'Provisions reglementees et fonds dedies',
   103	    EP_9: 'Emprunts et dettes financieres',
   104	    EP_10: 'Fournisseurs',
   105	    EP_11: 'Dettes fiscales et sociales',
   106	    EP_12: 'Autres dettes',
   107	    EP_13: 'Tresorerie passif',
   108	  },
   109	  charges: {
   110	    EC_1: 'Achats de biens et services',
   111	    EC_2: 'Transports',
   112	    EC_3: 'Services exterieurs',
   113	    EC_4: 'Impots et taxes',
   114	    EC_5: 'Autres charges de gestion',
   115	    EC_6: 'Charges de personnel',
   116	    EC_7: 'Charges financieres',
   117	    EC_8: 'Dotations amortissements et provisions',
   118	    EC_9: 'Charges HAO',
   119	    EC_10: 'Impot sur resultat',
   120	  },
   121	  produits: {
   122	    EP_PR_1: 'Cotisations des membres',
   123	    EP_PR_2: 'Dons et liberalites',
   124	    EP_PR_3: 'Subventions d\'exploitation',
   125	    EP_PR_4: 'Production (services rendus)',
   126	    EP_PR_5: 'Autres produits de gestion',
   127	    EP_PR_6: 'Produits financiers',
   128	    EP_PR_7: 'Transferts de charges',
   129	    EP_PR_8: 'Reprises de provisions',
   130	    EP_PR_9: 'Produits HAO',
   131	  },
   132	}

================================================================================
FILE: src/services/liasseMicrofinanceMapping.ts
================================================================================
     1	/**
     2	 * Mapping MICROFINANCE - Plan SFD (Systemes Financiers Decentralises)
     3	 * Referentiel BCEAO/COBAC pour les institutions de microfinance
     4	 * Classe 1: Operations de tresorerie
     5	 * Classe 2: Operations avec les membres/clients
     6	 * Classe 3: Autres operations
     7	 * Classe 4: Immobilisations
     8	 * Classe 5: Provisions, fonds propres
     9	 * Classe 6/7: Charges/Produits
    10	 */
    11	
    12	import type { MappingEntry } from './liasseSMTMapping'
    13	
    14	export const MICROFINANCE_MAPPING = {
    15	  // BILAN ACTIF SFD
    16	  actif: {
    17	    // Classe 1 - Operations de tresorerie
    18	    MA_1: { comptes: ['10', '11'], amortComptes: [] } as MappingEntry, // Caisse
    19	    MA_2: { comptes: ['12', '13'], amortComptes: [] } as MappingEntry, // Banques et correspondants
    20	    MA_3: { comptes: ['14', '15'], amortComptes: [] } as MappingEntry, // Placements de tresorerie
    21	    MA_4: { comptes: ['16', '17', '18', '19'], amortComptes: [] } as MappingEntry, // Prets interbancaires
    22	
    23	    // Classe 2 - Operations avec membres/clients
    24	    MA_5: { comptes: ['20', '21', '22'], amortComptes: ['29'] } as MappingEntry, // Credits aux membres/clients
    25	    MA_6: { comptes: ['23', '24'], amortComptes: [] } as MappingEntry, // Credits a court terme
    26	    MA_7: { comptes: ['25', '26'], amortComptes: [] } as MappingEntry, // Credits a moyen et long terme
    27	    MA_8: { comptes: ['27', '28'], amortComptes: [] } as MappingEntry, // Creances en souffrance
    28	
    29	    // Classe 3 - Autres operations
    30	    MA_9: { comptes: ['30', '31', '32'], amortComptes: [] } as MappingEntry, // Titres de placement
    31	    MA_10: { comptes: ['33', '34', '35'], amortComptes: [] } as MappingEntry, // Debiteurs divers
    32	    MA_11: { comptes: ['36', '37'], amortComptes: [] } as MappingEntry, // Comptes de regularisation
    33	
    34	    // Classe 4 - Immobilisations
    35	    MA_12: { comptes: ['40', '41'], amortComptes: ['48'] } as MappingEntry, // Immobilisations incorporelles
    36	    MA_13: { comptes: ['42', '43', '44'], amortComptes: ['48'] } as MappingEntry, // Immobilisations corporelles
    37	    MA_14: { comptes: ['45', '46'], amortComptes: [] } as MappingEntry, // Immobilisations financieres
    38	    MA_15: { comptes: ['47'], amortComptes: [] } as MappingEntry, // Immobilisations en cours
    39	  },
    40	
    41	  // BILAN PASSIF SFD
    42	  passif: {
    43	    // Classe 1 - Tresorerie passif
    44	    MP_1: { comptes: ['10', '11'] } as MappingEntry, // Emprunts bancaires
    45	    MP_2: { comptes: ['12', '13'] } as MappingEntry, // Refinancements
    46	
    47	    // Classe 2 - Depots des membres/clients
    48	    MP_3: { comptes: ['20', '21'] } as MappingEntry, // Depots a vue
    49	    MP_4: { comptes: ['22', '23'] } as MappingEntry, // Depots a terme
    50	    MP_5: { comptes: ['24', '25'] } as MappingEntry, // Epargne obligatoire
    51	    MP_6: { comptes: ['26', '27'] } as MappingEntry, // Autres depots
    52	
    53	    // Classe 3 - Autres operations
    54	    MP_7: { comptes: ['30', '31'] } as MappingEntry, // Crediteurs divers
    55	    MP_8: { comptes: ['36', '37'] } as MappingEntry, // Comptes de regularisation
    56	
    57	    // Classe 5 - Capitaux permanents
    58	    MP_9: { comptes: ['50', '51'] } as MappingEntry, // Capital / Dotations / Parts sociales
    59	    MP_10: { comptes: ['52', '53'] } as MappingEntry, // Reserves
    60	    MP_11: { comptes: ['54'] } as MappingEntry, // Report a nouveau
    61	    MP_12: { comptes: ['55'] } as MappingEntry, // Resultat de l'exercice
    62	    MP_13: { comptes: ['56', '57'] } as MappingEntry, // Provisions pour risques et charges
    63	    MP_14: { comptes: ['58', '59'] } as MappingEntry, // Subventions et fonds affectes
    64	  },
    65	
    66	  // COMPTE DE RESULTAT SFD - CHARGES
    67	  charges: {
    68	    MC_1: { comptes: ['60'] } as MappingEntry, // Charges sur operations de tresorerie
    69	    MC_2: { comptes: ['61'] } as MappingEntry, // Charges sur operations avec membres/clients
    70	    MC_3: { comptes: ['62'] } as MappingEntry, // Charges sur ressources empruntees
    71	    MC_4: { comptes: ['63'] } as MappingEntry, // Charges sur operations de change
    72	    MC_5: { comptes: ['64'] } as MappingEntry, // Services exterieurs
    73	    MC_6: { comptes: ['65'] } as MappingEntry, // Impots et taxes
    74	    MC_7: { comptes: ['66'] } as MappingEntry, // Charges de personnel
    75	    MC_8: { comptes: ['67'] } as MappingEntry, // Autres charges d'exploitation
    76	    MC_9: { comptes: ['68'] } as MappingEntry, // Dotations amortissements et provisions
    77	    MC_10: { comptes: ['69'] } as MappingEntry, // Charges exceptionnelles et impot
    78	  },
    79	
    80	  // COMPTE DE RESULTAT SFD - PRODUITS
    81	  produits: {
    82	    MPR_1: { comptes: ['70'] } as MappingEntry, // Produits sur operations de tresorerie
    83	    MPR_2: { comptes: ['71'] } as MappingEntry, // Interets sur credits aux membres/clients
    84	    MPR_3: { comptes: ['72'] } as MappingEntry, // Produits sur operations de change
    85	    MPR_4: { comptes: ['73'] } as MappingEntry, // Commissions
    86	    MPR_5: { comptes: ['74'] } as MappingEntry, // Cotisations
    87	    MPR_6: { comptes: ['75'] } as MappingEntry, // Subventions d'exploitation
    88	    MPR_7: { comptes: ['76'] } as MappingEntry, // Autres produits d'exploitation
    89	    MPR_8: { comptes: ['78'] } as MappingEntry, // Reprises de provisions
    90	    MPR_9: { comptes: ['79'] } as MappingEntry, // Produits exceptionnels
    91	  },
    92	
    93	  // HORS-BILAN SFD
    94	  horsBilan: {
    95	    MHB_1: { comptes: ['90'] } as MappingEntry, // Engagements de financement donnes
    96	    MHB_2: { comptes: ['91'] } as MappingEntry, // Engagements de financement recus
    97	    MHB_3: { comptes: ['92'] } as MappingEntry, // Garanties recues des membres
    98	    MHB_4: { comptes: ['93'] } as MappingEntry, // Garanties donnees
    99	    MHB_5: { comptes: ['94', '95'] } as MappingEntry, // Engagements sur operations de change
   100	  },
   101	}
   102	
   103	export const MICROFINANCE_LIBELLES = {
   104	  actif: {
   105	    MA_1: 'Caisse',
   106	    MA_2: 'Banques et correspondants',
   107	    MA_3: 'Placements de tresorerie',
   108	    MA_4: 'Prets interbancaires',
   109	    MA_5: 'Credits aux membres/clients',
   110	    MA_6: 'Credits a court terme',
   111	    MA_7: 'Credits a moyen et long terme',
   112	    MA_8: 'Creances en souffrance',
   113	    MA_9: 'Titres de placement',
   114	    MA_10: 'Debiteurs divers',
   115	    MA_11: 'Comptes de regularisation',
   116	    MA_12: 'Immobilisations incorporelles',
   117	    MA_13: 'Immobilisations corporelles',
   118	    MA_14: 'Immobilisations financieres',
   119	    MA_15: 'Immobilisations en cours',
   120	  },
   121	  passif: {
   122	    MP_1: 'Emprunts bancaires',
   123	    MP_2: 'Refinancements',
   124	    MP_3: 'Depots a vue',
   125	    MP_4: 'Depots a terme',
   126	    MP_5: 'Epargne obligatoire',
   127	    MP_6: 'Autres depots',
   128	    MP_7: 'Crediteurs divers',
   129	    MP_8: 'Comptes de regularisation',
   130	    MP_9: 'Capital / Dotations / Parts sociales',
   131	    MP_10: 'Reserves',
   132	    MP_11: 'Report a nouveau',
   133	    MP_12: 'Resultat de l\'exercice',
   134	    MP_13: 'Provisions pour risques et charges',
   135	    MP_14: 'Subventions et fonds affectes',
   136	  },
   137	  charges: {
   138	    MC_1: 'Charges sur operations de tresorerie',
   139	    MC_2: 'Charges sur operations avec membres',
   140	    MC_3: 'Charges sur ressources empruntees',
   141	    MC_4: 'Charges sur operations de change',
   142	    MC_5: 'Services exterieurs',
   143	    MC_6: 'Impots et taxes',
   144	    MC_7: 'Charges de personnel',
   145	    MC_8: 'Autres charges d\'exploitation',
   146	    MC_9: 'Dotations amortissements et provisions',
   147	    MC_10: 'Charges exceptionnelles et impot',
   148	  },
   149	  produits: {
   150	    MPR_1: 'Produits sur operations de tresorerie',
   151	    MPR_2: 'Interets sur credits aux membres',
   152	    MPR_3: 'Produits sur operations de change',
   153	    MPR_4: 'Commissions',
   154	    MPR_5: 'Cotisations',
   155	    MPR_6: 'Subventions d\'exploitation',
   156	    MPR_7: 'Autres produits d\'exploitation',
   157	    MPR_8: 'Reprises de provisions',
   158	    MPR_9: 'Produits exceptionnels',
   159	  },
   160	}

================================================================================
FILE: src/services/liasseService.ts
================================================================================
     1	/**
     2	 * Service d'int√©gration Backend pour la Liasse Fiscale
     3	 *
     4	 * Connecte le service liasseDataService.ts aux API Django
     5	 * Endpoints: /api/generation/liasses/
     6	 */
     7	
     8	import apiClient from './apiClient'
     9	import { liasseDataService, BalanceEntry } from './liasseDataService'
    10	
    11	// ============================================================================
    12	// TYPES & INTERFACES
    13	// ============================================================================
    14	
    15	export interface LiasseFiscaleDTO {
    16	  id?: number
    17	  entreprise: number
    18	  exercice: number
    19	  type_liasse: 'NORMAL' | 'SIMPLIFIE' | 'CONSOLIDE'
    20	  date_cloture: string
    21	  statut: 'BROUILLON' | 'EN_COURS' | 'TERMINE' | 'VALIDE' | 'TRANSMIS'
    22	  progression: number
    23	  donnees_json?: any
    24	  created_at?: string
    25	  updated_at?: string
    26	}
    27	
    28	export interface EtatFinancierDTO {
    29	  id?: number
    30	  liasse: number
    31	  type_etat: 'BILAN_ACTIF' | 'BILAN_PASSIF' | 'COMPTE_RESULTAT' | 'FLUX_TRESORERIE' | 'NOTE_ANNEXE'
    32	  numero_etat?: string
    33	  libelle: string
    34	  donnees_json: any
    35	  calculs_automatiques?: any
    36	  validations?: any
    37	  created_at?: string
    38	  updated_at?: string
    39	}
    40	
    41	export interface ProcessusGenerationDTO {
    42	  id?: number
    43	  liasse: number
    44	  statut: 'INITIALISE' | 'EN_COURS' | 'TERMINE' | 'ERREUR'
    45	  etape_courante?: string
    46	  progression: number
    47	  temps_estime?: number
    48	  temps_reel?: number
    49	  erreurs?: string[]
    50	  logs_json?: any
    51	  date_debut?: string
    52	  date_fin?: string
    53	}
    54	
    55	export interface ValidationLiasseResponse {
    56	  score_validation: number
    57	  nb_erreurs_critiques: number
    58	  nb_avertissements: number
    59	  nb_controles_reussis: number
    60	  prete_validation: boolean
    61	  prete_teledeclaration: boolean
    62	  erreurs: Array<{
    63	    code: string
    64	    message: string
    65	    severite: 'CRITIQUE' | 'HAUTE' | 'MOYENNE' | 'BASSE'
    66	    suggestion?: string
    67	  }>
    68	  avertissements: Array<{
    69	    code: string
    70	    message: string
    71	    suggestion?: string
    72	  }>
    73	}
    74	
    75	// ============================================================================
    76	// SERVICE LIASSE FISCALE
    77	// ============================================================================
    78	
    79	class LiasseService {
    80	  private readonly baseUrl = '/api/generation/liasses'
    81	
    82	  /**
    83	   * Cr√©e une nouvelle liasse fiscale
    84	   */
    85	  async createLiasse(data: Partial<LiasseFiscaleDTO>): Promise<LiasseFiscaleDTO> {
    86	    const response = await apiClient.post<LiasseFiscaleDTO>(this.baseUrl + '/', data)
    87	    return response.data
    88	  }
    89	
    90	  /**
    91	   * R√©cup√®re une liasse par ID
    92	   */
    93	  async getLiasse(id: number): Promise<LiasseFiscaleDTO> {
    94	    const response = await apiClient.get<LiasseFiscaleDTO>(`${this.baseUrl}/${id}/`)
    95	    return response.data
    96	  }
    97	
    98	  /**
    99	   * Liste toutes les liasses
   100	   */
   101	  async listLiasses(params?: {
   102	    entreprise?: number
   103	    exercice?: number
   104	    statut?: string
   105	  }): Promise<LiasseFiscaleDTO[]> {
   106	    const response = await apiClient.get<LiasseFiscaleDTO[]>(this.baseUrl + '/', { params })
   107	    return response.data
   108	  }
   109	
   110	  /**
   111	   * Met √† jour une liasse
   112	   */
   113	  async updateLiasse(id: number, data: Partial<LiasseFiscaleDTO>): Promise<LiasseFiscaleDTO> {
   114	    const response = await apiClient.patch<LiasseFiscaleDTO>(`${this.baseUrl}/${id}/`, data)
   115	    return response.data
   116	  }
   117	
   118	  /**
   119	   * Supprime une liasse
   120	   */
   121	  async deleteLiasse(id: number): Promise<void> {
   122	    await apiClient.delete(`${this.baseUrl}/${id}/`)
   123	  }
   124	
   125	  // ==========================================================================
   126	  // ACTIONS M√âTIER
   127	  // ==========================================================================
   128	
   129	  /**
   130	   * Lance la production automatis√©e d'une liasse
   131	   */
   132	  async lancerProduction(
   133	    liasseId: number,
   134	    balanceData: BalanceEntry[]
   135	  ): Promise<ProcessusGenerationDTO> {
   136	    // Charger la balance dans le service de mapping
   137	    liasseDataService.loadBalance(balanceData)
   138	
   139	    // G√©n√©rer les √©tats financiers via mapping SYSCOHADA
   140	    const bilanActif = liasseDataService.generateBilanActif()
   141	    const bilanPassif = liasseDataService.generateBilanPassif()
   142	    const compteResultat = liasseDataService.generateCompteResultat()
   143	
   144	    // Valider la coh√©rence
   145	    const validation = liasseDataService.validateCoherence()
   146	
   147	    // Lancer le processus c√¥t√© backend
   148	    const response = await apiClient.post<ProcessusGenerationDTO>(
   149	      `${this.baseUrl}/${liasseId}/lancer_production/`,
   150	      {
   151	        balance: balanceData,
   152	        bilan_actif: bilanActif,
   153	        bilan_passif: bilanPassif,
   154	        compte_resultat: compteResultat,
   155	        validation_coherence: validation
   156	      }
   157	    )
   158	
   159	    return response.data
   160	  }
   161	
   162	  /**
   163	   * R√©cup√®re le statut de production
   164	   */
   165	  async getStatutProduction(liasseId: number): Promise<ProcessusGenerationDTO> {
   166	    const response = await apiClient.get<ProcessusGenerationDTO>(
   167	      `${this.baseUrl}/${liasseId}/statut_production/`
   168	    )
   169	    return response.data
   170	  }
   171	
   172	  /**
   173	   * Valide une liasse avant soumission
   174	   */
   175	  async validerLiasse(liasseId: number): Promise<ValidationLiasseResponse> {
   176	    const response = await apiClient.post<ValidationLiasseResponse>(
   177	      `${this.baseUrl}/${liasseId}/valider/`
   178	    )
   179	    return response.data
   180	  }
   181	
   182	  /**
   183	   * G√©n√®re les pr√©-commentaires automatiques
   184	   */
   185	  async genererPreCommentaires(liasseId: number): Promise<any[]> {
   186	    const response = await apiClient.post<any[]>(
   187	      `${this.baseUrl}/${liasseId}/generer_pre_commentaires/`
   188	    )
   189	    return response.data
   190	  }
   191	
   192	  /**
   193	   * Exporte une liasse au format sp√©cifi√©
   194	   */
   195	  async exporterLiasse(
   196	    liasseId: number,
   197	    format: 'PDF' | 'EXCEL' | 'XML' | 'JSON'
   198	  ): Promise<Blob> {
   199	    const response = await apiClient.post(
   200	      `${this.baseUrl}/${liasseId}/exporter/`,
   201	      { format },
   202	      { responseType: 'blob' }
   203	    )
   204	    return response.data
   205	  }
   206	
   207	  /**
   208	   * T√©l√©d√©clare une liasse valid√©e
   209	   */
   210	  async teledeclarerLiasse(liasseId: number, data: {
   211	    organisme: string
   212	    login: string
   213	    password: string
   214	  }): Promise<{ success: boolean; message: string; numero_depot?: string }> {
   215	    const response = await apiClient.post(
   216	      `${this.baseUrl}/${liasseId}/teledeclarer/`,
   217	      data
   218	    )
   219	    return response.data
   220	  }
   221	
   222	  // ==========================================================================
   223	  // √âTATS FINANCIERS
   224	  // ==========================================================================
   225	
   226	  /**
   227	   * R√©cup√®re tous les √©tats d'une liasse
   228	   */
   229	  async getEtatsFinanciers(liasseId: number): Promise<EtatFinancierDTO[]> {
   230	    const response = await apiClient.get<EtatFinancierDTO[]>(
   231	      `/api/generation/etats/`,
   232	      { params: { liasse: liasseId } }
   233	    )
   234	    return response.data
   235	  }
   236	
   237	  /**
   238	   * Cr√©e ou met √† jour un √©tat financier
   239	   */
   240	  async saveEtatFinancier(data: Partial<EtatFinancierDTO>): Promise<EtatFinancierDTO> {
   241	    if (data.id) {
   242	      const response = await apiClient.patch<EtatFinancierDTO>(
   243	        `/api/generation/etats/${data.id}/`,
   244	        data
   245	      )
   246	      return response.data
   247	    } else {
   248	      const response = await apiClient.post<EtatFinancierDTO>(
   249	        `/api/generation/etats/`,
   250	        data
   251	      )
   252	      return response.data
   253	    }
   254	  }
   255	
   256	  /**
   257	   * Calcule automatiquement un √©tat financier √† partir de la balance
   258	   */
   259	  async calculerEtatAutomatique(
   260	    liasseId: number,
   261	    typeEtat: EtatFinancierDTO['type_etat'],
   262	    balanceData: BalanceEntry[]
   263	  ): Promise<any> {
   264	    // Charger la balance
   265	    liasseDataService.loadBalance(balanceData)
   266	
   267	    // G√©n√©rer l'√©tat selon le type
   268	    let donneesCalculees: any
   269	
   270	    switch (typeEtat) {
   271	      case 'BILAN_ACTIF':
   272	        donneesCalculees = liasseDataService.generateBilanActif()
   273	        break
   274	      case 'BILAN_PASSIF':
   275	        donneesCalculees = liasseDataService.generateBilanPassif()
   276	        break
   277	      case 'COMPTE_RESULTAT':
   278	        donneesCalculees = liasseDataService.generateCompteResultat()
   279	        break
   280	      default:
   281	        throw new Error(`Type d'√©tat non support√©: ${typeEtat}`)
   282	    }
   283	
   284	    // Sauvegarder l'√©tat
   285	    return await this.saveEtatFinancier({
   286	      liasse: liasseId,
   287	      type_etat: typeEtat,
   288	      libelle: this.getLibelleEtat(typeEtat),
   289	      donnees_json: donneesCalculees,
   290	      calculs_automatiques: {
   291	        date_calcul: new Date().toISOString(),
   292	        source: 'MAPPING_SYSCOHADA',
   293	        nb_comptes_mappes: balanceData.length
   294	      }
   295	    })
   296	  }
   297	
   298	  private getLibelleEtat(typeEtat: EtatFinancierDTO['type_etat']): string {
   299	    const libelles = {
   300	      'BILAN_ACTIF': 'Bilan - Actif',
   301	      'BILAN_PASSIF': 'Bilan - Passif',
   302	      'COMPTE_RESULTAT': 'Compte de R√©sultat',
   303	      'FLUX_TRESORERIE': 'Tableau de Flux de Tr√©sorerie',
   304	      'NOTE_ANNEXE': 'Note Annexe'
   305	    }
   306	    return libelles[typeEtat]
   307	  }
   308	
   309	  // ==========================================================================
   310	  // TEMPLATES ET CONFIGURATION
   311	  // ==========================================================================
   312	
   313	  /**
   314	   * R√©cup√®re les templates disponibles par secteur/juridiction
   315	   */
   316	  async getTemplates(filters?: {
   317	    secteur?: string
   318	    juridiction?: string
   319	    type_liasse?: string
   320	  }): Promise<any[]> {
   321	    const response = await apiClient.get('/api/generation/configurations/', {
   322	      params: filters
   323	    })
   324	    return response.data
   325	  }
   326	
   327	  /**
   328	   * Applique un template √† une liasse
   329	   */
   330	  async appliquerTemplate(liasseId: number, templateId: number): Promise<LiasseFiscaleDTO> {
   331	    const response = await apiClient.post<LiasseFiscaleDTO>(
   332	      `${this.baseUrl}/${liasseId}/appliquer_template/`,
   333	      { template_id: templateId }
   334	    )
   335	    return response.data
   336	  }
   337	}
   338	
   339	// Instance singleton
   340	export const liasseService = new LiasseService()
   341	
   342	// Export du service
   343	export default liasseService

================================================================================
FILE: src/services/liasseSMTMapping.ts
================================================================================
     1	/**
     2	 * Mapping SMT (Systeme Minimal de Tresorerie) - SYSCOHADA Revise 2017
     3	 * Pour les petites entites avec CA < 60M FCFA
     4	 * Structure simplifiee : ~36 lignes vs 65 pour le SN
     5	 */
     6	
     7	export interface MappingEntry {
     8	  comptes: string[]
     9	  amortComptes?: string[]
    10	}
    11	
    12	export const SMT_MAPPING = {
    13	  // ACTIF SMT (10 lignes)
    14	  actif: {
    15	    AI_1: { // Immobilisations incorporelles
    16	      comptes: ['21'],
    17	      amortComptes: ['281', '291']
    18	    } as MappingEntry,
    19	    AI_2: { // Immobilisations corporelles
    20	      comptes: ['22', '23', '24'],
    21	      amortComptes: ['282', '283', '284', '292', '293', '294']
    22	    } as MappingEntry,
    23	    AI_3: { // Immobilisations financieres
    24	      comptes: ['26', '27'],
    25	      amortComptes: ['296', '297']
    26	    } as MappingEntry,
    27	    AC_1: { // Stocks
    28	      comptes: ['31', '32', '33', '34', '35', '36', '37', '38'],
    29	      amortComptes: ['39']
    30	    } as MappingEntry,
    31	    AC_2: { // Creances clients
    32	      comptes: ['41'],
    33	      amortComptes: ['491']
    34	    } as MappingEntry,
    35	    AC_3: { // Autres creances
    36	      comptes: ['40', '42', '43', '44', '45', '46', '47', '48', '49'],
    37	      amortComptes: ['490', '492', '493', '494', '495', '496', '497']
    38	    } as MappingEntry,
    39	    AC_4: { // Charges constatees d'avance
    40	      comptes: ['476'],
    41	      amortComptes: []
    42	    } as MappingEntry,
    43	    TA_1: { // Banques
    44	      comptes: ['52', '53'],
    45	      amortComptes: []
    46	    } as MappingEntry,
    47	    TA_2: { // Caisse
    48	      comptes: ['57'],
    49	      amortComptes: []
    50	    } as MappingEntry,
    51	    TA_3: { // Autres tresorerie actif
    52	      comptes: ['50', '51', '54', '55', '56', '58'],
    53	      amortComptes: ['590', '591', '592', '593', '594']
    54	    } as MappingEntry,
    55	  },
    56	
    57	  // PASSIF SMT (10 lignes)
    58	  passif: {
    59	    CP_1: { // Capital
    60	      comptes: ['101', '102', '103', '104', '105']
    61	    } as MappingEntry,
    62	    CP_2: { // Reserves
    63	      comptes: ['11']
    64	    } as MappingEntry,
    65	    CP_3: { // Report a nouveau
    66	      comptes: ['12']
    67	    } as MappingEntry,
    68	    CP_4: { // Resultat de l'exercice
    69	      comptes: ['13']
    70	    } as MappingEntry,
    71	    CP_5: { // Autres capitaux propres
    72	      comptes: ['14', '106']
    73	    } as MappingEntry,
    74	    DF_1: { // Emprunts et dettes financieres
    75	      comptes: ['16', '17']
    76	    } as MappingEntry,
    77	    PC_1: { // Fournisseurs
    78	      comptes: ['401', '402', '403', '404', '405', '408']
    79	    } as MappingEntry,
    80	    PC_2: { // Dettes fiscales et sociales
    81	      comptes: ['42', '43', '44']
    82	    } as MappingEntry,
    83	    PC_3: { // Autres dettes
    84	      comptes: ['45', '46', '47', '48']
    85	    } as MappingEntry,
    86	    TP_1: { // Tresorerie passif
    87	      comptes: ['52']
    88	    } as MappingEntry,
    89	  },
    90	
    91	  // CHARGES SMT (10 lignes)
    92	  charges: {
    93	    CH_1: { // Achats de marchandises
    94	      comptes: ['601']
    95	    } as MappingEntry,
    96	    CH_2: { // Achats de matieres et fournitures
    97	      comptes: ['602', '604', '605', '608']
    98	    } as MappingEntry,
    99	    CH_3: { // Variation de stocks
   100	      comptes: ['603']
   101	    } as MappingEntry,
   102	    CH_4: { // Transports
   103	      comptes: ['61']
   104	    } as MappingEntry,
   105	    CH_5: { // Services exterieurs
   106	      comptes: ['62', '63']
   107	    } as MappingEntry,
   108	    CH_6: { // Impots et taxes
   109	      comptes: ['64']
   110	    } as MappingEntry,
   111	    CH_7: { // Autres charges
   112	      comptes: ['65']
   113	    } as MappingEntry,
   114	    CH_8: { // Charges de personnel
   115	      comptes: ['66']
   116	    } as MappingEntry,
   117	    CH_9: { // Dotations amortissements et provisions
   118	      comptes: ['68', '69']
   119	    } as MappingEntry,
   120	    CH_10: { // Charges financieres et HAO + Impot
   121	      comptes: ['67', '81', '83', '85', '89']
   122	    } as MappingEntry,
   123	  },
   124	
   125	  // PRODUITS SMT (6 lignes)
   126	  produits: {
   127	    PR_1: { // Ventes de marchandises
   128	      comptes: ['701']
   129	    } as MappingEntry,
   130	    PR_2: { // Ventes de produits fabriques
   131	      comptes: ['702', '703', '704', '705', '706']
   132	    } as MappingEntry,
   133	    PR_3: { // Production stockee et immobilisee
   134	      comptes: ['72', '73']
   135	    } as MappingEntry,
   136	    PR_4: { // Subventions d'exploitation
   137	      comptes: ['71']
   138	    } as MappingEntry,
   139	    PR_5: { // Autres produits et transferts de charges
   140	      comptes: ['75', '78', '791', '797', '798']
   141	    } as MappingEntry,
   142	    PR_6: { // Produits financiers et HAO
   143	      comptes: ['77', '787', '82', '84', '86', '88']
   144	    } as MappingEntry,
   145	  }
   146	}
   147	
   148	/** Libelles pour l'affichage du bilan SMT */
   149	export const SMT_LIBELLES = {
   150	  actif: {
   151	    AI_1: 'Immobilisations incorporelles',
   152	    AI_2: 'Immobilisations corporelles',
   153	    AI_3: 'Immobilisations financieres',
   154	    AC_1: 'Stocks',
   155	    AC_2: 'Creances clients',
   156	    AC_3: 'Autres creances',
   157	    AC_4: 'Charges constatees d\'avance',
   158	    TA_1: 'Banques',
   159	    TA_2: 'Caisse',
   160	    TA_3: 'Autres tresorerie',
   161	  },
   162	  passif: {
   163	    CP_1: 'Capital',
   164	    CP_2: 'Reserves',
   165	    CP_3: 'Report a nouveau',
   166	    CP_4: 'Resultat de l\'exercice',
   167	    CP_5: 'Autres capitaux propres',
   168	    DF_1: 'Emprunts et dettes financieres',
   169	    PC_1: 'Fournisseurs',
   170	    PC_2: 'Dettes fiscales et sociales',
   171	    PC_3: 'Autres dettes',
   172	    TP_1: 'Tresorerie passif',
   173	  },
   174	  charges: {
   175	    CH_1: 'Achats de marchandises',
   176	    CH_2: 'Achats de matieres et fournitures',
   177	    CH_3: 'Variation de stocks',
   178	    CH_4: 'Transports',
   179	    CH_5: 'Services exterieurs',
   180	    CH_6: 'Impots et taxes',
   181	    CH_7: 'Autres charges',
   182	    CH_8: 'Charges de personnel',
   183	    CH_9: 'Dotations amortissements et provisions',
   184	    CH_10: 'Charges financieres, HAO et Impot',
   185	  },
   186	  produits: {
   187	    PR_1: 'Ventes de marchandises',
   188	    PR_2: 'Ventes de produits fabriques',
   189	    PR_3: 'Production stockee et immobilisee',
   190	    PR_4: 'Subventions d\'exploitation',
   191	    PR_5: 'Autres produits et transferts de charges',
   192	    PR_6: 'Produits financiers et HAO',
   193	  },
   194	}

================================================================================
FILE: src/services/organizationService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des organisations (Multi-tenant SaaS)
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface Organization {
     9	  id: string // UUID
    10	  name: string
    11	  slug: string
    12	
    13	  // Informations l√©gales
    14	  legal_form: string
    15	  rccm: string
    16	  ifu: string
    17	
    18	  // Localisation
    19	  country: string
    20	  city: string
    21	  address: string
    22	
    23	  // Activit√©
    24	  sector: string
    25	  annual_revenue_range: string
    26	
    27	  // Abonnement
    28	  subscription_plan: 'STARTER' | 'BUSINESS' | 'ENTERPRISE'
    29	  subscription_status: 'TRIAL' | 'ACTIVE' | 'SUSPENDED' | 'CANCELLED' | 'EXPIRED'
    30	  trial_end_date?: string
    31	  subscription_start_date?: string
    32	  subscription_end_date?: string
    33	
    34	  // Quotas
    35	  liasses_quota: number
    36	  liasses_used: number
    37	  users_quota: number
    38	  storage_quota_gb: number
    39	
    40	  // Propri√©taire et membres
    41	  owner: number
    42	  owner_detail?: {
    43	    id: number
    44	    email: string
    45	    first_name: string
    46	    last_name: string
    47	  }
    48	
    49	  // √âtat
    50	  is_active: boolean
    51	  is_verified: boolean
    52	
    53	  // Param√®tres
    54	  settings: Record<string, any>
    55	
    56	  // Facturation
    57	  billing_email: string
    58	  stripe_customer_id: string
    59	  stripe_subscription_id: string
    60	
    61	  // M√©tadonn√©es
    62	  created_at: string
    63	  updated_at: string
    64	}
    65	
    66	export interface CreateOrganization {
    67	  name: string
    68	  legal_form?: string
    69	  rccm?: string
    70	  ifu?: string
    71	  country?: string
    72	  city?: string
    73	  address?: string
    74	  sector?: string
    75	  annual_revenue_range?: string
    76	  subscription_plan?: 'STARTER' | 'BUSINESS' | 'ENTERPRISE'
    77	  billing_email?: string
    78	}
    79	
    80	export interface OrganizationStats {
    81	  liasses: {
    82	    quota: number
    83	    used: number
    84	    remaining: number | 'unlimited'
    85	    percentage: number
    86	  }
    87	  members: {
    88	    quota: number
    89	    active: number
    90	  }
    91	  subscription: {
    92	    plan: string
    93	    status: string
    94	    trial_end?: string
    95	  }
    96	}
    97	
    98	export interface OrganizationFilters {
    99	  search?: string
   100	  subscription_plan?: 'STARTER' | 'BUSINESS' | 'ENTERPRISE'
   101	  subscription_status?: 'TRIAL' | 'ACTIVE' | 'SUSPENDED' | 'CANCELLED' | 'EXPIRED'
   102	  is_active?: boolean
   103	  page?: number
   104	  page_size?: number
   105	}
   106	
   107	// ========================================
   108	// TYPES POUR MEMBRES
   109	// ========================================
   110	
   111	export interface OrganizationMember {
   112	  id: string
   113	  organization: string
   114	  organization_detail?: {
   115	    name: string
   116	    slug: string
   117	  }
   118	  user: {
   119	    id: number
   120	    email: string
   121	    first_name: string
   122	    last_name: string
   123	  }
   124	  role: 'OWNER' | 'ADMIN' | 'MEMBER' | 'VIEWER'
   125	  permissions: string[]
   126	  is_active: boolean
   127	  joined_at: string
   128	  invited_by?: number
   129	  invited_by_detail?: {
   130	    id: number
   131	    email: string
   132	    first_name: string
   133	    last_name: string
   134	  }
   135	  created_at: string
   136	  updated_at: string
   137	}
   138	
   139	// ========================================
   140	// TYPES POUR SUBSCRIPTIONS
   141	// ========================================
   142	
   143	export interface Subscription {
   144	  id: string
   145	  organization: string
   146	  organization_detail?: {
   147	    name: string
   148	    slug: string
   149	  }
   150	  plan: 'STARTER' | 'BUSINESS' | 'ENTERPRISE'
   151	  status: 'TRIAL' | 'ACTIVE' | 'SUSPENDED' | 'CANCELLED' | 'EXPIRED'
   152	
   153	  // Dates
   154	  start_date: string
   155	  end_date?: string
   156	  trial_end_date?: string
   157	  cancelled_at?: string
   158	
   159	  // Quotas
   160	  liasses_quota: number
   161	  users_quota: number
   162	  storage_quota_gb: number
   163	
   164	  // Tarification
   165	  price_monthly: number
   166	  price_yearly?: number
   167	  currency: string
   168	
   169	  // Facturation externe (Stripe, PayPal, etc.)
   170	  external_subscription_id?: string
   171	  external_customer_id?: string
   172	  payment_method?: string
   173	  next_billing_date?: string
   174	
   175	  // M√©tadonn√©es
   176	  created_at: string
   177	  updated_at: string
   178	}
   179	
   180	// ========================================
   181	// TYPES POUR INVITATIONS
   182	// ========================================
   183	
   184	export interface Invitation {
   185	  id: string
   186	  organization: string
   187	  organization_detail?: {
   188	    name: string
   189	    slug: string
   190	  }
   191	  email: string
   192	  role: 'ADMIN' | 'MEMBER' | 'VIEWER'
   193	  token: string
   194	  status: 'PENDING' | 'ACCEPTED' | 'EXPIRED' | 'CANCELLED'
   195	
   196	  // Metadata invitation
   197	  invited_by: number
   198	  invited_by_detail?: {
   199	    id: number
   200	    email: string
   201	    first_name: string
   202	    last_name: string
   203	  }
   204	
   205	  // Dates
   206	  created_at: string
   207	  expires_at: string
   208	  accepted_at?: string
   209	  cancelled_at?: string
   210	
   211	  // Message personnalis√©
   212	  message?: string
   213	}
   214	
   215	class OrganizationService {
   216	  private baseUrl = '/api/v1/organizations'
   217	
   218	  /**
   219	   * R√©cup√©rer la liste des organisations de l'utilisateur
   220	   */
   221	  async list(filters?: OrganizationFilters): Promise<{
   222	    count: number
   223	    next: string | null
   224	    previous: string | null
   225	    results: Organization[]
   226	  }> {
   227	    console.log('üîÑ Fetching organizations from backend...', filters)
   228	    return apiClient.get(this.baseUrl, filters)
   229	  }
   230	
   231	  /**
   232	   * R√©cup√©rer toutes les organisations (sans pagination)
   233	   */
   234	  async getAll(): Promise<Organization[]> {
   235	    console.log('üîÑ Fetching all organizations from backend...')
   236	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, { page_size: 100 })
   237	    return data.results || []
   238	  }
   239	
   240	  /**
   241	   * R√©cup√©rer une organisation par slug
   242	   */
   243	  async getBySlug(slug: string): Promise<Organization> {
   244	    console.log(`üîÑ Fetching organization ${slug} from backend...`)
   245	    return apiClient.get(`${this.baseUrl}/${slug}/`)
   246	  }
   247	
   248	  /**
   249	   * Cr√©er une nouvelle organisation
   250	   */
   251	  async create(data: CreateOrganization): Promise<Organization> {
   252	    console.log('üì§ Creating organization in backend...', data)
   253	    return apiClient.post(this.baseUrl, data)
   254	  }
   255	
   256	  /**
   257	   * Mettre √† jour une organisation
   258	   */
   259	  async update(slug: string, data: Partial<CreateOrganization>): Promise<Organization> {
   260	    console.log(`üì§ Updating organization ${slug} in backend...`, data)
   261	    return apiClient.patch(`${this.baseUrl}/${slug}/`, data)
   262	  }
   263	
   264	  /**
   265	   * Supprimer une organisation
   266	   */
   267	  async delete(slug: string): Promise<void> {
   268	    console.log(`üóëÔ∏è Deleting organization ${slug} from backend...`)
   269	    return apiClient.delete(`${this.baseUrl}/${slug}/`)
   270	  }
   271	
   272	  /**
   273	   * Incr√©menter le compteur de liasses utilis√©es
   274	   */
   275	  async incrementLiasse(slug: string): Promise<Organization> {
   276	    console.log(`üìà Incrementing liasse count for organization ${slug}...`)
   277	    return apiClient.post(`${this.baseUrl}/${slug}/increment_liasse/`)
   278	  }
   279	
   280	  /**
   281	   * R√©initialiser le quota annuel
   282	   */
   283	  async resetQuota(slug: string): Promise<{ message: string; liasses_used: number }> {
   284	    console.log(`üîÑ Resetting quota for organization ${slug}...`)
   285	    return apiClient.post(`${this.baseUrl}/${slug}/reset_quota/`)
   286	  }
   287	
   288	  /**
   289	   * R√©cup√©rer les statistiques de l'organisation
   290	   */
   291	  async getStats(slug: string): Promise<OrganizationStats> {
   292	    console.log(`üìä Fetching stats for organization ${slug}...`)
   293	    return apiClient.get(`${this.baseUrl}/${slug}/stats/`)
   294	  }
   295	
   296	  /**
   297	   * V√©rifier si une organisation peut cr√©er une nouvelle liasse
   298	   */
   299	  async canCreateLiasse(slug: string): Promise<boolean> {
   300	    try {
   301	      const stats = await this.getStats(slug)
   302	
   303	      // Entreprise plan = unlimited
   304	      if (stats.liasses.remaining === 'unlimited') {
   305	        return true
   306	      }
   307	
   308	      // V√©rifier le quota
   309	      return stats.liasses.used < stats.liasses.quota
   310	    } catch (error) {
   311	      console.error('Error checking liasse quota:', error)
   312	      return false
   313	    }
   314	  }
   315	
   316	  /**
   317	   * R√©cup√©rer l'organisation actuelle de l'utilisateur
   318	   * (Utilise le store si disponible, sinon r√©cup√®re la premi√®re)
   319	   */
   320	  async getCurrent(): Promise<Organization | null> {
   321	    console.log('üîÑ Fetching current organization...')
   322	    try {
   323	      const orgs = await this.getAll()
   324	      return orgs.length > 0 ? orgs[0] : null
   325	    } catch (error) {
   326	      console.error('Error fetching current organization:', error)
   327	      return null
   328	    }
   329	  }
   330	
   331	  /**
   332	   * V√©rifier si l'utilisateur est owner d'une organisation
   333	   */
   334	  async isOwner(slug: string, userId: number): Promise<boolean> {
   335	    try {
   336	      const org = await this.getBySlug(slug)
   337	      return org.owner === userId
   338	    } catch (error) {
   339	      console.error('Error checking ownership:', error)
   340	      return false
   341	    }
   342	  }
   343	
   344	  /**
   345	   * Obtenir le plan d'abonnement format√©
   346	   */
   347	  getSubscriptionPlanLabel(plan: Organization['subscription_plan']): string {
   348	    const labels = {
   349	      'STARTER': 'Starter - 2 liasses gratuites',
   350	      'BUSINESS': 'Business - Jusqu\'√† 12 liasses/an',
   351	      'ENTERPRISE': 'Enterprise - Liasses illimit√©es'
   352	    }
   353	    return labels[plan] || plan
   354	  }
   355	
   356	  /**
   357	   * Obtenir le statut d'abonnement format√©
   358	   */
   359	  getSubscriptionStatusLabel(status: Organization['subscription_status']): string {
   360	    const labels = {
   361	      'TRIAL': 'P√©riode d\'essai',
   362	      'ACTIVE': 'Actif',
   363	      'SUSPENDED': 'Suspendu',
   364	      'CANCELLED': 'Annul√©',
   365	      'EXPIRED': 'Expir√©'
   366	    }
   367	    return labels[status] || status
   368	  }
   369	
   370	  /**
   371	   * Obtenir la couleur associ√©e au plan
   372	   */
   373	  getSubscriptionPlanColor(plan: Organization['subscription_plan']): string {
   374	    const colors = {
   375	      'STARTER': '#28a745',
   376	      'BUSINESS': '#007bff',
   377	      'ENTERPRISE': '#6f42c1'
   378	    }
   379	    return colors[plan] || '#6c757d'
   380	  }
   381	
   382	  /**
   383	   * Obtenir la couleur associ√©e au statut
   384	   */
   385	  getSubscriptionStatusColor(status: Organization['subscription_status']): string {
   386	    const colors = {
   387	      'TRIAL': '#ffc107',
   388	      'ACTIVE': '#28a745',
   389	      'SUSPENDED': '#fd7e14',
   390	      'CANCELLED': '#dc3545',
   391	      'EXPIRED': '#6c757d'
   392	    }
   393	    return colors[status] || '#6c757d'
   394	  }
   395	
   396	  /**
   397	   * V√©rifier si l'organisation est en p√©riode d'essai
   398	   */
   399	  isInTrial(org: Organization): boolean {
   400	    if (org.subscription_status !== 'TRIAL') {
   401	      return false
   402	    }
   403	
   404	    if (!org.trial_end_date) {
   405	      return false
   406	    }
   407	
   408	    const trialEnd = new Date(org.trial_end_date)
   409	    const now = new Date()
   410	
   411	    return now < trialEnd
   412	  }
   413	
   414	  /**
   415	   * Calculer les jours restants de la p√©riode d'essai
   416	   */
   417	  getRemainingTrialDays(org: Organization): number | null {
   418	    if (!this.isInTrial(org) || !org.trial_end_date) {
   419	      return null
   420	    }
   421	
   422	    const trialEnd = new Date(org.trial_end_date)
   423	    const now = new Date()
   424	
   425	    const diffTime = trialEnd.getTime() - now.getTime()
   426	    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))
   427	
   428	    return Math.max(0, diffDays)
   429	  }
   430	
   431	  /**
   432	   * Calculer le pourcentage d'utilisation du quota de liasses
   433	   */
   434	  getQuotaPercentage(org: Organization): number {
   435	    if (org.subscription_plan === 'ENTERPRISE') {
   436	      return 0 // Unlimited
   437	    }
   438	
   439	    if (org.liasses_quota === 0) {
   440	      return 100
   441	    }
   442	
   443	    return Math.round((org.liasses_used / org.liasses_quota) * 100)
   444	  }
   445	
   446	  // ========================================
   447	  // MEMBRES D'ORGANISATION (NOUVEAU!)
   448	  // ========================================
   449	
   450	  /**
   451	   * R√©cup√©rer la liste des membres d'une organisation
   452	   */
   453	  async getMembers(organizationSlug?: string): Promise<OrganizationMember[]> {
   454	    console.log('üîÑ Fetching organization members from backend...', organizationSlug)
   455	    const params = organizationSlug ? { organization: organizationSlug } : undefined
   456	    const data = await apiClient.get<Record<string, any>>('/api/v1/members/', params)
   457	    return data.results || []
   458	  }
   459	
   460	  /**
   461	   * R√©cup√©rer un membre sp√©cifique
   462	   */
   463	  async getMember(id: string): Promise<OrganizationMember> {
   464	    console.log(`üîÑ Fetching member ${id} from backend...`)
   465	    return apiClient.get(`/api/v1/members/${id}/`)
   466	  }
   467	
   468	  /**
   469	   * Ajouter un membre √† une organisation
   470	   */
   471	  async addMember(data: {
   472	    organization: string
   473	    user_email: string
   474	    role: 'OWNER' | 'ADMIN' | 'MEMBER' | 'VIEWER'
   475	  }): Promise<OrganizationMember> {
   476	    console.log('üì§ Adding member to organization...', data)
   477	    return apiClient.post('/api/v1/members/', data)
   478	  }
   479	
   480	  /**
   481	   * Mettre √† jour le r√¥le d'un membre
   482	   */
   483	  async updateMemberRole(id: string, role: string): Promise<OrganizationMember> {
   484	    console.log(`üì§ Updating member ${id} role to ${role}...`)
   485	    return apiClient.patch(`/api/v1/members/${id}/`, { role })
   486	  }
   487	
   488	  /**
   489	   * Retirer un membre d'une organisation
   490	   */
   491	  async removeMember(id: string): Promise<void> {
   492	    console.log(`üóëÔ∏è Removing member ${id} from organization...`)
   493	    return apiClient.delete(`/api/v1/members/${id}/`)
   494	  }
   495	
   496	  /**
   497	   * Obtenir le label d'un r√¥le
   498	   */
   499	  getMemberRoleLabel(role: OrganizationMember['role']): string {
   500	    const labels = {
   501	      'OWNER': 'Propri√©taire',
   502	      'ADMIN': 'Administrateur',
   503	      'MEMBER': 'Membre',
   504	      'VIEWER': 'Observateur'
   505	    }
   506	    return labels[role] || role
   507	  }
   508	
   509	  /**
   510	   * Obtenir la couleur d'un r√¥le
   511	   */
   512	  getMemberRoleColor(role: OrganizationMember['role']): string {
   513	    const colors = {
   514	      'OWNER': '#6f42c1',
   515	      'ADMIN': '#007bff',
   516	      'MEMBER': '#28a745',
   517	      'VIEWER': '#6c757d'
   518	    }
   519	    return colors[role] || '#6c757d'
   520	  }
   521	
   522	  // ========================================
   523	  // SUBSCRIPTIONS (NOUVEAU!)
   524	  // ========================================
   525	
   526	  /**
   527	   * R√©cup√©rer la liste des subscriptions
   528	   */
   529	  async getSubscriptions(organizationSlug?: string): Promise<Subscription[]> {
   530	    console.log('üîÑ Fetching subscriptions from backend...', organizationSlug)
   531	    const params = organizationSlug ? { organization: organizationSlug } : undefined
   532	    const data = await apiClient.get<Record<string, any>>('/api/v1/subscriptions/', params)
   533	    return data.results || []
   534	  }
   535	
   536	  /**
   537	   * R√©cup√©rer une subscription sp√©cifique
   538	   */
   539	  async getSubscription(id: string): Promise<Subscription> {
   540	    console.log(`üîÑ Fetching subscription ${id} from backend...`)
   541	    return apiClient.get(`/api/v1/subscriptions/${id}/`)
   542	  }
   543	
   544	  /**
   545	   * R√©cup√©rer la subscription active d'une organisation
   546	   */
   547	  async getCurrentSubscription(organizationSlug: string): Promise<Subscription | null> {
   548	    console.log(`üîÑ Fetching current subscription for organization ${organizationSlug}...`)
   549	    const data = await apiClient.get<Record<string, any>>('/api/v1/subscriptions/', {
   550	      organization: organizationSlug,
   551	      status: 'ACTIVE'
   552	    })
   553	    const subscriptions = data.results || []
   554	    return subscriptions.length > 0 ? subscriptions[0] : null
   555	  }
   556	
   557	  /**
   558	   * Cr√©er une nouvelle subscription
   559	   */
   560	  async createSubscription(data: {
   561	    organization: string
   562	    plan: 'STARTER' | 'BUSINESS' | 'ENTERPRISE'
   563	  }): Promise<Subscription> {
   564	    console.log('üì§ Creating subscription...', data)
   565	    return apiClient.post('/api/v1/subscriptions/', data)
   566	  }
   567	
   568	  /**
   569	   * Mettre √† niveau une subscription
   570	   */
   571	  async upgradeSubscription(subscriptionId: string, newPlan: string): Promise<Subscription> {
   572	    console.log(`‚¨ÜÔ∏è Upgrading subscription ${subscriptionId} to ${newPlan}...`)
   573	    return apiClient.patch(`/api/v1/subscriptions/${subscriptionId}/`, {
   574	      plan: newPlan
   575	    })
   576	  }
   577	
   578	  /**
   579	   * Annuler une subscription
   580	   */
   581	  async cancelSubscription(subscriptionId: string): Promise<Subscription> {
   582	    console.log(`‚ùå Cancelling subscription ${subscriptionId}...`)
   583	    return apiClient.patch(`/api/v1/subscriptions/${subscriptionId}/`, {
   584	      status: 'CANCELLED'
   585	    })
   586	  }
   587	
   588	  /**
   589	   * R√©activer une subscription
   590	   */
   591	  async reactivateSubscription(subscriptionId: string): Promise<Subscription> {
   592	    console.log(`‚úÖ Reactivating subscription ${subscriptionId}...`)
   593	    return apiClient.patch(`/api/v1/subscriptions/${subscriptionId}/`, {
   594	      status: 'ACTIVE'
   595	    })
   596	  }
   597	
   598	  // ========================================
   599	  // INVITATIONS (NOUVEAU!)
   600	  // ========================================
   601	
   602	  /**
   603	   * R√©cup√©rer la liste des invitations
   604	   */
   605	  async getInvitations(organizationSlug?: string): Promise<Invitation[]> {
   606	    console.log('üîÑ Fetching invitations from backend...', organizationSlug)
   607	    const params = organizationSlug ? { organization: organizationSlug } : undefined
   608	    const data = await apiClient.get<Record<string, any>>('/api/v1/invitations/', params)
   609	    return data.results || []
   610	  }
   611	
   612	  /**
   613	   * R√©cup√©rer une invitation sp√©cifique
   614	   */
   615	  async getInvitation(id: string): Promise<Invitation> {
   616	    console.log(`üîÑ Fetching invitation ${id} from backend...`)
   617	    return apiClient.get(`/api/v1/invitations/${id}/`)
   618	  }
   619	
   620	  /**
   621	   * Envoyer une invitation
   622	   */
   623	  async sendInvitation(data: {
   624	    organization: string
   625	    email: string
   626	    role: 'ADMIN' | 'MEMBER' | 'VIEWER'
   627	  }): Promise<Invitation> {
   628	    console.log('üì§ Sending invitation...', data)
   629	    return apiClient.post('/api/v1/invitations/', data)
   630	  }
   631	
   632	  /**
   633	   * Renvoyer une invitation
   634	   */
   635	  async resendInvitation(id: string): Promise<Invitation> {
   636	    console.log(`üì§ Resending invitation ${id}...`)
   637	    return apiClient.post(`/api/v1/invitations/${id}/resend/`)
   638	  }
   639	
   640	  /**
   641	   * Annuler une invitation
   642	   */
   643	  async cancelInvitation(id: string): Promise<void> {
   644	    console.log(`‚ùå Cancelling invitation ${id}...`)
   645	    return apiClient.delete(`/api/v1/invitations/${id}/`)
   646	  }
   647	
   648	  /**
   649	   * Accepter une invitation
   650	   */
   651	  async acceptInvitation(token: string): Promise<{ message: string; organization: Organization }> {
   652	    console.log('‚úÖ Accepting invitation...')
   653	    return apiClient.post('/api/v1/invitations/accept/', { token })
   654	  }
   655	
   656	  /**
   657	   * R√©cup√©rer les invitations en attente
   658	   */
   659	  async getPendingInvitations(): Promise<Invitation[]> {
   660	    console.log('üîÑ Fetching pending invitations...')
   661	    const data = await apiClient.get<Record<string, any>>('/api/v1/invitations/', {
   662	      status: 'PENDING'
   663	    })
   664	    return data.results || []
   665	  }
   666	
   667	  /**
   668	   * Obtenir le label d'un statut d'invitation
   669	   */
   670	  getInvitationStatusLabel(status: Invitation['status']): string {
   671	    const labels = {
   672	      'PENDING': 'En attente',
   673	      'ACCEPTED': 'Accept√©e',
   674	      'EXPIRED': 'Expir√©e',
   675	      'CANCELLED': 'Annul√©e'
   676	    }
   677	    return labels[status] || status
   678	  }
   679	
   680	  /**
   681	   * Obtenir la couleur d'un statut d'invitation
   682	   */
   683	  getInvitationStatusColor(status: Invitation['status']): string {
   684	    const colors = {
   685	      'PENDING': '#ffc107',
   686	      'ACCEPTED': '#28a745',
   687	      'EXPIRED': '#6c757d',
   688	      'CANCELLED': '#dc3545'
   689	    }
   690	    return colors[status] || '#6c757d'
   691	  }
   692	}
   693	
   694	export default new OrganizationService()

================================================================================
FILE: src/services/planComptableService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des plans comptables de r√©f√©rence
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface PlanComptableReference {
     9	  id: number
    10	  code: string
    11	  nom: string
    12	  type_plan:
    13	    | 'SYSCOHADA_GENERAL'
    14	    | 'SYSCOHADA_BANQUE'
    15	    | 'SYSCOHADA_ASSURANCE'
    16	    | 'SYSCOHADA_MICROFINANCE'
    17	    | 'IFRS_SME'
    18	    | 'IFRS_FULL'
    19	    | 'NATIONAL'
    20	    | 'PERSONNALISE'
    21	  type_liasse: number
    22	  pays_applicable?: number
    23	
    24	  // Versioning
    25	  version: string
    26	  date_publication: string
    27	  date_application: string
    28	  date_fin_validite?: string
    29	
    30	  // M√©tadonn√©es
    31	  autorite_publication: string
    32	  reference_officielle: string
    33	  url_reference: string
    34	
    35	  // Configuration
    36	  est_actif: boolean
    37	  est_officiel: boolean
    38	  peut_etre_modifie: boolean
    39	
    40	  created_at: string
    41	  updated_at: string
    42	}
    43	
    44	export interface CompteReference {
    45	  id: number
    46	  plan_comptable: number
    47	  numero: string
    48	  libelle: string
    49	
    50	  // Classification
    51	  classe: string
    52	  sous_classe: string
    53	  poste: string
    54	  compte_principal: string
    55	
    56	  // Propri√©t√©s
    57	  sens_normal: 'DEBIT' | 'CREDIT'
    58	  nature_compte: 'ACTIF' | 'PASSIF' | 'CHARGE' | 'PRODUIT'
    59	
    60	  // Hi√©rarchie
    61	  niveau: number
    62	  compte_parent?: number
    63	
    64	  // Param√®tres d'utilisation
    65	  accepte_imputation: boolean
    66	  obligatoire_tiers: boolean
    67	  obligatoire_analytique: boolean
    68	
    69	  // Correspondances
    70	  equivalence_ifrs: string
    71	  code_fiscal_ohada: string
    72	
    73	  // Notes
    74	  note_utilisation: string
    75	  exemples_utilisation: string[]
    76	
    77	  created_at: string
    78	  updated_at: string
    79	}
    80	
    81	export interface CorrespondanceComptable {
    82	  id: number
    83	  compte_local: number
    84	  compte_syscohada: number
    85	  validee_par?: number
    86	  date_validation?: string
    87	  created_at: string
    88	  updated_at: string
    89	}
    90	
    91	export interface PlanFilters {
    92	  type_plan?: string
    93	  est_actif?: boolean
    94	  est_officiel?: boolean
    95	  pays_applicable?: number
    96	  page?: number
    97	  page_size?: number
    98	}
    99	
   100	export interface CompteFilters {
   101	  plan_comptable?: number
   102	  classe?: string
   103	  nature_compte?: string
   104	  accepte_imputation?: boolean
   105	  search?: string
   106	  page?: number
   107	  page_size?: number
   108	}
   109	
   110	class PlanComptableService {
   111	  private baseUrl = '/api/v1/accounting'
   112	
   113	  // ===== PLANS COMPTABLES =====
   114	
   115	  /**
   116	   * R√©cup√©rer la liste des plans comptables
   117	   */
   118	  async listPlans(filters?: PlanFilters): Promise<{
   119	    count: number
   120	    results: PlanComptableReference[]
   121	  }> {
   122	    console.log('üîÑ Fetching plans comptables from backend...', filters)
   123	    return apiClient.get(`${this.baseUrl}/plans-reference`, filters)
   124	  }
   125	
   126	  /**
   127	   * R√©cup√©rer tous les plans (sans pagination)
   128	   */
   129	  async getAllPlans(filters?: Omit<PlanFilters, 'page' | 'page_size'>): Promise<PlanComptableReference[]> {
   130	    console.log('üîÑ Fetching all plans comptables...')
   131	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/plans-reference`, { ...filters, page_size: 1000 })
   132	    return data.results || []
   133	  }
   134	
   135	  /**
   136	   * R√©cup√©rer un plan comptable par ID
   137	   */
   138	  async getPlanById(id: number): Promise<PlanComptableReference> {
   139	    console.log(`üîÑ Fetching plan comptable ${id}...`)
   140	    return apiClient.get(`${this.baseUrl}/plans-reference/${id}/`)
   141	  }
   142	
   143	  /**
   144	   * Cr√©er un nouveau plan comptable
   145	   */
   146	  async createPlan(data: Partial<PlanComptableReference>): Promise<PlanComptableReference> {
   147	    console.log('üì§ Creating plan comptable...', data)
   148	    return apiClient.post(`${this.baseUrl}/plans-reference`, data)
   149	  }
   150	
   151	  /**
   152	   * Mettre √† jour un plan comptable
   153	   */
   154	  async updatePlan(id: number, data: Partial<PlanComptableReference>): Promise<PlanComptableReference> {
   155	    console.log(`üì§ Updating plan comptable ${id}...`, data)
   156	    return apiClient.patch(`${this.baseUrl}/plans-reference/${id}/`, data)
   157	  }
   158	
   159	  /**
   160	   * Supprimer un plan comptable
   161	   */
   162	  async deletePlan(id: number): Promise<void> {
   163	    console.log(`üóëÔ∏è Deleting plan comptable ${id}...`)
   164	    return apiClient.delete(`${this.baseUrl}/plans-reference/${id}/`)
   165	  }
   166	
   167	  /**
   168	   * R√©cup√©rer les plans SYSCOHADA actifs
   169	   */
   170	  async getSYSCOHADAPlans(): Promise<PlanComptableReference[]> {
   171	    console.log('üîÑ Fetching SYSCOHADA plans...')
   172	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/plans-reference`, {
   173	      type_plan: 'SYSCOHADA_GENERAL',
   174	      est_actif: true,
   175	      page_size: 100
   176	    })
   177	    return data.results || []
   178	  }
   179	
   180	  // ===== COMPTES DE R√âF√âRENCE =====
   181	
   182	  /**
   183	   * R√©cup√©rer la liste des comptes de r√©f√©rence
   184	   */
   185	  async listComptes(filters?: CompteFilters): Promise<{
   186	    count: number
   187	    results: CompteReference[]
   188	  }> {
   189	    console.log('üîÑ Fetching comptes de r√©f√©rence from backend...', filters)
   190	    return apiClient.get(`${this.baseUrl}/comptes-reference`, filters)
   191	  }
   192	
   193	  /**
   194	   * R√©cup√©rer tous les comptes (sans pagination)
   195	   */
   196	  async getAllComptes(filters?: Omit<CompteFilters, 'page' | 'page_size'>): Promise<CompteReference[]> {
   197	    console.log('üîÑ Fetching all comptes de r√©f√©rence...')
   198	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/comptes-reference`, { ...filters, page_size: 10000 })
   199	    return data.results || []
   200	  }
   201	
   202	  /**
   203	   * R√©cup√©rer un compte de r√©f√©rence par ID
   204	   */
   205	  async getCompteById(id: number): Promise<CompteReference> {
   206	    console.log(`üîÑ Fetching compte de r√©f√©rence ${id}...`)
   207	    return apiClient.get(`${this.baseUrl}/comptes-reference/${id}/`)
   208	  }
   209	
   210	  /**
   211	   * Cr√©er un nouveau compte de r√©f√©rence
   212	   */
   213	  async createCompte(data: Partial<CompteReference>): Promise<CompteReference> {
   214	    console.log('üì§ Creating compte de r√©f√©rence...', data)
   215	    return apiClient.post(`${this.baseUrl}/comptes-reference`, data)
   216	  }
   217	
   218	  /**
   219	   * Mettre √† jour un compte de r√©f√©rence
   220	   */
   221	  async updateCompte(id: number, data: Partial<CompteReference>): Promise<CompteReference> {
   222	    console.log(`üì§ Updating compte de r√©f√©rence ${id}...`, data)
   223	    return apiClient.patch(`${this.baseUrl}/comptes-reference/${id}/`, data)
   224	  }
   225	
   226	  /**
   227	   * Supprimer un compte de r√©f√©rence
   228	   */
   229	  async deleteCompte(id: number): Promise<void> {
   230	    console.log(`üóëÔ∏è Deleting compte de r√©f√©rence ${id}...`)
   231	    return apiClient.delete(`${this.baseUrl}/comptes-reference/${id}/`)
   232	  }
   233	
   234	  /**
   235	   * R√©cup√©rer les comptes d'un plan comptable
   236	   */
   237	  async getComptesByPlan(planId: number): Promise<CompteReference[]> {
   238	    console.log(`üîÑ Fetching comptes for plan ${planId}...`)
   239	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/comptes-reference`, {
   240	      plan_comptable: planId,
   241	      page_size: 10000
   242	    })
   243	    return data.results || []
   244	  }
   245	
   246	  /**
   247	   * R√©cup√©rer les comptes par classe
   248	   */
   249	  async getComptesByClasse(planId: number, classe: string): Promise<CompteReference[]> {
   250	    console.log(`üîÑ Fetching comptes classe ${classe} for plan ${planId}...`)
   251	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/comptes-reference`, {
   252	      plan_comptable: planId,
   253	      classe: classe,
   254	      page_size: 10000
   255	    })
   256	    return data.results || []
   257	  }
   258	
   259	  /**
   260	   * Rechercher des comptes
   261	   */
   262	  async searchComptes(query: string, planId?: number): Promise<CompteReference[]> {
   263	    console.log(`üîç Searching comptes: ${query}...`)
   264	    const data = await apiClient.get<Record<string, any>>(`${this.baseUrl}/comptes-reference`, {
   265	      search: query,
   266	      ...(planId && { plan_comptable: planId }),
   267	      page_size: 100
   268	    })
   269	    return data.results || []
   270	  }
   271	
   272	  // ===== CORRESPONDANCES COMPTABLES =====
   273	
   274	  /**
   275	   * R√©cup√©rer les correspondances comptables
   276	   */
   277	  async listCorrespondances(filters?: { compte_local?: number }): Promise<{
   278	    count: number
   279	    results: CorrespondanceComptable[]
   280	  }> {
   281	    console.log('üîÑ Fetching correspondances comptables...', filters)
   282	    return apiClient.get(`${this.baseUrl}/correspondances`, filters)
   283	  }
   284	
   285	  /**
   286	   * Cr√©er une correspondance comptable
   287	   */
   288	  async createCorrespondance(data: {
   289	    compte_local: number
   290	    compte_syscohada: number
   291	  }): Promise<CorrespondanceComptable> {
   292	    console.log('üì§ Creating correspondance comptable...', data)
   293	    return apiClient.post(`${this.baseUrl}/correspondances`, data)
   294	  }
   295	
   296	  /**
   297	   * Valider une correspondance
   298	   */
   299	  async validateCorrespondance(id: number): Promise<CorrespondanceComptable> {
   300	    console.log(`‚úÖ Validating correspondance ${id}...`)
   301	    return apiClient.patch(`${this.baseUrl}/correspondances/${id}/`, {
   302	      date_validation: new Date().toISOString()
   303	    })
   304	  }
   305	
   306	  // ===== HELPERS =====
   307	
   308	  /**
   309	   * Obtenir le libell√© du type de plan
   310	   */
   311	  getTypePlanLabel(type: PlanComptableReference['type_plan']): string {
   312	    const labels = {
   313	      'SYSCOHADA_GENERAL': 'SYSCOHADA G√©n√©ral',
   314	      'SYSCOHADA_BANQUE': 'SYSCOHADA Bancaire',
   315	      'SYSCOHADA_ASSURANCE': 'SYSCOHADA Assurance',
   316	      'SYSCOHADA_MICROFINANCE': 'SYSCOHADA Microfinance',
   317	      'IFRS_SME': 'IFRS pour PME',
   318	      'IFRS_FULL': 'IFRS Complet',
   319	      'NATIONAL': 'Plan National',
   320	      'PERSONNALISE': 'Plan Personnalis√©'
   321	    }
   322	    return labels[type] || type
   323	  }
   324	
   325	  /**
   326	   * Obtenir la classe d'un compte (premier chiffre)
   327	   */
   328	  getClasse(numero: string): string {
   329	    return numero.charAt(0)
   330	  }
   331	
   332	  /**
   333	   * Obtenir le libell√© de la classe
   334	   */
   335	  getClasseLabel(classe: string): string {
   336	    const labels: Record<string, string> = {
   337	      '1': 'Comptes de ressources durables',
   338	      '2': 'Comptes d\'actif immobilis√©',
   339	      '3': 'Comptes de stocks',
   340	      '4': 'Comptes de tiers',
   341	      '5': 'Comptes de tr√©sorerie',
   342	      '6': 'Comptes de charges',
   343	      '7': 'Comptes de produits',
   344	      '8': 'Comptes de r√©sultats'
   345	    }
   346	    return labels[classe] || `Classe ${classe}`
   347	  }
   348	
   349	  /**
   350	   * V√©rifier si un compte est imputable
   351	   */
   352	  isCompteImputable(compte: CompteReference): boolean {
   353	    return compte.accepte_imputation
   354	  }
   355	
   356	  /**
   357	   * Formater le num√©ro de compte (ajouter espaces selon niveau)
   358	   */
   359	  formatNumeroCompte(numero: string, _niveau: number): string {
   360	    // Formater le num√©ro selon le niveau hi√©rarchique
   361	    // Exemple: niveau 1 = "6", niveau 2 = "60", niveau 3 = "601", etc.
   362	    return numero
   363	  }
   364	}
   365	
   366	export default new PlanComptableService()

================================================================================
FILE: src/services/ratiosService.ts
================================================================================
     1	/**
     2	 * Service de Calcul des Ratios Financiers SYSCOHADA
     3	 * Calculs bas√©s sur la balance et liasse fiscale r√©elle
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	interface LigneBalance {
     9	  numero_compte: string;
    10	  debit: number;
    11	  credit: number;
    12	  libelle: string;
    13	}
    14	
    15	interface RatioFinancier {
    16	  nom: string;
    17	  valeur: string;
    18	  interpretation: string;
    19	  formule: string;
    20	  status: 'excellent' | 'bon' | 'acceptable' | 'critique';
    21	  couleur: string;
    22	  details: {
    23	    numerateur: number;
    24	    denominateur: number;
    25	    pourcentage?: number;
    26	  };
    27	}
    28	
    29	interface IndicateurEntreprise {
    30	  titre: string;
    31	  valeur: string;
    32	  evolution: number;
    33	  tendance: 'up' | 'down' | 'stable';
    34	  couleur: string;
    35	  source: string;
    36	}
    37	
    38	export class RatiosService {
    39	  /**
    40	   * Calcule tous les ratios financiers depuis la balance
    41	   */
    42	  async calculerRatiosDepuisBalance(
    43	    entrepriseId: number,
    44	    exercice: string,
    45	    _signal?: AbortSignal
    46	  ): Promise<{
    47	    ratios: RatioFinancier[];
    48	    kpis: IndicateurEntreprise[];
    49	    situationFinanciere: any;
    50	  }> {
    51	    try {
    52	      // R√©cup√©rer la balance depuis l'API
    53	      const balance = await this.obtenirBalanceEntreprise(entrepriseId, exercice);
    54	      
    55	      // Calculer les agr√©gats SYSCOHADA
    56	      const agregats = this.calculerAgregatsBalance(balance);
    57	      
    58	      // Calculer les ratios financiers
    59	      const ratios = this.calculerRatiosFinanciers(agregats);
    60	      
    61	      // Calculer les KPIs entreprise
    62	      const kpis = this.calculerKPIsEntreprise(agregats);
    63	      
    64	      // Situation financi√®re d√©taill√©e
    65	      const situationFinanciere = this.calculerSituationFinanciere(agregats);
    66	      
    67	      return { ratios, kpis, situationFinanciere };
    68	      
    69	    } catch (error) {
    70	      console.error('Erreur calcul ratios:', error);
    71	      // Retourner des donn√©es par d√©faut en cas d'erreur
    72	      return this.obtenirDonneesParDefaut();
    73	    }
    74	  }
    75	
    76	  /**
    77	   * Calcule les ratios financiers via l'API backend (m√©thode alternative)
    78	   */
    79	  async calculerRatiosDepuisAPI(
    80	    entrepriseId: number,
    81	    exercice: string,
    82	    _signal?: AbortSignal
    83	  ): Promise<{
    84	    ratios: RatioFinancier[];
    85	    kpis: IndicateurEntreprise[];
    86	    situationFinanciere: any;
    87	  }> {
    88	    try {
    89	      // Appel direct √† l'endpoint de calcul des ratios
    90	      const data = await apiClient.get<Record<string, any>>(
    91	        '/api/v1/balance/balances/calculer_ratios_financiers/',
    92	        {
    93	          entreprise: entrepriseId,
    94	          exercice: exercice
    95	        }
    96	      );
    97	
    98	      console.log('üìä Ratios calcul√©s depuis la balance:', data);
    99	
   100	      return {
   101	        ratios: data.ratios || [],
   102	        kpis: data.kpis || [],
   103	        situationFinanciere: data.situation || {}
   104	      };
   105	
   106	    } catch (error) {
   107	      console.error('‚ùå Erreur calcul ratios depuis API:', error);
   108	      // Retourner des donn√©es par d√©faut en cas d'erreur
   109	      return this.obtenirDonneesParDefaut();
   110	    }
   111	  }
   112	
   113	  /**
   114	   * R√©cup√®re la balance depuis l'API backend (m√©thode de fallback)
   115	   */
   116	  private async obtenirBalanceEntreprise(
   117	    entrepriseId: number,
   118	    exercice: string
   119	  ): Promise<LigneBalance[]> {
   120	    const data = await apiClient.get<Record<string, any>>('/api/v1/balance/', {
   121	      entreprise: entrepriseId,
   122	      exercice: exercice
   123	    });
   124	
   125	    return data.results || [];
   126	  }
   127	
   128	  /**
   129	   * Calcule les agr√©gats comptables SYSCOHADA
   130	   */
   131	  private calculerAgregatsBalance(balance: LigneBalance[]) {
   132	    const agregats = {
   133	      // CLASSE 1 - CAPITAUX
   134	      capitaux_propres: 0,
   135	      capital_social: 0,
   136	      reserves: 0,
   137	      resultat_exercice: 0,
   138	      
   139	      // CLASSE 2 - IMMOBILISATIONS  
   140	      immobilisations_brutes: 0,
   141	      amortissements: 0,
   142	      immobilisations_nettes: 0,
   143	      
   144	      // CLASSE 3 - STOCKS
   145	      stocks: 0,
   146	      provisions_stocks: 0,
   147	      stocks_nets: 0,
   148	      
   149	      // CLASSE 4 - TIERS
   150	      clients_bruts: 0,
   151	      provisions_clients: 0,
   152	      clients_nets: 0,
   153	      fournisseurs: 0,
   154	      tva_collectee: 0,
   155	      tva_deductible: 0,
   156	      
   157	      // CLASSE 5 - TR√âSORERIE
   158	      banques: 0,
   159	      caisse: 0,
   160	      tresorerie: 0,
   161	      
   162	      // CLASSE 6 - CHARGES
   163	      achats_marchandises: 0,
   164	      charges_personnel: 0,
   165	      charges_financieres: 0,
   166	      
   167	      // CLASSE 7 - PRODUITS
   168	      chiffre_affaires: 0,
   169	      produits_financiers: 0
   170	    };
   171	
   172	    balance.forEach(ligne => {
   173	      const compte = ligne.numero_compte;
   174	      const solde = ligne.debit - ligne.credit;
   175	      
   176	      // CLASSE 1 - CAPITAUX PROPRES
   177	      if (compte.startsWith('101') || compte.startsWith('102')) {
   178	        agregats.capital_social += -solde; // Cr√©diteur
   179	      } else if (compte.startsWith('111') || compte.startsWith('112')) {
   180	        agregats.reserves += -solde;
   181	      } else if (compte.startsWith('131')) {
   182	        agregats.resultat_exercice += -solde;
   183	      }
   184	      
   185	      // CLASSE 2 - IMMOBILISATIONS
   186	      if (compte.match(/^2[0-7]/)) {
   187	        agregats.immobilisations_brutes += solde;
   188	      } else if (compte.startsWith('28')) {
   189	        agregats.amortissements += -solde; // Cr√©diteur
   190	      }
   191	      
   192	      // CLASSE 3 - STOCKS
   193	      if (compte.match(/^3[1-8]/)) {
   194	        agregats.stocks += solde;
   195	      } else if (compte.startsWith('39')) {
   196	        agregats.provisions_stocks += -solde;
   197	      }
   198	      
   199	      // CLASSE 4 - TIERS
   200	      if (compte.startsWith('411')) {
   201	        agregats.clients_bruts += solde;
   202	      } else if (compte.startsWith('491')) {
   203	        agregats.provisions_clients += -solde;
   204	      } else if (compte.startsWith('401')) {
   205	        agregats.fournisseurs += -solde;
   206	      } else if (compte.startsWith('4431')) {
   207	        agregats.tva_collectee += -solde;
   208	      } else if (compte.startsWith('4452')) {
   209	        agregats.tva_deductible += solde;
   210	      }
   211	      
   212	      // CLASSE 5 - TR√âSORERIE
   213	      if (compte.startsWith('52')) {
   214	        agregats.banques += solde;
   215	      } else if (compte.startsWith('571')) {
   216	        agregats.caisse += solde;
   217	      }
   218	      
   219	      // CLASSE 6 - CHARGES
   220	      if (compte.startsWith('601')) {
   221	        agregats.achats_marchandises += solde;
   222	      } else if (compte.startsWith('64')) {
   223	        agregats.charges_personnel += solde;
   224	      } else if (compte.startsWith('67')) {
   225	        agregats.charges_financieres += solde;
   226	      }
   227	      
   228	      // CLASSE 7 - PRODUITS
   229	      if (compte.startsWith('70')) {
   230	        agregats.chiffre_affaires += -solde;
   231	      } else if (compte.startsWith('77')) {
   232	        agregats.produits_financiers += -solde;
   233	      }
   234	    });
   235	
   236	    // Calculs d√©riv√©s
   237	    agregats.capitaux_propres = agregats.capital_social + agregats.reserves + agregats.resultat_exercice;
   238	    agregats.immobilisations_nettes = agregats.immobilisations_brutes - agregats.amortissements;
   239	    agregats.stocks_nets = agregats.stocks - agregats.provisions_stocks;
   240	    agregats.clients_nets = agregats.clients_bruts - agregats.provisions_clients;
   241	    agregats.tresorerie = agregats.banques + agregats.caisse;
   242	
   243	    return agregats;
   244	  }
   245	
   246	  /**
   247	   * Calcule les 4 ratios financiers principaux
   248	   */
   249	  private calculerRatiosFinanciers(agregats: any): RatioFinancier[] {
   250	    const ratios: RatioFinancier[] = [];
   251	
   252	    // 1. RATIO DE LIQUIDIT√â G√âN√âRALE
   253	    const actif_circulant = agregats.stocks_nets + agregats.clients_nets + agregats.tresorerie;
   254	    const passif_circulant = agregats.fournisseurs; // Simplifi√©
   255	    const liquidite_generale = passif_circulant > 0 ? actif_circulant / passif_circulant : 0;
   256	
   257	    ratios.push({
   258	      nom: 'Ratio de Liquidit√© G√©n√©rale',
   259	      valeur: liquidite_generale.toFixed(2),
   260	      interpretation: this.interpreterLiquidite(liquidite_generale),
   261	      formule: 'Actif Circulant / Passif Circulant',
   262	      status: liquidite_generale >= 2 ? 'excellent' : 
   263	              liquidite_generale >= 1.5 ? 'bon' : 
   264	              liquidite_generale >= 1 ? 'acceptable' : 'critique',
   265	      couleur: liquidite_generale >= 2 ? 'success' : 
   266	               liquidite_generale >= 1.5 ? 'primary' : 
   267	               liquidite_generale >= 1 ? 'warning' : 'error',
   268	      details: {
   269	        numerateur: actif_circulant,
   270	        denominateur: passif_circulant
   271	      }
   272	    });
   273	
   274	    // 2. RATIO D'ENDETTEMENT
   275	    const ratio_endettement = agregats.capitaux_propres > 0 ? 
   276	      agregats.fournisseurs / agregats.capitaux_propres : 0;
   277	
   278	    ratios.push({
   279	      nom: "Ratio d'Endettement",
   280	      valeur: ratio_endettement.toFixed(2),
   281	      interpretation: this.interpreterEndettement(ratio_endettement),
   282	      formule: 'Dettes Totales / Capitaux Propres',
   283	      status: ratio_endettement <= 0.3 ? 'excellent' : 
   284	              ratio_endettement <= 0.5 ? 'bon' : 
   285	              ratio_endettement <= 0.8 ? 'acceptable' : 'critique',
   286	      couleur: ratio_endettement <= 0.3 ? 'success' : 
   287	               ratio_endettement <= 0.5 ? 'primary' : 
   288	               ratio_endettement <= 0.8 ? 'warning' : 'error',
   289	      details: {
   290	        numerateur: agregats.fournisseurs,
   291	        denominateur: agregats.capitaux_propres
   292	      }
   293	    });
   294	
   295	    // 3. RENTABILIT√â FINANCI√àRE (ROE)
   296	    const rentabilite_financiere = agregats.capitaux_propres > 0 ? 
   297	      (agregats.resultat_exercice / agregats.capitaux_propres) * 100 : 0;
   298	
   299	    ratios.push({
   300	      nom: 'Rentabilit√© Financi√®re (ROE)',
   301	      valeur: `${rentabilite_financiere.toFixed(1)}%`,
   302	      interpretation: this.interpreterRentabilite(rentabilite_financiere),
   303	      formule: 'R√©sultat Net / Capitaux Propres √ó 100',
   304	      status: rentabilite_financiere >= 15 ? 'excellent' : 
   305	              rentabilite_financiere >= 10 ? 'bon' : 
   306	              rentabilite_financiere >= 5 ? 'acceptable' : 'critique',
   307	      couleur: rentabilite_financiere >= 15 ? 'success' : 
   308	               rentabilite_financiere >= 10 ? 'primary' : 
   309	               rentabilite_financiere >= 5 ? 'warning' : 'error',
   310	      details: {
   311	        numerateur: agregats.resultat_exercice,
   312	        denominateur: agregats.capitaux_propres,
   313	        pourcentage: rentabilite_financiere
   314	      }
   315	    });
   316	
   317	    // 4. ROTATION DES STOCKS
   318	    const rotation_stocks = agregats.stocks_nets > 0 ? 
   319	      agregats.achats_marchandises / agregats.stocks_nets : 0;
   320	
   321	    ratios.push({
   322	      nom: 'Rotation des Stocks',
   323	      valeur: rotation_stocks.toFixed(1),
   324	      interpretation: this.interpreterRotationStocks(rotation_stocks),
   325	      formule: 'CAMV / Stock Moyen',
   326	      status: rotation_stocks >= 8 ? 'excellent' : 
   327	              rotation_stocks >= 6 ? 'bon' : 
   328	              rotation_stocks >= 4 ? 'acceptable' : 'critique',
   329	      couleur: rotation_stocks >= 8 ? 'success' : 
   330	               rotation_stocks >= 6 ? 'primary' : 
   331	               rotation_stocks >= 4 ? 'warning' : 'error',
   332	      details: {
   333	        numerateur: agregats.achats_marchandises,
   334	        denominateur: agregats.stocks_nets
   335	      }
   336	    });
   337	
   338	    return ratios;
   339	  }
   340	
   341	  /**
   342	   * Calcule les KPIs entreprise depuis les donn√©es r√©elles
   343	   */
   344	  private calculerKPIsEntreprise(agregats: any): IndicateurEntreprise[] {
   345	    const kpis: IndicateurEntreprise[] = [];
   346	
   347	    // 1. CHIFFRE D'AFFAIRES
   348	    kpis.push({
   349	      titre: "Chiffre d'Affaires",
   350	      valeur: this.formaterMontant(agregats.chiffre_affaires),
   351	      evolution: 0, // √Ä calculer avec exercice pr√©c√©dent
   352	      tendance: 'stable',
   353	      couleur: 'primary',
   354	      source: 'Comptes 70* (Balance)'
   355	    });
   356	
   357	    // 2. R√âSULTAT NET
   358	    const evolution_resultat = agregats.resultat_exercice > 0 ? 15.3 : -8.2; // √Ä calculer r√©ellement
   359	    
   360	    kpis.push({
   361	      titre: 'R√©sultat Net',
   362	      valeur: this.formaterMontant(agregats.resultat_exercice),
   363	      evolution: evolution_resultat,
   364	      tendance: agregats.resultat_exercice > 0 ? 'up' : 'down',
   365	      couleur: agregats.resultat_exercice > 0 ? 'success' : 'error',
   366	      source: 'Compte 131 (Balance)'
   367	    });
   368	
   369	    // 3. TR√âSORERIE
   370	    const evolution_tresorerie = -2.1; // √Ä calculer r√©ellement
   371	    
   372	    kpis.push({
   373	      titre: 'Tr√©sorerie',
   374	      valeur: this.formaterMontant(agregats.tresorerie),
   375	      evolution: evolution_tresorerie,
   376	      tendance: evolution_tresorerie > 0 ? 'up' : 'down',
   377	      couleur: agregats.tresorerie > 100000 ? 'primary' : 'warning',
   378	      source: 'Comptes 52*/571 (Balance)'
   379	    });
   380	
   381	    // 4. FONDS DE ROULEMENT
   382	    const fonds_roulement = agregats.capitaux_propres - agregats.immobilisations_nettes;
   383	    
   384	    kpis.push({
   385	      titre: 'Fonds de Roulement',
   386	      valeur: this.formaterMontant(fonds_roulement),
   387	      evolution: 5.8,
   388	      tendance: fonds_roulement > 0 ? 'up' : 'down',
   389	      couleur: fonds_roulement > 0 ? 'success' : 'error',
   390	      source: 'Calcul√© SYSCOHADA (CP - Immo)'
   391	    });
   392	
   393	    return kpis;
   394	  }
   395	
   396	  /**
   397	   * Calcule la situation financi√®re d√©taill√©e
   398	   */
   399	  private calculerSituationFinanciere(agregats: any) {
   400	    const total_actif = agregats.immobilisations_nettes + agregats.stocks_nets + 
   401	                       agregats.clients_nets + agregats.tresorerie;
   402	    
   403	    const ratio_solvabilite = total_actif > 0 ? 
   404	      (agregats.capitaux_propres / total_actif) * 100 : 0;
   405	
   406	    return {
   407	      total_actif: this.formaterMontant(total_actif),
   408	      capitaux_propres: this.formaterMontant(agregats.capitaux_propres),
   409	      dettes_totales: this.formaterMontant(agregats.fournisseurs), // Simplifi√©
   410	      ratio_solvabilite: Math.round(ratio_solvabilite),
   411	      status_financier: ratio_solvabilite >= 50 ? 'saine' : 
   412	                       ratio_solvabilite >= 30 ? 'acceptable' : 'critique'
   413	    };
   414	  }
   415	
   416	  // M√©thodes d'interpr√©tation des ratios
   417	
   418	  private interpreterLiquidite(ratio: number): string {
   419	    if (ratio >= 2) return 'Excellente liquidit√© - Capacit√© √©lev√©e √† honorer les dettes CT';
   420	    if (ratio >= 1.5) return 'Bonne liquidit√© - Situation financi√®re saine';
   421	    if (ratio >= 1) return 'Liquidit√© acceptable - Surveillance recommand√©e';
   422	    return 'Risque de liquidit√© - Difficult√©s potentielles √† payer les dettes';
   423	  }
   424	
   425	  private interpreterEndettement(ratio: number): string {
   426	    if (ratio <= 0.3) return 'Endettement faible - Structure financi√®re solide';
   427	    if (ratio <= 0.5) return 'Endettement mod√©r√© - Situation √©quilibr√©e';
   428	    if (ratio <= 0.8) return 'Endettement √©lev√© - Surveillance n√©cessaire';
   429	    return 'Endettement excessif - Risque financier important';
   430	  }
   431	
   432	  private interpreterRentabilite(ratio: number): string {
   433	    if (ratio >= 15) return 'Rentabilit√© excellente - Tr√®s attractif pour investisseurs';
   434	    if (ratio >= 10) return 'Bonne rentabilit√© - Performance satisfaisante';
   435	    if (ratio >= 5) return 'Rentabilit√© acceptable - Peut √™tre am√©lior√©e';
   436	    return 'Rentabilit√© faible - Probl√®me de performance';
   437	  }
   438	
   439	  private interpreterRotationStocks(ratio: number): string {
   440	    if (ratio >= 8) return 'Rotation rapide - Gestion efficace des stocks';
   441	    if (ratio >= 6) return 'Rotation correcte - Gestion satisfaisante';
   442	    if (ratio >= 4) return 'Rotation acceptable - Optimisation possible';
   443	    return 'Rotation lente - Stocks dormants, immobilisation excessive';
   444	  }
   445	
   446	  /**
   447	   * Formate un montant en FCFA
   448	   */
   449	  private formaterMontant(montant: number): string {
   450	    if (Math.abs(montant) >= 1000000) {
   451	      return `${(montant / 1000000).toFixed(1)}M XOF`;
   452	    } else if (Math.abs(montant) >= 1000) {
   453	      return `${(montant / 1000).toFixed(0)}K XOF`;
   454	    } else {
   455	      return `${montant.toFixed(0)} XOF`;
   456	    }
   457	  }
   458	
   459	  /**
   460	   * Donn√©es par d√©faut en cas d'erreur API
   461	   */
   462	  private obtenirDonneesParDefaut() {
   463	    return {
   464	      ratios: [
   465	        {
   466	          nom: 'Ratio de Liquidit√© G√©n√©rale',
   467	          valeur: '1.8',
   468	          interpretation: 'Bonne liquidit√© - Situation financi√®re saine',
   469	          formule: 'Actif Circulant / Passif Circulant',
   470	          status: 'bon' as const,
   471	          couleur: 'primary',
   472	          details: { numerateur: 0, denominateur: 0 }
   473	        },
   474	        {
   475	          nom: "Ratio d'Endettement", 
   476	          valeur: '0.45',
   477	          interpretation: 'Endettement mod√©r√© - Situation √©quilibr√©e',
   478	          formule: 'Dettes Totales / Capitaux Propres',
   479	          status: 'bon' as const,
   480	          couleur: 'primary',
   481	          details: { numerateur: 0, denominateur: 0 }
   482	        }
   483	      ],
   484	      kpis: [
   485	        {
   486	          titre: "Chiffre d'Affaires",
   487	          valeur: "Connexion API...",
   488	          evolution: 0,
   489	          tendance: 'stable' as const,
   490	          couleur: 'primary',
   491	          source: 'En attente de donn√©es'
   492	        }
   493	      ],
   494	      situationFinanciere: {
   495	        total_actif: "Calcul en cours...",
   496	        capitaux_propres: "Calcul en cours...",
   497	        status_financier: 'En attente'
   498	      }
   499	    };
   500	  }
   501	}
   502	
   503	export const ratiosService = new RatiosService();
================================================================================
FILE: src/services/regionalService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des param√®tres r√©gionaux via l'API
     3	 */
     4	
     5	import { apiClient } from './apiClient'
     6	
     7	export interface RegionalSettings {
     8	  id?: number
     9	  entreprise: number
    10	  pays: number
    11	  pays_detail?: {
    12	    id: number
    13	    nom: string
    14	    code: string
    15	  }
    16	  langue_principale: string
    17	  langues_secondaires: string[]
    18	  timezone: string
    19	  devise_principale: number
    20	  devise_principale_detail?: {
    21	    id: number
    22	    nom: string
    23	    code: string
    24	    symbole: string
    25	  }
    26	  devises_secondaires: number[]
    27	  devises_secondaires_detail?: Array<{
    28	    id: number
    29	    nom: string
    30	    code: string
    31	    symbole: string
    32	  }>
    33	  format_date: string
    34	  format_nombre: string
    35	  separateur_milliers: string
    36	  separateur_decimal: string
    37	  symbole_devise_avant: boolean
    38	  debut_exercice_fiscal: string
    39	  fin_exercice_fiscal: string
    40	  jours_ouvres: number[]
    41	  jours_feries_nationaux: string[]
    42	  afficher_codes_pays: boolean
    43	  utiliser_noms_locaux: boolean
    44	  created_at?: string
    45	  updated_at?: string
    46	}
    47	
    48	export interface DefaultSettings {
    49	  langue_principale: string
    50	  timezone: string
    51	  format_date: string
    52	  format_nombre: string
    53	  separateur_milliers: string
    54	  separateur_decimal: string
    55	  debut_exercice_fiscal: string
    56	  fin_exercice_fiscal: string
    57	  jours_ouvres: number[]
    58	}
    59	
    60	export interface TimezoneOption {
    61	  code: string
    62	  label: string
    63	  offset: string
    64	}
    65	
    66	class RegionalService {
    67	  private baseUrl = '/api/v1/parametrage/regional-settings'
    68	
    69	  // R√©cup√©rer les param√®tres r√©gionaux d'une entreprise
    70	  async getRegionalSettings(entrepriseId: number): Promise<RegionalSettings | null> {
    71	    try {
    72	      const data = await apiClient.get<{ results?: RegionalSettings[] } | RegionalSettings[]>(`${this.baseUrl}/?entreprise=${entrepriseId}`)
    73	      const results = Array.isArray(data) ? data : (data.results || [])
    74	      return results.length > 0 ? results[0] : null
    75	    } catch (error) {
    76	      console.error('Erreur lors de la r√©cup√©ration des param√®tres r√©gionaux:', error)
    77	      throw error
    78	    }
    79	  }
    80	
    81	  // Cr√©er les param√®tres r√©gionaux
    82	  async createRegionalSettings(settings: Omit<RegionalSettings, 'id' | 'created_at' | 'updated_at'>): Promise<RegionalSettings> {
    83	    try {
    84	      const data = await apiClient.post<RegionalSettings>(this.baseUrl + '/', settings)
    85	      return data
    86	    } catch (error) {
    87	      console.error('Erreur lors de la cr√©ation des param√®tres r√©gionaux:', error)
    88	      throw error
    89	    }
    90	  }
    91	
    92	  // Mettre √† jour les param√®tres r√©gionaux
    93	  async updateRegionalSettings(id: number, settings: Partial<RegionalSettings>): Promise<RegionalSettings> {
    94	    try {
    95	      const data = await apiClient.patch<RegionalSettings>(`${this.baseUrl}/${id}/`, settings)
    96	      return data
    97	    } catch (error) {
    98	      console.error('Erreur lors de la mise √† jour des param√®tres r√©gionaux:', error)
    99	      throw error
   100	    }
   101	  }
   102	
   103	  // R√©cup√©rer les param√®tres par d√©faut selon le pays
   104	  async getDefaultSettings(paysCode: string = 'CI'): Promise<DefaultSettings> {
   105	    try {
   106	      const data = await apiClient.get<DefaultSettings>(`${this.baseUrl}/default_settings/?pays=${paysCode}`)
   107	      return data
   108	    } catch (error) {
   109	      console.error('Erreur lors de la r√©cup√©ration des param√®tres par d√©faut:', error)
   110	      throw error
   111	    }
   112	  }
   113	
   114	  // R√©cup√©rer la liste des fuseaux horaires
   115	  async getTimezones(): Promise<TimezoneOption[]> {
   116	    try {
   117	      const data = await apiClient.get<TimezoneOption[]>(`${this.baseUrl}/timezones/`)
   118	      return data
   119	    } catch (error) {
   120	      console.error('Erreur lors de la r√©cup√©ration des fuseaux horaires:', error)
   121	      throw error
   122	    }
   123	  }
   124	
   125	  // Cr√©er ou mettre √† jour les param√®tres r√©gionaux
   126	  async saveRegionalSettings(
   127	    entrepriseId: number,
   128	    settings: Omit<RegionalSettings, 'id' | 'created_at' | 'updated_at'>
   129	  ): Promise<RegionalSettings> {
   130	    const existingSettings = await this.getRegionalSettings(entrepriseId)
   131	
   132	    if (existingSettings) {
   133	      return this.updateRegionalSettings(existingSettings.id!, settings)
   134	    } else {
   135	      return this.createRegionalSettings({ ...settings, entreprise: entrepriseId })
   136	    }
   137	  }
   138	
   139	  // Valider les jours ouvr√©s (0=lundi, 6=dimanche)
   140	  validateJoursOuvres(jours: number[]): boolean {
   141	    return jours.every(jour => Number.isInteger(jour) && jour >= 0 && jour <= 6)
   142	  }
   143	
   144	  // Valider le format de date fiscal (MM-JJ)
   145	  validateDateFiscale(date: string): boolean {
   146	    const regex = /^\d{2}-\d{2}$/
   147	    if (!regex.test(date)) return false
   148	
   149	    const [month, day] = date.split('-').map(Number)
   150	    return month >= 1 && month <= 12 && day >= 1 && day <= 31
   151	  }
   152	
   153	  // Obtenir les langues disponibles
   154	  getLanguesDisponibles() {
   155	    return [
   156	      { code: 'fr', label: 'Fran√ßais' },
   157	      { code: 'en', label: 'English' },
   158	      { code: 'pt', label: 'Portugu√™s' },
   159	      { code: 'ar', label: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' },
   160	      { code: 'sw', label: 'Kiswahili' },
   161	    ]
   162	  }
   163	
   164	  // Obtenir les formats de date disponibles
   165	  getFormatsDate() {
   166	    return [
   167	      { code: 'DD/MM/YYYY', label: 'JJ/MM/AAAA' },
   168	      { code: 'MM/DD/YYYY', label: 'MM/JJ/AAAA' },
   169	      { code: 'YYYY-MM-DD', label: 'AAAA-MM-JJ' },
   170	      { code: 'DD-MM-YYYY', label: 'JJ-MM-AAAA' },
   171	    ]
   172	  }
   173	
   174	  // Obtenir les formats de nombre disponibles
   175	  getFormatsNombre() {
   176	    return [
   177	      { code: 'FR', label: 'Fran√ßais (1 234,56)' },
   178	      { code: 'EN', label: 'Anglais (1,234.56)' },
   179	      { code: 'SPACE', label: 'Espaces (1 234.56)' },
   180	    ]
   181	  }
   182	
   183	  // Obtenir les jours de la semaine
   184	  getJoursSemaine() {
   185	    return [
   186	      { value: 0, label: 'Lundi' },
   187	      { value: 1, label: 'Mardi' },
   188	      { value: 2, label: 'Mercredi' },
   189	      { value: 3, label: 'Jeudi' },
   190	      { value: 4, label: 'Vendredi' },
   191	      { value: 5, label: 'Samedi' },
   192	      { value: 6, label: 'Dimanche' },
   193	    ]
   194	  }
   195	}
   196	
   197	export const regionalService = new RegionalService()
================================================================================
FILE: src/services/reportingService.ts
================================================================================
     1	/**
     2	 * Service pour la g√©n√©ration de rapports et statistiques
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface Report {
     9	  id: string
    10	  nom: string
    11	  type_rapport: 'FINANCIAL' | 'TAX' | 'AUDIT' | 'COMPLIANCE' | 'DASHBOARD'
    12	  periode_debut: string
    13	  periode_fin: string
    14	  entreprise: string
    15	  entreprise_detail?: {
    16	    raison_sociale: string
    17	    numero_contribuable: string
    18	  }
    19	  exercice?: string
    20	  format: 'PDF' | 'EXCEL' | 'CSV' | 'JSON'
    21	  statut: 'EN_PREPARATION' | 'EN_COURS' | 'TERMINE' | 'ERREUR'
    22	  progression: number
    23	  fichier_url?: string
    24	  fichier_genere?: string
    25	  taille_fichier?: number
    26	  nb_pages?: number
    27	  parametres: {
    28	    inclure_details: boolean
    29	    inclure_graphiques: boolean
    30	    inclure_comparaisons: boolean
    31	    niveau_detail: 'RESUME' | 'STANDARD' | 'DETAILLE'
    32	  }
    33	  metadata?: {
    34	    auteur: string
    35	    date_generation: string
    36	    version: string
    37	    signature_digitale?: string
    38	  }
    39	  erreurs?: Array<{
    40	    code: string
    41	    message: string
    42	    ligne?: number
    43	  }>
    44	  created_at: string
    45	  updated_at: string
    46	}
    47	
    48	export interface ReportTemplate {
    49	  id: string
    50	  nom: string
    51	  description: string
    52	  type_rapport: string
    53	  format_defaut: string
    54	  sections: Array<{
    55	    id: string
    56	    nom: string
    57	    ordre: number
    58	    obligatoire: boolean
    59	    parametres: any
    60	  }>
    61	  is_public: boolean
    62	  created_by: string
    63	  usage_count: number
    64	}
    65	
    66	export interface DashboardStats {
    67	  entreprises_total: number
    68	  liasses_ce_mois: number
    69	  audits_en_cours: number
    70	  revenue_mensuel: number
    71	  croissance_mensuelle: number
    72	  top_erreurs: Array<{
    73	    type: string
    74	    count: number
    75	    pourcentage: number
    76	  }>
    77	  performance: {
    78	    temps_moyen_generation: number
    79	    taux_reussite: number
    80	    satisfaction_client: number
    81	  }
    82	}
    83	
    84	export interface AnalyticsData {
    85	  periode: string
    86	  metriques: {
    87	    utilisateurs_actifs: number
    88	    sessions_totales: number
    89	    temps_moyen_session: number
    90	    pages_vues: number
    91	    taux_rebond: number
    92	  }
    93	  utilisation_modules: Array<{
    94	    module: string
    95	    nb_utilisations: number
    96	    temps_total: number
    97	  }>
    98	  erreurs_frequentes: Array<{
    99	    type: string
   100	    message: string
   101	    occurences: number
   102	  }>
   103	}
   104	
   105	export interface ReportRequest {
   106	  type_rapport: 'FINANCIAL' | 'TAX' | 'AUDIT' | 'COMPLIANCE' | 'DASHBOARD'
   107	  entreprise_id?: string
   108	  exercice_id?: string
   109	  periode_debut: string
   110	  periode_fin: string
   111	  format: 'PDF' | 'EXCEL' | 'CSV' | 'JSON'
   112	  template_id?: string
   113	  parametres?: {
   114	    inclure_details: boolean
   115	    inclure_graphiques: boolean
   116	    inclure_comparaisons: boolean
   117	    niveau_detail: 'RESUME' | 'STANDARD' | 'DETAILLE'
   118	    filtres_specifiques?: any
   119	  }
   120	}
   121	
   122	class ReportingService {
   123	  private baseUrl = '/api/v1/reporting'
   124	
   125	  // G√©n√©ration de rapports - CONNEXION R√âELLE AU BACKEND
   126	  async generateReport(request: ReportRequest): Promise<Report> {
   127	    console.log('üì§ Starting report generation in backend...', request)
   128	    return apiClient.post(`${this.baseUrl}/reports/`, request)
   129	  }
   130	
   131	  async getReports(params?: {
   132	    type_rapport?: string
   133	    entreprise?: string
   134	    exercice?: string
   135	    statut?: string
   136	    periode_debut?: string
   137	    periode_fin?: string
   138	    page?: number
   139	    page_size?: number
   140	  }) {
   141	    console.log('üîÑ Fetching reports from backend...', params)
   142	    return apiClient.get(`${this.baseUrl}/reports/`, params)
   143	  }
   144	
   145	  async getReport(id: string): Promise<Report> {
   146	    console.log(`üîÑ Fetching report ${id} from backend...`)
   147	    return apiClient.get(`${this.baseUrl}/reports/${id}/`)
   148	  }
   149	
   150	  async getReportStatus(id: string): Promise<Report> {
   151	    console.log(`üîÑ Getting report status ${id} from backend...`)
   152	    return apiClient.get(`${this.baseUrl}/reports/${id}/status/`)
   153	  }
   154	
   155	  async cancelReport(id: string): Promise<void> {
   156	    console.log(`üõë Cancelling report ${id} on backend...`)
   157	    return apiClient.post(`${this.baseUrl}/reports/${id}/cancel/`)
   158	  }
   159	
   160	  async downloadReport(id: string): Promise<Blob> {
   161	    console.log(`üì• Downloading report ${id} from backend...`)
   162	    const response = await apiClient.client.get(`${this.baseUrl}/reports/${id}/download/`, {
   163	      responseType: 'blob'
   164	    })
   165	    return response.data
   166	  }
   167	
   168	  // Templates de rapports - CONNEXION R√âELLE AU BACKEND
   169	  async getReportTemplates(params?: {
   170	    type_rapport?: string
   171	    is_public?: boolean
   172	    page?: number
   173	  }) {
   174	    console.log('üîÑ Fetching report templates from backend...', params)
   175	    return apiClient.get(`${this.baseUrl}/templates/`, params)
   176	  }
   177	
   178	  async getReportTemplate(id: string): Promise<ReportTemplate> {
   179	    console.log(`üîÑ Fetching report template ${id} from backend...`)
   180	    return apiClient.get(`${this.baseUrl}/templates/${id}/`)
   181	  }
   182	
   183	  async createReportTemplate(template: Partial<ReportTemplate>): Promise<ReportTemplate> {
   184	    console.log('üì§ Creating report template in backend...', template)
   185	    return apiClient.post(`${this.baseUrl}/templates/`, template)
   186	  }
   187	
   188	  async updateReportTemplate(id: string, template: Partial<ReportTemplate>): Promise<ReportTemplate> {
   189	    console.log(`üì§ Updating report template ${id} in backend...`)
   190	    return apiClient.patch(`${this.baseUrl}/templates/${id}/`, template)
   191	  }
   192	
   193	  async deleteReportTemplate(id: string): Promise<void> {
   194	    console.log(`üóëÔ∏è Deleting report template ${id} from backend...`)
   195	    return apiClient.delete(`${this.baseUrl}/templates/${id}/`)
   196	  }
   197	
   198	  async duplicateReportTemplate(id: string, newName: string): Promise<ReportTemplate> {
   199	    console.log(`üìã Duplicating report template ${id} as ${newName}...`)
   200	    return apiClient.post(`${this.baseUrl}/templates/${id}/duplicate/`, { nom: newName })
   201	  }
   202	
   203	  // Dashboard et statistiques - CONNEXION R√âELLE AU BACKEND
   204	  async getDashboardStats(params?: {
   205	    periode?: string
   206	    entreprise?: string
   207	  }): Promise<DashboardStats> {
   208	    console.log('üìä Getting dashboard stats from backend...', params)
   209	    return apiClient.get(`${this.baseUrl}/reports/stats/`, params)
   210	  }
   211	
   212	  async getAnalytics(params?: {
   213	    periode_debut?: string
   214	    periode_fin?: string
   215	    granularite?: 'HOUR' | 'DAY' | 'WEEK' | 'MONTH'
   216	  }): Promise<AnalyticsData> {
   217	    console.log('üìà Getting analytics data from backend...', params)
   218	    return apiClient.get(`${this.baseUrl}/analytics/`, params)
   219	  }
   220	
   221	  async getPerformanceMetrics(params?: {
   222	    module?: string
   223	    periode?: string
   224	  }) {
   225	    console.log('‚ö° Getting performance metrics from backend...', params)
   226	    return apiClient.get(`${this.baseUrl}/performance/`, params)
   227	  }
   228	
   229	  // Rapports pr√©d√©finis - CONNEXION R√âELLE AU BACKEND
   230	  async getFinancialReport(entreprise_id: string, exercice_id: string, options?: {
   231	    inclure_comparaison: boolean
   232	    format: 'PDF' | 'EXCEL'
   233	  }) {
   234	    console.log(`üìä Generating financial report for entreprise ${entreprise_id}...`)
   235	    return apiClient.post(`${this.baseUrl}/predefined/financial/`, {
   236	      entreprise_id,
   237	      exercice_id,
   238	      ...options
   239	    })
   240	  }
   241	
   242	  async getTaxReport(entreprise_id: string, exercice_id: string, options?: {
   243	    type_impot: string[]
   244	    format: 'PDF' | 'EXCEL'
   245	  }) {
   246	    console.log(`üßæ Generating tax report for entreprise ${entreprise_id}...`)
   247	    return apiClient.post(`${this.baseUrl}/predefined/tax/`, {
   248	      entreprise_id,
   249	      exercice_id,
   250	      ...options
   251	    })
   252	  }
   253	
   254	  async getAuditReport(audit_session_id: string, options?: {
   255	    inclure_recommandations: boolean
   256	    niveau_detail: 'RESUME' | 'DETAILLE'
   257	    format: 'PDF' | 'EXCEL'
   258	  }) {
   259	    console.log(`üîç Generating audit report for session ${audit_session_id}...`)
   260	    return apiClient.post(`${this.baseUrl}/predefined/audit/`, {
   261	      audit_session_id,
   262	      ...options
   263	    })
   264	  }
   265	
   266	  async getComplianceReport(entreprise_id: string, periode_debut: string, periode_fin: string) {
   267	    console.log(`üìã Generating compliance report for entreprise ${entreprise_id}...`)
   268	    return apiClient.post(`${this.baseUrl}/predefined/compliance/`, {
   269	      entreprise_id,
   270	      periode_debut,
   271	      periode_fin
   272	    })
   273	  }
   274	
   275	  // Export et partage - CONNEXION R√âELLE AU BACKEND
   276	  async shareReport(id: string, options: {
   277	    emails: string[]
   278	    message?: string
   279	    expiration_date?: string
   280	    require_password: boolean
   281	  }) {
   282	    console.log(`üì§ Sharing report ${id}...`)
   283	    return apiClient.post(`${this.baseUrl}/reports/${id}/share/`, options)
   284	  }
   285	
   286	  async scheduleReport(template_id: string, schedule: {
   287	    cron_expression: string
   288	    destinataires: string[]
   289	    parametres: any
   290	  }) {
   291	    console.log(`‚è∞ Scheduling report with template ${template_id}...`)
   292	    return apiClient.post(`${this.baseUrl}/schedule/`, {
   293	      template_id,
   294	      ...schedule
   295	    })
   296	  }
   297	
   298	  async getScheduledReports() {
   299	    console.log('üîÑ Fetching scheduled reports from backend...')
   300	    return apiClient.get(`${this.baseUrl}/schedule/`)
   301	  }
   302	
   303	  async updateScheduledReport(id: string, schedule: Partial<any>) {
   304	    console.log(`üì§ Updating scheduled report ${id}...`)
   305	    return apiClient.patch(`${this.baseUrl}/schedule/${id}/`, schedule)
   306	  }
   307	
   308	  async deleteScheduledReport(id: string): Promise<void> {
   309	    console.log(`üóëÔ∏è Deleting scheduled report ${id}...`)
   310	    return apiClient.delete(`${this.baseUrl}/schedule/${id}/`)
   311	  }
   312	
   313	  // Historique et comparaisons - CONNEXION R√âELLE AU BACKEND
   314	  async getReportHistory(params?: {
   315	    entreprise?: string
   316	    type_rapport?: string
   317	    limit?: number
   318	  }) {
   319	    console.log('üîÑ Getting report history from backend...', params)
   320	    return apiClient.get(`${this.baseUrl}/history/`, params)
   321	  }
   322	
   323	  async compareReports(report1_id: string, report2_id: string) {
   324	    console.log(`üìä Comparing reports ${report1_id} and ${report2_id}...`)
   325	    return apiClient.get(`${this.baseUrl}/compare/`, {
   326	      report1: report1_id,
   327	      report2: report2_id
   328	    })
   329	  }
   330	
   331	  // Validation et qualit√© - CONNEXION R√âELLE AU BACKEND
   332	  async validateReportData(data: any) {
   333	    console.log('üîç Validating report data on backend...')
   334	    return apiClient.post(`${this.baseUrl}/validate/`, data)
   335	  }
   336	
   337	  async getDataQualityReport(entreprise_id: string, exercice_id: string) {
   338	    console.log(`üìä Getting data quality report for entreprise ${entreprise_id}...`)
   339	    return apiClient.get(`${this.baseUrl}/data-quality/`, {
   340	      entreprise: entreprise_id,
   341	      exercice: exercice_id
   342	    })
   343	  }
   344	
   345	  // KPI Management - CONNEXION R√âELLE AU BACKEND
   346	  async getKPIs(params?: { entreprise?: string; page?: number; page_size?: number }) {
   347	    console.log('üìä Getting KPIs from backend...', params)
   348	    return apiClient.get(`${this.baseUrl}/kpis/`, params)
   349	  }
   350	
   351	  async getKPIHistory(id: string, params?: { periode_debut?: string; periode_fin?: string }) {
   352	    console.log(`üìà Getting KPI history for ${id}...`)
   353	    return apiClient.get(`${this.baseUrl}/kpis/${id}/history/`, params)
   354	  }
   355	
   356	  async getKPIAlertes(params?: { entreprise?: string; active_only?: boolean }) {
   357	    console.log('üö® Getting KPI alerts from backend...', params)
   358	    return apiClient.get(`${this.baseUrl}/kpi-alerts/`, params)
   359	  }
   360	
   361	  async createKPI(kpi: any) {
   362	    console.log('üì§ Creating KPI in backend...', kpi)
   363	    return apiClient.post(`${this.baseUrl}/kpis/`, kpi)
   364	  }
   365	
   366	  async updateKPI(id: string, kpi: any) {
   367	    console.log(`üì§ Updating KPI ${id} in backend...`)
   368	    return apiClient.patch(`${this.baseUrl}/kpis/${id}/`, kpi)
   369	  }
   370	
   371	  async deleteKPI(id: string) {
   372	    console.log(`üóëÔ∏è Deleting KPI ${id} from backend...`)
   373	    return apiClient.delete(`${this.baseUrl}/kpis/${id}/`)
   374	  }
   375	
   376	  async recalculateKPI(id: string) {
   377	    console.log(`üîÑ Recalculating KPI ${id}...`)
   378	    return apiClient.post(`${this.baseUrl}/kpis/${id}/recalculate/`)
   379	  }
   380	
   381	  async resolveKPIAlerte(id: string) {
   382	    console.log(`‚úÖ Resolving KPI alert ${id}...`)
   383	    return apiClient.patch(`${this.baseUrl}/kpi-alerts/${id}/`, { resolved: true })
   384	  }
   385	
   386	  // Method aliases for compatibility
   387	  async getDashboardStatistics(params?: any) {
   388	    return this.getDashboardStats(params)
   389	  }
   390	
   391	  async lancerExport(request: ReportRequest) {
   392	    return this.generateReport(request)
   393	  }
   394	
   395	  async getExport(id: string) {
   396	    return this.getReport(id)
   397	  }
   398	}
   399	
   400	export const reportingService = new ReportingService()
   401	export default reportingService
================================================================================
FILE: src/services/syscohadaReferenceService.ts
================================================================================
     1	/**
     2	 * Service de R√©f√©rence SYSCOHADA R√©vis√©
     3	 * Recherche unifi√©e dans le plan comptable, le fonctionnement et les op√©rations
     4	 */
     5	
     6	import type { CompteComptable, FonctionnementCompte, ChapitreOperations } from '../data/syscohada/types'
     7	import {
     8	  PLAN_SYSCOHADA_REVISE,
     9	  getSYSCOHADAAccountByNumber,
    10	  getSYSCOHADAAccountsByClass,
    11	  searchSYSCOHADAAccounts,
    12	  getParentAccount,
    13	  getChildAccounts,
    14	  validateSYSCOHADAAccount,
    15	} from '../data/syscohada/plan'
    16	import { getFonctionnement, searchFonctionnement } from '../data/syscohada/fonctionnement'
    17	import { loadChapitre, findChapitresByCompte, searchOperations, CHAPITRES_SOMMAIRE } from '../data/syscohada/operations'
    18	
    19	/** D√©tail complet d'un compte */
    20	export interface AccountDetail {
    21	  compte: CompteComptable
    22	  parent?: CompteComptable
    23	  children: CompteComptable[]
    24	  fonctionnement?: FonctionnementCompte
    25	  chapitresLies: ChapitreOperations[]
    26	}
    27	
    28	/** R√©sultat de recherche globale */
    29	export interface SearchResult {
    30	  type: 'compte' | 'fonctionnement' | 'operation'
    31	  compte?: CompteComptable
    32	  fonctionnement?: FonctionnementCompte
    33	  chapitre?: ChapitreOperations
    34	  score: number
    35	  highlight: string
    36	}
    37	
    38	class SYSCOHADAReferenceService {
    39	  /** Obtenir le d√©tail complet d'un compte */
    40	  async getAccountDetail(numero: string): Promise<AccountDetail | null> {
    41	    const compte = getSYSCOHADAAccountByNumber(numero)
    42	    if (!compte) return null
    43	
    44	    const [fonctionnement, chapitresLies] = await Promise.all([
    45	      getFonctionnement(numero),
    46	      findChapitresByCompte(numero),
    47	    ])
    48	
    49	    return {
    50	      compte,
    51	      parent: getParentAccount(numero),
    52	      children: getChildAccounts(numero),
    53	      fonctionnement,
    54	      chapitresLies,
    55	    }
    56	  }
    57	
    58	  /** Recherche globale dans tout le r√©f√©rentiel SYSCOHADA */
    59	  async search(query: string, options?: { limit?: number }): Promise<SearchResult[]> {
    60	    const limit = options?.limit ?? 50
    61	    const results: SearchResult[] = []
    62	    const q = query.toLowerCase().trim()
    63	    if (!q) return []
    64	
    65	    // 1. Recherche dans le plan comptable
    66	    const comptes = searchSYSCOHADAAccounts(q, { limit: 20 })
    67	    for (const compte of comptes) {
    68	      const score = compte.numero.includes(q) ? 10 : 5
    69	      results.push({
    70	        type: 'compte',
    71	        compte,
    72	        score,
    73	        highlight: `${compte.numero} - ${compte.libelle}`,
    74	      })
    75	    }
    76	
    77	    // 2. Recherche dans le fonctionnement
    78	    const fonctionnements = await searchFonctionnement(q)
    79	    for (const f of fonctionnements.slice(0, 15)) {
    80	      // Skip if already found as a compte result
    81	      if (results.some(r => r.type === 'compte' && r.compte?.numero === f.numero)) continue
    82	      results.push({
    83	        type: 'fonctionnement',
    84	        fonctionnement: f,
    85	        compte: getSYSCOHADAAccountByNumber(f.numero),
    86	        score: 3,
    87	        highlight: `${f.numero} - ${f.contenu.substring(0, 100)}...`,
    88	      })
    89	    }
    90	
    91	    // 3. Recherche dans les op√©rations
    92	    const operations = await searchOperations(q)
    93	    for (const chapitre of operations.slice(0, 10)) {
    94	      results.push({
    95	        type: 'operation',
    96	        chapitre,
    97	        score: 2,
    98	        highlight: `Chapitre ${chapitre.numero} - ${chapitre.titre}`,
    99	      })
   100	    }
   101	
   102	    // Tri par score d√©croissant
   103	    results.sort((a, b) => b.score - a.score)
   104	
   105	    return results.slice(0, limit)
   106	  }
   107	
   108	  /** Trouver les chapitres li√©s √† un compte */
   109	  async findRelatedChapters(numero: string): Promise<ChapitreOperations[]> {
   110	    return findChapitresByCompte(numero)
   111	  }
   112	
   113	  /** Charger un chapitre d'op√©rations par num√©ro */
   114	  async getChapitre(numero: number): Promise<ChapitreOperations | undefined> {
   115	    return loadChapitre(numero)
   116	  }
   117	
   118	  /** Obtenir le sommaire des 41 chapitres */
   119	  getChapitresSommaire() {
   120	    return CHAPITRES_SOMMAIRE
   121	  }
   122	
   123	  /** Obtenir les statistiques du plan */
   124	  getStats() {
   125	    const total = PLAN_SYSCOHADA_REVISE.length
   126	    const obligatoires = PLAN_SYSCOHADA_REVISE.filter(c => c.utilisation === 'OBLIGATOIRE').length
   127	    const facultatifs = PLAN_SYSCOHADA_REVISE.filter(c => c.utilisation === 'FACULTATIF').length
   128	    const parClasse: Record<number, number> = {}
   129	    for (let i = 1; i <= 9; i++) {
   130	      parClasse[i] = getSYSCOHADAAccountsByClass(i).length
   131	    }
   132	    return { total, obligatoires, facultatifs, parClasse, chapitresOperations: 41 }
   133	  }
   134	
   135	  /** Valider un num√©ro de compte */
   136	  isValidAccount(numero: string): boolean {
   137	    return validateSYSCOHADAAccount(numero)
   138	  }
   139	
   140	  /** Trouver le compte OHADA le plus proche d'un num√©ro inconnu */
   141	  findClosestAccount(numero: string): { compte: CompteComptable; score: number } | null {
   142	    // Correspondance par pr√©fixes d√©croissants
   143	    for (let len = Math.min(numero.length, 4); len >= 2; len--) {
   144	      const prefix = numero.substring(0, len)
   145	      const match = getSYSCOHADAAccountByNumber(prefix)
   146	      if (match) {
   147	        return { compte: match, score: len / numero.length }
   148	      }
   149	    }
   150	    return null
   151	  }
   152	}
   153	
   154	export const syscohadaReferenceService = new SYSCOHADAReferenceService()
   155	export default syscohadaReferenceService

================================================================================
FILE: src/services/taxService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion fiscale et calculs d'imp√¥ts
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface Impot {
     9	  id: string
    10	  code: string
    11	  libelle: string
    12	  type_impot: 'IS' | 'TVA' | 'PATENTE' | 'TAU' | 'CONTRIBUTION' | 'AUTRE'
    13	  pays: string
    14	  taux_normal: number
    15	  taux_reduit?: number
    16	  seuil_application?: number
    17	  base_calcul: 'CA' | 'BENEFICE' | 'VALEUR_AJOUTEE' | 'MASSE_SALARIALE'
    18	  periodicite: 'MENSUELLE' | 'TRIMESTRIELLE' | 'ANNUELLE'
    19	  date_limite_declaration?: string
    20	  date_limite_paiement?: string
    21	  is_actif: boolean
    22	  formule_calcul?: string
    23	  abattements: AbattementFiscal[]
    24	  created_at: string
    25	  updated_at: string
    26	}
    27	
    28	export interface AbattementFiscal {
    29	  id: string
    30	  nom: string
    31	  type_abattement: 'FIXE' | 'POURCENTAGE' | 'PROGRESSIF'
    32	  valeur: number
    33	  conditions: string
    34	  seuil_min?: number
    35	  seuil_max?: number
    36	  is_obligatoire: boolean
    37	}
    38	
    39	export interface DeclarationFiscale {
    40	  id: string
    41	  entreprise: string
    42	  entreprise_detail?: {
    43	    raison_sociale: string
    44	    numero_contribuable: string
    45	  }
    46	  exercice: string
    47	  type_declaration: 'IS' | 'TVA' | 'PATENTE' | 'BILAN_FISCAL'
    48	  periode_debut: string
    49	  periode_fin: string
    50	  statut: 'BROUILLON' | 'VALIDEE' | 'DEPOSEE' | 'ACCEPTEE' | 'REJETEE'
    51	  numero_declaration?: string
    52	  date_depot?: string
    53	  montant_impot: number
    54	  montant_acomptes: number
    55	  montant_a_payer: number
    56	  montant_credit?: number
    57	  penalites?: number
    58	  donnees_fiscales: any
    59	  fichier_declaration?: string
    60	  fichier_annexes?: string[]
    61	  erreurs_validation?: Array<{
    62	    champ: string
    63	    message: string
    64	    code: string
    65	  }>
    66	  created_at: string
    67	  updated_at: string
    68	}
    69	
    70	export interface CalculFiscal {
    71	  entreprise_id: string
    72	  exercice_id: string
    73	  type_calcul: 'IS' | 'TVA' | 'PATENTE' | 'SIMULATION'
    74	  donnees_base: {
    75	    chiffre_affaires: number
    76	    benefice_comptable?: number
    77	    charges_deductibles?: number
    78	    charges_non_deductibles?: number
    79	    provisions?: number
    80	  }
    81	  abattements_appliques: string[]
    82	  resultat: {
    83	    base_imposable: number
    84	    taux_applique: number
    85	    montant_impot: number
    86	    acomptes_verses: number
    87	    solde_a_payer: number
    88	    credit_impot?: number
    89	  }
    90	  details_calcul: Array<{
    91	    etape: string
    92	    description: string
    93	    montant: number
    94	    taux?: number
    95	  }>
    96	}
    97	
    98	export interface RegimeFiscal {
    99	  id: string
   100	  code: string
   101	  libelle: string
   102	  description: string
   103	  pays: string
   104	  conditions_eligibilite: string[]
   105	  seuil_ca_min?: number
   106	  seuil_ca_max?: number
   107	  avantages: string[]
   108	  obligations: string[]
   109	  taux_is?: number
   110	  franchise_tva?: boolean
   111	  is_default: boolean
   112	}
   113	
   114	export interface ObligationFiscale {
   115	  id: string
   116	  libelle: string
   117	  type_obligation: 'DECLARATION' | 'PAIEMENT' | 'TENUE_LIVRE' | 'AUTRE'
   118	  periodicite: 'MENSUELLE' | 'TRIMESTRIELLE' | 'ANNUELLE' | 'PONCTUELLE'
   119	  date_echeance: string
   120	  entreprise: string
   121	  statut: 'A_FAIRE' | 'EN_COURS' | 'TERMINEE' | 'EN_RETARD'
   122	  montant_estim√©?: number
   123	  description?: string
   124	  penalites_retard?: number
   125	  created_at: string
   126	}
   127	
   128	export interface SimulationFiscale {
   129	  id: string
   130	  nom: string
   131	  entreprise: string
   132	  scenarios: Array<{
   133	    nom: string
   134	    hypotheses: any
   135	    resultats: any
   136	  }>
   137	  created_by: string
   138	  created_at: string
   139	}
   140	
   141	class TaxService {
   142	  private baseUrl = '/api/v1/tax/'
   143	
   144	  // Imp√¥ts et taxes - CONNEXION R√âELLE AU BACKEND
   145	  async getImpots(params?: {
   146	    pays?: string
   147	    type_impot?: string
   148	    is_actif?: boolean
   149	    page?: number
   150	  }) {
   151	    console.log('üîÑ Fetching imp√¥ts from backend...', params)
   152	    return apiClient.get(`${this.baseUrl}/impots/`, params)
   153	  }
   154	
   155	  async getImpot(id: string): Promise<Impot> {
   156	    console.log(`üîÑ Fetching imp√¥t ${id} from backend...`)
   157	    return apiClient.get(`${this.baseUrl}/impots/${id}/`)
   158	  }
   159	
   160	  async createImpot(impot: Partial<Impot>): Promise<Impot> {
   161	    console.log('üì§ Creating imp√¥t in backend...', impot)
   162	    return apiClient.post(`${this.baseUrl}/impots/`, impot)
   163	  }
   164	
   165	  async updateImpot(id: string, impot: Partial<Impot>): Promise<Impot> {
   166	    console.log(`üì§ Updating imp√¥t ${id} in backend...`)
   167	    return apiClient.patch(`${this.baseUrl}/impots/${id}/`, impot)
   168	  }
   169	
   170	  async deleteImpot(id: string): Promise<void> {
   171	    console.log(`üóëÔ∏è Deleting imp√¥t ${id} from backend...`)
   172	    return apiClient.delete(`${this.baseUrl}/impots/${id}/`)
   173	  }
   174	
   175	  // Calculs fiscaux - CONNEXION R√âELLE AU BACKEND
   176	  async calculateIS(data: {
   177	    entreprise_id: string
   178	    exercice_id: string
   179	    benefice_comptable: number
   180	    reintegrations?: number
   181	    deductions?: number
   182	    abattements?: string[]
   183	  }): Promise<CalculFiscal> {
   184	    console.log('üßÆ Calculating IS on backend...', data)
   185	    return apiClient.post(`${this.baseUrl}/calcul/is/`, data)
   186	  }
   187	
   188	  async calculateTVA(data: {
   189	    entreprise_id: string
   190	    periode_debut: string
   191	    periode_fin: string
   192	    tva_collectee: number
   193	    tva_deductible: number
   194	  }): Promise<CalculFiscal> {
   195	    console.log('üßÆ Calculating TVA on backend...', data)
   196	    return apiClient.post(`${this.baseUrl}/calcul/tva/`, data)
   197	  }
   198	
   199	  async calculatePatente(data: {
   200	    entreprise_id: string
   201	    exercice_id: string
   202	    chiffre_affaires: number
   203	    valeur_locative?: number
   204	  }): Promise<CalculFiscal> {
   205	    console.log('üßÆ Calculating Patente on backend...', data)
   206	    return apiClient.post(`${this.baseUrl}/calcul/patente/`, data)
   207	  }
   208	
   209	  async simulateFiscalImpact(data: {
   210	    entreprise_id: string
   211	    scenarios: Array<{
   212	      nom: string
   213	      ca_projete: number
   214	      charges_prevues: number
   215	      investissements?: number
   216	    }>
   217	  }) {
   218	    console.log('üîÆ Running fiscal simulation on backend...', data)
   219	    return apiClient.post(`${this.baseUrl}/simulation/`, data)
   220	  }
   221	
   222	  // D√©clarations fiscales - CONNEXION R√âELLE AU BACKEND
   223	  async getDeclarations(params?: {
   224	    entreprise?: string
   225	    exercice?: string
   226	    type_declaration?: string
   227	    statut?: string
   228	    periode_debut?: string
   229	    periode_fin?: string
   230	    page?: number
   231	    page_size?: number
   232	  }) {
   233	    console.log('üîÑ Fetching d√©clarations from backend...', params)
   234	    return apiClient.get(`${this.baseUrl}/declarations/`, params)
   235	  }
   236	
   237	  async getDeclaration(id: string): Promise<DeclarationFiscale> {
   238	    console.log(`üîÑ Fetching d√©claration ${id} from backend...`)
   239	    return apiClient.get(`${this.baseUrl}/declarations/${id}/`)
   240	  }
   241	
   242	  async createDeclaration(declaration: Partial<DeclarationFiscale>): Promise<DeclarationFiscale> {
   243	    console.log('üì§ Creating d√©claration in backend...', declaration)
   244	    return apiClient.post(`${this.baseUrl}/declarations/`, declaration)
   245	  }
   246	
   247	  async updateDeclaration(id: string, declaration: Partial<DeclarationFiscale>): Promise<DeclarationFiscale> {
   248	    console.log(`üì§ Updating d√©claration ${id} in backend...`)
   249	    return apiClient.patch(`${this.baseUrl}/declarations/${id}/`, declaration)
   250	  }
   251	
   252	  async validateDeclaration(id: string): Promise<DeclarationFiscale> {
   253	    console.log(`‚úÖ Validating d√©claration ${id} on backend...`)
   254	    return apiClient.post(`${this.baseUrl}/declarations/${id}/validate/`)
   255	  }
   256	
   257	  async submitDeclaration(id: string): Promise<DeclarationFiscale> {
   258	    console.log(`üì§ Submitting d√©claration ${id} to authorities...`)
   259	    return apiClient.post(`${this.baseUrl}/declarations/${id}/submit/`)
   260	  }
   261	
   262	  async generateDeclarationPDF(id: string): Promise<Blob> {
   263	    console.log(`üìÑ Generating PDF for d√©claration ${id}...`)
   264	    const response = await apiClient.client.get(`${this.baseUrl}/declarations/${id}/pdf/`, {
   265	      responseType: 'blob'
   266	    })
   267	    return response.data
   268	  }
   269	
   270	  // R√©gimes fiscaux - CONNEXION R√âELLE AU BACKEND
   271	  async getRegimesFiscaux(params?: {
   272	    pays?: string
   273	    ca_entreprise?: number
   274	    secteur?: string
   275	  }) {
   276	    console.log('üîÑ Fetching r√©gimes fiscaux from backend...', params)
   277	    return apiClient.get(`${this.baseUrl}/regimes/`, params)
   278	  }
   279	
   280	  async getRegimeFiscal(id: string): Promise<RegimeFiscal> {
   281	    console.log(`üîÑ Fetching r√©gime fiscal ${id} from backend...`)
   282	    return apiClient.get(`${this.baseUrl}/regimes/${id}/`)
   283	  }
   284	
   285	  async getOptimalRegime(data: {
   286	    entreprise_id: string
   287	    ca_previsionnel: number
   288	    secteur_activite: string
   289	    pays: string
   290	  }) {
   291	    console.log('üéØ Getting optimal r√©gime fiscal from backend...', data)
   292	    return apiClient.post(`${this.baseUrl}/regimes/optimal/`, data)
   293	  }
   294	
   295	  async compareRegimes(regime_ids: string[], data: {
   296	    ca_previsionnel: number
   297	    charges_prevues: number
   298	  }) {
   299	    console.log('üìä Comparing r√©gimes fiscaux on backend...', data)
   300	    return apiClient.post(`${this.baseUrl}/regimes/compare/`, {
   301	      regime_ids,
   302	      ...data
   303	    })
   304	  }
   305	
   306	  // Obligations fiscales - CONNEXION R√âELLE AU BACKEND
   307	  async getObligations(params?: {
   308	    entreprise?: string
   309	    type_obligation?: string
   310	    statut?: string
   311	    date_debut?: string
   312	    date_fin?: string
   313	    page?: number
   314	    page_size?: number
   315	  }) {
   316	    console.log('üîÑ Fetching obligations fiscales from backend...', params)
   317	    return apiClient.get(`${this.baseUrl}/obligations/`, params)
   318	  }
   319	
   320	  async getObligation(id: string): Promise<ObligationFiscale> {
   321	    console.log(`üîÑ Fetching obligation ${id} from backend...`)
   322	    return apiClient.get(`${this.baseUrl}/obligations/${id}/`)
   323	  }
   324	
   325	  async createObligation(obligation: Partial<ObligationFiscale>): Promise<ObligationFiscale> {
   326	    console.log('üì§ Creating obligation in backend...', obligation)
   327	    return apiClient.post(`${this.baseUrl}/obligations/`, obligation)
   328	  }
   329	
   330	  async markObligationDone(id: string): Promise<ObligationFiscale> {
   331	    console.log(`‚úÖ Marking obligation ${id} as done...`)
   332	    return apiClient.post(`${this.baseUrl}/obligations/${id}/mark-done/`)
   333	  }
   334	
   335	  async getObligationsCalendar(params: {
   336	    entreprise: string
   337	    annee: number
   338	    mois?: number
   339	  }) {
   340	    console.log('üìÖ Getting obligations calendar from backend...', params)
   341	    return apiClient.get(`${this.baseUrl}/obligations/calendar/`, params)
   342	  }
   343	
   344	  async getObligationsEcheances(entreprise_id: string, jours_avance: number = 30) {
   345	    console.log(`‚è∞ Getting upcoming obligations for entreprise ${entreprise_id}...`)
   346	    return apiClient.get(`${this.baseUrl}/obligations/echeances/`, {
   347	      entreprise: entreprise_id,
   348	      jours_avance
   349	    })
   350	  }
   351	
   352	  // Abattements et d√©ductions - CONNEXION R√âELLE AU BACKEND
   353	  async getAbattements(params?: {
   354	    type_impot?: string
   355	    pays?: string
   356	    is_obligatoire?: boolean
   357	  }) {
   358	    console.log('üîÑ Fetching abattements from backend...', params)
   359	    return apiClient.get(`${this.baseUrl}/abattements/`, params)
   360	  }
   361	
   362	  async getAbattement(id: string): Promise<AbattementFiscal> {
   363	    console.log(`üîÑ Fetching abattement ${id} from backend...`)
   364	    return apiClient.get(`${this.baseUrl}/abattements/${id}/`)
   365	  }
   366	
   367	  async calculateAbattement(abattement_id: string, base_calcul: number) {
   368	    console.log(`üßÆ Calculating abattement ${abattement_id} for base ${base_calcul}...`)
   369	    return apiClient.post(`${this.baseUrl}/abattements/${abattement_id}/calculate/`, {
   370	      base_calcul
   371	    })
   372	  }
   373	
   374	  async getAbattementsEligibles(data: {
   375	    entreprise_id: string
   376	    type_impot: string
   377	    montant_base: number
   378	  }) {
   379	    console.log('üéØ Getting eligible abattements from backend...', data)
   380	    return apiClient.post(`${this.baseUrl}/abattements/eligibles/`, data)
   381	  }
   382	
   383	  // Analyses et optimisation - CONNEXION R√âELLE AU BACKEND
   384	  async analyzeFiscalPosition(entreprise_id: string, exercice_id: string) {
   385	    console.log(`üìä Analyzing fiscal position for entreprise ${entreprise_id}...`)
   386	    return apiClient.post(`${this.baseUrl}/analyse/position/`, {
   387	      entreprise_id,
   388	      exercice_id
   389	    })
   390	  }
   391	
   392	  async getOptimizationSuggestions(entreprise_id: string, exercice_id: string) {
   393	    console.log(`üí° Getting optimization suggestions for entreprise ${entreprise_id}...`)
   394	    return apiClient.get(`${this.baseUrl}/optimization/suggestions/`, {
   395	      entreprise: entreprise_id,
   396	      exercice: exercice_id
   397	    })
   398	  }
   399	
   400	  async compareFiscalYears(entreprise_id: string, exercice1_id: string, exercice2_id: string) {
   401	    console.log(`üìä Comparing fiscal years for entreprise ${entreprise_id}...`)
   402	    return apiClient.get(`${this.baseUrl}/analyse/compare-years/`, {
   403	      entreprise: entreprise_id,
   404	      exercice1: exercice1_id,
   405	      exercice2: exercice2_id
   406	    })
   407	  }
   408	
   409	  // Import/Export et int√©grations - CONNEXION R√âELLE AU BACKEND
   410	  async importDeclarationData(file: File, type_declaration: string) {
   411	    console.log(`üì§ Importing ${type_declaration} declaration data...`)
   412	    return apiClient.upload(`${this.baseUrl}/import/declaration/`, file, { type_declaration })
   413	  }
   414	
   415	  async exportDeclarationData(declaration_id: string, format: 'EXCEL' | 'CSV' | 'XML'): Promise<Blob> {
   416	    console.log(`üì• Exporting declaration ${declaration_id} as ${format}...`)
   417	    const response = await apiClient.client.get(`${this.baseUrl}/export/declaration/${declaration_id}/`, {
   418	      params: { format },
   419	      responseType: 'blob'
   420	    })
   421	    return response.data
   422	  }
   423	
   424	  async connectTaxAuthority(data: {
   425	    pays: string
   426	    identifiants: any
   427	    type_connexion: 'API' | 'CERTIFICAT' | 'MANUEL'
   428	  }) {
   429	    console.log(`üîó Connecting to tax authority for ${data.pays}...`)
   430	    return apiClient.post(`${this.baseUrl}/authorities/connect/`, data)
   431	  }
   432	
   433	  async syncWithTaxAuthority(pays: string) {
   434	    console.log(`üîÑ Syncing with tax authority for ${pays}...`)
   435	    return apiClient.post(`${this.baseUrl}/authorities/sync/`, { pays })
   436	  }
   437	
   438	  // Statistiques fiscales - CONNEXION R√âELLE AU BACKEND
   439	  async getFiscalStats(params: {
   440	    entreprise: string
   441	    periode_debut: string
   442	    periode_fin: string
   443	  }) {
   444	    console.log('üìä Getting fiscal stats from backend...', params)
   445	    return apiClient.get(`${this.baseUrl}/stats/`, params)
   446	  }
   447	
   448	  async getFiscalTrends(params: {
   449	    entreprise?: string
   450	    type_impot?: string
   451	    periode_debut: string
   452	    periode_fin: string
   453	  }) {
   454	    console.log('üìà Getting fiscal trends from backend...', params)
   455	    return apiClient.get(`${this.baseUrl}/trends/`, params)
   456	  }
   457	
   458	  async getBenchmarkData(data: {
   459	    secteur_activite: string
   460	    pays: string
   461	    taille_entreprise: 'TPE' | 'PME' | 'ETI' | 'GE'
   462	  }) {
   463	    console.log('üìä Getting benchmark fiscal data from backend...', data)
   464	    return apiClient.get(`${this.baseUrl}/benchmark/`, data)
   465	  }
   466	}
   467	
   468	export const taxService = new TaxService()
   469	export default taxService
================================================================================
FILE: src/services/templatesService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des templates et mod√®les
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface Template {
     9	  id: string
    10	  nom: string
    11	  description: string
    12	  type_template: 'LIASSE' | 'RAPPORT' | 'DOCUMENT' | 'EMAIL' | 'ETIQUETTE'
    13	  categorie: string
    14	  version: string
    15	  norme_applicable: 'SYSCOHADA' | 'IFRS' | 'OHADA' | 'PCG' | 'CUSTOM'
    16	  pays_applicable?: string[]
    17	  secteur_applicable?: string[]
    18	  is_officiel: boolean
    19	  is_public: boolean
    20	  is_actif: boolean
    21	  fichier_template: string
    22	  fichier_apercu?: string
    23	  taille_fichier: number
    24	  format_sortie: string[]
    25	  variables: TemplateVariable[]
    26	  sections: TemplateSection[]
    27	  regles_validation?: string[]
    28	  created_by: string
    29	  usage_count: number
    30	  note_moyenne?: number
    31	  tags: string[]
    32	  created_at: string
    33	  updated_at: string
    34	}
    35	
    36	export interface TemplateVariable {
    37	  id: string
    38	  nom: string
    39	  libelle: string
    40	  type: 'TEXT' | 'NUMBER' | 'DATE' | 'BOOLEAN' | 'LIST' | 'OBJECT'
    41	  obligatoire: boolean
    42	  valeur_defaut?: any
    43	  validation_regex?: string
    44	  description?: string
    45	  source_donnees?: string
    46	  dependances?: string[]
    47	}
    48	
    49	export interface TemplateSection {
    50	  id: string
    51	  nom: string
    52	  ordre: number
    53	  type_section: 'HEADER' | 'BODY' | 'FOOTER' | 'TABLE' | 'CHART' | 'IMAGE'
    54	  contenu_template: string
    55	  conditions_affichage?: string
    56	  style_css?: string
    57	  parametres?: any
    58	}
    59	
    60	export interface TemplateInstance {
    61	  id: string
    62	  template: string
    63	  template_detail?: Template
    64	  nom_instance: string
    65	  parametres: Record<string, any>
    66	  donnees_source: any
    67	  fichier_genere?: string
    68	  statut: 'EN_PREPARATION' | 'EN_COURS' | 'TERMINE' | 'ERREUR'
    69	  progression: number
    70	  erreurs?: Array<{
    71	    code: string
    72	    message: string
    73	    section?: string
    74	  }>
    75	  created_by: string
    76	  created_at: string
    77	}
    78	
    79	export interface TemplateLibrary {
    80	  id: string
    81	  nom: string
    82	  description: string
    83	  editeur: string
    84	  version: string
    85	  url_source?: string
    86	  templates: Template[]
    87	  is_verified: boolean
    88	  last_sync: string
    89	}
    90	
    91	export interface GenerationRequest {
    92	  template_id: string
    93	  nom_instance: string
    94	  parametres: Record<string, any>
    95	  donnees_source?: any
    96	  format_sortie?: string
    97	  options?: {
    98	    inclure_metadata: boolean
    99	    compression: boolean
   100	    watermark?: string
   101	  }
   102	}
   103	
   104	class TemplatesService {
   105	  private baseUrl = '/api/v1/templates'
   106	
   107	  // Templates - CONNEXION R√âELLE AU BACKEND
   108	  async getTemplates(params?: {
   109	    type_template?: string
   110	    categorie?: string
   111	    norme_applicable?: string
   112	    pays?: string
   113	    secteur?: string
   114	    is_officiel?: boolean
   115	    is_public?: boolean
   116	    search?: string
   117	    tags?: string[]
   118	    page?: number
   119	    page_size?: number
   120	  }) {
   121	    console.log('üîÑ Fetching templates from backend...', params)
   122	    return apiClient.get(`${this.baseUrl}/`, params)
   123	  }
   124	
   125	  async getTemplate(id: string): Promise<Template> {
   126	    console.log(`üîÑ Fetching template ${id} from backend...`)
   127	    return apiClient.get(`${this.baseUrl}/${id}/`)
   128	  }
   129	
   130	  async createTemplate(template: Partial<Template>): Promise<Template> {
   131	    console.log('üì§ Creating template in backend...', template)
   132	    return apiClient.post(`${this.baseUrl}/`, template)
   133	  }
   134	
   135	  async updateTemplate(id: string, template: Partial<Template>): Promise<Template> {
   136	    console.log(`üì§ Updating template ${id} in backend...`)
   137	    return apiClient.patch(`${this.baseUrl}/${id}/`, template)
   138	  }
   139	
   140	  async deleteTemplate(id: string): Promise<void> {
   141	    console.log(`üóëÔ∏è Deleting template ${id} from backend...`)
   142	    return apiClient.delete(`${this.baseUrl}/${id}/`)
   143	  }
   144	
   145	  async duplicateTemplate(id: string, newName: string): Promise<Template> {
   146	    console.log(`üìã Duplicating template ${id} as ${newName}...`)
   147	    return apiClient.post(`${this.baseUrl}/${id}/duplicate/`, { nom: newName })
   148	  }
   149	
   150	  async publishTemplate(id: string, makePublic: boolean = false): Promise<Template> {
   151	    console.log(`üì¢ Publishing template ${id}...`)
   152	    return apiClient.post(`${this.baseUrl}/${id}/publish/`, { is_public: makePublic })
   153	  }
   154	
   155	  async unpublishTemplate(id: string): Promise<Template> {
   156	    console.log(`üì¢ Unpublishing template ${id}...`)
   157	    return apiClient.post(`${this.baseUrl}/${id}/unpublish/`)
   158	  }
   159	
   160	  // Upload et fichiers - CONNEXION R√âELLE AU BACKEND
   161	  async uploadTemplate(file: File, metadata: {
   162	    nom: string
   163	    description: string
   164	    type_template: string
   165	    categorie: string
   166	    norme_applicable?: string
   167	  }): Promise<Template> {
   168	    console.log('üì§ Uploading template file to backend...', metadata)
   169	    return apiClient.upload(`${this.baseUrl}/upload/`, file, metadata)
   170	  }
   171	
   172	  async uploadTemplatePreview(templateId: string, file: File): Promise<Template> {
   173	    console.log(`üì§ Uploading preview for template ${templateId}...`)
   174	    return apiClient.upload(`${this.baseUrl}/${templateId}/preview/`, file)
   175	  }
   176	
   177	  async downloadTemplate(id: string): Promise<Blob> {
   178	    console.log(`üì• Downloading template ${id} from backend...`)
   179	    const response = await apiClient.client.get(`${this.baseUrl}/${id}/download/`, {
   180	      responseType: 'blob'
   181	    })
   182	    return response.data
   183	  }
   184	
   185	  // Variables et sections - CONNEXION R√âELLE AU BACKEND
   186	  async getTemplateVariables(templateId: string) {
   187	    console.log(`üîÑ Fetching variables for template ${templateId}...`)
   188	    return apiClient.get(`${this.baseUrl}/${templateId}/variables/`)
   189	  }
   190	
   191	  async addTemplateVariable(templateId: string, variable: Partial<TemplateVariable>): Promise<TemplateVariable> {
   192	    console.log(`üì§ Adding variable to template ${templateId}...`)
   193	    return apiClient.post(`${this.baseUrl}/${templateId}/variables/`, variable)
   194	  }
   195	
   196	  async updateTemplateVariable(templateId: string, variableId: string, variable: Partial<TemplateVariable>): Promise<TemplateVariable> {
   197	    console.log(`üì§ Updating variable ${variableId} in template ${templateId}...`)
   198	    return apiClient.patch(`${this.baseUrl}/${templateId}/variables/${variableId}/`, variable)
   199	  }
   200	
   201	  async deleteTemplateVariable(templateId: string, variableId: string): Promise<void> {
   202	    console.log(`üóëÔ∏è Deleting variable ${variableId} from template ${templateId}...`)
   203	    return apiClient.delete(`${this.baseUrl}/${templateId}/variables/${variableId}/`)
   204	  }
   205	
   206	  async getTemplateSections(templateId: string) {
   207	    console.log(`üîÑ Fetching sections for template ${templateId}...`)
   208	    return apiClient.get(`${this.baseUrl}/${templateId}/sections/`)
   209	  }
   210	
   211	  async addTemplateSection(templateId: string, section: Partial<TemplateSection>): Promise<TemplateSection> {
   212	    console.log(`üì§ Adding section to template ${templateId}...`)
   213	    return apiClient.post(`${this.baseUrl}/${templateId}/sections/`, section)
   214	  }
   215	
   216	  async updateTemplateSection(templateId: string, sectionId: string, section: Partial<TemplateSection>): Promise<TemplateSection> {
   217	    console.log(`üì§ Updating section ${sectionId} in template ${templateId}...`)
   218	    return apiClient.patch(`${this.baseUrl}/${templateId}/sections/${sectionId}/`, section)
   219	  }
   220	
   221	  async deleteTemplateSection(templateId: string, sectionId: string): Promise<void> {
   222	    console.log(`üóëÔ∏è Deleting section ${sectionId} from template ${templateId}...`)
   223	    return apiClient.delete(`${this.baseUrl}/${templateId}/sections/${sectionId}/`)
   224	  }
   225	
   226	  async reorderTemplateSections(templateId: string, sectionOrders: Array<{ id: string; ordre: number }>) {
   227	    console.log(`üîÑ Reordering sections for template ${templateId}...`)
   228	    return apiClient.post(`${this.baseUrl}/${templateId}/sections/reorder/`, { sections: sectionOrders })
   229	  }
   230	
   231	  // G√©n√©ration d'instances - CONNEXION R√âELLE AU BACKEND
   232	  async generateInstance(request: GenerationRequest): Promise<TemplateInstance> {
   233	    console.log('üì§ Starting template instance generation in backend...', request)
   234	    return apiClient.post(`${this.baseUrl}/generate/`, request)
   235	  }
   236	
   237	  async getTemplateInstances(params?: {
   238	    template?: string
   239	    statut?: string
   240	    created_by?: string
   241	    date_debut?: string
   242	    date_fin?: string
   243	    page?: number
   244	  }) {
   245	    console.log('üîÑ Fetching template instances from backend...', params)
   246	    return apiClient.get(`${this.baseUrl}/instances/`, params)
   247	  }
   248	
   249	  async getTemplateInstance(id: string): Promise<TemplateInstance> {
   250	    console.log(`üîÑ Fetching template instance ${id} from backend...`)
   251	    return apiClient.get(`${this.baseUrl}/instances/${id}/`)
   252	  }
   253	
   254	  async getInstanceStatus(id: string): Promise<TemplateInstance> {
   255	    console.log(`üîÑ Getting instance status ${id} from backend...`)
   256	    return apiClient.get(`${this.baseUrl}/instances/${id}/status/`)
   257	  }
   258	
   259	  async cancelInstance(id: string): Promise<void> {
   260	    console.log(`üõë Cancelling instance ${id} on backend...`)
   261	    return apiClient.post(`${this.baseUrl}/instances/${id}/cancel/`)
   262	  }
   263	
   264	  async downloadInstance(id: string): Promise<Blob> {
   265	    console.log(`üì• Downloading instance ${id} from backend...`)
   266	    const response = await apiClient.client.get(`${this.baseUrl}/instances/${id}/download/`, {
   267	      responseType: 'blob'
   268	    })
   269	    return response.data
   270	  }
   271	
   272	  // Preview et validation - CONNEXION R√âELLE AU BACKEND
   273	  async previewTemplate(templateId: string, parametres: Record<string, any>, sampleData?: any) {
   274	    console.log(`üëÅÔ∏è Generating template preview for ${templateId}...`)
   275	    return apiClient.post(`${this.baseUrl}/${templateId}/preview/`, {
   276	      parametres,
   277	      sample_data: sampleData
   278	    })
   279	  }
   280	
   281	  async validateTemplate(templateId: string, testData?: any) {
   282	    console.log(`üîç Validating template ${templateId} on backend...`)
   283	    return apiClient.post(`${this.baseUrl}/${templateId}/validate/`, { test_data: testData })
   284	  }
   285	
   286	  async testTemplateGeneration(templateId: string, testData: any) {
   287	    console.log(`üß™ Testing template generation for ${templateId}...`)
   288	    return apiClient.post(`${this.baseUrl}/${templateId}/test/`, testData)
   289	  }
   290	
   291	  // Cat√©gories et tags - CONNEXION R√âELLE AU BACKEND
   292	  async getCategories() {
   293	    console.log('üîÑ Fetching template categories from backend...')
   294	    return apiClient.get(`${this.baseUrl}/categories/`)
   295	  }
   296	
   297	  async createCategorie(nom: string, description?: string) {
   298	    console.log(`üì§ Creating template category: ${nom}...`)
   299	    return apiClient.post(`${this.baseUrl}/categories/`, { nom, description })
   300	  }
   301	
   302	  async getTags() {
   303	    console.log('üîÑ Fetching template tags from backend...')
   304	    return apiClient.get(`${this.baseUrl}/tags/`)
   305	  }
   306	
   307	  async getTemplatesByTag(tag: string) {
   308	    console.log(`üîÑ Fetching templates by tag: ${tag}...`)
   309	    return apiClient.get(`${this.baseUrl}/by-tag/`, { tag })
   310	  }
   311	
   312	  // Librairies de templates - CONNEXION R√âELLE AU BACKEND
   313	  async getTemplateLibraries() {
   314	    console.log('üîÑ Fetching template libraries from backend...')
   315	    return apiClient.get(`${this.baseUrl}/libraries/`)
   316	  }
   317	
   318	  async getTemplateLibrary(id: string): Promise<TemplateLibrary> {
   319	    console.log(`üîÑ Fetching template library ${id} from backend...`)
   320	    return apiClient.get(`${this.baseUrl}/libraries/${id}/`)
   321	  }
   322	
   323	  async syncTemplateLibrary(id: string) {
   324	    console.log(`üîÑ Syncing template library ${id}...`)
   325	    return apiClient.post(`${this.baseUrl}/libraries/${id}/sync/`)
   326	  }
   327	
   328	  async installTemplateFromLibrary(libraryId: string, templateId: string) {
   329	    console.log(`üì• Installing template ${templateId} from library ${libraryId}...`)
   330	    return apiClient.post(`${this.baseUrl}/libraries/${libraryId}/install/`, { template_id: templateId })
   331	  }
   332	
   333	  // Statistiques et analytics - CONNEXION R√âELLE AU BACKEND
   334	  async getTemplateStats(templateId: string) {
   335	    console.log(`üìä Getting stats for template ${templateId}...`)
   336	    return apiClient.get(`${this.baseUrl}/${templateId}/stats/`)
   337	  }
   338	
   339	  async getUsageAnalytics(params?: {
   340	    periode_debut?: string
   341	    periode_fin?: string
   342	    template?: string
   343	    utilisateur?: string
   344	  }) {
   345	    console.log('üìà Getting template usage analytics from backend...', params)
   346	    return apiClient.get(`${this.baseUrl}/analytics/usage/`, params)
   347	  }
   348	
   349	  async getPopularTemplates(limit: number = 10) {
   350	    console.log(`üî• Getting top ${limit} popular templates...`)
   351	    return apiClient.get(`${this.baseUrl}/popular/`, { limit })
   352	  }
   353	
   354	  // Notation et commentaires - CONNEXION R√âELLE AU BACKEND
   355	  async rateTemplate(templateId: string, rating: number, commentaire?: string) {
   356	    console.log(`‚≠ê Rating template ${templateId}: ${rating}/5...`)
   357	    return apiClient.post(`${this.baseUrl}/${templateId}/rate/`, { rating, commentaire })
   358	  }
   359	
   360	  async getTemplateRatings(templateId: string) {
   361	    console.log(`üîÑ Getting ratings for template ${templateId}...`)
   362	    return apiClient.get(`${this.baseUrl}/${templateId}/ratings/`)
   363	  }
   364	
   365	  async reportTemplate(templateId: string, motif: string, description: string) {
   366	    console.log(`üö® Reporting template ${templateId}...`)
   367	    return apiClient.post(`${this.baseUrl}/${templateId}/report/`, { motif, description })
   368	  }
   369	
   370	  // Import/Export - CONNEXION R√âELLE AU BACKEND
   371	  async exportTemplate(templateId: string, includeData: boolean = false): Promise<Blob> {
   372	    console.log(`üì• Exporting template ${templateId}...`)
   373	    const response = await apiClient.client.get(`${this.baseUrl}/${templateId}/export/`, {
   374	      params: { include_data: includeData },
   375	      responseType: 'blob'
   376	    })
   377	    return response.data
   378	  }
   379	
   380	  async importTemplate(file: File, options?: {
   381	    override_existing: boolean
   382	    preserve_ids: boolean
   383	  }): Promise<Template> {
   384	    console.log('üì§ Importing template to backend...', options)
   385	    return apiClient.upload(`${this.baseUrl}/import/`, file, options)
   386	  }
   387	
   388	  async batchImportTemplates(file: File, options?: {
   389	    library_name?: string
   390	    override_existing: boolean
   391	  }) {
   392	    console.log('üì§ Batch importing templates to backend...', options)
   393	    return apiClient.upload(`${this.baseUrl}/batch-import/`, file, options)
   394	  }
   395	}
   396	
   397	export const templatesService = new TemplatesService()
   398	export default templatesService
================================================================================
FILE: src/services/themeService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des th√®mes via l'API
     3	 */
     4	
     5	import { apiClient } from './apiClient'
     6	
     7	export interface ThemeConfiguration {
     8	  id?: number
     9	  entreprise: number
    10	  nom_theme: string
    11	  type_theme: string
    12	  couleur_primaire: string
    13	  couleur_secondaire: string
    14	  couleur_accent: string
    15	  couleur_fond: string
    16	  couleur_surface: string
    17	  couleur_texte_primaire: string
    18	  couleur_texte_secondaire: string
    19	  couleur_texte_disabled: string
    20	  mode_sombre_active: boolean
    21	  couleur_fond_sombre: string
    22	  couleur_surface_sombre: string
    23	  couleur_texte_sombre: string
    24	  police_principale: string
    25	  police_secondaire: string
    26	  taille_police_base: number
    27	  border_radius: number
    28	  espacement_base: number
    29	  est_theme_actif: boolean
    30	  est_theme_par_defaut: boolean
    31	  created_at?: string
    32	  updated_at?: string
    33	}
    34	
    35	export interface PredefinedTheme {
    36	  type_theme: string
    37	  nom_theme: string
    38	  couleur_primaire: string
    39	  couleur_secondaire: string
    40	  couleur_accent: string
    41	  couleur_fond?: string
    42	  couleur_surface?: string
    43	  couleur_texte_primaire?: string
    44	  couleur_texte_secondaire?: string
    45	  police_principale: string
    46	  police_secondaire: string
    47	  description: string
    48	}
    49	
    50	export interface FontChoice {
    51	  value: string
    52	  label: string
    53	}
    54	
    55	class ThemeService {
    56	  private baseUrl = '/api/v1/parametrage/themes'
    57	
    58	  // R√©cup√©rer tous les th√®mes d'une entreprise
    59	  async getThemes(entrepriseId: number): Promise<ThemeConfiguration[]> {
    60	    try {
    61	      const data = await apiClient.get<{ results?: ThemeConfiguration[] } | ThemeConfiguration[]>(`${this.baseUrl}/?entreprise=${entrepriseId}`)
    62	      return Array.isArray(data) ? data : (data.results || [])
    63	    } catch (error) {
    64	      console.error('Erreur lors de la r√©cup√©ration des th√®mes:', error)
    65	      throw error
    66	    }
    67	  }
    68	
    69	  // R√©cup√©rer le th√®me actif d'une entreprise
    70	  async getActiveTheme(entrepriseId: number): Promise<ThemeConfiguration | null> {
    71	    try {
    72	      const data = await apiClient.get<ThemeConfiguration>(`${this.baseUrl}/active_theme/?entreprise=${entrepriseId}`)
    73	      return data
    74	    } catch (error: any) {
    75	      if (error?.response?.status === 404) {
    76	        return null
    77	      }
    78	      console.error('Erreur lors de la r√©cup√©ration du th√®me actif:', error)
    79	      throw error
    80	    }
    81	  }
    82	
    83	  // Cr√©er un nouveau th√®me
    84	  async createTheme(theme: Omit<ThemeConfiguration, 'id' | 'created_at' | 'updated_at'>): Promise<ThemeConfiguration> {
    85	    try {
    86	      const data = await apiClient.post<ThemeConfiguration>(this.baseUrl + '/', theme)
    87	      return data
    88	    } catch (error) {
    89	      console.error('Erreur lors de la cr√©ation du th√®me:', error)
    90	      throw error
    91	    }
    92	  }
    93	
    94	  // Mettre √† jour un th√®me existant
    95	  async updateTheme(id: number, theme: Partial<ThemeConfiguration>): Promise<ThemeConfiguration> {
    96	    try {
    97	      const data = await apiClient.patch<ThemeConfiguration>(`${this.baseUrl}/${id}/`, theme)
    98	      return data
    99	    } catch (error) {
   100	      console.error('Erreur lors de la mise √† jour du th√®me:', error)
   101	      throw error
   102	    }
   103	  }
   104	
   105	  // Activer un th√®me
   106	  async activateTheme(id: number): Promise<ThemeConfiguration> {
   107	    try {
   108	      const data = await apiClient.post<ThemeConfiguration>(`${this.baseUrl}/${id}/activate/`)
   109	      return data
   110	    } catch (error) {
   111	      console.error('Erreur lors de l\'activation du th√®me:', error)
   112	      throw error
   113	    }
   114	  }
   115	
   116	  // Supprimer un th√®me
   117	  async deleteTheme(id: number): Promise<void> {
   118	    try {
   119	      await apiClient.delete<void>(`${this.baseUrl}/${id}/`)
   120	    } catch (error) {
   121	      console.error('Erreur lors de la suppression du th√®me:', error)
   122	      throw error
   123	    }
   124	  }
   125	
   126	  // R√©cup√©rer les th√®mes pr√©d√©finis
   127	  async getPredefinedThemes(): Promise<PredefinedTheme[]> {
   128	    try {
   129	      const data = await apiClient.get<PredefinedTheme[]>(`${this.baseUrl}/predefined_themes/`)
   130	      return data
   131	    } catch (error) {
   132	      console.error('Erreur lors de la r√©cup√©ration des th√®mes pr√©d√©finis:', error)
   133	      throw error
   134	    }
   135	  }
   136	
   137	  // R√©cup√©rer les polices disponibles
   138	  async getAvailableFonts(): Promise<FontChoice[]> {
   139	    try {
   140	      const data = await apiClient.get<FontChoice[]>(`${this.baseUrl}/available_fonts/`)
   141	      return data
   142	    } catch (error) {
   143	      console.error('Erreur lors de la r√©cup√©ration des polices:', error)
   144	      throw error
   145	    }
   146	  }
   147	
   148	  // Cr√©er un th√®me √† partir d'un th√®me pr√©d√©fini
   149	  async createFromPredefined(
   150	    entrepriseId: number,
   151	    predefinedTheme: PredefinedTheme,
   152	    customName?: string
   153	  ): Promise<ThemeConfiguration> {
   154	    const theme: Omit<ThemeConfiguration, 'id' | 'created_at' | 'updated_at'> = {
   155	      entreprise: entrepriseId,
   156	      nom_theme: customName || predefinedTheme.nom_theme,
   157	      type_theme: predefinedTheme.type_theme,
   158	      couleur_primaire: predefinedTheme.couleur_primaire,
   159	      couleur_secondaire: predefinedTheme.couleur_secondaire,
   160	      couleur_accent: predefinedTheme.couleur_accent,
   161	      couleur_fond: predefinedTheme.couleur_fond || '#FFFFFF',
   162	      couleur_surface: predefinedTheme.couleur_surface || '#F5F5F5',
   163	      couleur_texte_primaire: predefinedTheme.couleur_texte_primaire || '#212121',
   164	      couleur_texte_secondaire: predefinedTheme.couleur_texte_secondaire || '#737373',
   165	      couleur_texte_disabled: '#BDBDBD',
   166	      mode_sombre_active: false,
   167	      couleur_fond_sombre: '#121212',
   168	      couleur_surface_sombre: '#1E1E1E',
   169	      couleur_texte_sombre: '#FFFFFF',
   170	      police_principale: predefinedTheme.police_principale,
   171	      police_secondaire: predefinedTheme.police_secondaire,
   172	      taille_police_base: 14,
   173	      border_radius: 8,
   174	      espacement_base: 8,
   175	      est_theme_actif: false,
   176	      est_theme_par_defaut: false,
   177	    }
   178	
   179	    return this.createTheme(theme)
   180	  }
   181	}
   182	
   183	export const themeService = new ThemeService()
================================================================================
FILE: src/services/typeLiasseService.ts
================================================================================
     1	/**
     2	 * Service pour la gestion des types de liasses fiscales
     3	 * CONNEXION R√âELLE AU BACKEND DJANGO
     4	 */
     5	
     6	import { apiClient } from './apiClient'
     7	
     8	export interface TypeLiasse {
     9	  id: number
    10	  code: string
    11	  libelle: string
    12	  description: string
    13	  norme_applicable: 'SYSCOHADA' | 'IFRS' | 'NATIONAL' | 'SECTORIEL'
    14	
    15	  // Crit√®res d'application
    16	  seuil_ca_min?: number
    17	  seuil_ca_max?: number
    18	  secteur_applicable: string
    19	  pays_applicable: string
    20	
    21	  // Propri√©t√©s
    22	  est_officiel: boolean
    23	  templates_requis: string[]
    24	
    25	  created_at: string
    26	  updated_at: string
    27	}
    28	
    29	export interface CreateTypeLiasse {
    30	  code: string
    31	  libelle: string
    32	  description?: string
    33	  norme_applicable: 'SYSCOHADA' | 'IFRS' | 'NATIONAL' | 'SECTORIEL'
    34	  seuil_ca_min?: number
    35	  seuil_ca_max?: number
    36	  secteur_applicable?: string
    37	  pays_applicable?: string
    38	  est_officiel?: boolean
    39	  templates_requis?: string[]
    40	}
    41	
    42	export interface TypeLiasseFilters {
    43	  norme_applicable?: 'SYSCOHADA' | 'IFRS' | 'NATIONAL' | 'SECTORIEL'
    44	  est_officiel?: boolean
    45	  pays_applicable?: string
    46	  secteur_applicable?: string
    47	  search?: string
    48	  page?: number
    49	  page_size?: number
    50	}
    51	
    52	class TypeLiasseService {
    53	  private baseUrl = '/api/v1/parametrage/types-liasse'
    54	
    55	  /**
    56	   * R√©cup√©rer la liste des types de liasses
    57	   */
    58	  async list(filters?: TypeLiasseFilters): Promise<{
    59	    count: number
    60	    next: string | null
    61	    previous: string | null
    62	    results: TypeLiasse[]
    63	  }> {
    64	    console.log('üîÑ Fetching types de liasse from backend...', filters)
    65	    return apiClient.get(this.baseUrl, filters)
    66	  }
    67	
    68	  /**
    69	   * R√©cup√©rer tous les types (sans pagination)
    70	   */
    71	  async getAll(filters?: Omit<TypeLiasseFilters, 'page' | 'page_size'>): Promise<TypeLiasse[]> {
    72	    console.log('üîÑ Fetching all types de liasse...')
    73	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, { ...filters, page_size: 1000 })
    74	    return data.results || []
    75	  }
    76	
    77	  /**
    78	   * R√©cup√©rer un type de liasse par ID
    79	   */
    80	  async getById(id: number): Promise<TypeLiasse> {
    81	    console.log(`üîÑ Fetching type de liasse ${id}...`)
    82	    return apiClient.get(`${this.baseUrl}/${id}/`)
    83	  }
    84	
    85	  /**
    86	   * Cr√©er un nouveau type de liasse
    87	   */
    88	  async create(data: CreateTypeLiasse): Promise<TypeLiasse> {
    89	    console.log('üì§ Creating type de liasse...', data)
    90	    return apiClient.post(this.baseUrl, data)
    91	  }
    92	
    93	  /**
    94	   * Mettre √† jour un type de liasse
    95	   */
    96	  async update(id: number, data: Partial<CreateTypeLiasse>): Promise<TypeLiasse> {
    97	    console.log(`üì§ Updating type de liasse ${id}...`, data)
    98	    return apiClient.patch(`${this.baseUrl}/${id}/`, data)
    99	  }
   100	
   101	  /**
   102	   * Supprimer un type de liasse
   103	   */
   104	  async delete(id: number): Promise<void> {
   105	    console.log(`üóëÔ∏è Deleting type de liasse ${id}...`)
   106	    return apiClient.delete(`${this.baseUrl}/${id}/`)
   107	  }
   108	
   109	  /**
   110	   * R√©cup√©rer les types SYSCOHADA
   111	   */
   112	  async getSYSCOHADATypes(): Promise<TypeLiasse[]> {
   113	    console.log('üîÑ Fetching SYSCOHADA types...')
   114	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, {
   115	      norme_applicable: 'SYSCOHADA',
   116	      page_size: 100
   117	    })
   118	    return data.results || []
   119	  }
   120	
   121	  /**
   122	   * R√©cup√©rer les types officiels
   123	   */
   124	  async getOfficiels(): Promise<TypeLiasse[]> {
   125	    console.log('üîÑ Fetching official types de liasse...')
   126	    const data = await apiClient.get<Record<string, any>>(this.baseUrl, {
   127	      est_officiel: true,
   128	      page_size: 100
   129	    })
   130	    return data.results || []
   131	  }
   132	
   133	  /**
   134	   * R√©cup√©rer les types applicables pour une entreprise
   135	   */
   136	  async getApplicableTypes(params: {
   137	    chiffre_affaires?: number
   138	    secteur?: string
   139	    pays?: string
   140	  }): Promise<TypeLiasse[]> {
   141	    console.log('üîÑ Fetching applicable types for criteria...', params)
   142	
   143	    const allTypes = await this.getAll()
   144	
   145	    return allTypes.filter(type => {
   146	      // Filtre par CA
   147	      if (params.chiffre_affaires) {
   148	        if (type.seuil_ca_min && params.chiffre_affaires < type.seuil_ca_min) {
   149	          return false
   150	        }
   151	        if (type.seuil_ca_max && params.chiffre_affaires > type.seuil_ca_max) {
   152	          return false
   153	        }
   154	      }
   155	
   156	      // Filtre par secteur
   157	      if (params.secteur && type.secteur_applicable) {
   158	        if (type.secteur_applicable !== params.secteur) {
   159	          return false
   160	        }
   161	      }
   162	
   163	      // Filtre par pays
   164	      if (params.pays && type.pays_applicable) {
   165	        if (type.pays_applicable !== params.pays) {
   166	          return false
   167	        }
   168	      }
   169	
   170	      return true
   171	    })
   172	  }
   173	
   174	  /**
   175	   * Obtenir le libell√© de la norme
   176	   */
   177	  getNormeLabel(norme: TypeLiasse['norme_applicable']): string {
   178	    const labels = {
   179	      'SYSCOHADA': 'SYSCOHADA R√©vis√©',
   180	      'IFRS': 'Normes IFRS',
   181	      'NATIONAL': 'Normes Nationales',
   182	      'SECTORIEL': 'Normes Sectorielles'
   183	    }
   184	    return labels[norme] || norme
   185	  }
   186	
   187	  /**
   188	   * V√©rifier si un type n√©cessite des templates sp√©cifiques
   189	   */
   190	  requiresTemplates(type: TypeLiasse): boolean {
   191	    return type.templates_requis.length > 0
   192	  }
   193	
   194	  /**
   195	   * Formater les seuils de CA
   196	   */
   197	  formatSeuilCA(type: TypeLiasse): string {
   198	    if (!type.seuil_ca_min && !type.seuil_ca_max) {
   199	      return 'Tous CA'
   200	    }
   201	
   202	    if (type.seuil_ca_min && type.seuil_ca_max) {
   203	      return `${this.formatMontant(type.seuil_ca_min)} - ${this.formatMontant(type.seuil_ca_max)}`
   204	    }
   205	
   206	    if (type.seuil_ca_min) {
   207	      return `> ${this.formatMontant(type.seuil_ca_min)}`
   208	    }
   209	
   210	    if (type.seuil_ca_max) {
   211	      return `< ${this.formatMontant(type.seuil_ca_max)}`
   212	    }
   213	
   214	    return ''
   215	  }
   216	
   217	  /**
   218	   * Formater un montant
   219	   */
   220	  private formatMontant(montant: number): string {
   221	    return new Intl.NumberFormat('fr-FR', {
   222	      style: 'currency',
   223	      currency: 'XOF',
   224	      minimumFractionDigits: 0
   225	    }).format(montant)
   226	  }
   227	}
   228	
   229	export default new TypeLiasseService()

================================================================================
FILE: src/store/__tests__/authStore.test.ts
================================================================================
     1	/**
     2	 * Tests unitaires pour le store d'authentification Zustand
     3	 */
     4	
     5	import { describe, it, expect, vi, beforeEach, afterEach } from 'vitest'
     6	import { act, renderHook } from '@testing-library/react'
     7	import { useAuthStore } from '../authStore'
     8	import { authService } from '@/services/authService'
     9	
    10	// Mock du service d'authentification
    11	vi.mock('@/services/authService', () => ({
    12	  authService: {
    13	    login: vi.fn(),
    14	    logout: vi.fn(),
    15	    isAuthenticated: vi.fn(),
    16	    getCurrentUser: vi.fn(),
    17	  }
    18	}))
    19	
    20	describe('AuthStore', () => {
    21	  beforeEach(() => {
    22	    // Reset du store avant chaque test
    23	    useAuthStore.getState().logout()
    24	    vi.clearAllMocks()
    25	  })
    26	
    27	  afterEach(() => {
    28	    vi.restoreAllMocks()
    29	  })
    30	
    31	  it('initialise avec l\'√©tat par d√©faut', () => {
    32	    const { result } = renderHook(() => useAuthStore())
    33	
    34	    expect(result.current.user).toBeNull()
    35	    expect(result.current.isAuthenticated).toBe(false)
    36	    expect(result.current.isLoading).toBe(false)
    37	    expect(result.current.error).toBeNull()
    38	  })
    39	
    40	  it('g√®re le login avec succ√®s', async () => {
    41	    const mockUser = {
    42	      id: 1,
    43	      username: 'testuser',
    44	      email: 'test@example.com',
    45	      first_name: 'Test',
    46	      last_name: 'User',
    47	      is_staff: false,
    48	      is_superuser: false
    49	    }
    50	
    51	    const mockResponse = {
    52	      success: true,
    53	      message: 'Login successful',
    54	      data: {
    55	        access: 'mock-access-token',
    56	        refresh: 'mock-refresh-token',
    57	        user: mockUser
    58	      }
    59	    }
    60	
    61	    vi.mocked(authService.login).mockResolvedValue(mockResponse)
    62	
    63	    const { result } = renderHook(() => useAuthStore())
    64	
    65	    await act(async () => {
    66	      await result.current.login('testuser', 'password')
    67	    })
    68	
    69	    expect(result.current.user).toEqual(mockUser)
    70	    expect(result.current.isAuthenticated).toBe(true)
    71	    expect(result.current.isLoading).toBe(false)
    72	    expect(result.current.error).toBeNull()
    73	    expect(authService.login).toHaveBeenCalledWith({
    74	      username: 'testuser', 
    75	      password: 'password'
    76	    })
    77	  })
    78	
    79	  it('g√®re les erreurs de login', async () => {
    80	    const errorMessage = 'Identifiants incorrects'
    81	    
    82	    vi.mocked(authService.login).mockRejectedValue(
    83	      new Error(errorMessage)
    84	    )
    85	
    86	    const { result } = renderHook(() => useAuthStore())
    87	
    88	    await act(async () => {
    89	      try {
    90	        await result.current.login('wronguser', 'wrongpass')
    91	      } catch (error) {
    92	        // Erreur attendue
    93	      }
    94	    })
    95	
    96	    expect(result.current.user).toBeNull()
    97	    expect(result.current.isAuthenticated).toBe(false)
    98	    expect(result.current.isLoading).toBe(false)
    99	    expect(result.current.error).toBe(errorMessage)
   100	  })
   101	
   102	  it('g√®re le logout', () => {
   103	    const { result } = renderHook(() => useAuthStore())
   104	
   105	    // Simuler un utilisateur connect√©
   106	    act(() => {
   107	      result.current.setUser({
   108	        id: 1,
   109	        username: 'testuser',
   110	        email: 'test@example.com',
   111	        first_name: 'Test',
   112	        last_name: 'User',
   113	        is_staff: false,
   114	        is_superuser: false
   115	      })
   116	    })
   117	
   118	    expect(result.current.isAuthenticated).toBe(false) // Doit √™tre false car setUser ne change pas isAuthenticated
   119	
   120	    // Logout
   121	    act(() => {
   122	      result.current.logout()
   123	    })
   124	
   125	    expect(result.current.user).toBeNull()
   126	    expect(result.current.isAuthenticated).toBe(false)
   127	    expect(result.current.error).toBeNull()
   128	    expect(authService.logout).toHaveBeenCalled()
   129	  })
   130	
   131	  it('v√©rifie l\'authentification existante', () => {
   132	    const mockUser = {
   133	      id: 1,
   134	      username: 'testuser',
   135	      email: 'test@example.com',
   136	      first_name: 'Test',
   137	      last_name: 'User',
   138	      is_staff: false,
   139	      is_superuser: false
   140	    }
   141	
   142	    vi.mocked(authService.isAuthenticated).mockReturnValue(true)
   143	    vi.mocked(authService.getCurrentUser).mockReturnValue(mockUser)
   144	
   145	    const { result } = renderHook(() => useAuthStore())
   146	
   147	    act(() => {
   148	      result.current.checkAuth()
   149	    })
   150	
   151	    expect(result.current.user).toEqual(mockUser)
   152	    expect(result.current.isAuthenticated).toBe(true)
   153	  })
   154	
   155	  it('g√®re les √©tats de loading', () => {
   156	    const { result } = renderHook(() => useAuthStore())
   157	
   158	    act(() => {
   159	      result.current.setLoading(true)
   160	    })
   161	
   162	    expect(result.current.isLoading).toBe(true)
   163	
   164	    act(() => {
   165	      result.current.setLoading(false)
   166	    })
   167	
   168	    expect(result.current.isLoading).toBe(false)
   169	  })
   170	
   171	  it('g√®re les erreurs manuelles', () => {
   172	    const { result } = renderHook(() => useAuthStore())
   173	
   174	    const errorMessage = 'Erreur personnalis√©e'
   175	
   176	    act(() => {
   177	      result.current.setError(errorMessage)
   178	    })
   179	
   180	    expect(result.current.error).toBe(errorMessage)
   181	
   182	    act(() => {
   183	      result.current.clearError()
   184	    })
   185	
   186	    expect(result.current.error).toBeNull()
   187	  })
   188	
   189	  it('persiste l\'√©tat dans localStorage', () => {
   190	    const mockUser = {
   191	      id: 1,
   192	      username: 'testuser', 
   193	      email: 'test@example.com',
   194	      first_name: 'Test',
   195	      last_name: 'User',
   196	      is_staff: false,
   197	      is_superuser: false
   198	    }
   199	
   200	    const { result } = renderHook(() => useAuthStore())
   201	
   202	    act(() => {
   203	      result.current.setUser(mockUser)
   204	    })
   205	
   206	    // V√©rifier que localStorage contient les donn√©es
   207	    const stored = localStorage.getItem('fiscasync-auth')
   208	    expect(stored).toBeTruthy()
   209	    
   210	    if (stored) {
   211	      const parsed = JSON.parse(stored)
   212	      expect(parsed.state.user).toEqual(mockUser)
   213	    }
   214	  })
   215	})
================================================================================
FILE: src/store/auditSlice.ts
================================================================================
     1	/**
     2	 * Redux Slice pour l'audit et la d√©tection d'anomalies
     3	 * Etendu pour le moteur de controles 108 points
     4	 */
     5	
     6	import { createSlice, PayloadAction } from '@reduxjs/toolkit'
     7	import { AuditResult, AuditAnomalie } from '@/types'
     8	import type {
     9	  SessionAudit,
    10	  ResultatControle,
    11	  RapportCorrection,
    12	  Severite,
    13	  NiveauControle,
    14	  PhaseAudit,
    15	} from '@/types/audit.types'
    16	
    17	interface AuditState {
    18	  // Ancien systeme (compatibilite)
    19	  currentAudit: AuditResult | null
    20	  auditHistory: AuditResult[]
    21	  anomalies: AuditAnomalie[]
    22	  selectedAnomalie: AuditAnomalie | null
    23	
    24	  // Nouveau moteur 108 points
    25	  currentSession: SessionAudit | null
    26	  resultats: ResultatControle[]
    27	  correctionReport: RapportCorrection | null
    28	  phaseActive: PhaseAudit
    29	
    30	  filters: {
    31	    type?: 'ERROR' | 'WARNING' | 'INFO'
    32	    priorite?: 'HAUTE' | 'MOYENNE' | 'BASSE'
    33	    compte?: string
    34	    dateFrom?: string
    35	    dateTo?: string
    36	    resolved?: boolean
    37	    severite?: Severite
    38	    niveau?: NiveauControle
    39	    searchText?: string
    40	  }
    41	  isRunning: boolean
    42	  isLoading: boolean
    43	  error: string | null
    44	  progress: {
    45	    current: number
    46	    total: number
    47	    stage: string
    48	    niveauCourant?: NiveauControle
    49	    pourcentage?: number
    50	  }
    51	  statistics: {
    52	    totalAnomalies: number
    53	    byType: Record<string, number>
    54	    byPriority: Record<string, number>
    55	    resolvedCount: number
    56	    avgResolutionTime: number
    57	  }
    58	}
    59	
    60	const initialState: AuditState = {
    61	  currentAudit: null,
    62	  auditHistory: [],
    63	  anomalies: [],
    64	  selectedAnomalie: null,
    65	
    66	  currentSession: null,
    67	  resultats: [],
    68	  correctionReport: null,
    69	  phaseActive: 'PHASE_1',
    70	
    71	  filters: {},
    72	  isRunning: false,
    73	  isLoading: false,
    74	  error: null,
    75	  progress: {
    76	    current: 0,
    77	    total: 0,
    78	    stage: '',
    79	  },
    80	  statistics: {
    81	    totalAnomalies: 0,
    82	    byType: {},
    83	    byPriority: {},
    84	    resolvedCount: 0,
    85	    avgResolutionTime: 0,
    86	  },
    87	}
    88	
    89	const auditSlice = createSlice({
    90	  name: 'audit',
    91	  initialState,
    92	  reducers: {
    93	    // --- Actions ancien systeme (compatibilite) ---
    94	    setCurrentAudit: (state, action: PayloadAction<AuditResult>) => {
    95	      state.currentAudit = action.payload
    96	      state.auditHistory.unshift(action.payload)
    97	      state.auditHistory = state.auditHistory.slice(0, 10)
    98	    },
    99	    clearCurrentAudit: (state) => {
   100	      state.currentAudit = null
   101	    },
   102	
   103	    setAnomalies: (state, action: PayloadAction<AuditAnomalie[]>) => {
   104	      state.anomalies = action.payload
   105	    },
   106	    addAnomalie: (state, action: PayloadAction<AuditAnomalie>) => {
   107	      state.anomalies.push(action.payload)
   108	    },
   109	    updateAnomalie: (state, action: PayloadAction<AuditAnomalie>) => {
   110	      const index = state.anomalies.findIndex(a => a.id === action.payload.id)
   111	      if (index !== -1) {
   112	        state.anomalies[index] = action.payload
   113	      }
   114	    },
   115	    removeAnomalie: (state, action: PayloadAction<string>) => {
   116	      state.anomalies = state.anomalies.filter(a => a.id !== action.payload)
   117	    },
   118	    setSelectedAnomalie: (state, action: PayloadAction<AuditAnomalie | null>) => {
   119	      state.selectedAnomalie = action.payload
   120	    },
   121	
   122	    // --- Actions nouveau moteur ---
   123	    setSession: (state, action: PayloadAction<SessionAudit>) => {
   124	      state.currentSession = action.payload
   125	      state.resultats = action.payload.resultats
   126	    },
   127	    clearSession: (state) => {
   128	      state.currentSession = null
   129	      state.resultats = []
   130	    },
   131	    addResultats: (state, action: PayloadAction<ResultatControle[]>) => {
   132	      state.resultats.push(...action.payload)
   133	    },
   134	    setPhase: (state, action: PayloadAction<PhaseAudit>) => {
   135	      state.phaseActive = action.payload
   136	    },
   137	    setCorrectionReport: (state, action: PayloadAction<RapportCorrection | null>) => {
   138	      state.correctionReport = action.payload
   139	    },
   140	
   141	    // --- Actions filtres ---
   142	    setAuditFilters: (state, action: PayloadAction<Partial<AuditState['filters']>>) => {
   143	      state.filters = { ...state.filters, ...action.payload }
   144	    },
   145	    clearAuditFilters: (state) => {
   146	      state.filters = {}
   147	    },
   148	
   149	    // --- Actions execution ---
   150	    startAudit: (state) => {
   151	      state.isRunning = true
   152	      state.error = null
   153	      state.progress = { current: 0, total: 0, stage: 'Initialisation...' }
   154	    },
   155	    stopAudit: (state) => {
   156	      state.isRunning = false
   157	      state.progress = { current: 0, total: 0, stage: '' }
   158	    },
   159	    setAuditProgress: (state, action: PayloadAction<Partial<AuditState['progress']>>) => {
   160	      state.progress = { ...state.progress, ...action.payload }
   161	    },
   162	
   163	    // --- Actions chargement ---
   164	    setAuditLoading: (state, action: PayloadAction<boolean>) => {
   165	      state.isLoading = action.payload
   166	    },
   167	    setAuditError: (state, action: PayloadAction<string | null>) => {
   168	      state.error = action.payload
   169	      state.isRunning = false
   170	    },
   171	    clearAuditError: (state) => {
   172	      state.error = null
   173	    },
   174	
   175	    // --- Actions statistiques ---
   176	    setAuditStatistics: (state, action: PayloadAction<Partial<AuditState['statistics']>>) => {
   177	      state.statistics = { ...state.statistics, ...action.payload }
   178	    },
   179	    updateAuditStatistics: (state) => {
   180	      const totalAnomalies = state.anomalies.length
   181	      const byType = state.anomalies.reduce((acc, anomalie) => {
   182	        acc[anomalie.type] = (acc[anomalie.type] || 0) + 1
   183	        return acc
   184	      }, {} as Record<string, number>)
   185	      const byPriority = state.anomalies.reduce((acc, anomalie) => {
   186	        acc[anomalie.priorite] = (acc[anomalie.priorite] || 0) + 1
   187	        return acc
   188	      }, {} as Record<string, number>)
   189	
   190	      state.statistics = {
   191	        ...state.statistics,
   192	        totalAnomalies,
   193	        byType,
   194	        byPriority,
   195	      }
   196	    },
   197	
   198	    // --- Utilitaires ---
   199	    resetAuditState: (_state) => {
   200	      return { ...initialState }
   201	    },
   202	  },
   203	})
   204	
   205	export const {
   206	  setCurrentAudit,
   207	  clearCurrentAudit,
   208	  setAnomalies,
   209	  addAnomalie,
   210	  updateAnomalie,
   211	  removeAnomalie,
   212	  setSelectedAnomalie,
   213	  setSession,
   214	  clearSession,
   215	  addResultats,
   216	  setPhase,
   217	  setCorrectionReport,
   218	  setAuditFilters,
   219	  clearAuditFilters,
   220	  startAudit,
   221	  stopAudit,
   222	  setAuditProgress,
   223	  setAuditLoading,
   224	  setAuditError,
   225	  clearAuditError,
   226	  setAuditStatistics,
   227	  updateAuditStatistics,
   228	  resetAuditState,
   229	} = auditSlice.actions
   230	
   231	export default auditSlice.reducer

================================================================================
FILE: src/store/authStore.ts
================================================================================
     1	/**
     2	 * Store Zustand pour l'authentification
     3	 */
     4	
     5	import { create } from 'zustand'
     6	import { persist, createJSONStorage } from 'zustand/middleware'
     7	import { authService, type User, type SignupData, type SignupResponse } from '../services/authService'
     8	import { useOrganizationStore } from './organizationStore'
     9	
    10	interface AuthState {
    11	  user: User | null
    12	  isAuthenticated: boolean
    13	  isLoading: boolean
    14	  error: string | null
    15	
    16	  // Actions
    17	  login: (username: string, password: string) => Promise<void>
    18	  signup: (signupData: SignupData) => Promise<SignupResponse>
    19	  logout: () => void
    20	  setUser: (user: User) => void
    21	  setLoading: (loading: boolean) => void
    22	  setError: (error: string | null) => void
    23	  clearError: () => void
    24	  checkAuth: () => void
    25	}
    26	
    27	export const useAuthStore = create<AuthState>()(
    28	  persist(
    29	    (set, _get) => ({
    30	      user: null,
    31	      isAuthenticated: false,
    32	      isLoading: false,
    33	      error: null,
    34	
    35	      login: async (username: string, password: string) => {
    36	        set({ isLoading: true, error: null })
    37	
    38	        try {
    39	          // Utiliser le service d'authentification
    40	          const response = await authService.login({ username, password })
    41	
    42	          if (response.success && response.data.user) {
    43	            set({
    44	              user: response.data.user,
    45	              isAuthenticated: true,
    46	              isLoading: false,
    47	              error: null,
    48	            })
    49	          } else {
    50	            throw new Error(response.message || '√âchec de l\'authentification')
    51	          }
    52	        } catch (error: any) {
    53	          set({
    54	            error: error.message || 'Erreur de connexion',
    55	            isLoading: false,
    56	            isAuthenticated: false,
    57	          })
    58	          throw error
    59	        }
    60	      },
    61	
    62	      signup: async (signupData: SignupData) => {
    63	        set({ isLoading: true, error: null })
    64	
    65	        try {
    66	          // Appeler l'API d'inscription
    67	          const response = await authService.signup(signupData)
    68	
    69	          // Cr√©er l'objet User depuis la r√©ponse
    70	          const user: User = {
    71	            id: response.user.id,
    72	            username: response.user.email,
    73	            email: response.user.email,
    74	            first_name: response.user.first_name,
    75	            last_name: response.user.last_name,
    76	            is_staff: false,
    77	            is_superuser: false,
    78	          }
    79	
    80	          set({
    81	            user: user,
    82	            isAuthenticated: true,
    83	            isLoading: false,
    84	            error: null,
    85	          })
    86	
    87	          // Sauvegarder l'organisation dans le store d√©di√©
    88	          if (response.organization) {
    89	            useOrganizationStore.getState().setOrganization(response.organization)
    90	          }
    91	
    92	          return response
    93	        } catch (error: any) {
    94	          set({
    95	            error: error.message || 'Erreur lors de l\'inscription',
    96	            isLoading: false,
    97	            isAuthenticated: false,
    98	          })
    99	          throw error
   100	        }
   101	      },
   102	
   103	      logout: () => {
   104	        authService.logout()
   105	        set({
   106	          user: null,
   107	          isAuthenticated: false,
   108	          error: null,
   109	        })
   110	
   111	        // Nettoyer l'organisation
   112	        useOrganizationStore.getState().clearOrganization()
   113	      },
   114	
   115	      setUser: (user: User) => {
   116	        set({ user })
   117	      },
   118	
   119	      setLoading: (loading: boolean) => {
   120	        set({ isLoading: loading })
   121	      },
   122	
   123	      setError: (error: string | null) => {
   124	        set({ error })
   125	      },
   126	
   127	      clearError: () => {
   128	        set({ error: null })
   129	      },
   130	
   131	      checkAuth: () => {
   132	        // Auth d√©sactiv√©e temporairement - toujours connect√©
   133	        const user = authService.getCurrentUser()
   134	        set({
   135	          isAuthenticated: true,
   136	          user: user || {
   137	            id: 1,
   138	            username: 'admin',
   139	            email: 'admin@taxpilot.com',
   140	            first_name: 'Admin',
   141	            last_name: 'TaxPilot',
   142	            is_staff: true,
   143	            is_superuser: true,
   144	          },
   145	        })
   146	      },
   147	    }),
   148	    {
   149	      name: 'fiscasync-auth',
   150	      storage: createJSONStorage(() => localStorage),
   151	      partialize: (state) => ({
   152	        user: state.user,
   153	        isAuthenticated: state.isAuthenticated,
   154	      }),
   155	    }
   156	  )
   157	)
================================================================================
FILE: src/store/balanceSlice.ts
================================================================================
     1	/**
     2	 * Redux Slice pour la gestion des balances
     3	 */
     4	
     5	import { createSlice, PayloadAction } from '@reduxjs/toolkit'
     6	import { Balance } from '@/types'
     7	
     8	interface BalanceState {
     9	  balances: Balance[]
    10	  selectedBalance: Balance | null
    11	  filters: {
    12	    exercice?: string
    13	    compte?: string
    14	    searchTerm?: string
    15	    dateFrom?: string
    16	    dateTo?: string
    17	  }
    18	  pagination: {
    19	    page: number
    20	    limit: number
    21	    total: number
    22	  }
    23	  sortBy: {
    24	    field: string
    25	    direction: 'asc' | 'desc'
    26	  }
    27	  isLoading: boolean
    28	  isImporting: boolean
    29	  error: string | null
    30	  importProgress: {
    31	    status: 'idle' | 'uploading' | 'processing' | 'completed' | 'error'
    32	    progress: number
    33	    message: string
    34	    errors: string[]
    35	  }
    36	}
    37	
    38	const initialState: BalanceState = {
    39	  balances: [],
    40	  selectedBalance: null,
    41	  filters: {},
    42	  pagination: {
    43	    page: 1,
    44	    limit: 50,
    45	    total: 0,
    46	  },
    47	  sortBy: {
    48	    field: 'compte.numero_compte',
    49	    direction: 'asc',
    50	  },
    51	  isLoading: false,
    52	  isImporting: false,
    53	  error: null,
    54	  importProgress: {
    55	    status: 'idle',
    56	    progress: 0,
    57	    message: '',
    58	    errors: [],
    59	  },
    60	}
    61	
    62	const balanceSlice = createSlice({
    63	  name: 'balance',
    64	  initialState,
    65	  reducers: {
    66	    // Actions pour les balances
    67	    setBalances: (state, action: PayloadAction<Balance[]>) => {
    68	      state.balances = action.payload
    69	    },
    70	    addBalance: (state, action: PayloadAction<Balance>) => {
    71	      state.balances.push(action.payload)
    72	    },
    73	    updateBalance: (state, action: PayloadAction<Balance>) => {
    74	      const index = state.balances.findIndex(b => b.id === action.payload.id)
    75	      if (index !== -1) {
    76	        state.balances[index] = action.payload
    77	      }
    78	    },
    79	    removeBalance: (state, action: PayloadAction<string>) => {
    80	      state.balances = state.balances.filter(b => b.id !== action.payload)
    81	    },
    82	    setSelectedBalance: (state, action: PayloadAction<Balance | null>) => {
    83	      state.selectedBalance = action.payload
    84	    },
    85	
    86	    // Actions pour les filtres
    87	    setFilters: (state, action: PayloadAction<Partial<BalanceState['filters']>>) => {
    88	      state.filters = { ...state.filters, ...action.payload }
    89	    },
    90	    clearFilters: (state) => {
    91	      state.filters = {}
    92	    },
    93	
    94	    // Actions pour la pagination
    95	    setPagination: (state, action: PayloadAction<Partial<BalanceState['pagination']>>) => {
    96	      state.pagination = { ...state.pagination, ...action.payload }
    97	    },
    98	    setPage: (state, action: PayloadAction<number>) => {
    99	      state.pagination.page = action.payload
   100	    },
   101	
   102	    // Actions pour le tri
   103	    setSortBy: (state, action: PayloadAction<{ field: string; direction: 'asc' | 'desc' }>) => {
   104	      state.sortBy = action.payload
   105	    },
   106	
   107	    // Actions pour le chargement
   108	    setBalanceLoading: (state, action: PayloadAction<boolean>) => {
   109	      state.isLoading = action.payload
   110	    },
   111	    setBalanceError: (state, action: PayloadAction<string | null>) => {
   112	      state.error = action.payload
   113	    },
   114	
   115	    // Actions pour l'import
   116	    setImporting: (state, action: PayloadAction<boolean>) => {
   117	      state.isImporting = action.payload
   118	    },
   119	    setImportProgress: (state, action: PayloadAction<Partial<BalanceState['importProgress']>>) => {
   120	      state.importProgress = { ...state.importProgress, ...action.payload }
   121	    },
   122	    resetImportProgress: (state) => {
   123	      state.importProgress = {
   124	        status: 'idle',
   125	        progress: 0,
   126	        message: '',
   127	        errors: [],
   128	      }
   129	    },
   130	
   131	    // Actions utilitaires
   132	    clearBalanceError: (state) => {
   133	      state.error = null
   134	    },
   135	    resetBalanceState: (_state) => {
   136	      return { ...initialState }
   137	    },
   138	  },
   139	})
   140	
   141	export const {
   142	  setBalances,
   143	  addBalance,
   144	  updateBalance,
   145	  removeBalance,
   146	  setSelectedBalance,
   147	  setFilters,
   148	  clearFilters,
   149	  setPagination,
   150	  setPage,
   151	  setSortBy,
   152	  setBalanceLoading,
   153	  setBalanceError,
   154	  setImporting,
   155	  setImportProgress,
   156	  resetImportProgress,
   157	  clearBalanceError,
   158	  resetBalanceState,
   159	} = balanceSlice.actions
   160	
   161	export default balanceSlice.reducer
================================================================================
FILE: src/store/index.ts
================================================================================
     1	/**
     2	 * Configuration du store Redux pour TaxPilot
     3	 */
     4	
     5	import { configureStore } from '@reduxjs/toolkit'
     6	import { useDispatch, useSelector, TypedUseSelectorHook } from 'react-redux'
     7	import settingsReducer from './settingsSlice'
     8	import balanceReducer from './balanceSlice'
     9	import auditReducer from './auditSlice'
    10	import notificationReducer from './notificationSlice'
    11	
    12	export const store = configureStore({
    13	  reducer: {
    14	    settings: settingsReducer,
    15	    balance: balanceReducer,
    16	    audit: auditReducer,
    17	    notifications: notificationReducer,
    18	  },
    19	  middleware: (getDefaultMiddleware) =>
    20	    getDefaultMiddleware({
    21	      serializableCheck: {
    22	        ignoredActions: ['persist/PERSIST', 'persist/REHYDRATE'],
    23	      },
    24	    }),
    25	  devTools: process.env.NODE_ENV !== 'production',
    26	})
    27	
    28	export type RootState = ReturnType<typeof store.getState>
    29	export type AppDispatch = typeof store.dispatch
    30	
    31	// Types pour une utilisation simplifi√©e
    32	export const useAppDispatch = () => useDispatch<AppDispatch>()
    33	export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector
================================================================================
FILE: src/store/notificationSlice.ts
================================================================================
     1	/**
     2	 * Redux Slice pour les notifications
     3	 */
     4	
     5	import { createSlice, PayloadAction } from '@reduxjs/toolkit'
     6	import { Notification } from '@/types'
     7	
     8	interface NotificationState {
     9	  notifications: Notification[]
    10	  unreadCount: number
    11	  filters: {
    12	    type?: 'INFO' | 'WARNING' | 'ERROR' | 'SUCCESS'
    13	    read?: boolean
    14	    dateFrom?: string
    15	    dateTo?: string
    16	  }
    17	  isLoading: boolean
    18	  error: string | null
    19	  realTimeEnabled: boolean
    20	}
    21	
    22	const initialState: NotificationState = {
    23	  notifications: [],
    24	  unreadCount: 0,
    25	  filters: {},
    26	  isLoading: false,
    27	  error: null,
    28	  realTimeEnabled: true,
    29	}
    30	
    31	const notificationSlice = createSlice({
    32	  name: 'notifications',
    33	  initialState,
    34	  reducers: {
    35	    // Actions pour les notifications
    36	    setNotifications: (state, action: PayloadAction<Notification[]>) => {
    37	      state.notifications = action.payload
    38	      state.unreadCount = action.payload.filter(n => !n.lue).length
    39	    },
    40	    addNotification: (state, action: PayloadAction<Notification>) => {
    41	      state.notifications.unshift(action.payload)
    42	      if (!action.payload.lue) {
    43	        state.unreadCount += 1
    44	      }
    45	    },
    46	    updateNotification: (state, action: PayloadAction<Notification>) => {
    47	      const index = state.notifications.findIndex(n => n.id === action.payload.id)
    48	      if (index !== -1) {
    49	        const wasUnread = !state.notifications[index].lue
    50	        const isNowRead = action.payload.lue
    51	        
    52	        state.notifications[index] = action.payload
    53	        
    54	        // Mettre √† jour le compteur non lues
    55	        if (wasUnread && isNowRead) {
    56	          state.unreadCount -= 1
    57	        } else if (!wasUnread && !isNowRead) {
    58	          state.unreadCount += 1
    59	        }
    60	      }
    61	    },
    62	    removeNotification: (state, action: PayloadAction<string>) => {
    63	      const notification = state.notifications.find(n => n.id === action.payload)
    64	      if (notification && !notification.lue) {
    65	        state.unreadCount -= 1
    66	      }
    67	      state.notifications = state.notifications.filter(n => n.id !== action.payload)
    68	    },
    69	
    70	    // Actions pour marquer comme lu
    71	    markAsRead: (state, action: PayloadAction<string>) => {
    72	      const notification = state.notifications.find(n => n.id === action.payload)
    73	      if (notification && !notification.lue) {
    74	        notification.lue = true
    75	        notification.date_lecture = new Date().toISOString()
    76	        state.unreadCount -= 1
    77	      }
    78	    },
    79	    markAllAsRead: (state) => {
    80	      state.notifications.forEach(notification => {
    81	        if (!notification.lue) {
    82	          notification.lue = true
    83	          notification.date_lecture = new Date().toISOString()
    84	        }
    85	      })
    86	      state.unreadCount = 0
    87	    },
    88	
    89	    // Actions pour les filtres
    90	    setNotificationFilters: (state, action: PayloadAction<Partial<NotificationState['filters']>>) => {
    91	      state.filters = { ...state.filters, ...action.payload }
    92	    },
    93	    clearNotificationFilters: (state) => {
    94	      state.filters = {}
    95	    },
    96	
    97	    // Actions pour le chargement
    98	    setNotificationLoading: (state, action: PayloadAction<boolean>) => {
    99	      state.isLoading = action.payload
   100	    },
   101	    setNotificationError: (state, action: PayloadAction<string | null>) => {
   102	      state.error = action.payload
   103	    },
   104	    clearNotificationError: (state) => {
   105	      state.error = null
   106	    },
   107	
   108	    // Actions pour le temps r√©el
   109	    setRealTimeEnabled: (state, action: PayloadAction<boolean>) => {
   110	      state.realTimeEnabled = action.payload
   111	    },
   112	
   113	    // Actions utilitaires
   114	    clearOldNotifications: (state, action: PayloadAction<number>) => {
   115	      const cutoffDate = new Date()
   116	      cutoffDate.setDate(cutoffDate.getDate() - action.payload)
   117	      
   118	      state.notifications = state.notifications.filter(
   119	        n => new Date(n.created_at) > cutoffDate
   120	      )
   121	      
   122	      // Recalculer le nombre de non lues
   123	      state.unreadCount = state.notifications.filter(n => !n.lue).length
   124	    },
   125	    resetNotificationState: (_state) => {
   126	      return { ...initialState }
   127	    },
   128	  },
   129	})
   130	
   131	export const {
   132	  setNotifications,
   133	  addNotification,
   134	  updateNotification,
   135	  removeNotification,
   136	  markAsRead,
   137	  markAllAsRead,
   138	  setNotificationFilters,
   139	  clearNotificationFilters,
   140	  setNotificationLoading,
   141	  setNotificationError,
   142	  clearNotificationError,
   143	  setRealTimeEnabled,
   144	  clearOldNotifications,
   145	  resetNotificationState,
   146	} = notificationSlice.actions
   147	
   148	export default notificationSlice.reducer
================================================================================
FILE: src/store/organizationStore.ts
================================================================================
     1	/**
     2	 * Store Zustand pour la gestion de l'organisation (SaaS Multi-Tenant)
     3	 */
     4	
     5	import { create } from 'zustand'
     6	import { persist, createJSONStorage } from 'zustand/middleware'
     7	import type { Organization } from '@/services/apiClient'
     8	
     9	interface OrganizationState {
    10	  organization: Organization | null
    11	  isLoading: boolean
    12	  error: string | null
    13	
    14	  // Actions
    15	  setOrganization: (organization: Organization) => void
    16	  clearOrganization: () => void
    17	  setLoading: (loading: boolean) => void
    18	  setError: (error: string | null) => void
    19	  clearError: () => void
    20	
    21	  // Quota helpers
    22	  canCreateLiasse: () => boolean
    23	  getQuotaRemaining: () => number | 'unlimited'
    24	  getQuotaPercentage: () => number
    25	}
    26	
    27	export const useOrganizationStore = create<OrganizationState>()(
    28	  persist(
    29	    (set, get) => ({
    30	      organization: null,
    31	      isLoading: false,
    32	      error: null,
    33	
    34	      setOrganization: (organization: Organization) => {
    35	        set({ organization, error: null })
    36	      },
    37	
    38	      clearOrganization: () => {
    39	        set({ organization: null, error: null })
    40	      },
    41	
    42	      setLoading: (loading: boolean) => {
    43	        set({ isLoading: loading })
    44	      },
    45	
    46	      setError: (error: string | null) => {
    47	        set({ error })
    48	      },
    49	
    50	      clearError: () => {
    51	        set({ error: null })
    52	      },
    53	
    54	      // V√©rifier si on peut cr√©er une liasse
    55	      canCreateLiasse: () => {
    56	        const { organization } = get()
    57	        if (!organization) return false
    58	
    59	        // Plan ENTERPRISE = illimit√©
    60	        if (organization.subscription_plan === 'ENTERPRISE') {
    61	          return true
    62	        }
    63	
    64	        // V√©rifier le quota
    65	        return organization.liasses_used < organization.liasses_quota
    66	      },
    67	
    68	      // Obtenir le quota restant
    69	      getQuotaRemaining: () => {
    70	        const { organization } = get()
    71	        if (!organization) return 0
    72	
    73	        // Plan ENTERPRISE = illimit√©
    74	        if (organization.subscription_plan === 'ENTERPRISE') {
    75	          return 'unlimited'
    76	        }
    77	
    78	        return Math.max(0, organization.liasses_quota - organization.liasses_used)
    79	      },
    80	
    81	      // Obtenir le pourcentage du quota utilis√©
    82	      getQuotaPercentage: () => {
    83	        const { organization } = get()
    84	        if (!organization) return 0
    85	
    86	        // Plan ENTERPRISE = 0% (illimit√©)
    87	        if (organization.subscription_plan === 'ENTERPRISE') {
    88	          return 0
    89	        }
    90	
    91	        if (organization.liasses_quota === 0) return 0
    92	
    93	        return Math.round((organization.liasses_used / organization.liasses_quota) * 100)
    94	      },
    95	    }),
    96	    {
    97	      name: 'fiscasync-organization',
    98	      storage: createJSONStorage(() => localStorage),
    99	      partialize: (state) => ({
   100	        organization: state.organization,
   101	      }),
   102	    }
   103	  )
   104	)

================================================================================
FILE: src/store/settingsSlice.ts
================================================================================
     1	/**
     2	 * Redux Slice pour les param√®tres utilisateur
     3	 */
     4	
     5	import { createSlice, PayloadAction } from '@reduxjs/toolkit'
     6	
     7	interface SettingsState {
     8	  theme: 'light' | 'dark' | 'auto'
     9	  language: 'fr' | 'en' | 'pt'
    10	  currency: string
    11	  dateFormat: string
    12	  numberFormat: {
    13	    decimal: string
    14	    thousands: string
    15	    precision: number
    16	  }
    17	  notifications: {
    18	    email: boolean
    19	    push: boolean
    20	    audit: boolean
    21	    deadlines: boolean
    22	  }
    23	  dashboard: {
    24	    refreshInterval: number
    25	    defaultView: string
    26	    widgets: string[]
    27	  }
    28	  isLoading: boolean
    29	  error: string | null
    30	}
    31	
    32	const initialState: SettingsState = {
    33	  theme: 'light',
    34	  language: 'fr',
    35	  currency: 'XOF',
    36	  dateFormat: 'DD/MM/YYYY',
    37	  numberFormat: {
    38	    decimal: ',',
    39	    thousands: ' ',
    40	    precision: 2,
    41	  },
    42	  notifications: {
    43	    email: true,
    44	    push: true,
    45	    audit: true,
    46	    deadlines: true,
    47	  },
    48	  dashboard: {
    49	    refreshInterval: 300, // 5 minutes
    50	    defaultView: 'overview',
    51	    widgets: ['kpi', 'audit', 'balance', 'recent'],
    52	  },
    53	  isLoading: false,
    54	  error: null,
    55	}
    56	
    57	const settingsSlice = createSlice({
    58	  name: 'settings',
    59	  initialState,
    60	  reducers: {
    61	    updateTheme: (state, action: PayloadAction<'light' | 'dark' | 'auto'>) => {
    62	      state.theme = action.payload
    63	    },
    64	    updateLanguage: (state, action: PayloadAction<'fr' | 'en' | 'pt'>) => {
    65	      state.language = action.payload
    66	    },
    67	    updateCurrency: (state, action: PayloadAction<string>) => {
    68	      state.currency = action.payload
    69	    },
    70	    updateDateFormat: (state, action: PayloadAction<string>) => {
    71	      state.dateFormat = action.payload
    72	    },
    73	    updateNumberFormat: (state, action: PayloadAction<Partial<SettingsState['numberFormat']>>) => {
    74	      state.numberFormat = { ...state.numberFormat, ...action.payload }
    75	    },
    76	    updateNotifications: (state, action: PayloadAction<Partial<SettingsState['notifications']>>) => {
    77	      state.notifications = { ...state.notifications, ...action.payload }
    78	    },
    79	    updateDashboard: (state, action: PayloadAction<Partial<SettingsState['dashboard']>>) => {
    80	      state.dashboard = { ...state.dashboard, ...action.payload }
    81	    },
    82	    updateSettings: (state, action: PayloadAction<Partial<SettingsState>>) => {
    83	      return { ...state, ...action.payload }
    84	    },
    85	    setSettingsLoading: (state, action: PayloadAction<boolean>) => {
    86	      state.isLoading = action.payload
    87	    },
    88	    setSettingsError: (state, action: PayloadAction<string | null>) => {
    89	      state.error = action.payload
    90	    },
    91	    clearSettingsError: (state) => {
    92	      state.error = null
    93	    },
    94	  },
    95	})
    96	
    97	export const {
    98	  updateTheme,
    99	  updateLanguage,
   100	  updateCurrency,
   101	  updateDateFormat,
   102	  updateNumberFormat,
   103	  updateNotifications,
   104	  updateDashboard,
   105	  updateSettings,
   106	  setSettingsLoading,
   107	  setSettingsError,
   108	  clearSettingsError,
   109	} = settingsSlice.actions
   110	
   111	export default settingsSlice.reducer
================================================================================
FILE: src/store/themeStore.ts
================================================================================
     1	/**
     2	 * Store pour la gestion des th√®mes et palettes de couleurs
     3	 */
     4	
     5	import { create } from 'zustand'
     6	import { persist, createJSONStorage } from 'zustand/middleware'
     7	import { createTheme, Theme } from '@mui/material/styles'
     8	import { colorPalettes, getPaletteById, defaultPaletteId, createThemeFromPalette, type ColorPalette } from '../utils/colorPalettes'
     9	
    10	interface ThemeState {
    11	  // √âtat actuel
    12	  currentPaletteId: string
    13	  currentPalette: ColorPalette
    14	  isDarkMode: boolean
    15	  currentTheme: Theme
    16	  
    17	  // Actions
    18	  setPalette: (paletteId: string) => void
    19	  toggleDarkMode: () => void
    20	  resetToDefault: () => void
    21	  
    22	  // Getters
    23	  getAvailablePalettes: () => ColorPalette[]
    24	  getCurrentPaletteName: () => string
    25	}
    26	
    27	// Configuration de base du th√®me Material-UI
    28	const baseThemeConfig = {
    29	  typography: {
    30	    fontFamily: [
    31	      'Quicksand',
    32	      'Roboto',
    33	      '-apple-system',
    34	      'BlinkMacSystemFont',
    35	      '"Segoe UI"',
    36	      'Arial',
    37	      'sans-serif',
    38	    ].join(','),
    39	    h1: {
    40	      fontSize: '2.5rem',
    41	      fontWeight: 600,
    42	      lineHeight: 1.2,
    43	    },
    44	    h2: {
    45	      fontSize: '2rem',
    46	      fontWeight: 600,
    47	      lineHeight: 1.2,
    48	    },
    49	    h3: {
    50	      fontSize: '1.75rem',
    51	      fontWeight: 600,
    52	      lineHeight: 1.2,
    53	    },
    54	    h4: {
    55	      fontSize: '1.5rem',
    56	      fontWeight: 600,
    57	      lineHeight: 1.2,
    58	    },
    59	    h5: {
    60	      fontSize: '1.25rem',
    61	      fontWeight: 600,
    62	      lineHeight: 1.2,
    63	    },
    64	    h6: {
    65	      fontSize: '1rem',
    66	      fontWeight: 600,
    67	      lineHeight: 1.2,
    68	    },
    69	    body1: {
    70	      fontSize: '1rem',
    71	      lineHeight: 1.6,
    72	      fontWeight: 400,
    73	    },
    74	    body2: {
    75	      fontSize: '0.875rem',
    76	      lineHeight: 1.5,
    77	      fontWeight: 400,
    78	    },
    79	    button: {
    80	      textTransform: 'none' as any,
    81	      fontWeight: 600,
    82	      fontSize: '0.875rem',
    83	    },
    84	  },
    85	  shape: {
    86	    borderRadius: 12,
    87	  },
    88	  spacing: 8,
    89	  components: {
    90	    MuiButton: {
    91	      styleOverrides: {
    92	        root: {
    93	          borderRadius: 12,
    94	          padding: '10px 24px',
    95	          fontSize: '0.875rem',
    96	          fontWeight: 600,
    97	          textTransform: 'none' as any,
    98	          transition: 'all 0.2s ease-in-out',
    99	        },
   100	        contained: {
   101	          boxShadow: '0 4px 14px 0 rgba(0, 0, 0, 0.1)',
   102	          '&:hover': {
   103	            boxShadow: '0 6px 20px 0 rgba(0, 0, 0, 0.15)',
   104	            transform: 'translateY(-2px)',
   105	          },
   106	        },
   107	        outlined: {
   108	          borderWidth: 2,
   109	          '&:hover': {
   110	            borderWidth: 2,
   111	            transform: 'translateY(-1px)',
   112	          },
   113	        },
   114	      },
   115	    },
   116	    MuiCard: {
   117	      styleOverrides: {
   118	        root: {
   119	          borderRadius: 16,
   120	          boxShadow: '0 4px 20px 0 rgba(0, 0, 0, 0.05)',
   121	          border: '1px solid rgba(0, 0, 0, 0.04)',
   122	          transition: 'all 0.3s ease-in-out',
   123	          '&:hover': {
   124	            boxShadow: '0 8px 30px 0 rgba(0, 0, 0, 0.08)',
   125	            transform: 'translateY(-2px)',
   126	          },
   127	        },
   128	      },
   129	    },
   130	    MuiPaper: {
   131	      styleOverrides: {
   132	        root: {
   133	          borderRadius: 12,
   134	        },
   135	      },
   136	    },
   137	    MuiTextField: {
   138	      styleOverrides: {
   139	        root: {
   140	          '& .MuiOutlinedInput-root': {
   141	            borderRadius: 12,
   142	            backgroundColor: 'rgba(255, 255, 255, 0.8)',
   143	            '&:hover': {
   144	              backgroundColor: 'rgba(255, 255, 255, 1)',
   145	            },
   146	          },
   147	        },
   148	      },
   149	    },
   150	    MuiTableCell: {
   151	      styleOverrides: {
   152	        head: {
   153	          fontWeight: 600,
   154	          backgroundColor: 'rgba(0, 0, 0, 0.02)',
   155	          fontSize: '0.875rem',
   156	        },
   157	        body: {
   158	          fontSize: '0.875rem',
   159	        },
   160	      },
   161	    },
   162	    MuiChip: {
   163	      styleOverrides: {
   164	        root: {
   165	          borderRadius: 8,
   166	          fontWeight: 500,
   167	        },
   168	      },
   169	    },
   170	    MuiAppBar: {
   171	      styleOverrides: {
   172	        root: {
   173	          boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',
   174	          backgroundImage: 'none',
   175	        },
   176	      },
   177	    },
   178	    MuiDrawer: {
   179	      styleOverrides: {
   180	        paper: {
   181	          borderRight: '1px solid rgba(0, 0, 0, 0.08)',
   182	          boxShadow: '2px 0 8px rgba(0, 0, 0, 0.05)',
   183	        },
   184	      },
   185	    },
   186	  },
   187	}
   188	
   189	export const useThemeStore = create<ThemeState>()(
   190	  persist(
   191	    (set, get) => {
   192	      const defaultPalette = getPaletteById(defaultPaletteId);
   193	      const initialTheme = createTheme({
   194	        ...baseThemeConfig,
   195	        ...createThemeFromPalette(defaultPalette, 'light'),
   196	      });
   197	
   198	      return {
   199	        currentPaletteId: defaultPaletteId,
   200	        currentPalette: defaultPalette,
   201	        isDarkMode: false,
   202	        currentTheme: initialTheme,
   203	
   204	      setPalette: (paletteId: string) => {
   205	        const palette = getPaletteById(paletteId)
   206	        const paletteConfig = createThemeFromPalette(palette, get().isDarkMode ? 'dark' : 'light')
   207	        const newTheme = createTheme({
   208	          ...baseThemeConfig,
   209	          ...paletteConfig,
   210	        })
   211	
   212	        set({
   213	          currentPaletteId: paletteId,
   214	          currentPalette: palette,
   215	          currentTheme: newTheme,
   216	        })
   217	      },
   218	
   219	      toggleDarkMode: () => {
   220	        const state = get()
   221	        const newIsDark = !state.isDarkMode
   222	        const paletteConfig = createThemeFromPalette(state.currentPalette, newIsDark ? 'dark' : 'light')
   223	        const newTheme = createTheme({
   224	          ...baseThemeConfig,
   225	          ...paletteConfig,
   226	        })
   227	
   228	        set({
   229	          isDarkMode: newIsDark,
   230	          currentTheme: newTheme,
   231	        })
   232	      },
   233	
   234	      resetToDefault: () => {
   235	        const defaultPal = getPaletteById(defaultPaletteId)
   236	        const paletteConfig = createThemeFromPalette(defaultPal)
   237	        const newTheme = createTheme({
   238	          ...baseThemeConfig,
   239	          ...paletteConfig,
   240	        })
   241	
   242	        set({
   243	          currentPaletteId: defaultPaletteId,
   244	          currentPalette: defaultPal,
   245	          isDarkMode: false,
   246	          currentTheme: newTheme,
   247	        })
   248	      },
   249	
   250	      getAvailablePalettes: () => colorPalettes,
   251	      
   252	        getCurrentPaletteName: () => get().currentPalette.name,
   253	      };
   254	    },
   255	    {
   256	      name: 'fiscasync-theme',
   257	      storage: createJSONStorage(() => localStorage),
   258	      partialize: (state) => ({
   259	        currentPaletteId: state.currentPaletteId,
   260	        isDarkMode: state.isDarkMode,
   261	      }),
   262	    }
   263	  )
   264	)
================================================================================
FILE: src/test/setup.ts
================================================================================
     1	/**
     2	 * Configuration de test pour TaxPilot
     3	 */
     4	
     5	import '@testing-library/jest-dom'
     6	import { vi } from 'vitest'
     7	
     8	// Mock des APIs globales non disponibles dans jsdom
     9	Object.defineProperty(window, 'matchMedia', {
    10	  writable: true,
    11	  value: vi.fn().mockImplementation((query: string) => ({
    12	    matches: false,
    13	    media: query,
    14	    onchange: null,
    15	    addListener: vi.fn(),
    16	    removeListener: vi.fn(),
    17	    addEventListener: vi.fn(),
    18	    removeEventListener: vi.fn(),
    19	    dispatchEvent: vi.fn(),
    20	  })),
    21	})
    22	
    23	// Mock de ResizeObserver
    24	global.ResizeObserver = vi.fn().mockImplementation(() => ({
    25	  observe: vi.fn(),
    26	  unobserve: vi.fn(),
    27	  disconnect: vi.fn(),
    28	}))
    29	
    30	// Mock de IntersectionObserver
    31	global.IntersectionObserver = vi.fn().mockImplementation(() => ({
    32	  observe: vi.fn(),
    33	  unobserve: vi.fn(),
    34	  disconnect: vi.fn(),
    35	}))
================================================================================
FILE: src/tests/liasse-verification.ts
================================================================================
     1	/**
     2	 * V√©rification automatique de la liasse fiscale SYSCOHADA
     3	 *
     4	 * Ce fichier teste le moteur de calcul avec une balance fictive
     5	 * et v√©rifie 13 contr√¥les automatiques + coh√©rence inter-tableaux.
     6	 *
     7	 * Usage : importer et appeler runFullVerification() depuis la console ou un composant.
     8	 */
     9	
    10	import { LiasseDataService, SYSCOHADA_MAPPING, type BalanceEntry } from '../services/liasseDataService'
    11	
    12	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    13	// 1. Balance fictive de test (30+ comptes)
    14	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    15	
    16	function createTestBalance(): BalanceEntry[] {
    17	  // Helper : cr√©er une entr√©e d√©bitrice
    18	  const d = (compte: string, intitule: string, montant: number): BalanceEntry => ({
    19	    compte, intitule,
    20	    debit: montant, credit: 0,
    21	    solde_debit: montant, solde_credit: 0,
    22	  })
    23	  // Helper : cr√©er une entr√©e cr√©ditrice
    24	  const c = (compte: string, intitule: string, montant: number): BalanceEntry => ({
    25	    compte, intitule,
    26	    debit: 0, credit: montant,
    27	    solde_debit: 0, solde_credit: montant,
    28	  })
    29	
    30	  return [
    31	    // ‚îÄ‚îÄ Classe 1 : Capitaux propres et emprunts ‚îÄ‚îÄ
    32	    c('1011', 'Capital social', 50_000_000),
    33	    c('1061', 'R√©serve l√©gale', 5_000_000),
    34	    c('1200', 'Report √† nouveau', 10_180_000),
    35	    c('1300', 'R√©sultat net de l\'exercice', 8_120_000),  // CH = 142.12M - 134M
    36	    c('1620', 'Emprunts aupr√®s des √©tablissements de cr√©dit', 20_000_000),
    37	    c('1640', 'Dettes aupr√®s des √©tablissements de cr√©dit', 5_000_000),
    38	    c('1910', 'Provisions pour litiges', 2_000_000),
    39	
    40	    // ‚îÄ‚îÄ Classe 2 : Immobilisations ‚îÄ‚îÄ
    41	    d('2130', 'Logiciels', 3_000_000),
    42	    d('2150', 'Fonds commercial', 8_000_000),
    43	    d('2310', 'B√¢timents', 45_000_000),
    44	    d('2410', 'Mat√©riel industriel', 25_000_000),
    45	    d('2450', 'Mat√©riel de transport', 15_000_000),
    46	    d('2710', 'Pr√™ts au personnel', 1_500_000),
    47	
    48	    // Amortissements (cr√©diteurs)
    49	    c('28130', 'Amort. logiciels', 1_200_000),
    50	    c('28150', 'Amort. fonds commercial', 0),
    51	    c('28310', 'Amort. b√¢timents', 9_000_000),
    52	    c('28410', 'Amort. mat√©riel industriel', 10_000_000),
    53	    c('28450', 'Amort. mat√©riel transport', 6_000_000),
    54	
    55	    // ‚îÄ‚îÄ Classe 3 : Stocks ‚îÄ‚îÄ
    56	    d('3110', 'Marchandises', 12_000_000),
    57	    d('3210', 'Mati√®res premi√®res', 8_000_000),
    58	    d('3710', 'Produits interm√©diaires', 5_000_000),
    59	
    60	    // ‚îÄ‚îÄ Classe 4 : Tiers ‚îÄ‚îÄ
    61	    d('4110', 'Clients', 18_000_000),
    62	    c('4010', 'Fournisseurs', 15_000_000),
    63	    c('4310', 'S√©curit√© sociale', 2_500_000),
    64	    c('4410', '√âtat, imp√¥ts sur b√©n√©fices', 3_000_000),
    65	    c('4210', 'Personnel, r√©mun√©rations dues', 4_200_000),
    66	
    67	    // ‚îÄ‚îÄ Classe 5 : Tr√©sorerie ‚îÄ‚îÄ
    68	    d('5210', 'Banque BIAO', 9_500_000),
    69	    d('5310', 'Caisse', 1_200_000),
    70	
    71	    // ‚îÄ‚îÄ Classe 6 : Charges ‚îÄ‚îÄ
    72	    d('6010', 'Achats de marchandises', 45_000_000),
    73	    d('60310', 'Variation stocks marchandises', 2_000_000),  // d√©stockage
    74	    d('6020', 'Achats de mati√®res premi√®res', 18_000_000),
    75	    d('60320', 'Variation stocks mati√®res premi√®res', 1_000_000),
    76	    d('6050', 'Autres achats', 5_000_000),
    77	    d('6100', 'Transports', 3_000_000),
    78	    d('6210', 'Sous-traitance', 4_000_000),
    79	    d('6300', 'Services ext√©rieurs', 2_500_000),
    80	    d('6410', 'Imp√¥ts et taxes', 3_500_000),
    81	    d('6510', 'Pertes sur cr√©ances', 500_000),
    82	    d('6610', 'R√©mun√©rations du personnel', 28_000_000),
    83	    d('6810', 'Dotations aux amortissements d\'exploitation', 8_000_000),
    84	    d('6910', 'Dotations aux provisions d\'exploitation', 2_000_000),
    85	
    86	    // Charges financi√®res
    87	    d('6710', 'Int√©r√™ts des emprunts', 4_000_000),
    88	
    89	    // Charges HAO
    90	    d('8100', 'VNC des cessions d\'immobilisations', 3_000_000),
    91	    d('8300', 'Charges HAO', 500_000),
    92	
    93	    // Imp√¥t
    94	    d('8910', 'Imp√¥ts sur le r√©sultat', 4_000_000),
    95	
    96	    // ‚îÄ‚îÄ Classe 7 : Produits ‚îÄ‚îÄ
    97	    c('7010', 'Ventes de marchandises', 85_000_000),
    98	    c('7020', 'Ventes de produits fabriqu√©s', 35_000_000),
    99	    c('7060', 'Services vendus', 8_000_000),
   100	    c('7300', 'Production stock√©e', 3_000_000),  // cr√©dit = stockage positif
   101	    c('7500', 'Autres produits', 1_500_000),
   102	    c('7910', 'Reprises amort. et provisions', 2_500_000),
   103	
   104	    // Produits financiers
   105	    c('7710', 'Revenus financiers', 1_000_000),
   106	
   107	    // Produits HAO
   108	    c('8200', 'Produits des cessions d\'immobilisations', 5_000_000),
   109	    c('8400', 'Produits HAO divers', 1_120_000),
   110	  ]
   111	}
   112	
   113	
   114	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   115	// 2. Fonctions de v√©rification
   116	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   117	
   118	interface VerifResult {
   119	  id: string
   120	  label: string
   121	  expected: string
   122	  actual: string
   123	  pass: boolean
   124	}
   125	
   126	function runVerifications(service: LiasseDataService): VerifResult[] {
   127	  const results: VerifResult[] = []
   128	  const tolerance = 1 // 1 FCFA
   129	
   130	  // Helper
   131	  const check = (id: string, label: string, expected: number, actual: number) => {
   132	    const pass = Math.abs(expected - actual) < tolerance
   133	    results.push({
   134	      id,
   135	      label,
   136	      expected: fmt(expected),
   137	      actual: fmt(actual),
   138	      pass,
   139	    })
   140	  }
   141	
   142	  const fmt = (n: number) => new Intl.NumberFormat('fr-FR').format(Math.round(n))
   143	
   144	  // ‚îÄ‚îÄ G√©n√©rer les donn√©es ‚îÄ‚îÄ
   145	  const actif = service.generateBilanActif()
   146	  const passif = service.generateBilanPassif()
   147	  const { charges, produits } = service.generateCompteResultat()
   148	  const sig = service.generateSIG()
   149	  const tft = service.generateTFT()
   150	
   151	  // ‚îÄ‚îÄ Calculer les totaux ‚îÄ‚îÄ
   152	
   153	  // Actif : sum of net values
   154	  const actifByRef: Record<string, any> = {}
   155	  actif.forEach((r: any) => { actifByRef[r.ref] = r })
   156	  const totalActifNet = actif.reduce((s: number, r: any) => s + (r.net || 0), 0)
   157	
   158	  // Passif : sum of montant values
   159	  const passifByRef: Record<string, any> = {}
   160	  passif.forEach((r: any) => { passifByRef[r.ref] = r })
   161	  const totalPassif = passif.reduce((s: number, r: any) => s + (r.montant || 0), 0)
   162	
   163	  // CdR totaux
   164	  const totalCharges = charges.reduce((s: number, r: any) => s + (r.montant || 0), 0)
   165	  const totalProduits = produits.reduce((s: number, r: any) => s + (r.montant || 0), 0)
   166	  const resultatCdR = totalProduits - totalCharges
   167	
   168	  // CdR par ref
   169	  const chargesByRef: Record<string, number> = {}
   170	  charges.forEach((r: any) => { chargesByRef[r.ref] = r.montant || 0 })
   171	  const produitsByRef: Record<string, number> = {}
   172	  produits.forEach((r: any) => { produitsByRef[r.ref] = r.montant || 0 })
   173	
   174	  // SIG par ref
   175	  const sigByRef: Record<string, number> = {}
   176	  sig.forEach((r: any) => { sigByRef[r.ref] = r.montant || 0 })
   177	
   178	  // R√©sultat bilan (CH au passif)
   179	  const resultatBilan = passifByRef['CH']?.montant || 0
   180	
   181	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   182	  // V√©rification 1 : BZ = DZ (Actif = Passif)
   183	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   184	  check('V01', 'Total Actif (BZ) = Total Passif (DZ)', totalActifNet, totalPassif)
   185	
   186	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   187	  // V√©rification 2 : CH = XI = SIG9 (R√©sultat net)
   188	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   189	  check('V02a', 'CH (Bilan) = XI (CdR)', resultatBilan, resultatCdR)
   190	  check('V02b', 'CH (Bilan) = SIG9', resultatBilan, sigByRef['SIG9'] || 0)
   191	  check('V02c', 'XI (CdR) = SIG9', resultatCdR, sigByRef['SIG9'] || 0)
   192	
   193	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   194	  // V√©rification 3 : Cascade SIG correcte
   195	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   196	  // SIG1 = T1 - T2 - T3
   197	  const sig1Calc = (sigByRef['T1'] || 0) - (sigByRef['T2'] || 0) - (sigByRef['T3'] || 0)
   198	  check('V03a', 'SIG1 = T1 - T2 - T3', sig1Calc, sigByRef['SIG1'] || 0)
   199	
   200	  // SIG3 cascade
   201	  const sig3Calc = (sigByRef['SIG1'] || 0) + (sigByRef['SIG2'] || 0) - (sigByRef['T7'] || 0) - (sigByRef['T8'] || 0) - (sigByRef['T9'] || 0)
   202	  check('V03b', 'SIG3 = SIG1 + SIG2 - T7 - T8 - T9', sig3Calc, sigByRef['SIG3'] || 0)
   203	
   204	  // SIG7 = SIG5 + SIG6
   205	  check('V03c', 'SIG7 = SIG5 + SIG6', (sigByRef['SIG5'] || 0) + (sigByRef['SIG6'] || 0), sigByRef['SIG7'] || 0)
   206	
   207	  // SIG9 = SIG7 + SIG8 - T26 - T27
   208	  const sig9Calc = (sigByRef['SIG7'] || 0) + (sigByRef['SIG8'] || 0) - (sigByRef['T26'] || 0) - (sigByRef['T27'] || 0)
   209	  check('V03d', 'SIG9 = SIG7 + SIG8 - T26 - T27', sig9Calc, sigByRef['SIG9'] || 0)
   210	
   211	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   212	  // V√©rification 4 : Totaux actif coh√©rents
   213	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   214	  // AZ = total immo, BL = total actif circulant, BS = tr√©sorerie actif ‚Üí BZ = AZ + actif circ + tr√©so + BU
   215	  // We check that all line items sum correctly
   216	  const groupActifImmo = ['AQ', 'AR', 'AS', 'AD', 'AE', 'AF', 'AG', 'AJ', 'AK', 'AL', 'AM', 'AN', 'AP', 'AT', 'AU']
   217	  const totalImmoNet = groupActifImmo.reduce((s, ref) => s + (actifByRef[ref]?.net || 0), 0)
   218	  check('V04', 'AZ = somme immo nettes', totalImmoNet, totalActifNet - (
   219	    (actifByRef['BA']?.net || 0) +
   220	    (actifByRef['BC']?.net || 0) + (actifByRef['BD']?.net || 0) + (actifByRef['BE']?.net || 0) +
   221	    (actifByRef['BF']?.net || 0) + (actifByRef['BG']?.net || 0) +
   222	    (actifByRef['BI']?.net || 0) + (actifByRef['BJ']?.net || 0) + (actifByRef['BK']?.net || 0) +
   223	    (actifByRef['BQ']?.net || 0) + (actifByRef['BR']?.net || 0) + (actifByRef['BS']?.net || 0) +
   224	    (actifByRef['BU']?.net || 0)
   225	  ))
   226	
   227	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   228	  // V√©rification 5 : Comptes r√©ciproques 52x
   229	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   230	  // 52x with debit balance ‚Üí actif (BS), credit balance ‚Üí passif (DQ)
   231	  // In our test, 5210 is debit 9.5M ‚Üí should be in BS, not in DQ
   232	  const bsValue = actifByRef['BS']?.brut || 0
   233	  const dqValue = passifByRef['DQ']?.montant || 0
   234	  check('V05a', 'BS inclut 52x d√©biteur (9.5M dans banque)', bsValue > 0 ? 1 : 0, 1)
   235	  check('V05b', 'DQ = 0 car pas de 52x cr√©diteur', 0, dqValue)
   236	
   237	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   238	  // V√©rification 6 : Variation stocks (CdR RB, RD)
   239	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   240	  // RB = variation stocks marchandises (6031) = 2M (d√©stockage)
   241	  check('V06a', 'RB = variation stocks marchandises = 2 000 000', 2_000_000, chargesByRef['RB'] || 0)
   242	  check('V06b', 'RD = variation stocks mati√®res = 1 000 000', 1_000_000, chargesByRef['RD'] || 0)
   243	
   244	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   245	  // V√©rification 7 : Production stock√©e (TD) signe correct
   246	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   247	  // Compte 73 cr√©dit 3M ‚Üí TD = +3M (positif = stockage)
   248	  check('V07', 'TD = production stock√©e = 3 000 000 (cr√©dit‚Üípositif)', 3_000_000, produitsByRef['TD'] || 0)
   249	
   250	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   251	  // V√©rification 8 : CAFG (TFT)
   252	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   253	  // CAFG = r√©sultat + dotations - reprises - plus-values
   254	  // r√©sultat = 8 120 000
   255	  // dotations (681+691) = 8 000 000 + 2 000 000 = 10 000 000
   256	  // reprises (791) = 2 500 000
   257	  // plus-values = produits cessions (82=5M) - VNC (81=3M) = 2M
   258	  const cafgExpected = resultatCdR + (tft.FB || 0) - (tft.FC || 0) - (tft.FD || 0)
   259	  check('V08', 'CAFG = R√©sultat + Dotations - Reprises - Plus-values', tft.FE || 0, cafgExpected)
   260	
   261	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   262	  // V√©rification 9 : Tr√©sorerie nette (TFT)
   263	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   264	  // tresoActif = 5210 (9.5M) + 5310 (1.2M) = 10.7M
   265	  // tresoPassif = 0 (pas de 52 cr√©diteur)
   266	  check('V09', 'Tr√©sorerie nette = tresoActif - tresoPassif', 10_700_000, tft.FS || 0)
   267	
   268	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   269	  // V√©rification 10 : Pas de double comptage
   270	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   271	  // Total produits CdR = 85M + 35M + 8M + 3M + 1.5M + 2.5M + 1M + 5M + 1.12M = 142.12M
   272	  const expectedProduits = 85_000_000 + 35_000_000 + 8_000_000 + 3_000_000 + 1_500_000 + 2_500_000 + 1_000_000 + 5_000_000 + 1_120_000
   273	  check('V10', 'Total produits CdR = somme connue (142 120 000)', expectedProduits, totalProduits)
   274	
   275	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   276	  // V√©rification 11 : R√©sultat net calcul√©
   277	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   278	  // Expected = 142 120 000 (produits) - charges
   279	  // Charges = 45M+2M+18M+1M+5M+3M+4M+2.5M+3.5M+0.5M+28M+8M+2M+4M+3M+0.5M+4M = 134 000 000
   280	  const expectedCharges = 134_000_000
   281	  const expectedResultat = expectedProduits - expectedCharges  // 142.12 - 134 = 8.12M
   282	  check('V11a', 'Total charges CdR = 134 000 000', expectedCharges, totalCharges)
   283	  check('V11b', 'R√©sultat net = 8 120 000', expectedResultat, resultatCdR)
   284	
   285	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   286	  // V√©rification 12 : Amortissements corrects
   287	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   288	  const totalAmort = (actifByRef['AD']?.amortProv || 0) + (actifByRef['AE']?.amortProv || 0) +
   289	    (actifByRef['AF']?.amortProv || 0) + (actifByRef['AG']?.amortProv || 0) +
   290	    (actifByRef['AJ']?.amortProv || 0) + (actifByRef['AK']?.amortProv || 0) +
   291	    (actifByRef['AL']?.amortProv || 0) + (actifByRef['AM']?.amortProv || 0) +
   292	    (actifByRef['AN']?.amortProv || 0)
   293	  // 1.2M + 0 + 9M + 10M + 6M = 26.2M
   294	  check('V12', 'Total amortissements = 26 200 000', 26_200_000, totalAmort)
   295	
   296	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   297	  // V√©rification 13 : Marge commerciale (SIG1)
   298	  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   299	  // SIG1 = Ventes marchandises (85M) - Achats (45M) - Variation stocks (2M) = 38M
   300	  check('V13', 'Marge commerciale = 85M - 45M - 2M = 38 000 000', 38_000_000, sigByRef['SIG1'] || 0)
   301	
   302	  return results
   303	}
   304	
   305	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   306	// 3. Rapport final
   307	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   308	
   309	export interface FullVerificationReport {
   310	  balance: BalanceEntry[]
   311	  results: VerifResult[]
   312	  summary: {
   313	    total: number
   314	    passed: number
   315	    failed: number
   316	    percent: number
   317	  }
   318	  tableText: string
   319	}
   320	
   321	export function runFullVerification(): FullVerificationReport {
   322	  const service = new LiasseDataService()
   323	  const balance = createTestBalance()
   324	  service.loadBalance(balance)
   325	
   326	  const results = runVerifications(service)
   327	
   328	  const passed = results.filter(r => r.pass).length
   329	  const total = results.length
   330	  const failed = total - passed
   331	
   332	  // Generate text table
   333	  let table = '‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n'
   334	  table +=    '‚ïë ID     ‚ïë V√©rification                                         ‚ïë Attendu          ‚ïë Obtenu           ‚ïë Statut ‚ïë\n'
   335	  table +=    '‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£\n'
   336	
   337	  for (const r of results) {
   338	    const id = r.id.padEnd(6)
   339	    const label = r.label.substring(0, 52).padEnd(52)
   340	    const expected = r.expected.substring(0, 16).padStart(16)
   341	    const actual = r.actual.substring(0, 16).padStart(16)
   342	    const status = r.pass ? '  OK  ' : ' FAIL '
   343	    table += `‚ïë ${id} ‚ïë ${label} ‚ïë ${expected} ‚ïë ${actual} ‚ïë${status}‚ïë\n`
   344	  }
   345	
   346	  table += '‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£\n'
   347	  table += `‚ïë TOTAL  ‚ïë ${passed}/${total} v√©rifications r√©ussies (${Math.round(passed / total * 100)}%)${''.padEnd(52 - `${passed}/${total} v√©rifications r√©ussies (${Math.round(passed / total * 100)}%)`.length)} ‚ïë                  ‚ïë                  ‚ïë${failed === 0 ? ' 100% ' : ' FAIL '}‚ïë\n`
   348	  table += '‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n'
   349	
   350	  return {
   351	    balance,
   352	    results,
   353	    summary: { total, passed, failed, percent: Math.round(passed / total * 100) },
   354	    tableText: table,
   355	  }
   356	}
   357	
   358	// Export test balance for use in other components
   359	export { createTestBalance }

================================================================================
FILE: src/tests/run-verification.ts
================================================================================
     1	/**
     2	 * Standalone verification runner
     3	 * Run with: npx tsx src/tests/run-verification.ts
     4	 */
     5	
     6	// Inline the core classes to avoid import path issues with tsx
     7	
     8	interface BalanceEntry {
     9	  compte: string
    10	  intitule: string
    11	  debit: number
    12	  credit: number
    13	  solde_debit: number
    14	  solde_credit: number
    15	}
    16	
    17	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    18	// Minimal LiasseDataService (copied from service)
    19	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    20	
    21	const SYSCOHADA_MAPPING = {
    22	  actif: {
    23	    AQ: { comptes: ['201'], amortComptes: ['2801', '2901'] },
    24	    AR: { comptes: ['202'], amortComptes: ['2802', '2902'] },
    25	    AS: { comptes: ['206'], amortComptes: ['2806', '2906'] },
    26	    AD: { comptes: ['211', '212'], amortComptes: ['2811', '2812', '2911', '2912'] },
    27	    AE: { comptes: ['213', '214', '215'], amortComptes: ['2813', '2814', '2815', '2913', '2914', '2915'] },
    28	    AF: { comptes: ['216', '217'], amortComptes: ['2816', '2817', '2916', '2917'] },
    29	    AG: { comptes: ['218', '219'], amortComptes: ['2818', '2819', '2918', '2919'] },
    30	    AJ: { comptes: ['22'], amortComptes: ['282', '292'] },
    31	    AK: { comptes: ['231', '232', '233', '234'], amortComptes: ['2831', '2832', '2833', '2834', '2931', '2932', '2933', '2934'] },
    32	    AL: { comptes: ['235', '237', '238'], amortComptes: ['2835', '2837', '2838', '2935', '2937', '2938'] },
    33	    AM: { comptes: ['241', '242', '243', '244'], amortComptes: ['2841', '2842', '2843', '2844', '2941', '2942', '2943', '2944'] },
    34	    AN: { comptes: ['245'], amortComptes: ['2845', '2945'] },
    35	    AP: { comptes: ['251', '252'], amortComptes: [] },
    36	    AT: { comptes: ['26'], amortComptes: ['296'] },
    37	    AU: { comptes: ['271', '272', '273', '274', '275', '276', '277'], amortComptes: ['297'] },
    38	    BA: { comptes: ['485', '486', '487', '488'], amortComptes: ['498'] },
    39	    BC: { comptes: ['31'], amortComptes: ['391'] },
    40	    BD: { comptes: ['32'], amortComptes: ['392'] },
    41	    BE: { comptes: ['33'], amortComptes: ['393'] },
    42	    BF: { comptes: ['34', '35'], amortComptes: ['394', '395'] },
    43	    BG: { comptes: ['36', '37', '38'], amortComptes: ['396', '397', '398'] },
    44	    BI: { comptes: ['409'], amortComptes: ['490'] },
    45	    BJ: { comptes: ['411', '412', '413', '414', '415', '416', '418'], amortComptes: ['491'] },
    46	    BK: { comptes: ['43', '44', '45', '46', '47'], amortComptes: ['492', '493', '494', '495', '496', '497'] },
    47	    BQ: { comptes: ['50'], amortComptes: ['590'] },
    48	    BR: { comptes: ['51'], amortComptes: ['591'] },
    49	    BS: { comptes: ['52', '53', '54', '55', '56', '57', '58'], amortComptes: ['592', '593', '594'] },
    50	    BU: { comptes: ['478'], amortComptes: [] },
    51	  },
    52	  passif: {
    53	    CA: { comptes: ['101', '102', '103'] },
    54	    CB: { comptes: ['109'] },
    55	    CC: { comptes: ['104', '105'] },
    56	    CD: { comptes: ['106'] },
    57	    CE: { comptes: ['111', '112'] },
    58	    CF: { comptes: ['113', '118'] },
    59	    CG: { comptes: ['12'] },
    60	    CH: { comptes: ['13'] },
    61	    CI: { comptes: ['14'] },
    62	    CJ: { comptes: ['15'] },
    63	    DA: { comptes: ['161'] },
    64	    DB: { comptes: ['162', '163', '164'] },
    65	    DC: { comptes: ['165', '166', '168'] },
    66	    DD: { comptes: ['17'] },
    67	    DE: { comptes: ['181', '182', '183', '184', '185', '186'] },
    68	    DF: { comptes: ['19'] },
    69	    DH: { comptes: ['481', '482', '483', '484'] },
    70	    DI: { comptes: ['419'] },
    71	    DJ: { comptes: ['401', '402', '403', '404', '405', '408'] },
    72	    DK: { comptes: ['431', '432', '433', '434', '435', '436', '437', '438', '439', '441', '442', '443', '444', '445', '446', '447', '448', '449'] },
    73	    DL: { comptes: ['421', '422', '423', '424', '425', '426', '427', '428'] },
    74	    DM: { comptes: ['499'] },
    75	    DQ: { comptes: ['52', '561', '564'] },
    76	    DR: { comptes: ['565'] },
    77	    DT: { comptes: ['479'] },
    78	  },
    79	  charges: {
    80	    RA: { comptes: ['601'] },
    81	    RB: { comptes: ['6031'] },
    82	    RC: { comptes: ['602'] },
    83	    RD: { comptes: ['6032'] },
    84	    RE: { comptes: ['604', '605', '608'] },
    85	    RF: { comptes: ['6033'] },
    86	    RG: { comptes: ['61'] },
    87	    RH: { comptes: ['62', '63'] },
    88	    RI: { comptes: ['64'] },
    89	    RJ: { comptes: ['65'] },
    90	    RK: { comptes: ['66'] },
    91	    RL: { comptes: ['681'] },
    92	    RM: { comptes: ['691'] },
    93	    RN: { comptes: ['671', '672', '673', '674', '675'] },
    94	    RO: { comptes: ['676'] },
    95	    RP: { comptes: ['679', '697'] },
    96	    RQ: { comptes: ['81'] },
    97	    RR: { comptes: ['83', '85'] },
    98	    RS: { comptes: ['89'] },
    99	  },
   100	  produits: {
   101	    TA: { comptes: ['701'] },
   102	    TB: { comptes: ['702', '703', '704', '705'] },
   103	    TC: { comptes: ['706'] },
   104	    TD: { comptes: ['73'] },
   105	    TE: { comptes: ['72'] },
   106	    TF: { comptes: ['707'] },
   107	    TG: { comptes: ['71'] },
   108	    TH: { comptes: ['75'] },
   109	    TI: { comptes: ['791', '798', '799'] },
   110	    TJ: { comptes: ['771', '772', '773', '774', '775'] },
   111	    TK: { comptes: ['776'] },
   112	    TL: { comptes: ['787', '797'] },
   113	    TM: { comptes: ['781', '782'] },
   114	    TN: { comptes: ['82'] },
   115	    TO: { comptes: ['84', '86', '88'] },
   116	  },
   117	}
   118	
   119	class TestLiasseService {
   120	  private cache = new Map<string, number>()
   121	
   122	  loadBalance(balance: BalanceEntry[]) {
   123	    this.cache.clear()
   124	    balance.forEach(e => {
   125	      const k = e.compte.replace(/\s/g, '')
   126	      this.cache.set(k, e.solde_debit - e.solde_credit)
   127	    })
   128	  }
   129	
   130	  private sumSoldes(comptes: string[]): number {
   131	    let t = 0
   132	    comptes.forEach(p => this.cache.forEach((v, k) => { if (k === p || k.startsWith(p)) t += v }))
   133	    return t
   134	  }
   135	
   136	  private calcActifBrut(comptes: string[]): number {
   137	    let t = 0
   138	    comptes.forEach(p => this.cache.forEach((v, k) => { if ((k === p || k.startsWith(p)) && v > 0) t += v }))
   139	    return t
   140	  }
   141	
   142	  private calcAmortProv(comptes: string[]): number {
   143	    let t = 0
   144	    comptes.forEach(p => this.cache.forEach((v, k) => { if (k === p || k.startsWith(p)) t += Math.abs(v) }))
   145	    return t
   146	  }
   147	
   148	  private calcPassif(comptes: string[]): number {
   149	    let t = 0
   150	    comptes.forEach(p => this.cache.forEach((v, k) => { if ((k === p || k.startsWith(p)) && v < 0) t += Math.abs(v) }))
   151	    return t
   152	  }
   153	
   154	  private calcCharges(comptes: string[]): number {
   155	    let t = 0
   156	    comptes.forEach(p => this.cache.forEach((v, k) => { if ((k === p || k.startsWith(p)) && v > 0) t += v }))
   157	    return t
   158	  }
   159	
   160	  private calcProduits(comptes: string[]): number {
   161	    let t = 0
   162	    comptes.forEach(p => this.cache.forEach((v, k) => { if ((k === p || k.startsWith(p)) && v < 0) t += Math.abs(v) }))
   163	    return t
   164	  }
   165	
   166	  private calcVariation(comptes: string[]): number {
   167	    return this.sumSoldes(comptes)
   168	  }
   169	
   170	  private calcPassifReciprocal(comptes: string[]): number {
   171	    let t = 0
   172	    comptes.forEach(p => this.cache.forEach((v, k) => { if ((k === p || k.startsWith(p)) && v < 0) t += Math.abs(v) }))
   173	    return t
   174	  }
   175	
   176	  genActif(): any[] {
   177	    const rows: any[] = []
   178	    const reciprocal = ['DH', 'DL', 'DQ', 'DR']
   179	    Object.entries(SYSCOHADA_MAPPING.actif).forEach(([ref, m]) => {
   180	      const brut = this.calcActifBrut(m.comptes)
   181	      const amortProv = this.calcAmortProv(m.amortComptes || [])
   182	      rows.push({ ref, brut, amortProv, net: brut - amortProv, net_n1: 0 })
   183	    })
   184	    return rows
   185	  }
   186	
   187	  genPassif(): any[] {
   188	    const rows: any[] = []
   189	    const reciprocalRefs = ['DH', 'DL', 'DQ', 'DR']
   190	    Object.entries(SYSCOHADA_MAPPING.passif).forEach(([ref, m]) => {
   191	      const montant = reciprocalRefs.includes(ref) ? this.calcPassifReciprocal(m.comptes) : this.calcPassif(m.comptes)
   192	      rows.push({ ref, montant, montant_n1: 0 })
   193	    })
   194	    return rows
   195	  }
   196	
   197	  genCdR(): { charges: any[], produits: any[] } {
   198	    const charges: any[] = []
   199	    const produits: any[] = []
   200	    const variationRefs = ['RB', 'RD', 'RF']
   201	    const produitVariationRefs = ['TD']
   202	
   203	    Object.entries(SYSCOHADA_MAPPING.charges).forEach(([ref, m]) => {
   204	      const montant = variationRefs.includes(ref) ? this.calcVariation(m.comptes) : this.calcCharges(m.comptes)
   205	      charges.push({ ref, montant })
   206	    })
   207	    Object.entries(SYSCOHADA_MAPPING.produits).forEach(([ref, m]) => {
   208	      const montant = produitVariationRefs.includes(ref) ? -this.sumSoldes(m.comptes) : this.calcProduits(m.comptes)
   209	      produits.push({ ref, montant })
   210	    })
   211	    return { charges, produits }
   212	  }
   213	
   214	  genSIG(): Record<string, number> {
   215	    const T1 = this.calcProduits(['701'])
   216	    const T2 = this.calcCharges(['601'])
   217	    const T3 = this.calcVariation(['6031'])
   218	    const SIG1 = T1 - T2 - T3
   219	
   220	    const T4 = this.calcProduits(['702', '703', '704', '705', '706', '707'])
   221	    const T5 = -this.sumSoldes(['73'])
   222	    const T6 = this.calcProduits(['72'])
   223	    const SIG2 = T4 + T5 + T6
   224	
   225	    const T7 = this.calcCharges(['602'])
   226	    const T8 = this.calcVariation(['6032', '6033'])
   227	    const T9 = this.calcCharges(['604', '605', '608', '61', '62', '63'])
   228	    const SIG3 = SIG1 + SIG2 - T7 - T8 - T9
   229	
   230	    const T10 = this.calcProduits(['71'])
   231	    const T11 = this.calcCharges(['64'])
   232	    const T12 = this.calcCharges(['66'])
   233	    const SIG4 = SIG3 + T10 - T11 - T12
   234	
   235	    const T13 = this.calcProduits(['791', '798', '799'])
   236	    const T14 = this.calcProduits(['781', '782'])
   237	    const T15 = this.calcProduits(['75'])
   238	    const T16 = this.calcCharges(['681', '691'])
   239	    const T17 = this.calcCharges(['65'])
   240	    const SIG5 = SIG4 + T13 + T14 + T15 - T16 - T17
   241	
   242	    const T18 = this.calcProduits(['77'])
   243	    const T19 = this.calcProduits(['787', '797'])
   244	    const T20 = this.calcCharges(['67'])
   245	    const T21 = this.calcCharges(['687', '697'])
   246	    const SIG6 = T18 + T19 - T20 - T21
   247	
   248	    const SIG7 = SIG5 + SIG6
   249	
   250	    const T22 = this.calcProduits(['82'])
   251	    const T23 = this.calcProduits(['84', '86', '88'])
   252	    const T24 = this.calcCharges(['81'])
   253	    const T25 = this.calcCharges(['83', '85'])
   254	    const SIG8 = T22 + T23 - T24 - T25
   255	
   256	    const T26 = this.calcCharges(['87'])
   257	    const T27 = this.calcCharges(['89'])
   258	    const SIG9 = SIG7 + SIG8 - T26 - T27
   259	
   260	    return { T1, T2, T3, SIG1, T4, T5, T6, SIG2, T7, T8, T9, SIG3, T10, T11, T12, SIG4, T13, T14, T15, T16, T17, SIG5, T18, T19, T20, T21, SIG6, SIG7, T22, T23, T24, T25, SIG8, T26, T27, SIG9 }
   261	  }
   262	
   263	  genTFT(): any {
   264	    const { charges, produits } = this.genCdR()
   265	    const totalCharges = charges.reduce((s: number, r: any) => s + r.montant, 0)
   266	    const totalProduits = produits.reduce((s: number, r: any) => s + r.montant, 0)
   267	    const FA = totalProduits - totalCharges
   268	    const FB = this.calcCharges(['681', '687', '691', '697'])
   269	    const FC = this.calcProduits(['791', '797', '798', '799', '787'])
   270	    const prodCessions = this.calcProduits(['82'])
   271	    const VNC = this.calcCharges(['81'])
   272	    const FD = prodCessions - VNC
   273	    const FE = FA + FB - FC - FD
   274	    const tresoActif = this.calcActifBrut(['50', '51', '52', '53', '54', '55', '56', '57', '58'])
   275	    const tresoPassif = this.calcPassifReciprocal(['52', '561', '564', '565'])
   276	    const FS = tresoActif - tresoPassif
   277	    return { FA, FB, FC, FD, FE, FS, tresoActif, tresoPassif }
   278	  }
   279	}
   280	
   281	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   282	// Test balance
   283	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   284	
   285	function d(compte: string, intitule: string, montant: number): BalanceEntry {
   286	  return { compte, intitule, debit: montant, credit: 0, solde_debit: montant, solde_credit: 0 }
   287	}
   288	function c(compte: string, intitule: string, montant: number): BalanceEntry {
   289	  return { compte, intitule, debit: 0, credit: montant, solde_debit: 0, solde_credit: montant }
   290	}
   291	
   292	const balance: BalanceEntry[] = [
   293	  // Classe 1
   294	  c('1011', 'Capital social', 50_000_000),
   295	  c('1061', 'R√©serve l√©gale', 5_000_000),
   296	  c('1200', 'Report √† nouveau', 10_180_000),    // RAN pour √©quilibrer le bilan
   297	  c('1300', 'R√©sultat net', 8_120_000),           // = 142.12M produits - 134M charges
   298	  c('1620', 'Emprunts', 20_000_000),
   299	  c('1640', 'Dettes √©tab. cr√©dit', 5_000_000),
   300	  c('1910', 'Provisions litiges', 2_000_000),
   301	  // Classe 2
   302	  d('2130', 'Logiciels', 3_000_000),
   303	  d('2150', 'Fonds commercial', 8_000_000),
   304	  d('2310', 'B√¢timents', 45_000_000),
   305	  d('2410', 'Mat√©riel industriel', 25_000_000),
   306	  d('2450', 'Mat√©riel transport', 15_000_000),
   307	  d('2710', 'Pr√™ts au personnel', 1_500_000),
   308	  c('28130', 'Amort. logiciels', 1_200_000),
   309	  c('28310', 'Amort. b√¢timents', 9_000_000),
   310	  c('28410', 'Amort. mat. industriel', 10_000_000),
   311	  c('28450', 'Amort. mat. transport', 6_000_000),
   312	  // Classe 3
   313	  d('3110', 'Marchandises', 12_000_000),
   314	  d('3210', 'Mati√®res premi√®res', 8_000_000),
   315	  d('3710', 'Produits interm√©diaires', 5_000_000),
   316	  // Classe 4
   317	  d('4110', 'Clients', 18_000_000),
   318	  c('4010', 'Fournisseurs', 15_000_000),
   319	  c('4310', 'S√©cu sociale', 2_500_000),
   320	  c('4410', '√âtat imp√¥ts', 3_000_000),
   321	  c('4210', 'Personnel r√©mun√©rations', 4_200_000),
   322	  // Classe 5
   323	  d('5210', 'Banque BIAO', 9_500_000),
   324	  d('5310', 'Caisse', 1_200_000),
   325	  // Classe 6
   326	  d('6010', 'Achats marchandises', 45_000_000),
   327	  d('60310', 'Variation stocks march.', 2_000_000),
   328	  d('6020', 'Achats mati√®res premi√®res', 18_000_000),
   329	  d('60320', 'Variation stocks MP', 1_000_000),
   330	  d('6050', 'Autres achats', 5_000_000),
   331	  d('6100', 'Transports', 3_000_000),
   332	  d('6210', 'Sous-traitance', 4_000_000),
   333	  d('6300', 'Services ext√©rieurs', 2_500_000),
   334	  d('6410', 'Imp√¥ts et taxes', 3_500_000),
   335	  d('6510', 'Pertes sur cr√©ances', 500_000),
   336	  d('6610', 'R√©mun√©rations', 28_000_000),
   337	  d('6810', 'Dotations amort.', 8_000_000),
   338	  d('6910', 'Dotations prov.', 2_000_000),
   339	  d('6710', 'Int√©r√™ts emprunts', 4_000_000),
   340	  d('8100', 'VNC cessions', 3_000_000),
   341	  d('8300', 'Charges HAO', 500_000),
   342	  d('8910', 'Imp√¥t sur r√©sultat', 4_000_000),
   343	  // Classe 7
   344	  c('7010', 'Ventes marchandises', 85_000_000),
   345	  c('7020', 'Ventes produits fabriqu√©s', 35_000_000),
   346	  c('7060', 'Services vendus', 8_000_000),
   347	  c('7300', 'Production stock√©e', 3_000_000),
   348	  c('7500', 'Autres produits', 1_500_000),
   349	  c('7910', 'Reprises prov.', 2_500_000),
   350	  c('7710', 'Revenus financiers', 1_000_000),
   351	  c('8200', 'Produits cessions', 5_000_000),
   352	  c('8400', 'Produits HAO', 1_120_000),
   353	]
   354	
   355	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   356	// Run
   357	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   358	
   359	const svc = new TestLiasseService()
   360	svc.loadBalance(balance)
   361	
   362	const actif = svc.genActif()
   363	const passif = svc.genPassif()
   364	const { charges, produits } = svc.genCdR()
   365	const sig = svc.genSIG()
   366	const tft = svc.genTFT()
   367	
   368	const actifByRef: Record<string, any> = {}
   369	actif.forEach(r => actifByRef[r.ref] = r)
   370	const passifByRef: Record<string, any> = {}
   371	passif.forEach(r => passifByRef[r.ref] = r)
   372	const chargesByRef: Record<string, number> = {}
   373	charges.forEach((r: any) => chargesByRef[r.ref] = r.montant)
   374	const produitsByRef: Record<string, number> = {}
   375	produits.forEach((r: any) => produitsByRef[r.ref] = r.montant)
   376	
   377	const totalActifNet = actif.reduce((s: number, r: any) => s + r.net, 0)
   378	const totalPassif = passif.reduce((s: number, r: any) => s + r.montant, 0)
   379	const totalCharges = charges.reduce((s: number, r: any) => s + r.montant, 0)
   380	const totalProduits = produits.reduce((s: number, r: any) => s + r.montant, 0)
   381	const resultatCdR = totalProduits - totalCharges
   382	const resultatBilan = passifByRef['CH']?.montant || 0
   383	
   384	const fmt = (n: number) => new Intl.NumberFormat('fr-FR').format(Math.round(n))
   385	
   386	interface VR { id: string; label: string; expected: number; actual: number; pass: boolean }
   387	const results: VR[] = []
   388	const chk = (id: string, label: string, expected: number, actual: number) => {
   389	  results.push({ id, label, expected, actual, pass: Math.abs(expected - actual) < 1 })
   390	}
   391	
   392	// V01: BZ = DZ
   393	chk('V01', 'Total Actif (BZ) = Total Passif (DZ)', totalActifNet, totalPassif)
   394	
   395	// V02: CH = XI = SIG9
   396	chk('V02a', 'CH (Bilan) = XI (CdR)', resultatBilan, resultatCdR)
   397	chk('V02b', 'CH (Bilan) = SIG9', resultatBilan, sig.SIG9)
   398	chk('V02c', 'XI (CdR) = SIG9', resultatCdR, sig.SIG9)
   399	
   400	// V03: Cascades SIG
   401	chk('V03a', 'SIG1 = T1 - T2 - T3', sig.T1 - sig.T2 - sig.T3, sig.SIG1)
   402	chk('V03b', 'SIG3 = SIG1 + SIG2 - T7 - T8 - T9', sig.SIG1 + sig.SIG2 - sig.T7 - sig.T8 - sig.T9, sig.SIG3)
   403	chk('V03c', 'SIG7 = SIG5 + SIG6', sig.SIG5 + sig.SIG6, sig.SIG7)
   404	chk('V03d', 'SIG9 = SIG7 + SIG8 - T26 - T27', sig.SIG7 + sig.SIG8 - sig.T26 - sig.T27, sig.SIG9)
   405	
   406	// V04: Totaux actif
   407	const groupImmo = ['AQ','AR','AS','AD','AE','AF','AG','AJ','AK','AL','AM','AN','AP','AT','AU']
   408	const totalImmoNet = groupImmo.reduce((s, r) => s + (actifByRef[r]?.net || 0), 0)
   409	const nonImmo = ['BA','BC','BD','BE','BF','BG','BI','BJ','BK','BQ','BR','BS','BU']
   410	const totalNonImmo = nonImmo.reduce((s, r) => s + (actifByRef[r]?.net || 0), 0)
   411	chk('V04', 'BZ = immo + circulant + tr√©so', totalImmoNet + totalNonImmo, totalActifNet)
   412	
   413	// V05: Comptes r√©ciproques 52x
   414	chk('V05a', 'BS inclut 52x d√©biteur (banque > 0)', 1, (actifByRef['BS']?.brut || 0) > 0 ? 1 : 0)
   415	chk('V05b', 'DQ = 0 (pas de 52x cr√©diteur)', 0, passifByRef['DQ']?.montant || 0)
   416	
   417	// V06: Variations stocks
   418	chk('V06a', 'RB = variation stocks march. = 2M', 2_000_000, chargesByRef['RB'] || 0)
   419	chk('V06b', 'RD = variation stocks MP = 1M', 1_000_000, chargesByRef['RD'] || 0)
   420	
   421	// V07: Production stock√©e
   422	chk('V07', 'TD = production stock√©e = 3M', 3_000_000, produitsByRef['TD'] || 0)
   423	
   424	// V08: CAFG
   425	chk('V08', 'CAFG = R + Dot - Rep - PV = ' + fmt(tft.FE), tft.FA + tft.FB - tft.FC - tft.FD, tft.FE)
   426	
   427	// V09: Tr√©sorerie nette
   428	chk('V09', 'Tr√©sorerie nette = 10 700 000', 10_700_000, tft.FS)
   429	
   430	// V10: Total produits
   431	chk('V10', 'Total produits = 142 120 000', 142_120_000, totalProduits)
   432	
   433	// V11: Charges et r√©sultat
   434	chk('V11a', 'Total charges = 134 000 000', 134_000_000, totalCharges)
   435	chk('V11b', 'R√©sultat net = 8 120 000', 8_120_000, resultatCdR)
   436	
   437	// V12: Amortissements
   438	const totalAmort = ['AD','AE','AF','AG','AJ','AK','AL','AM','AN'].reduce((s,r) => s + (actifByRef[r]?.amortProv || 0), 0)
   439	chk('V12', 'Total amortissements = 26 200 000', 26_200_000, totalAmort)
   440	
   441	// V13: Marge commerciale
   442	chk('V13', 'Marge commerciale = 38 000 000', 38_000_000, sig.SIG1)
   443	
   444	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   445	// Output
   446	// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   447	
   448	console.log('')
   449	console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê')
   450	console.log('              RAPPORT DE V√âRIFICATION - LIASSE FISCALE SYSCOHADA                  ')
   451	console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê')
   452	console.log('')
   453	
   454	// Detail tables
   455	console.log('‚îÄ‚îÄ BILAN ACTIF (extraits) ‚îÄ‚îÄ')
   456	console.log(`  AE (Brevets/logiciels) : brut=${fmt(actifByRef['AE']?.brut||0)}, amort=${fmt(actifByRef['AE']?.amortProv||0)}, net=${fmt(actifByRef['AE']?.net||0)}`)
   457	console.log(`  AK (B√¢timents)         : brut=${fmt(actifByRef['AK']?.brut||0)}, amort=${fmt(actifByRef['AK']?.amortProv||0)}, net=${fmt(actifByRef['AK']?.net||0)}`)
   458	console.log(`  AM (Mat√©riel)          : brut=${fmt(actifByRef['AM']?.brut||0)}, amort=${fmt(actifByRef['AM']?.amortProv||0)}, net=${fmt(actifByRef['AM']?.net||0)}`)
   459	console.log(`  BJ (Clients)           : brut=${fmt(actifByRef['BJ']?.brut||0)}, net=${fmt(actifByRef['BJ']?.net||0)}`)
   460	console.log(`  BS (Tr√©sorerie)        : brut=${fmt(actifByRef['BS']?.brut||0)}, net=${fmt(actifByRef['BS']?.net||0)}`)
   461	console.log(`  TOTAL ACTIF NET        : ${fmt(totalActifNet)}`)
   462	console.log('')
   463	
   464	console.log('‚îÄ‚îÄ BILAN PASSIF (extraits) ‚îÄ‚îÄ')
   465	console.log(`  CA (Capital)           : ${fmt(passifByRef['CA']?.montant||0)}`)
   466	console.log(`  CD (R√©serves)          : ${fmt(passifByRef['CD']?.montant||0)}`)
   467	console.log(`  CH (R√©sultat net)      : ${fmt(passifByRef['CH']?.montant||0)}`)
   468	console.log(`  DB (Emprunts)          : ${fmt(passifByRef['DB']?.montant||0)}`)
   469	console.log(`  DJ (Fournisseurs)      : ${fmt(passifByRef['DJ']?.montant||0)}`)
   470	console.log(`  DL (Autres dettes)     : ${fmt(passifByRef['DL']?.montant||0)}`)
   471	console.log(`  TOTAL PASSIF           : ${fmt(totalPassif)}`)
   472	console.log('')
   473	
   474	console.log('‚îÄ‚îÄ COMPTE DE R√âSULTAT ‚îÄ‚îÄ')
   475	console.log(`  Total produits         : ${fmt(totalProduits)}`)
   476	console.log(`  Total charges          : ${fmt(totalCharges)}`)
   477	console.log(`  R√©sultat net (XI)      : ${fmt(resultatCdR)}`)
   478	console.log('')
   479	
   480	console.log('‚îÄ‚îÄ SIG (cascade) ‚îÄ‚îÄ')
   481	console.log(`  SIG1 Marge commerciale : ${fmt(sig.SIG1)}`)
   482	console.log(`  SIG2 Production        : ${fmt(sig.SIG2)}`)
   483	console.log(`  SIG3 Valeur ajout√©e    : ${fmt(sig.SIG3)}`)
   484	console.log(`  SIG4 EBE               : ${fmt(sig.SIG4)}`)
   485	console.log(`  SIG5 R√©s. exploitation : ${fmt(sig.SIG5)}`)
   486	console.log(`  SIG6 R√©s. financier    : ${fmt(sig.SIG6)}`)
   487	console.log(`  SIG7 RAO               : ${fmt(sig.SIG7)}`)
   488	console.log(`  SIG8 R√©s. HAO          : ${fmt(sig.SIG8)}`)
   489	console.log(`  SIG9 R√©sultat net      : ${fmt(sig.SIG9)}`)
   490	console.log('')
   491	
   492	console.log('‚îÄ‚îÄ TFT ‚îÄ‚îÄ')
   493	console.log(`  FA  R√©sultat net       : ${fmt(tft.FA)}`)
   494	console.log(`  FB  Dotations          : ${fmt(tft.FB)}`)
   495	console.log(`  FC  Reprises           : ${fmt(tft.FC)}`)
   496	console.log(`  FD  Plus-values        : ${fmt(tft.FD)}`)
   497	console.log(`  FE  CAFG               : ${fmt(tft.FE)}`)
   498	console.log(`  FS  Tr√©sorerie nette   : ${fmt(tft.FS)}`)
   499	console.log('')
   500	
   501	console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê')
   502	console.log('                          V√âRIFICATIONS AUTOMATIQUES                               ')
   503	console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê')
   504	console.log('')
   505	console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê')
   506	console.log('‚îÇ ID     ‚îÇ V√©rification                              ‚îÇ Attendu          ‚îÇ Obtenu           ‚îÇ Statut ‚îÇ')
   507	console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§')
   508	
   509	for (const r of results) {
   510	  const id = r.id.padEnd(6)
   511	  const label = r.label.substring(0, 41).padEnd(41)
   512	  const exp = fmt(r.expected).padStart(16)
   513	  const act = fmt(r.actual).padStart(16)
   514	  const st = r.pass ? '  OK  ' : ' FAIL '
   515	  console.log(`‚îÇ ${id} ‚îÇ ${label} ‚îÇ ${exp} ‚îÇ ${act} ‚îÇ${st}‚îÇ`)
   516	}
   517	
   518	const passed = results.filter(r => r.pass).length
   519	const total = results.length
   520	const pct = Math.round(passed / total * 100)
   521	
   522	console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§')
   523	const summaryLabel = `${passed}/${total} v√©rifications OK (${pct}%)`
   524	console.log(`‚îÇ TOTAL  ‚îÇ ${summaryLabel.padEnd(41)} ‚îÇ                  ‚îÇ                  ‚îÇ${pct === 100 ? ' 100% ' : ' FAIL '}‚îÇ`)
   525	console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò')
   526	console.log('')
   527	
   528	if (pct === 100) {
   529	  console.log('*** TOUTES LES V√âRIFICATIONS SONT PASS√âES ‚Äî 100% ***')
   530	} else {
   531	  console.log(`*** ${total - passed} V√âRIFICATION(S) EN √âCHEC ***`)
   532	  for (const r of results.filter(r => !r.pass)) {
   533	    console.log(`  FAIL: ${r.id} ${r.label} ‚Äî attendu ${fmt(r.expected)}, obtenu ${fmt(r.actual)}`)
   534	  }
   535	}
   536	console.log('')

================================================================================
FILE: src/theme/designSystem.ts
================================================================================
     1	/**
     2	 * Design System TaxPilot - Standards Professionnels Internationaux
     3	 * Inspir√© des meilleures pratiques de design systems modernes (Material 3, Ant Design, Chakra UI)
     4	 */
     5	
     6	import { createTheme, alpha } from '@mui/material/styles'
     7	
     8	// === PALETTE DE COULEURS PROFESSIONNELLE ===
     9	const colors = {
    10	  // Primary - Couleur principale sophistiqu√©e
    11	  primary: {
    12	    50: '#fafafa',
    13	    100: '#f1f3f4',
    14	    200: '#e8eaed',
    15	    300: '#dadce0',
    16	    400: '#bdc1c6',
    17	    500: '#9aa0a6',
    18	    600: '#80868b',
    19	    700: '#5f6368',
    20	    800: '#3c4043',
    21	    900: '#171717', // Votre couleur de base
    22	    main: '#171717',
    23	    light: '#5f6368',
    24	    dark: '#000000',
    25	  },
    26	
    27	  // Secondary - Accent moderne
    28	  secondary: {
    29	    50: '#f0f9ff',
    30	    100: '#e0f2fe',
    31	    200: '#bae6fd',
    32	    300: '#7dd3fc',
    33	    400: '#38bdf8',
    34	    500: '#0ea5e9',
    35	    600: '#0284c7',
    36	    700: '#0369a1',
    37	    800: '#075985',
    38	    900: '#0c4a6e',
    39	    main: '#0ea5e9',
    40	    light: '#38bdf8',
    41	    dark: '#0369a1',
    42	  },
    43	
    44	  // Success - Vert professionnel
    45	  success: {
    46	    50: '#f0fdf4',
    47	    100: '#dcfce7',
    48	    200: '#bbf7d0',
    49	    300: '#86efac',
    50	    400: '#4ade80',
    51	    500: '#22c55e',
    52	    600: '#16a34a',
    53	    700: '#15803d',
    54	    800: '#166534',
    55	    900: '#14532d',
    56	    main: '#22c55e',
    57	    light: '#4ade80',
    58	    dark: '#15803d',
    59	  },
    60	
    61	  // Warning - Orange √©l√©gant
    62	  warning: {
    63	    50: '#fffbeb',
    64	    100: '#fef3c7',
    65	    200: '#fed7aa',
    66	    300: '#fdba74',
    67	    400: '#fb923c',
    68	    500: '#f97316',
    69	    600: '#ea580c',
    70	    700: '#c2410c',
    71	    800: '#9a3412',
    72	    900: '#7c2d12',
    73	    main: '#f97316',
    74	    light: '#fb923c',
    75	    dark: '#c2410c',
    76	  },
    77	
    78	  // Error - Rouge moderne
    79	  error: {
    80	    50: '#fef2f2',
    81	    100: '#fee2e2',
    82	    200: '#fecaca',
    83	    300: '#fca5a5',
    84	    400: '#f87171',
    85	    500: '#ef4444',
    86	    600: '#dc2626',
    87	    700: '#b91c1c',
    88	    800: '#991b1b',
    89	    900: '#7f1d1d',
    90	    main: '#ef4444',
    91	    light: '#f87171',
    92	    dark: '#b91c1c',
    93	  },
    94	
    95	  // Info - Bleu information
    96	  info: {
    97	    50: '#eff6ff',
    98	    100: '#dbeafe',
    99	    200: '#bfdbfe',
   100	    300: '#93c5fd',
   101	    400: '#60a5fa',
   102	    500: '#3b82f6',
   103	    600: '#2563eb',
   104	    700: '#1d4ed8',
   105	    800: '#1e40af',
   106	    900: '#1e3a8a',
   107	    main: '#3b82f6',
   108	    light: '#60a5fa',
   109	    dark: '#1d4ed8',
   110	  },
   111	
   112	  // Neutrals - Palette de gris sophistiqu√©e
   113	  neutral: {
   114	    0: '#ffffff',
   115	    50: '#fafafa',
   116	    100: '#f5f5f5',
   117	    200: '#e5e5e5',
   118	    300: '#d4d4d4',
   119	    400: '#a3a3a3',
   120	    500: '#737373',
   121	    600: '#525252',
   122	    700: '#404040',
   123	    800: '#262626',
   124	    900: '#171717',
   125	    950: '#0a0a0a',
   126	  },
   127	
   128	  // Backgrounds & Surfaces
   129	  background: {
   130	    default: '#fafafa',
   131	    paper: '#ffffff',
   132	    elevated: '#ffffff',
   133	    glass: alpha('#ffffff', 0.8),
   134	    overlay: alpha('#000000', 0.6),
   135	  },
   136	
   137	  // Text colors optimized for readability
   138	  text: {
   139	    primary: '#171717',
   140	    secondary: '#525252',
   141	    disabled: '#a3a3a3',
   142	    hint: '#737373',
   143	    inverse: '#ffffff',
   144	  },
   145	
   146	  // Dividers and borders
   147	  divider: alpha('#171717', 0.08),
   148	  border: {
   149	    light: alpha('#171717', 0.08),
   150	    medium: alpha('#171717', 0.12),
   151	    strong: alpha('#171717', 0.16),
   152	  },
   153	}
   154	
   155	// === TYPOGRAPHY PROFESSIONNELLE ===
   156	const typography = {
   157	  // Font families optimized for business applications
   158	  fontFamily: {
   159	    primary: '"Inter", "Roboto", "Helvetica Neue", Arial, sans-serif',
   160	    secondary: '"Poppins", "Inter", sans-serif',
   161	    mono: '"JetBrains Mono", "Fira Code", "Consolas", monospace',
   162	  },
   163	
   164	  // Font weights
   165	  fontWeight: {
   166	    light: 300,
   167	    regular: 400,
   168	    medium: 500,
   169	    semibold: 600,
   170	    bold: 700,
   171	  },
   172	
   173	  // Font sizes with perfect scaling
   174	  fontSize: {
   175	    xs: '0.75rem',    // 12px
   176	    sm: '0.875rem',   // 14px
   177	    base: '1rem',     // 16px
   178	    lg: '1.125rem',   // 18px
   179	    xl: '1.25rem',    // 20px
   180	    '2xl': '1.5rem',  // 24px
   181	    '3xl': '1.875rem', // 30px
   182	    '4xl': '2.25rem', // 36px
   183	    '5xl': '3rem',    // 48px
   184	    '6xl': '3.75rem', // 60px
   185	  },
   186	
   187	  // Line heights for optimal readability
   188	  lineHeight: {
   189	    none: 1,
   190	    tight: 1.25,
   191	    snug: 1.375,
   192	    normal: 1.5,
   193	    relaxed: 1.625,
   194	    loose: 2,
   195	  },
   196	}
   197	
   198	// === SPACING SYSTEM ===
   199	const spacing = {
   200	  0: '0px',
   201	  1: '0.25rem',   // 4px
   202	  2: '0.5rem',    // 8px
   203	  3: '0.75rem',   // 12px
   204	  4: '1rem',      // 16px
   205	  5: '1.25rem',   // 20px
   206	  6: '1.5rem',    // 24px
   207	  8: '2rem',      // 32px
   208	  10: '2.5rem',   // 40px
   209	  12: '3rem',     // 48px
   210	  16: '4rem',     // 64px
   211	  20: '5rem',     // 80px
   212	  24: '6rem',     // 96px
   213	  32: '8rem',     // 128px
   214	}
   215	
   216	// === SHADOWS PROFESSIONNELLES ===
   217	const shadows = {
   218	  none: 'none',
   219	  sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
   220	  base: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
   221	  md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
   222	  lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
   223	  xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
   224	  '2xl': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
   225	  inner: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)',
   226	  glass: '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
   227	}
   228	
   229	// === BORDER RADIUS ===
   230	const borderRadius = {
   231	  none: '0px',
   232	  sm: '0.25rem',  // 4px
   233	  base: '0.375rem', // 6px
   234	  md: '0.5rem',   // 8px
   235	  lg: '0.75rem',  // 12px
   236	  xl: '1rem',     // 16px
   237	  '2xl': '1.5rem', // 24px
   238	  '3xl': '2rem',  // 32px
   239	  full: '9999px',
   240	}
   241	
   242	// === TRANSITIONS & ANIMATIONS ===
   243	const transitions = {
   244	  duration: {
   245	    fast: '150ms',
   246	    base: '200ms',
   247	    slow: '300ms',
   248	    slower: '500ms',
   249	  },
   250	  timing: {
   251	    ease: 'cubic-bezier(0.4, 0, 0.2, 1)',
   252	    easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
   253	    easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
   254	    easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
   255	    spring: 'cubic-bezier(0.34, 1.56, 0.64, 1)',
   256	  }
   257	}
   258	
   259	// === BREAKPOINTS RESPONSIFS ===
   260	const breakpoints = {
   261	  xs: '475px',
   262	  sm: '640px',
   263	  md: '768px',
   264	  lg: '1024px',
   265	  xl: '1280px',
   266	  '2xl': '1536px',
   267	}
   268	
   269	// === TH√àME MATERIAL UI CONFIGUR√â ===
   270	export const theme = createTheme({
   271	  palette: {
   272	    mode: 'light',
   273	    primary: colors.primary,
   274	    secondary: colors.secondary,
   275	    error: colors.error,
   276	    warning: colors.warning,
   277	    info: colors.info,
   278	    success: colors.success,
   279	    background: colors.background,
   280	    text: colors.text,
   281	    divider: colors.divider,
   282	  },
   283	
   284	  typography: {
   285	    fontFamily: typography.fontFamily.primary,
   286	    h1: {
   287	      fontSize: typography.fontSize['5xl'],
   288	      fontWeight: typography.fontWeight.bold,
   289	      lineHeight: typography.lineHeight.tight,
   290	      letterSpacing: '-0.02em',
   291	    },
   292	    h2: {
   293	      fontSize: typography.fontSize['4xl'],
   294	      fontWeight: typography.fontWeight.bold,
   295	      lineHeight: typography.lineHeight.tight,
   296	      letterSpacing: '-0.01em',
   297	    },
   298	    h3: {
   299	      fontSize: typography.fontSize['3xl'],
   300	      fontWeight: typography.fontWeight.semibold,
   301	      lineHeight: typography.lineHeight.snug,
   302	    },
   303	    h4: {
   304	      fontSize: typography.fontSize['2xl'],
   305	      fontWeight: typography.fontWeight.semibold,
   306	      lineHeight: typography.lineHeight.snug,
   307	    },
   308	    h5: {
   309	      fontSize: typography.fontSize.xl,
   310	      fontWeight: typography.fontWeight.medium,
   311	      lineHeight: typography.lineHeight.normal,
   312	    },
   313	    h6: {
   314	      fontSize: typography.fontSize.lg,
   315	      fontWeight: typography.fontWeight.medium,
   316	      lineHeight: typography.lineHeight.normal,
   317	    },
   318	    body1: {
   319	      fontSize: typography.fontSize.base,
   320	      lineHeight: typography.lineHeight.relaxed,
   321	      color: colors.text.primary,
   322	    },
   323	    body2: {
   324	      fontSize: typography.fontSize.sm,
   325	      lineHeight: typography.lineHeight.normal,
   326	      color: colors.text.secondary,
   327	    },
   328	    caption: {
   329	      fontSize: typography.fontSize.xs,
   330	      lineHeight: typography.lineHeight.normal,
   331	      color: colors.text.disabled,
   332	    },
   333	  },
   334	
   335	  shape: {
   336	    borderRadius: parseInt(borderRadius.md),
   337	  },
   338	
   339	  spacing: 8, // Base spacing unit
   340	
   341	  shadows: [
   342	    "none",
   343	    shadows.sm,
   344	    shadows.base,
   345	    shadows.md,
   346	    shadows.lg,
   347	    shadows.xl,
   348	    shadows['2xl'],
   349	    shadows.glass,
   350	    ...Array(16).fill(shadows.lg), // Remplir le reste
   351	  ] as any,
   352	
   353	  breakpoints: {
   354	    values: {
   355	      xs: parseInt(breakpoints.xs),
   356	      sm: parseInt(breakpoints.sm),
   357	      md: parseInt(breakpoints.md),
   358	      lg: parseInt(breakpoints.lg),
   359	      xl: parseInt(breakpoints.xl),
   360	    },
   361	  },
   362	
   363	  components: {
   364	    // Configuration globale des composants
   365	    MuiCssBaseline: {
   366	      styleOverrides: {
   367	        '*': {
   368	          boxSizing: 'border-box',
   369	        },
   370	        html: {
   371	          fontSize: '16px',
   372	          lineHeight: 1.5,
   373	        },
   374	        body: {
   375	          backgroundColor: colors.background.default,
   376	          color: colors.text.primary,
   377	          fontFamily: typography.fontFamily.primary,
   378	        },
   379	      },
   380	    },
   381	
   382	    MuiButton: {
   383	      styleOverrides: {
   384	        root: {
   385	          textTransform: 'none',
   386	          fontWeight: typography.fontWeight.medium,
   387	          borderRadius: borderRadius.md,
   388	          transition: `all ${transitions.duration.base} ${transitions.timing.ease}`,
   389	          boxShadow: shadows.sm,
   390	          '&:hover': {
   391	            transform: 'translateY(-1px)',
   392	            boxShadow: shadows.md,
   393	          },
   394	        },
   395	        contained: {
   396	          '&:hover': {
   397	            boxShadow: shadows.lg,
   398	          },
   399	        },
   400	      },
   401	    },
   402	
   403	    MuiCard: {
   404	      styleOverrides: {
   405	        root: {
   406	          borderRadius: borderRadius.lg,
   407	          boxShadow: shadows.base,
   408	          border: `1px solid ${colors.border.light}`,
   409	          transition: `all ${transitions.duration.base} ${transitions.timing.ease}`,
   410	          '&:hover': {
   411	            boxShadow: shadows.md,
   412	          },
   413	        },
   414	      },
   415	    },
   416	
   417	    MuiTextField: {
   418	      styleOverrides: {
   419	        root: {
   420	          '& .MuiOutlinedInput-root': {
   421	            borderRadius: borderRadius.md,
   422	            transition: `all ${transitions.duration.base} ${transitions.timing.ease}`,
   423	            '&:hover': {
   424	              '& .MuiOutlinedInput-notchedOutline': {
   425	                borderColor: colors.primary[400],
   426	              },
   427	            },
   428	            '&.Mui-focused': {
   429	              boxShadow: `0 0 0 3px ${alpha(colors.primary.main, 0.1)}`,
   430	            },
   431	          },
   432	        },
   433	      },
   434	    },
   435	  },
   436	})
   437	
   438	// Export des tokens de design
   439	export const designTokens = {
   440	  colors,
   441	  typography,
   442	  spacing,
   443	  shadows,
   444	  borderRadius,
   445	  transitions,
   446	  breakpoints,
   447	}
   448	
   449	export default theme
================================================================================
FILE: src/theme/fiscasyncTheme.ts
================================================================================
     1	/**
     2	 * Th√®me TaxPilot - Palette Grayscale professionnelle monochrome
     3	 */
     4	
     5	import { createTheme } from '@mui/material/styles'
     6	
     7	export const fiscasyncPalette = {
     8	  // Grayscale
     9	  primary50:  '#fafafa',  // Fond de page
    10	  primary100: '#f5f5f5',  // Fond de cartes
    11	  primary200: '#e5e5e5',  // Bordures
    12	  primary300: '#d4d4d4',  // Bordures subtiles
    13	  primary400: '#a3a3a3',  // Placeholder
    14	  primary500: '#737373',  // Texte secondaire
    15	  primary600: '#525252',  // Labels
    16	  primary700: '#404040',  // Boutons ghost
    17	  primary800: '#262626',  // Hover boutons
    18	  primary900: '#171717',  // Texte principal
    19	  primary950: '#0a0a0a',  // √âtats actifs
    20	
    21	  // Statuts
    22	  success: '#22c55e',
    23	  warning: '#f59e0b',
    24	  error:   '#ef4444',
    25	  info:    '#3b82f6',
    26	
    27	  // S√©v√©rit√©
    28	  low:      '#6b7280',
    29	  medium:   '#f59e0b',
    30	  high:     '#ef4444',
    31	  critical: '#7f1d1d',
    32	
    33	  // Aliases
    34	  white: '#ffffff',
    35	}
    36	
    37	export const fiscasyncTheme = createTheme({
    38	  palette: {
    39	    mode: 'light',
    40	    primary: {
    41	      main: fiscasyncPalette.primary900,
    42	      light: fiscasyncPalette.primary500,
    43	      dark: fiscasyncPalette.primary950,
    44	      contrastText: fiscasyncPalette.white,
    45	    },
    46	    secondary: {
    47	      main: fiscasyncPalette.primary500,
    48	      light: fiscasyncPalette.primary300,
    49	      dark: fiscasyncPalette.primary700,
    50	      contrastText: fiscasyncPalette.white,
    51	    },
    52	    background: {
    53	      default: fiscasyncPalette.primary50,
    54	      paper: fiscasyncPalette.white,
    55	    },
    56	    text: {
    57	      primary: fiscasyncPalette.primary900,
    58	      secondary: fiscasyncPalette.primary500,
    59	    },
    60	    divider: fiscasyncPalette.primary200,
    61	    success: { main: fiscasyncPalette.success },
    62	    warning: { main: fiscasyncPalette.warning },
    63	    error:   { main: fiscasyncPalette.error },
    64	    info:    { main: fiscasyncPalette.info },
    65	    grey: {
    66	      50:  fiscasyncPalette.primary50,
    67	      100: fiscasyncPalette.primary100,
    68	      200: fiscasyncPalette.primary200,
    69	      300: fiscasyncPalette.primary300,
    70	      400: fiscasyncPalette.primary400,
    71	      500: fiscasyncPalette.primary500,
    72	      600: fiscasyncPalette.primary600,
    73	      700: fiscasyncPalette.primary700,
    74	      800: fiscasyncPalette.primary800,
    75	      900: fiscasyncPalette.primary900,
    76	    },
    77	  },
    78	
    79	  shape: {
    80	    borderRadius: 12,
    81	  },
    82	
    83	  typography: {
    84	    fontFamily: [
    85	      '"Exo 2"',
    86	      '-apple-system',
    87	      'BlinkMacSystemFont',
    88	      '"Segoe UI"',
    89	      'Roboto',
    90	      '"Helvetica Neue"',
    91	      'Arial',
    92	      'sans-serif',
    93	    ].join(','),
    94	
    95	    h1: { fontSize: '2.5rem', fontWeight: 700, color: fiscasyncPalette.primary900 },
    96	    h2: { fontSize: '2rem',   fontWeight: 700, color: fiscasyncPalette.primary900 },
    97	    h3: { fontSize: '1.5rem', fontWeight: 600, color: fiscasyncPalette.primary900 },
    98	    h4: { fontSize: '1.25rem', fontWeight: 600, color: fiscasyncPalette.primary900 },
    99	    h5: { fontSize: '1.125rem', fontWeight: 600, color: fiscasyncPalette.primary900 },
   100	    h6: { fontSize: '1rem',    fontWeight: 600, color: fiscasyncPalette.primary900 },
   101	    body1: { color: fiscasyncPalette.primary900 },
   102	    body2: { color: fiscasyncPalette.primary500 },
   103	    caption: { color: fiscasyncPalette.primary500 },
   104	  },
   105	
   106	  components: {
   107	    // ‚îÄ‚îÄ AppBar ‚îÄ‚îÄ
   108	    MuiAppBar: {
   109	      styleOverrides: {
   110	        root: {
   111	          backgroundColor: fiscasyncPalette.primary900,
   112	          color: fiscasyncPalette.white,
   113	          boxShadow: '0 1px 2px rgba(0,0,0,0.04)',
   114	        },
   115	      },
   116	    },
   117	
   118	    // ‚îÄ‚îÄ Drawer (Sidebar) ‚îÄ‚îÄ
   119	    MuiDrawer: {
   120	      styleOverrides: {
   121	        paper: {
   122	          backgroundColor: fiscasyncPalette.primary900,
   123	          color: fiscasyncPalette.primary200,
   124	          borderRight: 'none',
   125	        },
   126	      },
   127	    },
   128	
   129	    // ‚îÄ‚îÄ Divider ‚îÄ‚îÄ
   130	    MuiDivider: {
   131	      styleOverrides: {
   132	        root: {
   133	          borderColor: fiscasyncPalette.primary200,
   134	          opacity: 0.6,
   135	        },
   136	      },
   137	    },
   138	
   139	    // ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ
   140	    MuiListItemButton: {
   141	      styleOverrides: {
   142	        root: {
   143	          borderRadius: '12px',
   144	          margin: '2px 8px',
   145	          color: fiscasyncPalette.primary300,
   146	          minHeight: '44px',
   147	          '&:hover': {
   148	            backgroundColor: fiscasyncPalette.primary800,
   149	            color: fiscasyncPalette.white,
   150	          },
   151	          '&.Mui-selected': {
   152	            backgroundColor: fiscasyncPalette.primary700,
   153	            color: fiscasyncPalette.white,
   154	            fontWeight: 600,
   155	            '&:hover': {
   156	              backgroundColor: fiscasyncPalette.primary600,
   157	            },
   158	          },
   159	        },
   160	      },
   161	    },
   162	
   163	    MuiListItemIcon: {
   164	      styleOverrides: {
   165	        root: {
   166	          color: fiscasyncPalette.primary400,
   167	          minWidth: '36px',
   168	          '& .MuiSvgIcon-root': { fontSize: '1.25rem' },
   169	        },
   170	      },
   171	    },
   172	
   173	    MuiListItemText: {
   174	      styleOverrides: {
   175	        primary: {
   176	          fontSize: '0.875rem',
   177	          fontWeight: 500,
   178	        },
   179	      },
   180	    },
   181	
   182	    // ‚îÄ‚îÄ Cards ‚îÄ‚îÄ
   183	    MuiCard: {
   184	      styleOverrides: {
   185	        root: {
   186	          backgroundColor: fiscasyncPalette.white,
   187	          borderRadius: '16px',
   188	          boxShadow: '0 1px 2px rgba(0,0,0,0.04)',
   189	          border: `1px solid ${fiscasyncPalette.primary200}`,
   190	          '&:hover': {
   191	            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
   192	          },
   193	        },
   194	      },
   195	    },
   196	
   197	    MuiPaper: {
   198	      styleOverrides: {
   199	        root: {
   200	          backgroundColor: fiscasyncPalette.white,
   201	          borderRadius: '12px',
   202	        },
   203	        elevation1: {
   204	          boxShadow: '0 1px 2px rgba(0,0,0,0.04)',
   205	        },
   206	      },
   207	    },
   208	
   209	    // ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ
   210	    MuiButton: {
   211	      styleOverrides: {
   212	        root: {
   213	          borderRadius: '12px',
   214	          textTransform: 'none' as const,
   215	          fontWeight: 600,
   216	        },
   217	        containedPrimary: {
   218	          backgroundColor: fiscasyncPalette.primary900,
   219	          color: `${fiscasyncPalette.white} !important`,
   220	          boxShadow: '0 1px 2px rgba(0,0,0,0.04)',
   221	          '&:hover': {
   222	            backgroundColor: fiscasyncPalette.primary800,
   223	            color: `${fiscasyncPalette.white} !important`,
   224	            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
   225	          },
   226	        },
   227	        containedSecondary: {
   228	          color: `${fiscasyncPalette.white} !important`,
   229	          '&:hover': {
   230	            color: `${fiscasyncPalette.white} !important`,
   231	          },
   232	        },
   233	        outlined: {
   234	          borderColor: fiscasyncPalette.primary200,
   235	          color: fiscasyncPalette.primary600,
   236	          '&:hover': {
   237	            backgroundColor: fiscasyncPalette.primary50,
   238	            borderColor: fiscasyncPalette.primary400,
   239	            color: fiscasyncPalette.primary900,
   240	          },
   241	        },
   242	        text: {
   243	          color: fiscasyncPalette.primary500,
   244	          '&:hover': {
   245	            backgroundColor: fiscasyncPalette.primary100,
   246	          },
   247	        },
   248	      },
   249	    },
   250	
   251	    // ‚îÄ‚îÄ Tables ‚îÄ‚îÄ
   252	    MuiTableHead: {
   253	      styleOverrides: {
   254	        root: {
   255	          backgroundColor: fiscasyncPalette.primary100,
   256	          '& .MuiTableCell-head': {
   257	            color: fiscasyncPalette.primary900,
   258	            fontWeight: 600,
   259	            backgroundColor: fiscasyncPalette.primary100,
   260	          },
   261	        },
   262	      },
   263	    },
   264	
   265	    MuiTableBody: {
   266	      styleOverrides: {
   267	        root: {
   268	          '& .MuiTableRow-root': {
   269	            '&:nth-of-type(odd)': { backgroundColor: fiscasyncPalette.primary50 },
   270	            '&:nth-of-type(even)': { backgroundColor: fiscasyncPalette.white },
   271	            '&:hover': { backgroundColor: fiscasyncPalette.primary100 },
   272	          },
   273	        },
   274	      },
   275	    },
   276	
   277	    // ‚îÄ‚îÄ TextField ‚îÄ‚îÄ
   278	    MuiTextField: {
   279	      styleOverrides: {
   280	        root: {
   281	          '& .MuiOutlinedInput-root': {
   282	            borderRadius: '12px',
   283	            backgroundColor: fiscasyncPalette.white,
   284	            '&:hover .MuiOutlinedInput-notchedOutline': {
   285	              borderColor: fiscasyncPalette.primary400,
   286	            },
   287	            '&.Mui-focused .MuiOutlinedInput-notchedOutline': {
   288	              borderColor: fiscasyncPalette.primary900,
   289	              boxShadow: '0 0 0 3px rgba(23,23,23,0.1)',
   290	            },
   291	          },
   292	          '& .MuiInputLabel-root': {
   293	            color: fiscasyncPalette.primary500,
   294	            '&.Mui-focused': { color: fiscasyncPalette.primary900 },
   295	          },
   296	        },
   297	      },
   298	    },
   299	
   300	    // ‚îÄ‚îÄ Alerts ‚îÄ‚îÄ
   301	    MuiAlert: {
   302	      styleOverrides: {
   303	        standardSuccess: {
   304	          backgroundColor: '#f0fdf4',
   305	          color: '#166534',
   306	          '& .MuiAlert-icon': { color: fiscasyncPalette.success },
   307	        },
   308	        standardWarning: {
   309	          backgroundColor: '#fffbeb',
   310	          color: '#92400e',
   311	          '& .MuiAlert-icon': { color: fiscasyncPalette.warning },
   312	        },
   313	        standardError: {
   314	          backgroundColor: '#fef2f2',
   315	          color: '#991b1b',
   316	          '& .MuiAlert-icon': { color: fiscasyncPalette.error },
   317	        },
   318	        standardInfo: {
   319	          backgroundColor: '#eff6ff',
   320	          color: '#1e40af',
   321	          '& .MuiAlert-icon': { color: fiscasyncPalette.info },
   322	        },
   323	      },
   324	    },
   325	
   326	    // ‚îÄ‚îÄ Chips ‚îÄ‚îÄ
   327	    MuiChip: {
   328	      styleOverrides: {
   329	        root: {
   330	          borderRadius: '16px',
   331	          fontWeight: 500,
   332	        },
   333	        filled: {
   334	          backgroundColor: fiscasyncPalette.primary100,
   335	          color: fiscasyncPalette.primary700,
   336	        },
   337	        outlined: {
   338	          borderColor: fiscasyncPalette.primary200,
   339	          color: fiscasyncPalette.primary600,
   340	        },
   341	      },
   342	    },
   343	
   344	    // ‚îÄ‚îÄ Toolbar ‚îÄ‚îÄ
   345	    MuiToolbar: {
   346	      styleOverrides: {
   347	        root: {
   348	          backgroundColor: fiscasyncPalette.primary900,
   349	          color: fiscasyncPalette.white,
   350	          '& .MuiTypography-h6': { color: fiscasyncPalette.white },
   351	        },
   352	      },
   353	    },
   354	  },
   355	})
   356	
   357	export default fiscasyncTheme

================================================================================
FILE: src/types/audit.types.ts
================================================================================
     1	/**
     2	 * Types pour le module d'Audit de Balance - Moteur de Controles 108 points
     3	 * Conforme SYSCOHADA Revise
     4	 */
     5	
     6	import { BalanceEntry } from '@/services/liasseDataService'
     7	
     8	// --- Enums / Unions ---
     9	
    10	export type Severite = 'BLOQUANT' | 'MAJEUR' | 'MINEUR' | 'INFO' | 'OK'
    11	
    12	export type NiveauControle = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8
    13	
    14	export type PhaseAudit = 'PHASE_1' | 'PHASE_2' | 'PHASE_3'
    15	
    16	export type StatutSession = 'EN_ATTENTE' | 'EN_COURS' | 'TERMINEE' | 'ERREUR' | 'ANNULEE'
    17	
    18	export type StatutControle = 'OK' | 'ANOMALIE' | 'NON_APPLICABLE' | 'ERREUR_EXEC'
    19	
    20	// --- Noms de niveaux ---
    21	
    22	export const NIVEAUX_NOMS: Record<NiveauControle, string> = {
    23	  0: 'Controles structurels',
    24	  1: 'Controles fondamentaux',
    25	  2: 'Conformite OHADA',
    26	  3: 'Sens et montants',
    27	  4: 'Inter-comptes',
    28	  5: 'Comparaison N/N-1',
    29	  6: 'Etats financiers',
    30	  7: 'Controles fiscaux',
    31	  8: 'Archives multi-exercices',
    32	}
    33	
    34	// --- Resultat d'un controle ---
    35	
    36	export interface EcritureComptableLigne {
    37	  sens: 'D' | 'C'
    38	  compte: string
    39	  libelle: string
    40	  montant: number
    41	}
    42	
    43	export interface EcritureComptable {
    44	  journal: string
    45	  date: string
    46	  lignes: EcritureComptableLigne[]
    47	  commentaire?: string
    48	}
    49	
    50	export interface ResultatControle {
    51	  ref: string
    52	  nom: string
    53	  niveau: NiveauControle
    54	  statut: StatutControle
    55	  severite: Severite
    56	  message: string
    57	  details?: {
    58	    comptes?: string[]
    59	    montants?: Record<string, number>
    60	    ecart?: number
    61	    description?: string
    62	  }
    63	  suggestion?: string
    64	  ecrituresCorrectives?: EcritureComptable[]
    65	  referenceReglementaire?: string
    66	  timestamp: string
    67	}
    68	
    69	// --- Definition d'un controle ---
    70	
    71	export interface ControleDefinition {
    72	  ref: string
    73	  niveau: NiveauControle
    74	  nom: string
    75	  description: string
    76	  severiteDefaut: Severite
    77	  phase: PhaseAudit
    78	  actif: boolean
    79	}
    80	
    81	// --- Contexte d'execution ---
    82	
    83	export interface AuditContext {
    84	  balanceN: BalanceEntry[]
    85	  balanceN1?: BalanceEntry[]
    86	  planComptable: import('@/data/SYSCOHADARevisePlan').CompteComptable[]
    87	  liassesArchivees?: ArchiveAudit[]
    88	  exercice?: string
    89	  mappingSyscohada?: typeof import('@/services/liasseDataService').SYSCOHADA_MAPPING
    90	  typeLiasse?: import('@/types').TypeLiasse
    91	}
    92	
    93	// --- Session d'audit ---
    94	
    95	export interface ResumeAudit {
    96	  totalControles: number
    97	  parSeverite: Record<Severite, number>
    98	  parNiveau: Record<number, { total: number; ok: number; anomalies: number }>
    99	  scoreGlobal: number
   100	  bloquantsRestants: number
   101	}
   102	
   103	export interface SessionAudit {
   104	  id: string
   105	  balanceId: string
   106	  exercice: string
   107	  phase: PhaseAudit
   108	  statut: StatutSession
   109	  dateDebut: string
   110	  dateFin?: string
   111	  progression: {
   112	    niveauCourant: NiveauControle
   113	    controleCourant: number
   114	    totalControles: number
   115	    pourcentage: number
   116	  }
   117	  resultats: ResultatControle[]
   118	  resume: ResumeAudit
   119	}
   120	
   121	// --- Rapport de corrections ---
   122	
   123	export interface CorrectionItem {
   124	  ref: string
   125	  nom: string
   126	  statutAvant: StatutControle
   127	  severiteAvant: Severite
   128	  statutApres: StatutControle
   129	  severiteApres: Severite
   130	  evolution: 'CORRIGE' | 'AMELIORE' | 'INCHANGE' | 'DEGRADE'
   131	}
   132	
   133	export interface CompteModifie {
   134	  compte: string
   135	  libelle: string
   136	  soldeAvant: number
   137	  soldeApres: number
   138	  ecart: number
   139	}
   140	
   141	export interface RapportCorrection {
   142	  id: string
   143	  sessionAvantId: string
   144	  sessionApresId: string
   145	  dateGeneration: string
   146	  corrections: CorrectionItem[]
   147	  comptesModifies: CompteModifie[]
   148	  synthese: {
   149	    bloquantsAvant: number
   150	    bloquantsApres: number
   151	    majeursAvant: number
   152	    majeursApres: number
   153	    scoreAvant: number
   154	    scoreApres: number
   155	  }
   156	}
   157	
   158	// --- Snapshot de balance ---
   159	
   160	export interface BalanceSnapshot {
   161	  id: string
   162	  balanceId: string
   163	  date: string
   164	  lignes: BalanceEntry[]
   165	  totalDebit: number
   166	  totalCredit: number
   167	  hash: string
   168	}
   169	
   170	// --- Archive ---
   171	
   172	export interface ArchiveAudit {
   173	  id: string
   174	  exercice: string
   175	  dateArchivage: string
   176	  session: SessionAudit
   177	  snapshot: BalanceSnapshot
   178	  hash: string
   179	}
   180	
   181	// --- Fonction de controle ---
   182	
   183	export type ControlFunction = (context: AuditContext) => ResultatControle | ResultatControle[]
   184	
   185	// --- Callbacks de progression ---
   186	
   187	export interface AuditProgressCallback {
   188	  onProgress: (niveau: NiveauControle, index: number, total: number, ref: string) => void
   189	  onLevelStart: (niveau: NiveauControle, nom: string) => void
   190	  onLevelEnd: (niveau: NiveauControle, resultats: ResultatControle[]) => void
   191	  onComplete: (resume: ResumeAudit) => void
   192	  isCancelled: () => boolean
   193	}

================================================================================
FILE: src/types/index.ts
================================================================================
     1	/**
     2	 * Types TypeScript pour TaxPilot
     3	 * Application de G√©n√©ration et √âdition de Liasse Fiscale SYSCOHADA/IFRS
     4	 */
     5	
     6	// Types de base
     7	export interface BaseEntity {
     8	  id: string
     9	  created_at: string
    10	  updated_at: string
    11	  created_by?: string
    12	  updated_by?: string
    13	  is_active: boolean
    14	}
    15	
    16	// Types d'entreprise et param√©trage
    17	export interface Entreprise extends BaseEntity {
    18	  raison_sociale: string
    19	  forme_juridique: string
    20	  numero_contribuable: string
    21	  rccm?: string
    22	  ifu?: string
    23	  adresse_ligne1: string
    24	  adresse_ligne2?: string
    25	  ville: string
    26	  code_postal?: string
    27	  pays: string
    28	  telephone?: string
    29	  email: string
    30	  site_web?: string
    31	  nom_dirigeant: string
    32	  fonction_dirigeant: string
    33	  email_dirigeant?: string
    34	  regime_imposition: string
    35	  centre_impots: string
    36	  secteur_activite: string
    37	  chiffre_affaires_annuel: number
    38	  devise_principale: string
    39	  precision_montants: number
    40	  logo?: string
    41	  couleur_principale: string
    42	  couleur_secondaire: string
    43	  is_groupe: boolean
    44	  entreprise_mere?: string
    45	  date_souscription: string
    46	  type_abonnement: string
    47	  type_liasse_recommande?: string
    48	}
    49	
    50	// Types de balance
    51	export interface Balance extends BaseEntity {
    52	  exercice: string
    53	  compte: string
    54	  debit: number
    55	  credit: number
    56	  solde: number
    57	  libelle_compte: string
    58	}
    59	
    60	// Types de liasse fiscale
    61	export type TypeLiasse = 'SN' | 'SMT' | 'CONSO' | 'BANQUE' | 'ASSURANCE' | 'MICROFINANCE' | 'EBNL'
    62	
    63	export interface LiasseFiscale extends BaseEntity {
    64	  entreprise: string
    65	  exercice: string
    66	  type_liasse: TypeLiasse
    67	  statut: 'BROUILLON' | 'VALIDEE' | 'DECLAREE' | 'ARCHIVEE'
    68	  donnees_json: Record<string, any>
    69	  date_generation?: string
    70	  date_validation?: string
    71	  date_declaration?: string
    72	}
    73	
    74	// Types d'audit
    75	export interface AuditResult {
    76	  score_global: number
    77	  nb_anomalies: number
    78	  anomalies: AuditAnomalie[]
    79	  recommandations: string[]
    80	  last_audit: string
    81	}
    82	
    83	export interface AuditAnomalie {
    84	  id: string
    85	  type: 'ERROR' | 'WARNING' | 'INFO'
    86	  compte: string
    87	  description: string
    88	  montant_impact?: number
    89	  suggestion_correction?: string
    90	  priorite: 'HAUTE' | 'MOYENNE' | 'BASSE'
    91	}
    92	
    93	// Types de template
    94	export interface Template extends BaseEntity {
    95	  nom: string
    96	  type_template: 'EXCEL' | 'WORD' | 'PDF' | 'XML'
    97	  type_liasse: TypeLiasse
    98	  fichier_modele: string
    99	  mapping_json: Record<string, any>
   100	  is_official: boolean
   101	  description?: string
   102	}
   103	
   104	// Types d'utilisateur
   105	export interface UtilisateurEntreprise extends BaseEntity {
   106	  user: {
   107	    id: string
   108	    username: string
   109	    email: string
   110	    first_name: string
   111	    last_name: string
   112	    is_active: boolean
   113	  }
   114	  entreprise: string
   115	  role: string
   116	  modules_acces: Record<string, boolean>
   117	  permissions_speciales: Record<string, boolean>
   118	  date_invitation: string
   119	  date_activation?: string
   120	  est_actif: boolean
   121	  derniere_connexion?: string
   122	  langue_preferee: string
   123	  theme_interface: string
   124	}
   125	
   126	// Types pour les formulaires
   127	export interface EntrepriseFormData {
   128	  raison_sociale: string
   129	  forme_juridique: string
   130	  numero_contribuable: string
   131	  rccm?: string
   132	  ifu?: string
   133	  adresse_ligne1: string
   134	  adresse_ligne2?: string
   135	  ville: string
   136	  code_postal?: string
   137	  pays: string
   138	  telephone?: string
   139	  email: string
   140	  site_web?: string
   141	  nom_dirigeant: string
   142	  fonction_dirigeant: string
   143	  email_dirigeant?: string
   144	  regime_imposition: string
   145	  centre_impots: string
   146	  secteur_activite: string
   147	  chiffre_affaires_annuel: number
   148	  devise_principale: string
   149	  logo?: File
   150	}
   151	
   152	// Types pour les API
   153	export interface ApiResponse<T = any> {
   154	  success: boolean
   155	  data?: T
   156	  message?: string
   157	  errors?: Record<string, string[]>
   158	}
   159	
   160	export interface PaginatedResponse<T> {
   161	  count: number
   162	  next?: string
   163	  previous?: string
   164	  results: T[]
   165	}
   166	
   167	// Types pour l'authentification
   168	export interface AuthTokens {
   169	  access: string
   170	  refresh: string
   171	}
   172	
   173	export interface AuthUser {
   174	  id: string
   175	  username: string
   176	  email: string
   177	  first_name: string
   178	  last_name: string
   179	  entreprise_courante?: Entreprise
   180	  role?: string
   181	}
   182	
   183	// Types pour l'onboarding
   184	export interface OnboardingStep {
   185	  id: string
   186	  title: string
   187	  description: string
   188	  completed: boolean
   189	  required: boolean
   190	  component: string
   191	}
   192	
   193	export interface ConfigurationOnboarding extends BaseEntity {
   194	  entreprise: string
   195	  etape_entreprise_complete: boolean
   196	  etape_fiscal_complete: boolean
   197	  etape_comptable_complete: boolean
   198	  etape_utilisateurs_complete: boolean
   199	  etape_import_complete: boolean
   200	  pourcentage_completion: number
   201	  configuration_terminee: boolean
   202	  date_completion?: string
   203	  tests_validation: Record<string, any>
   204	  derniere_validation?: string
   205	}
   206	
   207	// Types pour les notifications
   208	export interface Notification extends BaseEntity {
   209	  titre: string
   210	  message: string
   211	  type_notification: 'INFO' | 'WARNING' | 'ERROR' | 'SUCCESS'
   212	  destinataire: string
   213	  lue: boolean
   214	  date_lecture?: string
   215	  action_url?: string
   216	  donnees_supplementaires?: Record<string, any>
   217	}
   218	
   219	// Types pour les graphiques et dashboards
   220	export interface KPICard {
   221	  title: string
   222	  value: string | number
   223	  change?: number
   224	  trend?: 'up' | 'down' | 'stable'
   225	  color?: 'primary' | 'secondary' | 'success' | 'warning' | 'error'
   226	}
   227	
   228	export interface ChartData {
   229	  labels: string[]
   230	  datasets: {
   231	    label: string
   232	    data: number[]
   233	    backgroundColor?: string[]
   234	    borderColor?: string[]
   235	  }[]
   236	}
   237	
   238	// Types d'erreur
   239	export interface TaxPilotError {
   240	  code: string
   241	  message: string
   242	  details?: Record<string, any>
   243	  timestamp: string
   244	}
================================================================================
FILE: src/types/mui-missing.d.ts
================================================================================
     1	/**
     2	 * D√©clarations TypeScript pour r√©soudre les imports manquants Material-UI
     3	 * Fichier temporaire pour livraison client - √† nettoyer progressivement
     4	 */
     5	
     6	// D√©clarations globales pour les ic√¥nes manquantes
     7	declare global {
     8	  const DeleteIcon: React.ComponentType<any>
     9	  const Checkbox: React.ComponentType<any>
    10	  const AccountTree: React.ComponentType<any>
    11	  const People: React.ComponentType<any>
    12	  const AccountBalance: React.ComponentType<any>
    13	  const Receipt: React.ComponentType<any>
    14	  const AttachMoney: React.ComponentType<any>
    15	  const CircularProgress: React.ComponentType<any>
    16	  const AccountBalanceIcon: React.ComponentType<any>
    17	}
    18	
    19	// Augmentation des modules existants
    20	declare module '@mui/material' {
    21	  export interface ComponentsPropsList {
    22	    MuiAlert?: {
    23	      size?: 'small' | 'medium' | 'large'
    24	    }
    25	    MuiLinearProgress?: {
    26	      size?: 'small' | 'medium' | 'large'
    27	    }
    28	  }
    29	}
    30	
    31	// Types √©tendus pour objets avec propri√©t√©s calcul√©es
    32	export interface ExtendedFinancialData {
    33	  montantDebut: number
    34	  dotations: number
    35	  reprises: number
    36	  montantFin: number
    37	  variation?: number
    38	}
    39	
    40	export interface ExtendedEvolutionData {
    41	  montantN: number
    42	  montantN1: number
    43	  evolution?: number
    44	  pourcentageCA?: number
    45	}
    46	
    47	export {}
================================================================================
FILE: src/utils/__tests__/format.test.ts
================================================================================
     1	/**
     2	 * Tests pour les utilitaires de formatage
     3	 */
     4	import { describe, it, expect } from 'vitest'
     5	
     6	// Utility functions (inline for testing)
     7	const formatCurrency = (amount: number, currency = 'XOF'): string => {
     8	  return new Intl.NumberFormat('fr-FR', {
     9	    style: 'currency',
    10	    currency: currency,
    11	    minimumFractionDigits: 0
    12	  }).format(amount)
    13	}
    14	
    15	const formatDate = (date: Date | string): string => {
    16	  const d = typeof date === 'string' ? new Date(date) : date
    17	  return d.toLocaleDateString('fr-FR')
    18	}
    19	
    20	describe('Format Utilities', () => {
    21	  describe('formatCurrency', () => {
    22	    it('should format currency in XOF correctly', () => {
    23	      const result = formatCurrency(1000000)
    24	
    25	      expect(result).toContain('1')
    26	      expect(result).toContain('000')
    27	      // Should contain currency symbol or code
    28	      expect(typeof result).toBe('string')
    29	    })
    30	
    31	    it('should handle zero amounts', () => {
    32	      const result = formatCurrency(0)
    33	
    34	      expect(result).toBeDefined()
    35	      expect(typeof result).toBe('string')
    36	    })
    37	
    38	    it('should handle negative amounts', () => {
    39	      const result = formatCurrency(-500000)
    40	
    41	      expect(result).toContain('-')
    42	      expect(result).toContain('500')
    43	    })
    44	  })
    45	
    46	  describe('formatDate', () => {
    47	    it('should format Date object correctly', () => {
    48	      const date = new Date('2024-01-15')
    49	      const result = formatDate(date)
    50	
    51	      expect(result).toBeDefined()
    52	      expect(typeof result).toBe('string')
    53	      // French format: dd/mm/yyyy
    54	      expect(result).toMatch(/\d{2}\/\d{2}\/\d{4}/)
    55	    })
    56	
    57	    it('should format date string correctly', () => {
    58	      const result = formatDate('2024-12-31')
    59	
    60	      expect(result).toBeDefined()
    61	      expect(typeof result).toBe('string')
    62	    })
    63	  })
    64	})

================================================================================
FILE: src/utils/autoConnectAll.ts
================================================================================
     1	/**
     2	 * Script d'auto-connexion pour TOUS les composants
     3	 * Ce script modifie automatiquement tous les composants pour utiliser le backend
     4	 */
     5	
     6	// Liste de tous les composants √† connecter
     7	export const COMPONENTS_TO_CONNECT: Record<string, { services: string[]; dataToReplace: Record<string, string> }> = {
     8	  // Documents
     9	  'ModernDocuments': {
    10	    services: ['generationService', 'templatesService'],
    11	    dataToReplace: {
    12	      templates: 'templatesService.getTemplates',
    13	      jobs: 'generationService.getLiasseGenerations'
    14	    }
    15	  },
    16	
    17	  // Templates
    18	  'ModernTemplates': {
    19	    services: ['templatesService'],
    20	    dataToReplace: {
    21	      templates: 'templatesService.getTemplates',
    22	      categories: 'templatesService.getCategories'
    23	    }
    24	  },
    25	
    26	  // Compliance
    27	  'ModernCompliance': {
    28	    services: ['taxService'],
    29	    dataToReplace: {
    30	      obligations: 'taxService.getObligations',
    31	      declarations: 'taxService.getDeclarations'
    32	    }
    33	  },
    34	
    35	  // Calendar
    36	  'ModernFiscalCalendar': {
    37	    services: ['taxService'],
    38	    dataToReplace: {
    39	      events: 'taxService.getObligations',
    40	      deadlines: 'taxService.getDeclarations'
    41	    }
    42	  },
    43	
    44	  // Veille
    45	  'ModernVeilleReglementaire': {
    46	    services: ['taxService'],
    47	    dataToReplace: {
    48	      regulations: 'taxService.getReglementations',
    49	      updates: 'taxService.getMisesAJour'
    50	    }
    51	  },
    52	
    53	  // Collaboration
    54	  'ModernCollaboration': {
    55	    services: ['entrepriseService'],
    56	    dataToReplace: {
    57	      users: 'entrepriseService.getUsers',
    58	      tasks: 'entrepriseService.getTasks'
    59	    }
    60	  },
    61	
    62	  // Integrations
    63	  'ModernIntegrations': {
    64	    services: ['entrepriseService'],
    65	    dataToReplace: {
    66	      integrations: 'entrepriseService.getIntegrations',
    67	      apis: 'entrepriseService.getAPIs'
    68	    }
    69	  },
    70	
    71	  // Security
    72	  'ModernSecurity': {
    73	    services: ['entrepriseService'],
    74	    dataToReplace: {
    75	      logs: 'entrepriseService.getSecurityLogs',
    76	      permissions: 'entrepriseService.getPermissions'
    77	    }
    78	  },
    79	
    80	  // Plans
    81	  'PlanSYSCOHADARevise': {
    82	    services: ['accountingService'],
    83	    dataToReplace: {
    84	      plans: 'accountingService.getPlansComptables',
    85	      accounts: 'accountingService.getComptes'
    86	    }
    87	  },
    88	
    89	  // Direct Liasse
    90	  'DirectLiasseAccess': {
    91	    services: ['generationService', 'balanceService', 'entrepriseService'],
    92	    dataToReplace: {
    93	      liasses: 'generationService.getLiasseGenerations',
    94	      balances: 'balanceService.getBalances',
    95	      entreprises: 'entrepriseService.getEntreprises'
    96	    }
    97	  },
    98	
    99	  // Liasse Complete Final
   100	  'LiasseCompleteFinal': {
   101	    services: ['generationService', 'balanceService'],
   102	    dataToReplace: {
   103	      data: 'balanceService.getBalanceDetails',
   104	      generation: 'generationService.generateLiasse'
   105	    }
   106	  },
   107	
   108	  // Control Interface
   109	  'LiasseControlInterface': {
   110	    services: ['auditService'],
   111	    dataToReplace: {
   112	      controls: 'auditService.getControlPoints',
   113	      validations: 'auditService.getValidations'
   114	    }
   115	  }
   116	}
   117	
   118	// Template de code pour la connexion backend
   119	export const generateBackendConnection = (componentName: string, config: { services: string[]; dataToReplace: Record<string, string> }) => {
   120	  const imports = config.services.map((s: string) => s).join(', ')
   121	
   122	  return `
   123	// Import services backend
   124	import { ${imports} } from '@/services'
   125	
   126	// Dans useEffect ou componentDidMount
   127	useEffect(() => {
   128	  loadBackendData()
   129	}, [])
   130	
   131	const loadBackendData = async () => {
   132	  try {
   133	    console.log('Loading ${componentName} data from backend...')
   134	
   135	    ${Object.entries(config.dataToReplace).map(([state, method]) => `
   136	    const ${state}Response = await ${method}()
   137	    set${state.charAt(0).toUpperCase() + state.slice(1)}(${state}Response.results || [])
   138	    `).join('\n')}
   139	
   140	    console.log('${componentName} backend data loaded')
   141	  } catch (error) {
   142	    console.error('Error loading ${componentName} data:', error)
   143	  }
   144	}
   145	`
   146	}
   147	
   148	// Fonction pour v√©rifier si un composant est connect√©
   149	export const checkComponentConnection = (componentContent: string): boolean => {
   150	  const indicators = [
   151	    'import.*@/services',
   152	    'import.*services.*from',
   153	    'useBackendData',
   154	    'withBackendData',
   155	    'withGlobalBackend',
   156	    'loadBackendData',
   157	    'getBackendData'
   158	  ]
   159	
   160	  return indicators.some(pattern => new RegExp(pattern).test(componentContent))
   161	}
   162	
   163	// Stats de connexion
   164	export const getConnectionStats = (components: Record<string, boolean>) => {
   165	  const total = Object.keys(components).length
   166	  const connected = Object.values(components).filter(Boolean).length
   167	  const percentage = Math.round((connected / total) * 100)
   168	
   169	  return {
   170	    total,
   171	    connected,
   172	    notConnected: total - connected,
   173	    percentage,
   174	    status: percentage === 100 ? 'Completely connected!' :
   175	            percentage >= 75 ? 'Almost done' :
   176	            percentage >= 50 ? 'Partially connected' :
   177	            'Majority not connected'
   178	  }
   179	}
   180	
   181	// Export par d√©faut
   182	export default {
   183	  COMPONENTS_TO_CONNECT,
   184	  generateBackendConnection,
   185	  checkComponentConnection,
   186	  getConnectionStats
   187	}

================================================================================
FILE: src/utils/backendConnector.ts
================================================================================
     1	/**
     2	 * Utilitaire pour connecter automatiquement les composants au backend
     3	 * Remplace les donn√©es mock√©es par les appels API r√©els
     4	 */
     5	
     6	import * as services from '@/services'
     7	
     8	// Configuration des mappings service -> m√©thodes
     9	export const SERVICE_MAPPINGS: Record<string, { service: any; methods: Record<string, string> }> = {
    10	  // Entreprises
    11	  'entreprises': {
    12	    service: services.entrepriseService,
    13	    methods: {
    14	      list: 'getEntreprises',
    15	      get: 'getEntreprise',
    16	      create: 'createEntreprise',
    17	      update: 'updateEntreprise',
    18	      delete: 'deleteEntreprise',
    19	      stats: 'getDashboardStats'
    20	    }
    21	  },
    22	
    23	  // Balances
    24	  'balances': {
    25	    service: services.balanceService,
    26	    methods: {
    27	      list: 'getBalances',
    28	      get: 'getBalance',
    29	      create: 'createBalance',
    30	      import: 'importBalance',
    31	      details: 'getBalanceDetails',
    32	      validate: 'validateBalance'
    33	    }
    34	  },
    35	
    36	  // Audits
    37	  'audits': {
    38	    service: services.auditService,
    39	    methods: {
    40	      list: 'getAuditSessions',
    41	      get: 'getAuditSession',
    42	      start: 'startAudit',
    43	      anomalies: 'getAuditAnomalies',
    44	      stats: 'getAuditStats'
    45	    }
    46	  },
    47	
    48	  // G√©n√©rations
    49	  'generations': {
    50	    service: services.generationService,
    51	    methods: {
    52	      list: 'getLiasseGenerations',
    53	      get: 'getLiasseGeneration',
    54	      generate: 'generateLiasse',
    55	      status: 'getGenerationStatus',
    56	      download: 'downloadLiasse'
    57	    }
    58	  },
    59	
    60	  // Templates
    61	  'templates': {
    62	    service: services.templatesService,
    63	    methods: {
    64	      list: 'getTemplates',
    65	      get: 'getTemplate',
    66	      create: 'createTemplate',
    67	      update: 'updateTemplate',
    68	      preview: 'previewTemplate'
    69	    }
    70	  },
    71	
    72	  // Fiscalit√©
    73	  'fiscal': {
    74	    service: services.taxService,
    75	    methods: {
    76	      declarations: 'getDeclarations',
    77	      obligations: 'getObligations',
    78	      calculateIS: 'calculateIS',
    79	      calculateTVA: 'calculateTVA',
    80	      submit: 'submitDeclaration'
    81	    }
    82	  },
    83	
    84	  // Comptabilit√©
    85	  'comptabilite': {
    86	    service: services.accountingService,
    87	    methods: {
    88	      plans: 'getPlansComptables',
    89	      comptes: 'getComptes',
    90	      ecritures: 'getEcritures',
    91	      balance: 'getBalance',
    92	      grandLivre: 'getGrandLivre'
    93	    }
    94	  },
    95	
    96	  // Reporting
    97	  'reporting': {
    98	    service: services.reportingService,
    99	    methods: {
   100	      reports: 'getReports',
   101	      generate: 'generateReport',
   102	      dashboard: 'getDashboardStats',
   103	      analytics: 'getAnalytics'
   104	    }
   105	  }
   106	}
   107	
   108	// Fonction g√©n√©rique pour remplacer les donn√©es mock√©es
   109	export const replaceMockData = async (
   110	  serviceType: string,
   111	  method: string,
   112	  params?: any,
   113	  defaultData?: any
   114	) => {
   115	  try {
   116	    const mapping = SERVICE_MAPPINGS[serviceType]
   117	    if (!mapping) {
   118	      console.warn(`Service mapping not found for ${serviceType}`)
   119	      return defaultData
   120	    }
   121	
   122	    const methodName = mapping.methods[method]
   123	    if (!methodName) {
   124	      console.warn(`Method ${method} not found in ${serviceType}`)
   125	      return defaultData
   126	    }
   127	
   128	    console.log(`Fetching ${serviceType}.${method} from backend...`)
   129	    const response = await (mapping.service as any)[methodName](params)
   130	
   131	    // G√©rer les r√©ponses pagin√©es
   132	    return response?.results !== undefined ? response.results : response
   133	  } catch (error) {
   134	    console.error(`Error fetching ${serviceType}.${method}:`, error)
   135	    return defaultData || []
   136	  }
   137	}
   138	
   139	// Fonction pour convertir les donn√©es mock√©es au format backend
   140	export const convertToBackendFormat = (mockData: any[], dataType: string) => {
   141	  switch (dataType) {
   142	    case 'balance':
   143	      return mockData.map(item => ({
   144	        id: item.id,
   145	        numero_compte: item.compte || item.account,
   146	        libelle_compte: item.libelle || item.accountName,
   147	        solde_debit: item.debit || item.debitAmount || 0,
   148	        solde_credit: item.credit || item.creditAmount || 0,
   149	        ...item
   150	      }))
   151	
   152	    case 'entreprise':
   153	      return mockData.map(item => ({
   154	        id: item.id,
   155	        raison_sociale: item.name || item.nom,
   156	        numero_contribuable: item.registrationNumber || item.numeroContribuable,
   157	        forme_juridique: item.structure || item.formeJuridique,
   158	        ...item
   159	      }))
   160	
   161	    case 'audit':
   162	      return mockData.map(item => ({
   163	        id: item.id,
   164	        type_audit: item.type || 'COMPLET',
   165	        statut: item.status || 'EN_ATTENTE',
   166	        progression: item.progress || 0,
   167	        resultats: {
   168	          score_global: item.score || 0,
   169	          nb_anomalies: item.anomalies || 0,
   170	          nb_warnings: item.warnings || 0,
   171	          nb_erreurs: item.errors || 0
   172	        },
   173	        ...item
   174	      }))
   175	
   176	    default:
   177	      return mockData
   178	  }
   179	}
   180	
   181	// Hook helper pour utiliser dans les composants
   182	export const useBackendService = (serviceType: string) => {
   183	  const mapping = SERVICE_MAPPINGS[serviceType]
   184	
   185	  const callMethod = async (method: string, params?: any) => {
   186	    return replaceMockData(serviceType, method, params)
   187	  }
   188	
   189	  return {
   190	    service: mapping?.service,
   191	    callMethod,
   192	    methods: mapping?.methods
   193	  }
   194	}
   195	
   196	// Export des services pour utilisation directe
   197	export { services }

================================================================================
FILE: src/utils/colorPalettes.ts
================================================================================
     1	/**
     2	 * Palettes de couleurs pour TaxPilot
     3	 */
     4	
     5	export interface ColorPalette {
     6	  id: string
     7	  name: string
     8	  description: string
     9	  colors: {
    10	    primary: string
    11	    secondary: string
    12	    background: {
    13	      default: string
    14	      paper: string
    15	    }
    16	    text: {
    17	      primary: string
    18	      secondary: string
    19	    }
    20	    success: string
    21	    warning: string
    22	    error: string
    23	    info: string
    24	  }
    25	}
    26	
    27	export const colorPalettes: ColorPalette[] = [
    28	  // üé® Palette 1 ‚Äì TaxPilot Default (actuel)
    29	  {
    30	    id: 'taxpilot-default',
    31	    name: 'TaxPilot Default',
    32	    description: 'Th√®me par d√©faut de TaxPilot - Minimaliste Premium',
    33	    colors: {
    34	      primary: '#B87333', // Cuivre ros√©
    35	      secondary: '#6A8A82', // Vert sauge
    36	      background: {
    37	        default: '#ECECEC', // Gris clair perle
    38	        paper: '#FFFFFF',
    39	      },
    40	      text: {
    41	        primary: '#171717', // Noir fum√©
    42	        secondary: '#444444', // Anthracite doux
    43	      },
    44	      success: '#6A8A82', // Vert sauge
    45	      warning: '#B87333', // Cuivre ros√©
    46	      error: '#DC2626',
    47	      info: '#6366F1',
    48	    }
    49	  },
    50	
    51	  // üé® Palette 2 ‚Äì √âl√©gance sobre (finance traditionnelle moderne)
    52	  {
    53	    id: 'elegance-sobre',
    54	    name: '√âl√©gance Sobre',
    55	    description: 'Finance traditionnelle moderne - s√©rieux, luxe discret, rassurant',
    56	    colors: {
    57	      primary: '#2E7D69', // Vert √©meraude
    58	      secondary: '#D4AF37', // Or p√¢le
    59	      background: {
    60	        default: '#F5F5F7', // Gris clair neutre
    61	        paper: '#FFFFFF',
    62	      },
    63	      text: {
    64	        primary: '#1E1E2F', // Charbon profond
    65	        secondary: '#C2C7CE', // Gris moyen
    66	      },
    67	      success: '#2E7D69', // Vert √©meraude
    68	      warning: '#D4AF37', // Or p√¢le
    69	      error: '#B91C1C',
    70	      info: '#2563EB',
    71	    }
    72	  },
    73	
    74	  // üé® Palette 3 ‚Äì Modern Fintech
    75	  {
    76	    id: 'modern-fintech',
    77	    name: 'Modern Fintech',
    78	    description: 'Moderne, clair, orient√© tableau de bord financier',
    79	    colors: {
    80	      primary: '#2C3E50', // Bleu nuit d√©satur√©
    81	      secondary: '#27AE60', // Vert doux
    82	      background: {
    83	        default: '#FAFAFA', // Blanc cass√©
    84	        paper: '#FFFFFF',
    85	      },
    86	      text: {
    87	        primary: '#2C3E50', // Bleu nuit d√©satur√©
    88	        secondary: '#7F8C8D', // Gris ardoise
    89	      },
    90	      success: '#27AE60', // Vert doux
    91	      warning: '#F39C12',
    92	      error: '#C0392B', // Rouge bourgogne
    93	      info: '#3498DB',
    94	    }
    95	  },
    96	
    97	  // üé® Palette 4 ‚Äì Minimaliste premium
    98	  {
    99	    id: 'minimaliste-premium',
   100	    name: 'Minimaliste Premium',
   101	    description: '√âl√©gance minimaliste avec touche premium - Cuivre ros√© et vert sauge',
   102	    colors: {
   103	      primary: '#B87333', // Cuivre ros√©
   104	      secondary: '#6A8A82', // Vert sauge
   105	      background: {
   106	        default: '#ECECEC', // Gris clair perle
   107	        paper: '#FFFFFF',
   108	      },
   109	      text: {
   110	        primary: '#171717', // Noir fum√©
   111	        secondary: '#444444', // Anthracite doux
   112	      },
   113	      success: '#6A8A82', // Vert sauge
   114	      warning: '#B87333', // Cuivre ros√©
   115	      error: '#DC2626',
   116	      info: '#6366F1',
   117	    }
   118	  },
   119	
   120	  // üé® Palette 5 ‚Äì Neutral Odyssey
   121	  {
   122	    id: 'neutral-odyssey',
   123	    name: 'Neutral Odyssey',
   124	    description: 'Couleurs neutres et apaisantes',
   125	    colors: {
   126	      primary: '#74b9ff', // Bleu ciel
   127	      secondary: '#55a3ff', // Bleu moyen
   128	      background: {
   129	        default: '#FAFAFA', // Blanc cass√©
   130	        paper: '#FFFFFF',
   131	      },
   132	      text: {
   133	        primary: '#333333', // Gris fonc√©
   134	        secondary: '#666666', // Gris moyen
   135	      },
   136	      success: '#00b894', // Vert menthe
   137	      warning: '#fdcb6e', // Jaune dor√©
   138	      error: '#d63031', // Rouge
   139	      info: '#74b9ff', // Bleu ciel
   140	    }
   141	  },
   142	]
   143	
   144	// Palette par d√©faut
   145	export const defaultPaletteId = 'taxpilot-default'
   146	
   147	// Fonction pour obtenir une palette par ID
   148	export const getPaletteById = (id: string): ColorPalette => {
   149	  return colorPalettes.find(p => p.id === id) || colorPalettes.find(p => p.id === defaultPaletteId)!
   150	}
   151	
   152	// Fonction pour cr√©er un th√®me Material-UI √† partir d'une palette
   153	export const createThemeFromPalette = (palette: ColorPalette, mode: 'light' | 'dark' = 'light') => {
   154	  return {
   155	    palette: {
   156	      mode,
   157	      primary: {
   158	        main: palette.colors.primary,
   159	        light: lightenColor(palette.colors.primary, 20),
   160	        dark: darkenColor(palette.colors.primary, 20),
   161	        contrastText: '#ffffff',
   162	      },
   163	      secondary: {
   164	        main: palette.colors.secondary,
   165	        light: lightenColor(palette.colors.secondary, 20),
   166	        dark: darkenColor(palette.colors.secondary, 20),
   167	        contrastText: '#ffffff',
   168	      },
   169	      background: palette.colors.background,
   170	      text: palette.colors.text,
   171	      success: {
   172	        main: palette.colors.success,
   173	        light: lightenColor(palette.colors.success, 20),
   174	        dark: darkenColor(palette.colors.success, 20),
   175	      },
   176	      warning: {
   177	        main: palette.colors.warning,
   178	        light: lightenColor(palette.colors.warning, 20),
   179	        dark: darkenColor(palette.colors.warning, 20),
   180	      },
   181	      error: {
   182	        main: palette.colors.error,
   183	        light: lightenColor(palette.colors.error, 20),
   184	        dark: darkenColor(palette.colors.error, 20),
   185	      },
   186	      info: {
   187	        main: palette.colors.info,
   188	        light: lightenColor(palette.colors.info, 20),
   189	        dark: darkenColor(palette.colors.info, 20),
   190	      },
   191	    }
   192	  }
   193	}
   194	
   195	// Utilitaires pour √©claircir/assombrir les couleurs
   196	function lightenColor(color: string, percent: number): string {
   197	  const num = parseInt(color.replace('#', ''), 16)
   198	  const amt = Math.round(2.55 * percent)
   199	  const R = (num >> 16) + amt
   200	  const G = (num >> 8 & 0x00FF) + amt
   201	  const B = (num & 0x0000FF) + amt
   202	  return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
   203	    (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
   204	    (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1)
   205	}
   206	
   207	function darkenColor(color: string, percent: number): string {
   208	  const num = parseInt(color.replace('#', ''), 16)
   209	  const amt = Math.round(2.55 * percent)
   210	  const R = (num >> 16) - amt
   211	  const G = (num >> 8 & 0x00FF) - amt
   212	  const B = (num & 0x0000FF) - amt
   213	  return '#' + (0x1000000 + (R > 255 ? 255 : R < 0 ? 0 : R) * 0x10000 +
   214	    (G > 255 ? 255 : G < 0 ? 0 : G) * 0x100 +
   215	    (B > 255 ? 255 : B < 0 ? 0 : B)).toString(16).slice(1)
   216	}
================================================================================
FILE: src/utils/globalBackendConnector.tsx
================================================================================
     1	/**
     2	 * Connecteur global automatique pour TOUS les composants
     3	 * Ce HOC d√©tecte et injecte automatiquement les donn√©es backend
     4	 */
     5	
     6	import React, { useEffect, useState } from 'react'
     7	import { getBackendData } from '@/config/globalBackendIntegration'
     8	import * as services from '@/services'
     9	
    10	// Configuration globale
    11	const GLOBAL_BACKEND_ENABLED = false
    12	
    13	// Cache global pour √©viter les appels r√©p√©t√©s
    14	const globalCache = new Map<string, { data: any; timestamp: number }>()
    15	
    16	// D√©tecteur automatique de type de donn√©es n√©cessaire
    17	const detectRequiredDataType = (componentName: string): string[] => {
    18	  const name = componentName.toLowerCase()
    19	  const dataTypes: string[] = []
    20	
    21	  // D√©tection bas√©e sur le nom du composant
    22	  if (name.includes('document')) dataTypes.push('documents')
    23	  if (name.includes('generation') || name.includes('generat')) dataTypes.push('generations')
    24	  if (name.includes('template')) dataTypes.push('templates')
    25	  if (name.includes('compliance') || name.includes('conform')) dataTypes.push('obligations')
    26	  if (name.includes('calendar') || name.includes('calendr')) dataTypes.push('obligations')
    27	  if (name.includes('veille') || name.includes('regle')) dataTypes.push('reglementations')
    28	  if (name.includes('collaboration') || name.includes('collab')) dataTypes.push('users')
    29	  if (name.includes('integration') || name.includes('integr')) dataTypes.push('integrations')
    30	  if (name.includes('security') || name.includes('secur')) dataTypes.push('security')
    31	  if (name.includes('balance')) dataTypes.push('balances')
    32	  if (name.includes('audit')) dataTypes.push('audits')
    33	  if (name.includes('entreprise') || name.includes('parametr')) dataTypes.push('entreprises')
    34	  if (name.includes('plan')) dataTypes.push('plansComptables')
    35	  if (name.includes('liasse')) dataTypes.push('generations', 'balances')
    36	  if (name.includes('direct')) dataTypes.push('entreprises', 'balances', 'generations')
    37	
    38	  // Si aucune correspondance, charger les donn√©es de base
    39	  if (dataTypes.length === 0) {
    40	    dataTypes.push('entreprises', 'dashboardStats')
    41	  }
    42	
    43	  return [...new Set(dataTypes)] // Enlever les doublons
    44	}
    45	
    46	// Cache timeout constant
    47	const CACHE_TIMEOUT = 5 * 60 * 1000 // 5 minutes
    48	
    49	// HOC global pour connecter automatiquement n'importe quel composant
    50	export function withGlobalBackend<P extends object>(
    51	  Component: React.ComponentType<P>,
    52	  options?: {
    53	    dataTypes?: string[]
    54	    autoDetect?: boolean
    55	    cacheEnabled?: boolean
    56	  }
    57	): React.ComponentType<P> {
    58	  const componentName = Component.displayName || Component.name || 'Component'
    59	
    60	  const WrappedComponent = React.forwardRef<any, P>((props, ref) => {
    61	    const [backendData, setBackendData] = useState<any>({})
    62	    const [loading, setLoading] = useState(true)
    63	    const [error, setError] = useState<Error | null>(null)
    64	
    65	    const loadBackendData = async () => {
    66	      try {
    67	        console.log(`Auto-connecting ${componentName} to backend...`)
    68	
    69	        // D√©terminer les types de donn√©es √† charger
    70	        let dataTypesToLoad = options?.dataTypes || []
    71	
    72	        if (options?.autoDetect !== false || dataTypesToLoad.length === 0) {
    73	          dataTypesToLoad = [...dataTypesToLoad, ...detectRequiredDataType(componentName)]
    74	        }
    75	
    76	        console.log(`Loading data types for ${componentName}:`, dataTypesToLoad)
    77	
    78	        // Charger toutes les donn√©es n√©cessaires
    79	        const loadedData: any = {}
    80	
    81	        await Promise.all(
    82	          dataTypesToLoad.map(async (dataType) => {
    83	            // V√©rifier le cache
    84	            const cacheKey = `${dataType}_global`
    85	            const cached = globalCache.get(cacheKey)
    86	
    87	            if (cached && Date.now() - cached.timestamp < CACHE_TIMEOUT) {
    88	              loadedData[dataType] = cached.data
    89	              return
    90	            }
    91	
    92	            // Charger depuis le backend
    93	            const data = await getBackendData(dataType)
    94	            if (data) {
    95	              loadedData[dataType] = data
    96	              // Mettre en cache
    97	              globalCache.set(cacheKey, { data, timestamp: Date.now() })
    98	            }
    99	          })
   100	        )
   101	
   102	        setBackendData(loadedData)
   103	        console.log(`${componentName} connected to backend with ${Object.keys(loadedData).length} data sources`)
   104	      } catch (err) {
   105	        console.error(`Error connecting ${componentName} to backend:`, err)
   106	        setError(err as Error)
   107	      } finally {
   108	        setLoading(false)
   109	      }
   110	    }
   111	
   112	    useEffect(() => {
   113	      if (!GLOBAL_BACKEND_ENABLED) {
   114	        setLoading(false)
   115	        return
   116	      }
   117	
   118	      loadBackendData()
   119	    // eslint-disable-next-line react-hooks/exhaustive-deps
   120	    }, [])
   121	
   122	    // Enrichir les props avec les donn√©es backend et les services
   123	    const enhancedProps = React.useMemo(() => {
   124	      const enhanced: any = { ...props }
   125	
   126	      // Injecter les donn√©es backend
   127	      enhanced.backendData = backendData
   128	      enhanced.backendLoading = loading
   129	      enhanced.backendError = error
   130	
   131	      // Injecter les services directement
   132	      enhanced.services = services
   133	
   134	      // Mapper les donn√©es sp√©cifiques si disponibles
   135	      if (backendData.entreprises) enhanced.entreprises = backendData.entreprises
   136	      if (backendData.balances) enhanced.balances = backendData.balances
   137	      if (backendData.generations) enhanced.generations = backendData.generations
   138	      if (backendData.templates) enhanced.templates = backendData.templates
   139	      if (backendData.documents) enhanced.documents = backendData.documents
   140	      if (backendData.audits) enhanced.audits = backendData.audits
   141	      if (backendData.dashboardStats) enhanced.stats = backendData.dashboardStats
   142	
   143	      // Fonction helper pour recharger les donn√©es
   144	      enhanced.reloadBackendData = loadBackendData
   145	
   146	      return enhanced as P
   147	    // eslint-disable-next-line react-hooks/exhaustive-deps
   148	    }, [props, backendData, loading, error])
   149	
   150	    // Si le composant a une propri√©t√© sp√©ciale pour d√©sactiver le loading
   151	    if ((props as any).skipBackendLoading) {
   152	      return <Component {...props} ref={ref} />
   153	    }
   154	
   155	    // Afficher un loader pendant le chargement initial
   156	    if (loading && !error && Object.keys(backendData).length === 0) {
   157	      return (
   158	        <div style={{
   159	          padding: '20px',
   160	          textAlign: 'center',
   161	          opacity: 0.6
   162	        }}>
   163	          Connexion au backend en cours...
   164	        </div>
   165	      )
   166	    }
   167	
   168	    return <Component {...enhancedProps} ref={ref} />
   169	  })
   170	
   171	  WrappedComponent.displayName = `withGlobalBackend(${componentName})`
   172	
   173	  return WrappedComponent as any as React.ComponentType<P>
   174	}
   175	
   176	// Fonction pour appliquer le HOC √† plusieurs composants
   177	export const connectMultipleComponents = (components: Record<string, React.ComponentType<any>>) => {
   178	  const connected: Record<string, React.ComponentType<any>> = {}
   179	
   180	  for (const [name, Component] of Object.entries(components)) {
   181	    connected[name] = withGlobalBackend(Component, { autoDetect: true })
   182	  }
   183	
   184	  return connected
   185	}
   186	
   187	// HOC sp√©cialis√© pour les pages (avec options pr√©d√©finies)
   188	export const withPageBackend = <P extends object>(Component: React.ComponentType<P>) => {
   189	  return withGlobalBackend(Component, {
   190	    autoDetect: true,
   191	    cacheEnabled: true
   192	  })
   193	}
   194	
   195	// HOC pour les modules de g√©n√©ration
   196	export const withGenerationBackend = <P extends object>(Component: React.ComponentType<P>) => {
   197	  return withGlobalBackend(Component, {
   198	    dataTypes: ['generations', 'templates', 'balances', 'entreprises'],
   199	    cacheEnabled: true
   200	  })
   201	}
   202	
   203	// HOC pour les modules de documents
   204	export const withDocumentBackend = <P extends object>(Component: React.ComponentType<P>) => {
   205	  return withGlobalBackend(Component, {
   206	    dataTypes: ['documents', 'generations', 'entreprises'],
   207	    cacheEnabled: true
   208	  })
   209	}
   210	
   211	// Export par d√©faut
   212	export default withGlobalBackend

================================================================================
FILE: src/utils/theme.ts
================================================================================
     1	import { createTheme } from '@mui/material/styles'
     2	import { getPaletteById, defaultPaletteId, createThemeFromPalette } from './colorPalettes'
     3	
     4	// R√©cup√©rer la palette par d√©faut (Minimaliste Premium)
     5	const defaultPalette = getPaletteById(defaultPaletteId)
     6	const paletteConfig = createThemeFromPalette(defaultPalette)
     7	
     8	// Configuration du th√®me Material-UI pour TaxPilot
     9	export const theme = createTheme({
    10	  ...paletteConfig,
    11	  typography: {
    12	    fontFamily: [
    13	      'Jura',
    14	      'Roboto',
    15	      '-apple-system',
    16	      'BlinkMacSystemFont',
    17	      '"Segoe UI"',
    18	      'Arial',
    19	      'sans-serif',
    20	    ].join(','),
    21	    h1: {
    22	      fontSize: '2.5rem',
    23	      fontWeight: 600,
    24	      lineHeight: 1.2,
    25	    },
    26	    h2: {
    27	      fontSize: '2rem',
    28	      fontWeight: 600,
    29	      lineHeight: 1.2,
    30	    },
    31	    h3: {
    32	      fontSize: '1.75rem',
    33	      fontWeight: 600,
    34	      lineHeight: 1.2,
    35	    },
    36	    h4: {
    37	      fontSize: '1.5rem',
    38	      fontWeight: 600,
    39	      lineHeight: 1.2,
    40	    },
    41	    h5: {
    42	      fontSize: '1.25rem',
    43	      fontWeight: 600,
    44	      lineHeight: 1.2,
    45	    },
    46	    h6: {
    47	      fontSize: '1rem',
    48	      fontWeight: 600,
    49	      lineHeight: 1.2,
    50	    },
    51	    body1: {
    52	      fontSize: '1rem',
    53	      lineHeight: 1.6,
    54	      fontWeight: 400,
    55	    },
    56	    body2: {
    57	      fontSize: '0.875rem',
    58	      lineHeight: 1.5,
    59	      fontWeight: 400,
    60	    },
    61	    button: {
    62	      textTransform: 'none',
    63	      fontWeight: 600,
    64	      fontSize: '0.875rem',
    65	    },
    66	  },
    67	  shape: {
    68	    borderRadius: 12,
    69	  },
    70	  spacing: 8,
    71	  components: {
    72	    MuiButton: {
    73	      styleOverrides: {
    74	        root: {
    75	          borderRadius: 12,
    76	          padding: '10px 24px',
    77	          fontSize: '0.875rem',
    78	          fontWeight: 600,
    79	          textTransform: 'none',
    80	          transition: 'all 0.2s ease-in-out',
    81	        },
    82	        contained: {
    83	          boxShadow: '0 4px 14px 0 rgba(0, 0, 0, 0.1)',
    84	          color: '#ffffff',
    85	          '&:hover': {
    86	            boxShadow: '0 6px 20px 0 rgba(0, 0, 0, 0.15)',
    87	            transform: 'translateY(-2px)',
    88	          },
    89	        },
    90	        containedPrimary: {
    91	          color: '#ffffff !important',
    92	          '&:hover': {
    93	            color: '#ffffff !important',
    94	          },
    95	        },
    96	        containedSecondary: {
    97	          color: '#ffffff !important',
    98	          '&:hover': {
    99	            color: '#ffffff !important',
   100	          },
   101	        },
   102	        outlined: {
   103	          borderWidth: 2,
   104	          '&:hover': {
   105	            borderWidth: 2,
   106	            transform: 'translateY(-1px)',
   107	          },
   108	        },
   109	      },
   110	    },
   111	    MuiCard: {
   112	      styleOverrides: {
   113	        root: {
   114	          borderRadius: 16,
   115	          boxShadow: '0 4px 20px 0 rgba(0, 0, 0, 0.05)',
   116	          border: '1px solid rgba(0, 0, 0, 0.04)',
   117	          transition: 'all 0.3s ease-in-out',
   118	          '&:hover': {
   119	            boxShadow: '0 8px 30px 0 rgba(0, 0, 0, 0.08)',
   120	            transform: 'translateY(-2px)',
   121	          },
   122	        },
   123	      },
   124	    },
   125	    MuiPaper: {
   126	      styleOverrides: {
   127	        root: {
   128	          borderRadius: 12,
   129	        },
   130	      },
   131	    },
   132	    MuiTextField: {
   133	      styleOverrides: {
   134	        root: {
   135	          '& .MuiOutlinedInput-root': {
   136	            borderRadius: 12,
   137	            backgroundColor: 'rgba(255, 255, 255, 0.8)',
   138	            '&:hover': {
   139	              backgroundColor: 'rgba(255, 255, 255, 1)',
   140	            },
   141	          },
   142	        },
   143	      },
   144	    },
   145	    MuiTableCell: {
   146	      styleOverrides: {
   147	        head: {
   148	          fontWeight: 600,
   149	          backgroundColor: 'rgba(0, 0, 0, 0.02)',
   150	          fontSize: '0.875rem',
   151	        },
   152	        body: {
   153	          fontSize: '0.875rem',
   154	        },
   155	      },
   156	    },
   157	    MuiChip: {
   158	      styleOverrides: {
   159	        root: {
   160	          borderRadius: 8,
   161	          fontWeight: 500,
   162	        },
   163	      },
   164	    },
   165	    MuiAppBar: {
   166	      styleOverrides: {
   167	        root: {
   168	          boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',
   169	          backgroundImage: 'none',
   170	        },
   171	      },
   172	    },
   173	    MuiDrawer: {
   174	      styleOverrides: {
   175	        paper: {
   176	          borderRight: '1px solid rgba(0, 0, 0, 0.08)',
   177	          boxShadow: '2px 0 8px rgba(0, 0, 0, 0.05)',
   178	        },
   179	      },
   180	    },
   181	  },
   182	})
   183	
   184	// Th√®me sombre
   185	export const darkTheme = createTheme({
   186	  ...theme,
   187	  palette: {
   188	    ...theme.palette,
   189	    mode: 'dark',
   190	    background: {
   191	      default: '#121212',
   192	      paper: '#1e1e1e',
   193	    },
   194	    text: {
   195	      primary: '#ffffff',
   196	      secondary: 'rgba(255, 255, 255, 0.7)',
   197	    },
   198	  },
   199	})
 FIN DU DUMP
